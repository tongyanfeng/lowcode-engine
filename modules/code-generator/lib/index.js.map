{
  "version": 3,
  "sources": ["../src/index.ts", "../src/parser/SchemaParser.ts", "../src/types/core.ts", "../src/types/deps.ts", "../src/types/error.ts", "../src/types/jsx.ts", "../src/const/index.ts", "../src/const/file.ts", "../src/const/generator.ts", "../src/utils/errors.ts", "../src/utils/schema.ts", "../src/utils/common.ts", "../src/analyzer/componentAnalyzer.ts", "../src/utils/validate.ts", "../src/utils/resultHelper.ts", "../src/generator/ChunkBuilder.ts", "../src/generator/CodeBuilder.ts", "../src/generator/ModuleBuilder.ts", "../src/generator/ProjectBuilder.ts", "../src/publisher/disk/index.ts", "../src/publisher/disk/utils.ts", "../src/publisher/zip/utils.ts", "../src/publisher/zip/index.ts", "../src/plugins/common/esmodule.ts", "../src/plugins/common/styleImport.ts", "../src/plugins/component/react/containerClass.ts", "../src/plugins/component/react/const.ts", "../src/utils/compositeType.ts", "../src/utils/jsExpression.ts", "../src/utils/expressionParser.ts", "../src/utils/OrderedSet.ts", "../src/utils/jsSlot.ts", "../src/utils/jsxHelpers.ts", "../src/utils/aopHelper.ts", "../src/utils/Scope.ts", "../src/utils/ScopeBindings.ts", "../src/plugins/component/react/containerInitState.ts", "../src/plugins/component/react/containerInjectContext.ts", "../src/utils/pathHelper.ts", "../src/plugins/component/react/containerInjectUtils.ts", "../src/plugins/component/react/containerInjectDataSourceEngine.ts", "../src/plugins/component/react/containerInjectConstants.ts", "../src/plugins/component/react/containerInjectI18n.ts", "../src/plugins/component/react/containerLifeCycle.ts", "../src/plugins/component/react/containerMethod.ts", "../src/utils/nodeToJSX.ts", "../src/utils/encodeJsxAttrString.ts", "../src/core/jsx/handlers/transformThis2Context.ts", "../src/core/jsx/util/isLiteralAtomicExpr.ts", "../src/core/jsx/util/isSimpleStraightLiteral.ts", "../src/core/jsx/handlers/transformJsExpression.ts", "../src/plugins/component/react/jsx.ts", "../src/plugins/component/react/reactCommonDeps.ts", "../src/plugins/component/style/css.ts", "../src/plugins/project/constants.ts", "../src/plugins/project/i18n.ts", "../src/plugins/project/utils.ts", "../src/utils/templateHelper.ts", "../src/plugins/project/framework/icejs/template/files/abc.json.ts", "../src/plugins/project/framework/icejs/template/files/build.json.ts", "../src/plugins/project/framework/icejs/template/files/editorconfig.ts", "../src/plugins/project/framework/icejs/template/files/eslintignore.ts", "../src/plugins/project/framework/icejs/template/files/eslintrc.js.ts", "../src/plugins/project/framework/icejs/template/files/gitignore.ts", "../src/plugins/project/framework/icejs/template/files/jsconfig.json.ts", "../src/plugins/project/framework/icejs/template/files/prettierignore.ts", "../src/plugins/project/framework/icejs/template/files/prettierrc.js.ts", "../src/plugins/project/framework/icejs/template/files/README.md.ts", "../src/plugins/project/framework/icejs/template/files/src/layouts/BasicLayout/components/Footer/index.jsx.ts", "../src/plugins/project/framework/icejs/template/files/src/layouts/BasicLayout/components/Footer/index.style.ts", "../src/plugins/project/framework/icejs/template/files/src/layouts/BasicLayout/components/Logo/index.jsx.ts", "../src/plugins/project/framework/icejs/template/files/src/layouts/BasicLayout/components/Logo/index.style.ts", "../src/plugins/project/framework/icejs/template/files/src/layouts/BasicLayout/components/PageNav/index.jsx.ts", "../src/plugins/project/framework/icejs/template/files/src/layouts/BasicLayout/index.jsx.ts", "../src/plugins/project/framework/icejs/template/files/src/layouts/BasicLayout/menuConfig.js.ts", "../src/plugins/project/framework/icejs/template/files/stylelintignore.ts", "../src/plugins/project/framework/icejs/template/files/stylelintrc.js.ts", "../src/plugins/project/framework/icejs/template/files/tsconfig.json.ts", "../src/plugins/project/framework/icejs/template/static-files.ts", "../src/plugins/project/framework/icejs/template/index.ts", "../src/plugins/project/framework/icejs/plugins/entry.ts", "../src/plugins/project/framework/icejs/plugins/entryHtml.ts", "../src/plugins/project/framework/icejs/plugins/globalStyle.ts", "../src/utils/dataSource.ts", "../src/plugins/project/framework/icejs/plugins/packageJSON.ts", "../src/plugins/project/framework/icejs/plugins/router.ts", "../src/plugins/project/framework/icejs/index.ts", "../src/postprocessor/prettier/index.ts", "../src/solutions/icejs.ts", "../src/plugins/project/framework/icejs3/template/files/gitignore.ts", "../src/plugins/project/framework/icejs3/template/files/README.md.ts", "../src/plugins/project/framework/icejs3/template/files/browserslistrc.ts", "../src/plugins/project/framework/icejs3/template/files/typings.ts", "../src/plugins/project/framework/icejs3/template/files/document.ts", "../src/plugins/project/framework/icejs3/template/files/src/layouts/BasicLayout/components/Footer/index.jsx.ts", "../src/plugins/project/framework/icejs3/template/files/src/layouts/BasicLayout/components/Footer/index.style.ts", "../src/plugins/project/framework/icejs3/template/files/src/layouts/BasicLayout/components/Logo/index.jsx.ts", "../src/plugins/project/framework/icejs3/template/files/src/layouts/BasicLayout/components/Logo/index.style.ts", "../src/plugins/project/framework/icejs3/template/files/src/layouts/BasicLayout/components/PageNav/index.jsx.ts", "../src/plugins/project/framework/icejs3/template/files/src/layouts/BasicLayout/index.jsx.ts", "../src/plugins/project/framework/icejs3/template/files/src/layouts/BasicLayout/menuConfig.js.ts", "../src/plugins/project/framework/icejs3/template/static-files.ts", "../src/plugins/project/framework/icejs3/template/index.ts", "../src/plugins/project/framework/icejs3/plugins/globalStyle.ts", "../src/plugins/project/framework/icejs3/plugins/packageJSON.ts", "../src/plugins/project/framework/icejs3/plugins/layout.ts", "../src/plugins/project/framework/icejs3/plugins/appConfig.ts", "../src/utils/format.ts", "../src/utils/theme.ts", "../src/plugins/project/framework/icejs3/plugins/buildConfig.ts", "../src/plugins/project/framework/icejs3/index.ts", "../src/solutions/icejs3.ts", "../src/plugins/component/rax/containerClass.ts", "../src/plugins/component/rax/const.ts", "../src/plugins/component/rax/containerLifeCycle.ts", "../src/utils/debug.ts", "../src/plugins/component/rax/containerMethods.ts", "../src/plugins/component/rax/containerInitState.ts", "../src/plugins/component/rax/containerInjectContext.ts", "../src/plugins/component/rax/containerInjectDataSourceEngine.ts", "../src/plugins/component/rax/containerInjectUtils.ts", "../src/plugins/component/rax/jsx.ts", "../src/plugins/component/rax/commonDeps.ts", "../src/plugins/project/framework/rax/template/files/.eslintignore.ts", "../src/plugins/project/framework/rax/template/files/.eslintrc.js.ts", "../src/plugins/project/framework/rax/template/files/.gitignore.ts", "../src/plugins/project/framework/rax/template/files/.prettierignore.ts", "../src/plugins/project/framework/rax/template/files/.prettierrc.js.ts", "../src/plugins/project/framework/rax/template/files/.stylelintignore.ts", "../src/plugins/project/framework/rax/template/files/.stylelintrc.js.ts", "../src/plugins/project/framework/rax/template/files/jsconfig.json.ts", "../src/plugins/project/framework/rax/template/files/README.md.ts", "../src/plugins/project/framework/rax/template/files/tsconfig.json.ts", "../src/plugins/project/framework/rax/template/static-files.ts", "../src/plugins/project/framework/rax/template/index.ts", "../src/plugins/project/framework/rax/plugins/entry.ts", "../src/plugins/project/framework/rax/plugins/appConfig.ts", "../src/plugins/project/framework/rax/plugins/buildConfig.ts", "../src/plugins/project/framework/rax/plugins/entryDocument.ts", "../src/plugins/project/framework/rax/plugins/globalStyle.ts", "../src/utils/version.ts", "../src/plugins/project/framework/rax/plugins/packageJSON.ts", "../src/plugins/project/framework/rax/index.ts", "../src/solutions/rax-app.ts", "../src/plugins/project/framework/nextjs/template/files/tsconfig.json.ts", "../src/plugins/project/framework/nextjs/template/files/tailwind.config.ts.ts", "../src/plugins/project/framework/nextjs/template/files/README.md.ts", "../src/plugins/project/framework/nextjs/template/files/postcss.config.js.ts", "../src/plugins/project/framework/nextjs/template/files/next.config.js.ts", "../src/plugins/project/framework/nextjs/template/files/next-env.d.ts", "../src/plugins/project/framework/nextjs/template/files/env.ts", "../src/plugins/project/framework/nextjs/template/files/env.production.ts", "../src/plugins/project/framework/nextjs/template/files/src/utils/utils.js.ts", "../src/plugins/project/framework/nextjs/template/files/src/utils/DateUtil.js.ts", "../src/plugins/project/framework/nextjs/template/files/src/utils/constants.js.ts", "../src/plugins/project/framework/nextjs/template/files/src/utils/Authorized.js.ts", "../src/plugins/project/framework/nextjs/template/files/src/utils/authority.js.ts", "../src/plugins/project/framework/nextjs/template/files/src/theme/themeConfig.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/services/README.md.ts", "../src/plugins/project/framework/nextjs/template/files/src/services/hooks.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/services/request.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/services/sys/dictMapRequest.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/services/sys/index.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/services/sys/sysAuth.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/services/app/TableDetail/api.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/services/app/TableDetail/index.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/services/app/user.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/models/README.md.ts", "../src/plugins/project/framework/nextjs/template/files/src/models/index.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/models/authSlice.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/models/_sysInfoSlice.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/models/counter/counterAPI.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/models/counter/counterSlice.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/routes.tsx.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/interface.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/getInitialState.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/definitions.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/AntdRegistry.tsx.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/access.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/_store.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/_defaultProps.tsx.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/store/hooks.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/store/StoreProvider.tsx.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/store/createAppSlice.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/storage/config.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/storage/encrypt.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/lib/storage/hooks.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/layout/StateLayout.tsx.ts", "../src/plugins/project/framework/nextjs/template/files/src/layout/README.md.ts", "../src/plugins/project/framework/nextjs/template/files/src/layout/BasicLayout.tsx.ts", "../src/plugins/project/framework/nextjs/template/files/src/layout/utils.ts.ts", "../src/plugins/project/framework/nextjs/template/files/src/app/page.tsx.ts", "../src/plugins/project/framework/nextjs/template/files/src/app/not-found.tsx.ts", "../src/plugins/project/framework/nextjs/template/files/src/app/loading.tsx.ts", "../src/plugins/project/framework/nextjs/template/files/src/app/layout.tsx.ts", "../src/plugins/project/framework/nextjs/template/files/src/app/globals.css.ts", "../src/plugins/project/framework/nextjs/template/files/src/app/error.tsx.ts", "../src/plugins/project/framework/nextjs/template/files/public/next.svg.ts", "../src/plugins/project/framework/nextjs/template/files/public/vercel.svg.ts", "../src/plugins/project/framework/nextjs/template/static-files.ts", "../src/plugins/project/framework/nextjs/template/index.ts", "../src/plugins/project/framework/nextjs/plugins/packageJSON.ts", "../src/plugins/project/framework/nextjs/index.ts", "../src/solutions/nextjs.ts", "../src/plugins/common/requireUtils.ts", "../src/utils/index.ts"],
  "sourcesContent": ["/**\r\n * \u4F4E\u4EE3\u7801\u5F15\u64CE\u7684\u51FA\u7801\u6A21\u5757\uFF0C\u8D1F\u8D23\u5C06\u7F16\u6392\u4EA7\u51FA\u7684 Schema \u8F6C\u6362\u6210\u5B9E\u9645\u53EF\u6267\u884C\u7684\u4EE3\u7801\u3002\r\n * \u6CE8\u610F\uFF1A\u4E3A\u4E86\u4FDD\u6301 API \u7684\u7A33\u5B9A\u6027\uFF0C\u8FD9\u91CC\u6240\u6709\u5BFC\u51FA\u7684 API \u5747\u8981\u663E\u5F0F\u547D\u540D\u65B9\u5F0F\u5BFC\u51FA\r\n *     \uFF08\u5373\u7528 export { xxx } from 'xx' \u7684\u65B9\u5F0F\uFF0C\u4E0D\u8981\u76F4\u63A5 export * from 'xxx')\r\n *      \u800C\u4E14\u6240\u6709\u5BFC\u51FA\u7684 API \u52A1\u5FC5\u5728 tests/public \u4E2D\u7F16\u5199\u5355\u5143\u6D4B\u8BD5\r\n */\r\nimport { createProjectBuilder } from './generator/ProjectBuilder';\r\nimport { createModuleBuilder } from './generator/ModuleBuilder';\r\nimport { createDiskPublisher } from './publisher/disk';\r\nimport { createZipPublisher } from './publisher/zip';\r\nimport createIceJsProjectBuilder, { plugins as icejsPlugins } from './solutions/icejs';\r\nimport createIceJs3ProjectBuilder, { plugins as icejs3Plugins } from './solutions/icejs3';\r\nimport createRaxAppProjectBuilder, { plugins as raxPlugins } from './solutions/rax-app';\r\nimport createNextJsProjectBuilder, { plugins as nextjsPlugins } from './solutions/nextjs';\r\n\r\n// \u5F15\u5165\u8BF4\u660E\r\nimport { REACT_CHUNK_NAME } from './plugins/component/react/const';\r\nimport { COMMON_CHUNK_NAME, CLASS_DEFINE_CHUNK_NAME, DEFAULT_LINK_AFTER } from './const/generator';\r\n\r\n// \u5F15\u5165\u901A\u7528\u63D2\u4EF6\u7EC4\r\nimport esmodule from './plugins/common/esmodule';\r\nimport requireUtils from './plugins/common/requireUtils';\r\nimport styleImport from './plugins/common/styleImport';\r\n\r\nimport css from './plugins/component/style/css';\r\nimport constants from './plugins/project/constants';\r\nimport i18n from './plugins/project/i18n';\r\nimport utils from './plugins/project/utils';\r\nimport prettier from './postprocessor/prettier';\r\n\r\n// \u5F15\u5165\u5168\u5C40\u5E38\u7528\u5DE5\u5177\r\nimport * as globalUtils from './utils';\r\n\r\nimport * as CONSTANTS from './const';\r\n\r\n// \u5F15\u5165\u5185\u7F6E\u89E3\u51B3\u65B9\u6848\u6A21\u5757\r\nimport icejs from './plugins/project/framework/icejs';\r\nimport icejs3 from './plugins/project/framework/icejs3';\r\nimport rax from './plugins/project/framework/rax';\r\nimport nextjs from './plugins/project/framework/nextjs';\r\n\r\nexport default {\r\n  createProjectBuilder,\r\n  createModuleBuilder,\r\n  solutions: {\r\n    icejs: createIceJsProjectBuilder,\r\n    icejs3: createIceJs3ProjectBuilder,\r\n    rax: createRaxAppProjectBuilder,\r\n    nextjs: createNextJsProjectBuilder\r\n  },\r\n  solutionParts: {\r\n    icejs,\r\n    icejs3,\r\n    rax,\r\n    nextjs\r\n  },\r\n  publishers: {\r\n    disk: createDiskPublisher,\r\n    zip: createZipPublisher,\r\n  },\r\n  plugins: {\r\n    common: {\r\n\r\n      /**\r\n       * \u5904\u7406 ES Module\r\n       * @deprecated please use esModule\r\n       */\r\n      esmodule,\r\n      esModule: esmodule,\r\n      requireUtils,\r\n      styleImport,\r\n    },\r\n    style: {\r\n      css,\r\n    },\r\n    project: {\r\n      constants,\r\n      i18n,\r\n      utils,\r\n    },\r\n    icejs: {\r\n      ...icejsPlugins,\r\n    },\r\n    icejs3: {\r\n      ...icejs3Plugins,\r\n    },\r\n    rax: {\r\n      ...raxPlugins,\r\n    },\r\n    nextjs: {\r\n      ...nextjsPlugins\r\n    },\r\n\r\n    /**\r\n     * @deprecated please use icejs\r\n     */\r\n    react: {\r\n      ...icejsPlugins,\r\n    },\r\n  },\r\n  postprocessor: {\r\n    prettier,\r\n  },\r\n  utils: globalUtils,\r\n  chunkNames: {\r\n    COMMON_CHUNK_NAME,\r\n    CLASS_DEFINE_CHUNK_NAME,\r\n    REACT_CHUNK_NAME,\r\n  },\r\n  defaultLinkAfter: {\r\n    COMMON_DEFAULT_LINK_AFTER: DEFAULT_LINK_AFTER,\r\n  },\r\n  constants: CONSTANTS,\r\n};\r\n\r\n// \u4E00\u4E9B\u7C7B\u578B\u5B9A\u4E49\r\nexport * from './types';\r\n\r\n// \u4E00\u4E9B\u5E38\u91CF\u5B9A\u4E49\r\nexport * from './const';\r\n\r\n// \u4E00\u4E9B\u5DE5\u5177\u51FD\u6570\r\nexport * from './analyzer/componentAnalyzer';\r\nexport * from './parser/SchemaParser';\r\nexport * from './generator/ChunkBuilder';\r\nexport * from './generator/CodeBuilder';\r\nexport * from './generator/ModuleBuilder';\r\nexport * from './generator/ProjectBuilder';\r\n", "/**\r\n * \u89E3\u6790\u5668\u662F\u5BF9\u8F93\u5165\u7684\u56FA\u5B9A\u683C\u5F0F\u6570\u636E\u505A\u62C6\u89E3\uFF0C\u4F7F\u5176\u7B26\u5408\u5F15\u64CE\u540E\u7EED\u6B65\u9AA4\u9884\u671F\uFF0C\u5B8C\u6210\u7EDF\u4E00\u5904\u7406\u903B\u8F91\u7684\u6B65\u9AA4\u3002\r\n * \u672C\u89E3\u6790\u5668\u9762\u5411\u7684\u662F\u6807\u51C6 schema \u534F\u8BAE\u3002\r\n */\r\nimport changeCase from 'change-case';\r\nimport {\r\n  IPublicTypeUtilItem,\r\n  IPublicTypeNodeDataType,\r\n  IPublicTypeNodeSchema,\r\n  IPublicTypeContainerSchema,\r\n  IPublicTypeProjectSchema,\r\n  IPublicTypePropsMap,\r\n  IPublicTypeNodeData,\r\n  IPublicTypeNpmInfo,\r\n} from '@alilc/lowcode-types';\r\nimport {\r\n  IPageMeta,\r\n  CodeGeneratorError,\r\n  CompatibilityError,\r\n  DependencyType,\r\n  IContainerInfo,\r\n  IDependency,\r\n  IExternalDependency,\r\n  IInternalDependency,\r\n  InternalDependencyType,\r\n  IParseResult,\r\n  ISchemaParser,\r\n  INpmPackage,\r\n  IRouterInfo,\r\n} from '../types';\r\n\r\nimport { SUPPORT_SCHEMA_VERSION_LIST } from '../const';\r\n\r\nimport { getErrorMessage } from '../utils/errors';\r\nimport { handleSubNodes, isValidContainerType, ContainerType } from '../utils/schema';\r\nimport { uniqueArray } from '../utils/common';\r\nimport { componentAnalyzer } from '../analyzer/componentAnalyzer';\r\nimport { ensureValidClassName } from '../utils/validate';\r\nimport type { ProjectRemark } from '../types/intermediate';\r\n\r\nconst defaultContainer: IContainerInfo = {\r\n  containerType: 'Component',\r\n  componentName: 'Component',\r\n  moduleName: 'Index',\r\n  fileName: 'Index',\r\n  css: '',\r\n  props: {},\r\n};\r\n\r\nfunction getRootComponentName(typeName: string, maps: Record<string, IExternalDependency>): string {\r\n  if (maps[typeName]) {\r\n    const rec = maps[typeName];\r\n    if (rec.destructuring) {\r\n      return rec.componentName || typeName;\r\n    }\r\n\r\n    const peerName = Object.keys(maps).find((depName: string) => {\r\n      const depInfo = maps[depName];\r\n      return (\r\n        depName !== typeName &&\r\n        !depInfo.destructuring &&\r\n        depInfo.package === rec.package &&\r\n        depInfo.version === rec.version &&\r\n        depInfo.main === rec.main &&\r\n        depInfo.exportName === rec.exportName &&\r\n        depInfo.subName === rec.subName\r\n      );\r\n    });\r\n\r\n    return peerName || typeName;\r\n  }\r\n  return typeName;\r\n}\r\n\r\nfunction processChildren(schema: IPublicTypeNodeSchema): void {\r\n  if (schema.props) {\r\n    if (Array.isArray(schema.props)) {\r\n      // FIXME: is array type props description\r\n    } else {\r\n      const nodeProps = schema.props as IPublicTypePropsMap;\r\n      if (nodeProps.children) {\r\n        if (!schema.children) {\r\n          // eslint-disable-next-line no-param-reassign\r\n          schema.children = nodeProps.children as IPublicTypeNodeDataType;\r\n        } else {\r\n          let _children: IPublicTypeNodeData[] = [];\r\n\r\n          if (Array.isArray(schema.children)) {\r\n            _children = _children.concat(schema.children);\r\n          } else {\r\n            _children.push(schema.children);\r\n          }\r\n\r\n          if (Array.isArray(nodeProps.children)) {\r\n            _children = _children.concat(nodeProps.children as IPublicTypeNodeData[]);\r\n          } else {\r\n            _children.push(nodeProps.children as IPublicTypeNodeData);\r\n          }\r\n\r\n          // eslint-disable-next-line no-param-reassign\r\n          schema.children = _children;\r\n        }\r\n        delete nodeProps.children;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction getInternalDep(internalDeps: Record<string, IInternalDependency>, depName: string) {\r\n  const dep = internalDeps[depName];\r\n  return (dep && dep.type !== InternalDependencyType.PAGE) ? dep : null;\r\n}\r\n\r\nexport class SchemaParser implements ISchemaParser {\r\n  validate(schema: IPublicTypeProjectSchema): boolean {\r\n    if (SUPPORT_SCHEMA_VERSION_LIST.indexOf(schema.version) < 0) {\r\n      throw new CompatibilityError(`Not support schema with version [${schema.version}]`);\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  parse(schemaSrc: IPublicTypeProjectSchema | string): IParseResult {\r\n    // TODO: collect utils depends in JSExpression\r\n    const compDeps: Record<string, IExternalDependency> = {};\r\n    const internalDeps: Record<string, IInternalDependency> = {};\r\n    let utilsDeps: IExternalDependency[] = [];\r\n\r\n    const schema = this.decodeSchema(schemaSrc);\r\n\r\n    // \u89E3\u6790\u4E09\u65B9\u7EC4\u4EF6\u4F9D\u8D56\r\n    schema.componentsMap.forEach((info: any) => {\r\n      if (info.componentName) {\r\n        compDeps[info.componentName] = {\r\n          ...info,\r\n          dependencyType: DependencyType.External,\r\n          componentName: info.componentName,\r\n          exportName: info.exportName ?? info.componentName,\r\n          version: info.version || '*',\r\n          destructuring: info.destructuring ?? false,\r\n        };\r\n      }\r\n    });\r\n\r\n    let containers: IContainerInfo[];\r\n    // Test if this is a lowcode component without container\r\n    if (schema.componentsTree.length > 0) {\r\n      const firstRoot: IPublicTypeContainerSchema = schema.componentsTree[0] as IPublicTypeContainerSchema;\r\n\r\n      if (!firstRoot.fileName && !isValidContainerType(firstRoot)) {\r\n        // \u6574\u4E2A schema \u63CF\u8FF0\u4E00\u4E2A\u5BB9\u5668\uFF0C\u4E14\u65E0\u6839\u8282\u70B9\u5B9A\u4E49\r\n        const container: IContainerInfo = {\r\n          ...firstRoot,\r\n          ...defaultContainer,\r\n          props: firstRoot.props || defaultContainer.props,\r\n          css: firstRoot.css || defaultContainer.css,\r\n          moduleName: (firstRoot as IContainerInfo).moduleName || defaultContainer.moduleName,\r\n          children: schema.componentsTree as IPublicTypeNodeSchema[],\r\n        };\r\n        containers = [container];\r\n      } else {\r\n        // \u666E\u901A\u5E26 1 \u5230\u591A\u4E2A\u5BB9\u5668\u7684 schema\r\n        containers = schema.componentsTree.map((n) => {\r\n          const subRoot = n as IPublicTypeContainerSchema;\r\n          const container: IContainerInfo = {\r\n            ...subRoot,\r\n            componentName: getRootComponentName(subRoot.componentName, compDeps),\r\n            containerType: subRoot.componentName,\r\n            moduleName: ensureValidClassName(subRoot.componentName === ContainerType.Component ?\r\n              subRoot.fileName : changeCase.pascalCase(subRoot.fileName)),\r\n          };\r\n          return container;\r\n        });\r\n      }\r\n    } else {\r\n      throw new CodeGeneratorError(\"Can't find anything to generate.\");\r\n    }\r\n\r\n    // \u5206\u6790\u5F15\u7528\u80FD\u529B\u7684\u4F9D\u8D56\r\n    containers = containers.map((con) => ({\r\n      ...con,\r\n      analyzeResult: componentAnalyzer(con as IPublicTypeContainerSchema),\r\n    }));\r\n\r\n    // \u5EFA\u7ACB\u6240\u6709\u5BB9\u5668\u7684\u5185\u90E8\u4F9D\u8D56\u7D22\u5F15\r\n    containers.forEach((container) => {\r\n      let type;\r\n      switch (container.containerType) {\r\n        case 'Page':\r\n          type = InternalDependencyType.PAGE;\r\n          break;\r\n        case 'Block':\r\n          type = InternalDependencyType.BLOCK;\r\n          break;\r\n        default:\r\n          type = InternalDependencyType.COMPONENT;\r\n          break;\r\n      }\r\n\r\n      const dep: IInternalDependency = {\r\n        type,\r\n        moduleName: container.moduleName,\r\n        destructuring: false,\r\n        exportName: container.moduleName,\r\n        dependencyType: DependencyType.Internal,\r\n      };\r\n\r\n      internalDeps[dep.moduleName] = dep;\r\n    });\r\n\r\n    const containersDeps = ([] as IDependency[]).concat(...containers.map((c) => c.deps || []));\r\n    // TODO: \u4E0D\u5E94\u8BE5\u5728\u51FA\u7801\u90E8\u5206\u89E3\u51B3\uFF1F\r\n    // \u5904\u7406 children \u5199\u5728\u4E86 props \u91CC\u7684\u60C5\u51B5\r\n    containers.forEach((container) => {\r\n      if (container.children) {\r\n        // eslint-disable-next-line @typescript-eslint/no-invalid-void-type\r\n        handleSubNodes<void>(\r\n          container.children,\r\n          {\r\n            node: (i: IPublicTypeNodeSchema) => processChildren(i),\r\n          },\r\n          {\r\n            rerun: true,\r\n          },\r\n        );\r\n      }\r\n    });\r\n\r\n    containers.forEach((container) => {\r\n      const depNames = this.getComponentNames(container);\r\n      // eslint-disable-next-line no-param-reassign\r\n      container.deps = uniqueArray<string>(depNames, (i: string) => i)\r\n        .map((depName) => getInternalDep(internalDeps, depName) || compDeps[depName])\r\n        .filter(Boolean);\r\n      // container.deps = Object.keys(compDeps).map((depName) => compDeps[depName]);\r\n    });\r\n\r\n    // \u5206\u6790\u8DEF\u7531\u914D\u7F6E\r\n    const routes: IRouterInfo['routes'] = containers\r\n      .filter((container) => container.containerType === 'Page')\r\n      .map((page) => {\r\n        const { meta } = page;\r\n        if (meta) {\r\n          return {\r\n            path: (meta as IPageMeta).router || `/${page.fileName}`, // \u5982\u679C\u65E0\u6CD5\u627E\u5230\u9875\u9762\u8DEF\u7531\u4FE1\u606F\uFF0C\u5219\u7528 fileName \u505A\u515C\u5E95\r\n            fileName: page.fileName,\r\n            componentName: page.moduleName,\r\n          };\r\n        }\r\n\r\n        return {\r\n          path: '',\r\n          fileName: page.fileName,\r\n          componentName: page.moduleName,\r\n        };\r\n      });\r\n\r\n    const routerDeps = routes\r\n      .map((r) => internalDeps[r.componentName] || compDeps[r.componentName])\r\n      .filter((dep) => !!dep);\r\n\r\n    // \u5206\u6790 Utils \u4F9D\u8D56\r\n    let utils: IPublicTypeUtilItem[];\r\n    if (schema.utils) {\r\n      utils = schema.utils;\r\n      utilsDeps = schema.utils\r\n        .filter(\r\n          (u): u is { name: string; type: 'npm' | 'tnpm'; content: IPublicTypeNpmInfo } => u.type !== 'function',\r\n        )\r\n        .map(\r\n          (u): IExternalDependency => ({\r\n            ...u.content,\r\n            componentName: u.name,\r\n            version: u.content.version || '*',\r\n            destructuring: u.content.destructuring ?? false,\r\n            exportName: u.content.exportName ?? u.name,\r\n          }),\r\n        );\r\n    } else {\r\n      utils = [];\r\n    }\r\n\r\n    // \u5206\u6790\u9879\u76EE npm \u4F9D\u8D56\r\n    let npms: INpmPackage[] = [];\r\n    containers.forEach((con) => {\r\n      const p = (con.deps || [])\r\n        .map((dep) => {\r\n          return dep.dependencyType === DependencyType.External ? dep : null;\r\n        })\r\n        .filter((dep) => dep !== null);\r\n      const npmInfos: INpmPackage[] = p.filter(Boolean).map((i) => ({\r\n        package: (i as IExternalDependency).package,\r\n        version: (i as IExternalDependency).version,\r\n      }));\r\n      npms.push(...npmInfos);\r\n    });\r\n\r\n    npms.push(\r\n      ...utilsDeps.map((utilsDep) => ({\r\n        package: utilsDep.package,\r\n        version: utilsDep.version,\r\n      })),\r\n    );\r\n\r\n    npms = uniqueArray<INpmPackage>(npms, (i) => i.package).filter(Boolean);\r\n\r\n    return {\r\n      containers,\r\n      globalUtils: {\r\n        utils,\r\n        deps: utilsDeps,\r\n      },\r\n      globalI18n: schema.i18n,\r\n      globalRouter: {\r\n        routes,\r\n        deps: routerDeps,\r\n      },\r\n      project: {\r\n        css: schema.css,\r\n        constants: schema.constants,\r\n        config: schema.config || {},\r\n        meta: schema.meta || {},\r\n        i18n: schema.i18n,\r\n        containersDeps,\r\n        utilsDeps,\r\n        packages: npms || [],\r\n        dataSourcesTypes: this.collectDataSourcesTypes(schema),\r\n        projectRemark: this.getProjectRemark(containers),\r\n      },\r\n    };\r\n  }\r\n\r\n  getProjectRemark(containers: IContainerInfo[]): ProjectRemark {\r\n    return {\r\n      isSingleComponent: containers.length === 1 && containers[0].containerType === 'Component',\r\n    };\r\n  }\r\n\r\n  getComponentNames(children: IPublicTypeNodeDataType): string[] {\r\n    return handleSubNodes<string>(\r\n      children,\r\n      {\r\n        node: (i: IPublicTypeNodeSchema) => i.componentName,\r\n      },\r\n      {\r\n        rerun: true,\r\n      },\r\n    );\r\n  }\r\n\r\n  decodeSchema(schemaSrc: string | IPublicTypeProjectSchema): IPublicTypeProjectSchema {\r\n    let schema: IPublicTypeProjectSchema;\r\n    if (typeof schemaSrc === 'string') {\r\n      try {\r\n        schema = JSON.parse(schemaSrc);\r\n      } catch (error) {\r\n        throw new CodeGeneratorError(\r\n          `Parse schema failed: ${getErrorMessage(error) || 'unknown reason'}`,\r\n        );\r\n      }\r\n    } else {\r\n      schema = schemaSrc;\r\n    }\r\n    return schema;\r\n  }\r\n\r\n  private collectDataSourcesTypes(schema: IPublicTypeProjectSchema): string[] {\r\n    const dataSourcesTypes = new Set<string>();\r\n\r\n    // \u6570\u636E\u6E90\u7684\u9ED8\u8BA4\u7C7B\u578B\u4E3A fetch\r\n    const defaultDataSourceType = 'fetch';\r\n\r\n    // \u6536\u96C6\u5E94\u7528\u7EA7\u522B\u7684\u6570\u636E\u6E90\r\n    schema.dataSource?.list?.forEach((ds) => {\r\n      dataSourcesTypes.add(ds.type || defaultDataSourceType);\r\n    });\r\n\r\n    // \u6536\u96C6\u5BB9\u5668\u7EA7\u522B\u7684\u6570\u636E\u6E90\uFF08\u9875\u9762/\u7EC4\u4EF6/\u533A\u5757\uFF09\r\n    schema.componentsTree.forEach((rootNode) => {\r\n      rootNode.dataSource?.list?.forEach((ds) => {\r\n        dataSourcesTypes.add(ds.type || defaultDataSourceType);\r\n      });\r\n    });\r\n\r\n    return Array.from(dataSourcesTypes.values());\r\n  }\r\n}\r\n\r\nexport default SchemaParser;\r\n", "import {\r\n  IPublicTypeCompositeArray,\r\n  IPublicTypeCompositeObject, IPublicTypeJSExpression,\r\n  IPublicTypeJSFunction, IPublicTypeJSONArray,\r\n  IPublicTypeJSONObject, IPublicTypeJSSlot, IPublicTypeNodeDataType,\r\n  IPublicTypeProjectSchema, ResultDir,\r\n  ResultFile,\r\n} from '@alilc/lowcode-types';\r\n\r\nimport type { ProjectBuilderInitOptions } from '../generator/ProjectBuilder';\r\nimport { IScopeBindings } from '../utils/ScopeBindings';\r\nimport { IParseResult } from './intermediate';\r\n\r\nexport enum FileType {\r\n  CSS = 'css',\r\n  SCSS = 'scss',\r\n  LESS = 'less',\r\n  HTML = 'html',\r\n  JS = 'js',\r\n  MJS = 'mjs',\r\n  JSX = 'jsx',\r\n  TS = 'ts',\r\n  MTS = 'mts',\r\n  TSX = 'tsx',\r\n  JSON = 'json',\r\n  MD = 'md',\r\n}\r\n\r\nexport enum ChunkType {\r\n  AST = 'ast',\r\n  STRING = 'string',\r\n  JSON = 'json',\r\n}\r\n\r\nexport enum PluginType {\r\n  COMPONENT = 'component',\r\n  UTILS = 'utils',\r\n  I18N = 'i18n',\r\n}\r\n\r\nexport type ChunkContent = string | any;\r\nexport type CodeGeneratorFunction<T> = (content: T) => string;\r\n\r\nexport interface ICodeChunk {\r\n  type: ChunkType;\r\n  fileType: string;\r\n  name: string;\r\n  subModule?: string;\r\n  content: ChunkContent;\r\n  linkAfter: string[];\r\n  ext?: Record<string, unknown>;\r\n}\r\n\r\nexport interface IBaseCodeStruct {\r\n  chunks: ICodeChunk[];\r\n  depNames: string[];\r\n}\r\n\r\nexport interface ICodeStruct extends IBaseCodeStruct {\r\n  ir: any;\r\n  contextData: IContextData;\r\n}\r\n\r\n/** \u4E0A\u4E0B\u6587\u6570\u636E\uFF0C\u7528\u6765\u5728\u63D2\u4EF6\u4E4B\u95F4\u5171\u4EAB\u4E00\u4E9B\u6570\u636E */\r\nexport interface IContextData extends IProjectBuilderOptions {\r\n\r\n  /**\r\n   * \u5176\u4ED6\u81EA\u5B9A\u4E49\u6570\u636E\r\n   * \uFF08\u4E09\u65B9\u81EA\u5B9A\u4E49\u63D2\u4EF6\u4E5F\u53EF\u4EE5\u5728\u6B64\u653E\u4E00\u4E9B\u6570\u636E\uFF0C\u5EFA\u8BAE\u8D77\u4E2A\u957F\u4E00\u70B9\u7684\u540D\u79F0\uFF0C\u7528\u81EA\u5DF1\u7684\u63D2\u4EF6\u540D\u505A\u524D\u7F00\uFF0C\u4EE5\u9632\u51B2\u7A81\uFF09\r\n   */\r\n  [key: string]: any;\r\n\r\n  /**\r\n   * \u662F\u5426\u4F7F\u7528\u4E86 Ref \u7684 API (this.$/this.$$)\r\n   * */\r\n  useRefApi?: boolean;\r\n}\r\n\r\nexport type BuilderComponentPlugin = (initStruct: ICodeStruct) => Promise<ICodeStruct>;\r\n\r\nexport type BuilderComponentPluginFactory<T> = (config?: T) => BuilderComponentPlugin;\r\n\r\nexport interface IChunkBuilder {\r\n  run: (ir: any, initialStructure?: ICodeStruct) => Promise<{ chunks: ICodeChunk[][] }>;\r\n  getPlugins: () => BuilderComponentPlugin[];\r\n  addPlugin: (plugin: BuilderComponentPlugin) => void;\r\n}\r\n\r\nexport interface ICodeBuilder {\r\n  link: (chunkDefinitions: ICodeChunk[]) => string;\r\n  generateByType: (type: string, content: unknown) => string;\r\n}\r\n\r\nexport interface ICompiledModule {\r\n  files: ResultFile[];\r\n}\r\n\r\nexport interface IModuleBuilder {\r\n  generateModule: (input: unknown) => Promise<ICompiledModule>;\r\n  generateModuleCode: (schema: IPublicTypeProjectSchema | string) => Promise<ResultDir>;\r\n  linkCodeChunks: (chunks: Record<string, ICodeChunk[]>, fileName: string) => ResultFile[];\r\n  addPlugin: (plugin: BuilderComponentPlugin) => void;\r\n}\r\n\r\n/**\r\n * \u5F15\u64CE\u5BF9\u5916\u63A5\u53E3\r\n *\r\n * @export\r\n * @interface ICodeGenerator\r\n */\r\nexport interface ICodeGenerator {\r\n\r\n  /**\r\n   * \u51FA\u7801\u63A5\u53E3\uFF0C\u628A Schema \u8F6C\u6362\u6210\u4EE3\u7801\u6587\u4EF6\u7CFB\u7EDF\u63CF\u8FF0\r\n   *\r\n   * @param {(IPublicTypeProjectSchema)} schema \u4F20\u5165\u7684 Schema\r\n   * @returns {ResultDir}\r\n   * @memberof ICodeGenerator\r\n   */\r\n  toCode: (schema: IPublicTypeProjectSchema) => Promise<ResultDir>;\r\n}\r\n\r\nexport interface ISchemaParser {\r\n  validate: (schema: IPublicTypeProjectSchema) => boolean;\r\n  parse: (schema: IPublicTypeProjectSchema | string) => IParseResult;\r\n}\r\n\r\nexport interface IProjectTemplate {\r\n  slots: Record<string, IProjectSlot>;\r\n  generateTemplate: (data: IParseResult) => ResultDir | Promise<ResultDir>;\r\n}\r\n\r\nexport interface IProjectSlot {\r\n  path: string[];\r\n  fileName?: string;\r\n}\r\n\r\nexport interface IProjectPlugins {\r\n  [slotName: string]: BuilderComponentPlugin[];\r\n}\r\n\r\nexport interface IProjectBuilderOptions {\r\n\r\n  /** \u662F\u5426\u5904\u4E8E\u4E25\u683C\u6A21\u5F0F (\u9ED8\u8BA4\uFF1A\u5426) */\r\n  inStrictMode?: boolean;\r\n\r\n  /**\r\n   * \u662F\u5426\u8981\u5BB9\u5FCD\u5BF9 JSExpression \u6C42\u503C\u65F6\u7684\u5F02\u5E38\r\n   * \u9ED8\u8BA4\uFF1Atrue\r\n   * \u6CE8\uFF1A\u5982\u679C\u5BB9\u5FCD\u5F02\u5E38\uFF0C\u5219\u4F1A\u5728\u6C42\u503C\u65F6\u5305\u88F9 try-catch \u5757\uFF0C\r\n   *     catch \u5230\u5F02\u5E38\u65F6\u9ED8\u8BA4\u4F1A\u629B\u51FA\u4E00\u4E2A CustomEvent \u4E8B\u4EF6\u91CC\u9762\u5305\u542B\u5F02\u5E38\u4FE1\u606F\u548C\u6C42\u503C\u7684\u8868\u8FBE\u5F0F\r\n   */\r\n  tolerateEvalErrors?: boolean;\r\n\r\n  /**\r\n   * \u5BB9\u5FCD\u5F02\u5E38\u7684\u65F6\u5019\u7684\u7684\u9519\u8BEF\u5904\u7406\u8BED\u53E5\u5757\r\n   * \u9ED8\u8BA4\uFF1A\u65E0\r\n   * \u60A8\u53EF\u4EE5\u8BBE\u7F6E\u4E3A\u4E00\u4E2A\u8BED\u53E5\u5757\uFF0C\u6BD4\u5982\uFF1A\r\n   *  window.dispatchEvent(new CustomEvent('lowcode-eval-error', { error, expr }))\r\n   *\r\n   * \u4E00\u822C\u53EF\u4EE5\u7ED3\u5408\u57CB\u70B9\u76D1\u63A7\u6A21\u5757\u7528\u6765\u76D1\u63A7\u6C42\u503C\u5F02\u5E38\r\n   *\r\n   * \u5176\u4E2D\uFF1A\r\n   * - error: \u5F02\u5E38\u4FE1\u606F\r\n   * - expr: \u6C42\u503C\u7684\u8868\u8FBE\u5F0F\r\n   */\r\n  evalErrorsHandler?: string;\r\n\r\n  /**\r\n   * Hook which is used to customize original options, we can reorder/add/remove plugins/processors\r\n   * of the existing solution.\r\n   */\r\n  customizeBuilderOptions?(originalOptions: ProjectBuilderInitOptions): ProjectBuilderInitOptions;\r\n}\r\n\r\nexport interface IProjectBuilder {\r\n  generateProject: (schema: IPublicTypeProjectSchema | string) => Promise<ResultDir>;\r\n}\r\n\r\n/** \u9879\u76EE\u7EA7\u522B\u7684\u524D\u7F6E\u5904\u7406\u5668 */\r\nexport type ProjectPreProcessor = (schema: IPublicTypeProjectSchema) =>\r\n  Promise<IPublicTypeProjectSchema> | IPublicTypeProjectSchema;\r\n\r\nexport interface ProjectPostProcessorOptions {\r\n  parseResult?: IParseResult;\r\n  template?: IProjectTemplate;\r\n}\r\n\r\n/** \u9879\u76EE\u7EA7\u522B\u7684\u540E\u7F6E\u5904\u7406\u5668 */\r\nexport type ProjectPostProcessor = (\r\n  result: ResultDir,\r\n  schema: IPublicTypeProjectSchema,\r\n  originalSchema: IPublicTypeProjectSchema | string,\r\n  options: ProjectPostProcessorOptions,\r\n) => Promise<ResultDir> | ResultDir;\r\n\r\n/** \u6A21\u5757\u7EA7\u522B\u7684\u540E\u7F6E\u5904\u7406\u5668\u7684\u5DE5\u5382\u65B9\u6CD5 */\r\nexport type PostProcessorFactory<T> = (config?: T) => PostProcessor;\r\n\r\n/** \u6A21\u5757\u7EA7\u522B\u7684\u540E\u7F6E\u5904\u7406\u5668 */\r\nexport type PostProcessor = (content: string, fileType: string, name?: string) => string;\r\n\r\n// TODO: temp interface, need modify\r\nexport interface IPluginOptions {\r\n  fileDirDepth: number;\r\n}\r\n\r\nexport type BaseGenerator<I, T, C> = (\r\n  input: I,\r\n  scope: IScope,\r\n  config?: C,\r\n  next?: BaseGenerator<I, T, C>,\r\n) => T;\r\ntype CompositeTypeGenerator<I, T> =\r\n  | BaseGenerator<I, T, CompositeValueGeneratorOptions>\r\n  | Array<BaseGenerator<I, T, CompositeValueGeneratorOptions>>;\r\n\r\nexport type NodeGenerator<T> = (nodeItem: IPublicTypeNodeDataType, scope: IScope) => T;\r\n\r\n// FIXME: \u5728\u65B0\u7684\u5B9E\u73B0\u4E2D\uFF0C\u6DFB\u52A0\u4E86\u7B2C\u4E00\u53C2\u6570 this: CustomHandlerSet \u4F5C\u4E3A\u4E0A\u4E0B\u6587\u3002\u7A76\u5176\u672C\u8D28\r\n// scopeBindings?: IScopeBindings;\r\n// \u8FD9\u4E2A\u7EC4\u5408\u53EA\u7528\u6765\u7528\u6765\u5904\u7406 IPublicTypeCompositeValue \u7C7B\u578B\uFF0C\u4E0D\u662F\u8FD9\u4E2A\u7C7B\u578B\u7684\u4E0D\u8981\u653E\u5728\u8FD9\u91CC\r\nexport interface HandlerSet<T> {\r\n  string?: CompositeTypeGenerator<string, T>;\r\n  boolean?: CompositeTypeGenerator<boolean, T>;\r\n  number?: CompositeTypeGenerator<number, T>;\r\n  expression?: CompositeTypeGenerator<IPublicTypeJSExpression, T>;\r\n  function?: CompositeTypeGenerator<IPublicTypeJSFunction, T>;\r\n  slot?: CompositeTypeGenerator<IPublicTypeJSSlot, T>;\r\n  array?: CompositeTypeGenerator<IPublicTypeJSONArray | IPublicTypeCompositeArray, T>;\r\n  object?: CompositeTypeGenerator<IPublicTypeJSONObject | IPublicTypeCompositeObject, T>;\r\n}\r\n\r\nexport interface CompositeValueGeneratorOptions {\r\n  handlers?: HandlerSet<string>;\r\n  nodeGenerator?: NodeGenerator<string>;\r\n  tolerateEvalErrors?: boolean;\r\n}\r\n\r\n/**\r\n * \u4F5C\u7528\u57DF\u5B9A\u4E49\uFF0C\u7EF4\u62A4\u4F5C\u7528\u57DF\u5185\u5B9A\u4E49\uFF0C\u652F\u6301\u4F5C\u7528\u57DF\u94FE\u4E0A\u6EAF\r\n */\r\nexport interface IScope {\r\n  // \u7236\u7EA7\u4F5C\u7528\u57DF\uFF08\u5982\u679C\u662F\u6839\u4F5C\u7528\u57DF\u5219\u4E3A null\uFF09\r\n  readonly parent: IScope | null;\r\n\r\n  // \u4F5C\u7528\u57DF\u5185\u5B9A\u4E49\u7684\u53D8\u91CF/\u51FD\u6570\u7B49 bindings\r\n  readonly bindings?: IScopeBindings;\r\n\r\n  // TODO: \u9700\u8981\u6709\u4E0A\u4E0B\u6587\u4FE1\u606F\u5417\uFF1F \u63CF\u8FF0\u4EC0\u4E48\u5185\u5BB9\r\n  createSubScope: (ownIndentifiers: string[]) => IScope;\r\n}\r\n", "export interface INpmPackage {\r\n  package: string; // \u7EC4\u4EF6\u5305\u7684\u540D\u79F0\r\n  version: string; // \u7EC4\u4EF6\u5305\u7684\u7248\u672C\r\n}\r\n\r\n/**\r\n * \u5916\u90E8\u4F9D\u8D56\u63CF\u8FF0\r\n *\r\n * @export\r\n * @interface IExternalDependency\r\n */\r\nexport interface IExternalDependency extends INpmPackage, IDependency {}\r\n\r\nexport enum InternalDependencyType {\r\n  PAGE = 'pages',\r\n  BLOCK = 'components',\r\n  COMPONENT = 'components',\r\n  UTILS = 'utils',\r\n}\r\n\r\nexport enum DependencyType {\r\n  External = 'External',\r\n  Internal = 'Internal',\r\n}\r\n\r\nexport interface IInternalDependency extends IDependency {\r\n  type: InternalDependencyType;\r\n  moduleName: string;\r\n}\r\n\r\nexport interface IDependency {\r\n  destructuring: boolean; // \u7EC4\u4EF6\u662F\u5426\u662F\u89E3\u6784\u65B9\u5F0F\u65B9\u5F0F\u5BFC\u51FA\r\n  exportName: string; // \u5BFC\u51FA\u547D\u540D\r\n  subName?: string; // \u4E0B\u6807\u5B50\u7EC4\u4EF6\u540D\u79F0\r\n  main?: string; // \u5305\u5BFC\u51FA\u7EC4\u4EF6\u5165\u53E3\u6587\u4EF6\u8DEF\u5F84 /lib/input\r\n  dependencyType?: DependencyType; // \u4F9D\u8D56\u7C7B\u578B \u5185/\u5916\r\n  componentName?: string; // \u5BFC\u5165\u540E\u540D\u79F0\r\n}", "/* eslint-disable @typescript-eslint/no-useless-constructor */\r\nexport class CodeGeneratorError extends Error {\r\n  readonly detail?: unknown;\r\n\r\n  constructor(message: string, detail?: unknown) {\r\n    super(message);\r\n    this.name = this.constructor.name;\r\n    this.detail = detail;\r\n    Object.setPrototypeOf(this, new.target.prototype);\r\n  }\r\n}\r\n\r\nexport class ComponentValidationError extends CodeGeneratorError {}\r\n\r\nexport class CompatibilityError extends CodeGeneratorError {}\r\n\r\nexport class PublisherError extends CodeGeneratorError {}\r\n", "import { IPublicTypeNodeSchema, IPublicTypeCompositeValue } from '@alilc/lowcode-types';\r\nimport { HandlerSet, BaseGenerator, NodeGenerator } from './core';\r\n\r\nexport enum PIECE_TYPE {\r\n  BEFORE = 'NodeCodePieceBefore',\r\n  TAG = 'NodeCodePieceTag',\r\n  ATTR = 'NodeCodePieceAttr',\r\n  CHILDREN = 'NodeCodePieceChildren',\r\n  AFTER = 'NodeCodePieceAfter',\r\n}\r\n\r\nexport interface CodePiece {\r\n  name?: string;\r\n  value: string;\r\n  type: PIECE_TYPE;\r\n}\r\n\r\nexport interface AttrData {\r\n  attrName: string;\r\n  attrValue: IPublicTypeCompositeValue;\r\n}\r\n// \u5BF9 JSX \u51FA\u7801\u7684\u7406\u89E3\uFF0C\u76EE\u524D\u5B9A\u5236\u70B9\u5305\u542B\u3010\u5305\u88C5\u3011\u3010\u6807\u7B7E\u540D\u3011\u3010\u5C5E\u6027\u3011\r\nexport type AttrPlugin = BaseGenerator<AttrData, CodePiece[], NodeGeneratorConfig>;\r\nexport type NodePlugin = BaseGenerator<IPublicTypeNodeSchema, CodePiece[], NodeGeneratorConfig>;\r\n\r\nexport interface NodeGeneratorConfig {\r\n  handlers?: HandlerSet<string>;\r\n  tagMapping?: (input: string) => string;\r\n  attrPlugins?: AttrPlugin[];\r\n  nodePlugins?: NodePlugin[];\r\n  self?: NodeGenerator<string>;\r\n\r\n  /**\r\n   * \u662F\u5426\u8981\u5BB9\u5FCD\u5BF9 JSExpression \u6C42\u503C\u65F6\u7684\u5F02\u5E38\r\n   * \u9ED8\u8BA4\uFF1Atrue\r\n   * \u6CE8\uFF1A\u5982\u679C\u5BB9\u5FCD\u5F02\u5E38\uFF0C\u5219\u4F1A\u5728\u6C42\u503C\u65F6\u5305\u88F9 try-catch \u5757 -- \u901A\u8FC7 __$$eval / __$$evalArray\r\n   *     catch \u5230\u5F02\u5E38\u65F6\u9ED8\u8BA4\u4F1A\u629B\u51FA\u4E00\u4E2A CustomEvent \u4E8B\u4EF6\u91CC\u9762\u5305\u542B\u5F02\u5E38\u4FE1\u606F\u548C\u6C42\u503C\u7684\u8868\u8FBE\u5F0F\r\n   */\r\n  tolerateEvalErrors?: boolean;\r\n}\r\n", "export const NATIVE_ELE_PKG = 'native';\r\n\r\nexport const CONTAINER_TYPE = {\r\n  COMPONENT: 'Component',\r\n  BLOCK: 'Block',\r\n  PAGE: 'Page',\r\n};\r\n\r\nexport const SUPPORT_SCHEMA_VERSION_LIST = ['0.0.1', '1.0.0'];\r\n\r\n// built-in slot names which have been handled in ProjectBuilder\r\nexport const BUILTIN_SLOT_NAMES = [\r\n  'pages',\r\n  'components',\r\n  'router',\r\n  'entry',\r\n  'appConfig',\r\n  'buildConfig',\r\n  'constants',\r\n  'utils',\r\n  'i18n',\r\n  'globalStyle',\r\n  'htmlEntry',\r\n  'packageJSON',\r\n  'demo',\r\n];\r\n\r\nexport const isBuiltinSlotName = function (name: string) {\r\n  return BUILTIN_SLOT_NAMES.includes(name);\r\n};\r\n\r\nexport * from './file';\r\nexport * from './generator';\r\n", "import { FileType } from '../types/core';\r\n\r\nexport const FILE_TYPE_FAMILY = [[FileType.TSX, FileType.TS, FileType.JSX, FileType.JS]];\r\n", "export const COMMON_CHUNK_NAME = {\r\n  ExternalDepsImport: 'CommonExternalDependencyImport',\r\n  InternalDepsImport: 'CommonInternalDependencyImport',\r\n  ImportAliasDefine: 'CommonImportAliasDefine',\r\n  FileVarDefine: 'CommonFileScopeVarDefine',\r\n  FileUtilDefine: 'CommonFileScopeMethodDefine',\r\n  FileMainContent: 'CommonFileMainContent',\r\n  FileExport: 'CommonFileExport',\r\n  StyleDepsImport: 'CommonStyleDepsImport',\r\n  StyleCssContent: 'CommonStyleCssContent',\r\n  HtmlContent: 'CommonHtmlContent',\r\n  CustomContent: 'CommonCustomContent',\r\n};\r\n\r\nexport const CLASS_DEFINE_CHUNK_NAME = {\r\n  Start: 'CommonClassDefineStart',\r\n  ConstructorStart: 'CommonClassDefineConstructorStart',\r\n  ConstructorContent: 'CommonClassDefineConstructorContent',\r\n  ConstructorEnd: 'CommonClassDefineConstructorEnd',\r\n  StaticVar: 'CommonClassDefineStaticVar',\r\n  StaticMethod: 'CommonClassDefineStaticMethod',\r\n  InsVar: 'CommonClassDefineInsVar',\r\n  InsVarMethod: 'CommonClassDefineInsVarMethod',\r\n  InsMethod: 'CommonClassDefineInsMethod',\r\n  InsPrivateMethod: 'CommonClassDefineInsPrivateMethod',\r\n  End: 'CommonClassDefineEnd',\r\n};\r\n\r\nexport const DEFAULT_LINK_AFTER = {\r\n  [COMMON_CHUNK_NAME.ExternalDepsImport]: [],\r\n  [COMMON_CHUNK_NAME.InternalDepsImport]: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n  [COMMON_CHUNK_NAME.ImportAliasDefine]: [\r\n    COMMON_CHUNK_NAME.ExternalDepsImport, COMMON_CHUNK_NAME.InternalDepsImport,\r\n  ],\r\n  [COMMON_CHUNK_NAME.FileVarDefine]: [\r\n    COMMON_CHUNK_NAME.ExternalDepsImport,\r\n    COMMON_CHUNK_NAME.InternalDepsImport,\r\n    COMMON_CHUNK_NAME.ImportAliasDefine,\r\n  ],\r\n  [COMMON_CHUNK_NAME.FileUtilDefine]: [\r\n    COMMON_CHUNK_NAME.ExternalDepsImport,\r\n    COMMON_CHUNK_NAME.InternalDepsImport,\r\n    COMMON_CHUNK_NAME.ImportAliasDefine,\r\n    COMMON_CHUNK_NAME.FileVarDefine,\r\n  ],\r\n  [CLASS_DEFINE_CHUNK_NAME.Start]: [\r\n    COMMON_CHUNK_NAME.ExternalDepsImport,\r\n    COMMON_CHUNK_NAME.InternalDepsImport,\r\n    COMMON_CHUNK_NAME.ImportAliasDefine,\r\n    COMMON_CHUNK_NAME.FileVarDefine,\r\n    COMMON_CHUNK_NAME.FileUtilDefine,\r\n  ],\r\n  [CLASS_DEFINE_CHUNK_NAME.ConstructorStart]: [\r\n    CLASS_DEFINE_CHUNK_NAME.Start,\r\n    CLASS_DEFINE_CHUNK_NAME.StaticVar,\r\n    CLASS_DEFINE_CHUNK_NAME.StaticMethod,\r\n    CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n    CLASS_DEFINE_CHUNK_NAME.InsVarMethod,\r\n  ],\r\n  [CLASS_DEFINE_CHUNK_NAME.ConstructorContent]: [CLASS_DEFINE_CHUNK_NAME.ConstructorStart],\r\n  [CLASS_DEFINE_CHUNK_NAME.ConstructorEnd]: [\r\n    CLASS_DEFINE_CHUNK_NAME.ConstructorStart,\r\n    CLASS_DEFINE_CHUNK_NAME.ConstructorContent,\r\n  ],\r\n  [CLASS_DEFINE_CHUNK_NAME.StaticVar]: [CLASS_DEFINE_CHUNK_NAME.Start],\r\n  [CLASS_DEFINE_CHUNK_NAME.StaticMethod]: [\r\n    CLASS_DEFINE_CHUNK_NAME.Start, CLASS_DEFINE_CHUNK_NAME.StaticVar,\r\n  ],\r\n  [CLASS_DEFINE_CHUNK_NAME.InsVar]: [\r\n    CLASS_DEFINE_CHUNK_NAME.Start,\r\n    CLASS_DEFINE_CHUNK_NAME.StaticVar,\r\n    CLASS_DEFINE_CHUNK_NAME.StaticMethod,\r\n  ],\r\n  [CLASS_DEFINE_CHUNK_NAME.InsVarMethod]: [\r\n    CLASS_DEFINE_CHUNK_NAME.Start,\r\n    CLASS_DEFINE_CHUNK_NAME.StaticVar,\r\n    CLASS_DEFINE_CHUNK_NAME.StaticMethod,\r\n    CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n  ],\r\n  [CLASS_DEFINE_CHUNK_NAME.InsMethod]: [\r\n    CLASS_DEFINE_CHUNK_NAME.Start,\r\n    CLASS_DEFINE_CHUNK_NAME.StaticVar,\r\n    CLASS_DEFINE_CHUNK_NAME.StaticMethod,\r\n    CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n    CLASS_DEFINE_CHUNK_NAME.InsVarMethod,\r\n    CLASS_DEFINE_CHUNK_NAME.ConstructorEnd,\r\n  ],\r\n  [CLASS_DEFINE_CHUNK_NAME.InsPrivateMethod]: [\r\n    CLASS_DEFINE_CHUNK_NAME.Start,\r\n    CLASS_DEFINE_CHUNK_NAME.StaticVar,\r\n    CLASS_DEFINE_CHUNK_NAME.StaticMethod,\r\n    CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n    CLASS_DEFINE_CHUNK_NAME.InsVarMethod,\r\n    CLASS_DEFINE_CHUNK_NAME.InsMethod,\r\n    CLASS_DEFINE_CHUNK_NAME.ConstructorEnd,\r\n  ],\r\n  [CLASS_DEFINE_CHUNK_NAME.End]: [\r\n    CLASS_DEFINE_CHUNK_NAME.Start,\r\n    CLASS_DEFINE_CHUNK_NAME.StaticVar,\r\n    CLASS_DEFINE_CHUNK_NAME.StaticMethod,\r\n    CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n    CLASS_DEFINE_CHUNK_NAME.InsVarMethod,\r\n    CLASS_DEFINE_CHUNK_NAME.InsMethod,\r\n    CLASS_DEFINE_CHUNK_NAME.InsPrivateMethod,\r\n    CLASS_DEFINE_CHUNK_NAME.ConstructorEnd,\r\n  ],\r\n  [COMMON_CHUNK_NAME.FileMainContent]: [\r\n    COMMON_CHUNK_NAME.ExternalDepsImport,\r\n    COMMON_CHUNK_NAME.InternalDepsImport,\r\n    COMMON_CHUNK_NAME.ImportAliasDefine,\r\n    COMMON_CHUNK_NAME.FileVarDefine,\r\n    COMMON_CHUNK_NAME.FileUtilDefine,\r\n    CLASS_DEFINE_CHUNK_NAME.End,\r\n  ],\r\n  [COMMON_CHUNK_NAME.FileExport]: [\r\n    COMMON_CHUNK_NAME.ExternalDepsImport,\r\n    COMMON_CHUNK_NAME.InternalDepsImport,\r\n    COMMON_CHUNK_NAME.ImportAliasDefine,\r\n    COMMON_CHUNK_NAME.FileVarDefine,\r\n    COMMON_CHUNK_NAME.FileUtilDefine,\r\n    CLASS_DEFINE_CHUNK_NAME.End,\r\n    COMMON_CHUNK_NAME.FileMainContent,\r\n  ],\r\n  [COMMON_CHUNK_NAME.StyleDepsImport]: [],\r\n  [COMMON_CHUNK_NAME.StyleCssContent]: [COMMON_CHUNK_NAME.StyleDepsImport],\r\n  [COMMON_CHUNK_NAME.HtmlContent]: [],\r\n};\r\n\r\nexport const COMMON_SUB_MODULE_NAME = 'index';\r\n", "/**\r\n * \u83B7\u53D6\u9519\u8BEF\u4FE1\u606F\r\n */\r\nexport function getErrorMessage(error: unknown): string | null {\r\n  if (!error) {\r\n    return null;\r\n  }\r\n\r\n  if (error instanceof Error) {\r\n    return error.message;\r\n  }\r\n\r\n  if (typeof error === 'string') {\r\n    return error;\r\n  }\r\n\r\n  if (typeof error === 'object' && error !== null) {\r\n    return (\r\n      getErrorMessage((error as { message: string }).message) ||\r\n      getErrorMessage((error as { errorMessage: string }).errorMessage) ||\r\n      getErrorMessage((error as { detail: string }).detail)\r\n    );\r\n  }\r\n\r\n  return null;\r\n}\r\n", "import * as _ from 'lodash';\r\nimport {\r\n  IPublicTypeJSExpression,\r\n  IPublicTypeNodeData,\r\n  IPublicTypeNodeSchema,\r\n  isJSExpression,\r\n  isJSSlot,\r\n  isDOMText,\r\n  IPublicTypeContainerSchema,\r\n  IPublicTypeNpmInfo,\r\n  IPublicTypeCompositeValue,\r\n  isNodeSchema,\r\n  isJSFunction,\r\n} from '@alilc/lowcode-types';\r\nimport { CodeGeneratorError } from '../types/error';\r\nimport { isJSExpressionFn } from './common';\r\n\r\nexport function isContainerSchema(x: any): x is IPublicTypeContainerSchema {\r\n  return (\r\n    typeof x === 'object' &&\r\n    x &&\r\n    typeof x.componentName === 'string' &&\r\n    typeof x.fileName === 'string'\r\n  );\r\n}\r\n\r\nexport function isNpmInfo(x: any): x is IPublicTypeNpmInfo {\r\n  return typeof x === 'object' && x && typeof x.package === 'string';\r\n}\r\n\r\nconst noop = () => undefined;\r\n\r\nconst handleChildrenDefaultOptions = {\r\n  rerun: false,\r\n};\r\n\r\nconst DEFAULT_MAX_DEPTH = 100000;\r\n\r\n/**\r\n * \u904D\u5386\u5E76\u5904\u7406\u6240\u6709\u7684\u5B50\u8282\u70B9\r\n * @param children\r\n * @param handlers\r\n * @param options\r\n * @returns\r\n */\r\nexport function handleSubNodes<T>(\r\n  children: IPublicTypeNodeSchema['children'],\r\n  handlers: {\r\n    string?: (i: string) => T;\r\n    expression?: (i: IPublicTypeJSExpression) => T;\r\n    node?: (i: IPublicTypeNodeSchema) => T;\r\n  },\r\n  options?: {\r\n    rerun?: boolean;\r\n    maxDepth?: number; // \u9632\u6B62\u51FA\u73B0\u6B7B\u5FAA\u73AF\u65E0\u7A77\u9012\u5F52\r\n  },\r\n): T[] {\r\n  const opt = {\r\n    ...handleChildrenDefaultOptions,\r\n    ...(options || {}),\r\n  };\r\n  const maxDepth = opt.maxDepth ?? DEFAULT_MAX_DEPTH;\r\n  if (maxDepth <= 0) {\r\n    throw new Error('handleSubNodes maxDepth reached');\r\n  }\r\n\r\n  if (Array.isArray(children)) {\r\n    const list: IPublicTypeNodeData[] = children as IPublicTypeNodeData[];\r\n    return list\r\n      .map((child) => handleSubNodes(child, handlers, { ...opt, maxDepth: maxDepth - 1 }))\r\n      .reduce((p, c) => p.concat(c), []);\r\n  }\r\n\r\n  let result: T | undefined;\r\n  const childrenRes: T[] = [];\r\n  if (children === null || children === undefined) {\r\n    return [];\r\n  } else if (isDOMText(children)) {\r\n    const handler = handlers.string || noop;\r\n    result = handler(children);\r\n  } else if (isJSExpression(children)) {\r\n    const handler = handlers.expression || noop;\r\n    result = handler(children);\r\n  } else if (isJSSlot(children)) {\r\n    return handleSubNodes(children.value, handlers, { ...opt, maxDepth: maxDepth - 1 });\r\n  } else if (isNodeSchema(children)) {\r\n    const handler = handlers.node || noop;\r\n    const child = children as IPublicTypeNodeSchema;\r\n    result = handler(child);\r\n\r\n    if (child.children) {\r\n      const childRes = handleSubNodes(child.children, handlers, opt);\r\n      childrenRes.push(...childRes);\r\n    }\r\n\r\n    if (child.props) {\r\n      if (Array.isArray(child.props)) {\r\n        child.props.forEach(({ value }) => {\r\n          const childRes = handleCompositeValueInProps(value);\r\n          childrenRes.push(...childRes);\r\n        });\r\n      } else {\r\n        Object.values(child.props).forEach((value) => {\r\n          const childRes = handleCompositeValueInProps(value as IPublicTypeCompositeValue);\r\n          childrenRes.push(...childRes);\r\n        });\r\n      }\r\n    }\r\n  } else {\r\n    throw new CodeGeneratorError('handleSubNodes got invalid NodeData', children);\r\n  }\r\n\r\n  if (result !== undefined) {\r\n    childrenRes.unshift(result);\r\n  }\r\n\r\n  return childrenRes;\r\n\r\n  function handleCompositeValueInProps(value: IPublicTypeCompositeValue): T[] {\r\n    if (isJSSlot(value)) {\r\n      return handleSubNodes(value.value, handlers, { ...opt, maxDepth: maxDepth - 1 });\r\n    }\r\n\r\n    // CompositeArray\r\n    if (Array.isArray(value)) {\r\n      return _.flatMap(value, (v) => handleCompositeValueInProps(v));\r\n    }\r\n\r\n    // IPublicTypeCompositeObject\r\n    if (\r\n      !isJSExpression(value) &&\r\n      !isJSExpressionFn(value) &&\r\n      !isJSFunction(value) &&\r\n      typeof value === 'object' &&\r\n      value !== null\r\n    ) {\r\n      return _.flatMap(Object.values(value), (v) => handleCompositeValueInProps(v));\r\n    }\r\n\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function isValidContainerType(schema: IPublicTypeNodeSchema) {\r\n  return [\r\n    'Page',\r\n    'Component',\r\n    'Block',\r\n  ].includes(schema.componentName);\r\n}\r\n\r\nexport const enum ContainerType {\r\n  Page = 'Page',\r\n  Component = 'Component',\r\n  Block = 'Block',\r\n}", "import type { IPublicTypeJSExpression, IPublicTypeJSFunction } from '@alilc/lowcode-types';\r\nimport changeCase from 'change-case';\r\nimport short from 'short-uuid';\r\nimport { DependencyType, IDependency, IExternalDependency, IInternalDependency } from '../types';\r\n\r\n// Doc: https://www.npmjs.com/package/change-case\r\n\r\nexport function camel2dash(input: string): string {\r\n  return changeCase.paramCase(input);\r\n}\r\n\r\n/**\r\n * \u8F6C\u4E3A\u9A7C\u5CF0\r\n */\r\nexport function camelize(str: string): string {\r\n  return changeCase.camelCase(str);\r\n}\r\n\r\nexport function generateID(): string {\r\n  return short.generate();\r\n}\r\n\r\nexport function upperCaseFirst(inputValue: string): string {\r\n  return changeCase.upperCaseFirst(inputValue);\r\n}\r\n\r\nexport function uniqueArray<T>(arr: T[], by: (i: T) => string) {\r\n  const map: Record<string, T> = {};\r\n  arr.forEach((item) => {\r\n    map[by(item)] = item;\r\n  });\r\n  // FIXME: Babel \u7F16\u8BD1\u5B58\u5728\u95EE\u9898\uFF0C\u6682\u65F6\u66FF\u6362\u5B9E\u73B0\r\n  // const uniqueKeys = [...new Set<string>(Object.keys(map))];\r\n  const uniqueKeys = Array.from(new Set<string>(Object.keys(map)));\r\n  const uniqueItems = uniqueKeys.map((key) => map[key]);\r\n  return uniqueItems;\r\n}\r\n\r\nexport function getStaticExprValue<T>(expr: string): T {\r\n  // TODO: \u9700\u8981\u5B89\u5168\u6027\u68C0\u67E5\r\n  // eslint-disable-next-line no-new-func\r\n  return Function(`\"use strict\";return (${expr})`)();\r\n}\r\n\r\nexport function isJSExpressionFn(data: any): data is IPublicTypeJSFunction {\r\n  return data?.type === 'JSExpression' && data?.extType === 'function';\r\n}\r\n\r\nexport function isInternalDependency(\r\n  dependency: IDependency,\r\n): dependency is IInternalDependency {\r\n  return dependency.dependencyType === DependencyType.Internal;\r\n}\r\n\r\nexport function isExternalDependency(\r\n  dependency: IDependency,\r\n): dependency is IExternalDependency {\r\n  return dependency.dependencyType === DependencyType.External;\r\n}", "import type { IPublicTypeNodeSchema, IPublicTypeCompositeObject } from '@alilc/lowcode-types';\r\nimport type { TComponentAnalyzer } from '../types';\r\n\r\nimport { handleSubNodes } from '../utils/schema';\r\n\r\nexport const componentAnalyzer: TComponentAnalyzer = (container) => {\r\n  let hasRefAttr = false;\r\n  const nodeValidator = (n: IPublicTypeNodeSchema) => {\r\n    if (n.props) {\r\n      const props = n.props as IPublicTypeCompositeObject;\r\n      if (props.ref) {\r\n        hasRefAttr = true;\r\n      }\r\n    }\r\n  };\r\n\r\n  nodeValidator(container);\r\n\r\n  if (!hasRefAttr && container.children) {\r\n    // eslint-disable-next-line @typescript-eslint/no-invalid-void-type\r\n    handleSubNodes<void>(\r\n      container.children,\r\n      {\r\n        node: nodeValidator,\r\n      },\r\n      {\r\n        rerun: true,\r\n      },\r\n    );\r\n  }\r\n\r\n  return {\r\n    isUsingRef: hasRefAttr,\r\n  };\r\n};\r\n", "export const isValidIdentifier = (name: string) => {\r\n  return /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/.test(name);\r\n};\r\n\r\nexport const isValidComponentName = (name: string) => {\r\n  return /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF.]*$/.test(name);\r\n};\r\n\r\nexport const ensureValidClassName = (name: string) => {\r\n  if (!isValidIdentifier(name)) {\r\n    return `$${name.replace(/[^_$a-zA-Z0-9]/g, '')}`;\r\n  }\r\n  return name;\r\n};\r\n", "import { ResultFile, ResultDir } from '@alilc/lowcode-types';\r\nimport nm from 'nanomatch';\r\n\r\nimport { CodeGeneratorError } from '../types/error';\r\nimport { FlattenFile } from '../types/file';\r\n\r\nexport function createResultFile(name: string, ext = 'jsx', content = ''): ResultFile {\r\n  return {\r\n    name,\r\n    ext,\r\n    content,\r\n  };\r\n}\r\n\r\nexport function createResultDir(name: string): ResultDir {\r\n  return {\r\n    name,\r\n    dirs: [],\r\n    files: [],\r\n  };\r\n}\r\n\r\nexport function addDirectory(target: ResultDir, dir: ResultDir): void {\r\n  if (target.dirs.findIndex((d) => d.name === dir.name) < 0) {\r\n    target.dirs.push(dir);\r\n  } else {\r\n    throw new CodeGeneratorError(\r\n      `Adding same directory to one directory: ${dir.name} -> ${target.name}`,\r\n    );\r\n  }\r\n}\r\n\r\nexport function addFile(target: ResultDir, file: ResultFile): void {\r\n  if (target.files.findIndex((f) => f.name === file.name && f.ext === file.ext) < 0) {\r\n    target.files.push(file);\r\n  } else {\r\n    throw new CodeGeneratorError(\r\n      `Adding same file to one directory: ${file.name} -> ${target.name}`,\r\n    );\r\n  }\r\n}\r\n\r\nexport function flattenResult(dir: ResultDir, cwd = ''): FlattenFile[] {\r\n  if (!dir.files.length && !dir.dirs.length) {\r\n    return [];\r\n  }\r\n\r\n  return [\r\n    ...dir.files.map(\r\n      (file): FlattenFile => ({\r\n        pathName: joinPath(cwd, `${file.name}${file.ext ? `.${file.ext}` : ''}`),\r\n        content: file.content,\r\n      }),\r\n    ),\r\n  ].concat(...dir.dirs.map((subDir) => flattenResult(subDir, joinPath(cwd, subDir.name))));\r\n}\r\n\r\nexport type GlobOptions = {\r\n  /** \u662F\u5426\u67E5\u627E \".xxx\" \u6587\u4EF6, \u9ED8\u8BA4: \u5426 */\r\n  dot?: boolean;\r\n};\r\n\r\n/**\r\n * \u67E5\u627E\u6587\u4EF6\r\n * @param result \u51FA\u7801\u7ED3\u679C\r\n * @param fileGlobExpr \u6587\u4EF6\u540D\u5339\u914D\u8868\u8FBE\u5F0F\r\n * @param resultDirPath \u51FA\u7801\u7ED3\u679C\u7684\u8DEF\u5F84\uFF08\u9ED8\u8BA4\u662F '.'\uFF09\r\n * @returns \u5339\u914D\u7684\u7B2C\u4E00\u4E2A\u6587\u4EF6\u6216 null \uFF08\u627E\u4E0D\u5230\uFF09\r\n */\r\nexport function findFile(\r\n  result: ResultDir,\r\n  fileGlobExpr: string,\r\n  options: GlobOptions = {},\r\n  resultDirPath = getResultNameOrDefault(result, ''),\r\n): ResultFile | null {\r\n  const maxDepth = !/\\/|\\*\\*/.test(fileGlobExpr) ? 1 : undefined; // \u5982\u679C glob \u8868\u8FBE\u5F0F\u91CC\u9762\u538B\u6839\u4E0D\u4F1A\u5339\u914D\u5B50\u76EE\u5F55\uFF0C\u5219\u6DF1\u5EA6\u9650\u5236\u4E3A 1\r\n  const files = scanFiles(result, resultDirPath, maxDepth);\r\n\r\n  for (let [filePath, file] of files) {\r\n    if (nm.isMatch(filePath, fileGlobExpr, options)) {\r\n      return file;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * \u4F7F\u7528 glob \u8BED\u6CD5\u67E5\u627E\u591A\u4E2A\u6587\u4EF6\r\n * @param result \u51FA\u7801\u7ED3\u679C\r\n * @param fileGlobExpr \u6587\u4EF6\u540D\u5339\u914D\u8868\u8FBE\u5F0F\r\n * @param resultDirPath \u51FA\u7801\u7ED3\u679C\u7684\u8DEF\u5F84\uFF08\u9ED8\u8BA4\u662F '.'\uFF09\r\n * @returns \u627E\u5230\u7684\u6587\u4EF6\u5217\u8868\u7684\u8FED\u4EE3\u5668 [ [\u6587\u4EF6\u8DEF\u5F84, \u6587\u4EF6\u4FE1\u606F], ... ]\r\n */\r\nexport function* globFiles(\r\n  result: ResultDir,\r\n  fileGlobExpr: string,\r\n  options: GlobOptions = {},\r\n  resultDirPath = getResultNameOrDefault(result, ''),\r\n): IterableIterator<[string, ResultFile]> {\r\n  const files = scanFiles(result, resultDirPath);\r\n\r\n  for (let [filePath, file] of files) {\r\n    if (nm.isMatch(filePath, fileGlobExpr, options)) {\r\n      yield [filePath, file];\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * \u904D\u5386\u6240\u6709\u7684\u6587\u4EF6\r\n */\r\nexport function* scanFiles(\r\n  result: ResultDir,\r\n  resultDirPath = getResultNameOrDefault(result, ''),\r\n  maxDepth = 10000,\r\n): IterableIterator<[string, ResultFile]> {\r\n  for (let file of result.files) {\r\n    const fileName = getFileNameWithExt(file);\r\n    yield [joinPath(resultDirPath, fileName), file];\r\n  }\r\n\r\n  for (let subDir of result.dirs) {\r\n    yield* scanFiles(subDir, joinPath(resultDirPath, subDir.name), maxDepth - 1);\r\n  }\r\n}\r\n\r\nexport function getFileNameWithExt(file: ResultFile) {\r\n  return `${file.name}${file.ext ? `.${file.ext}` : ''}`;\r\n}\r\n\r\nfunction getResultNameOrDefault(result: ResultDir, defaultDir = '/') {\r\n  return result.name && result.name !== '.' ? result.name : defaultDir;\r\n}\r\n\r\nfunction joinPath(...pathParts: string[]): string {\r\n  return pathParts\r\n    .filter((x) => x !== '' && x !== '.')\r\n    .join('/')\r\n    .replace(/\\\\+/g, '/')\r\n    .replace(/\\/+/g, '/');\r\n}\r\n\r\nexport function* scanDirs(\r\n  result: ResultDir,\r\n  resultDirPath = getResultNameOrDefault(result, ''),\r\n  maxDepth = 10000,\r\n): IterableIterator<[string, ResultDir]> {\r\n  yield [resultDirPath, result];\r\n\r\n  for (let subDir of result.dirs) {\r\n    yield* scanDirs(subDir, joinPath(resultDirPath, subDir.name), maxDepth - 1);\r\n  }\r\n}\r\n\r\nexport function* globDirs(\r\n  result: ResultDir,\r\n  dirGlobExpr: string,\r\n  options: GlobOptions = {},\r\n  resultDirPath = getResultNameOrDefault(result, ''),\r\n): IterableIterator<[string, ResultDir]> {\r\n  const dirs = scanDirs(result, resultDirPath);\r\n\r\n  for (let [dirPath, dir] of dirs) {\r\n    if (nm.isMatch(dirPath, dirGlobExpr, options)) {\r\n      yield [dirPath, dir];\r\n    }\r\n  }\r\n}\r\n\r\nexport function findDir(\r\n  result: ResultDir,\r\n  dirGlobExpr: string,\r\n  options: GlobOptions = {},\r\n  resultDirPath = getResultNameOrDefault(result, ''),\r\n): ResultDir | null {\r\n  const dirs = scanDirs(result, resultDirPath);\r\n\r\n  for (let [dirPath, dir] of dirs) {\r\n    if (nm.isMatch(dirPath, dirGlobExpr, options)) {\r\n      return dir;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * \u4ECE\u7ED3\u679C\u4E2D\u79FB\u9664\u4E00\u4E9B\u6587\u4EF6\r\n * @param result \u51FA\u7801\u7ED3\u679C\u76EE\u5F55\r\n * @param filePathGlobExpr \u8981\u79FB\u9664\u7684\u6587\u4EF6\u8DEF\u5F84\uFF08glob \u8868\u8FBE\u5F0F\uFF09\r\n * @param globOptions glob \u53C2\u6570\r\n * @returns \u79FB\u9664\u4E86\u591A\u5C11\u6587\u4EF6\r\n */\r\nexport function removeFilesFromResult(\r\n  result: ResultDir,\r\n  filePathGlobExpr: string,\r\n  globOptions: GlobOptions = {},\r\n): number {\r\n  let removedCount = 0;\r\n  const [dirPath, fileName] = splitPath(filePathGlobExpr);\r\n\r\n  const dirs = dirPath ? globDirs(result, dirPath) : [['', result] as const];\r\n  for (let [, dir] of dirs) {\r\n    const files = globFiles(dir, fileName, globOptions, '.');\r\n    for (let [, file] of files) {\r\n      dir.files.splice(dir.files.indexOf(file), 1);\r\n      removedCount += 1;\r\n    }\r\n  }\r\n\r\n  return removedCount;\r\n}\r\n\r\n/**\r\n * \u4ECE\u7ED3\u679C\u4E2D\u79FB\u9664\u4E00\u4E9B\u76EE\u5F55\r\n * @param result \u51FA\u7801\u7ED3\u679C\u76EE\u5F55\r\n * @param dirPathGlobExpr \u8981\u79FB\u9664\u7684\u76EE\u5F55\u8DEF\u5F84\uFF08glob \u8868\u8FBE\u5F0F\uFF09\r\n * @param globOptions glob \u53C2\u6570\r\n * @returns \u79FB\u9664\u4E86\u591A\u5C11\u6587\u4EF6\r\n */\r\nexport function removeDirsFromResult(\r\n  result: ResultDir,\r\n  dirPathGlobExpr: string,\r\n  globOptions: GlobOptions = {},\r\n): number {\r\n  let removedCount = 0;\r\n  const [dirPath, fileName] = splitPath(dirPathGlobExpr);\r\n\r\n  const dirs = dirPath ? globDirs(result, dirPath) : [['', result] as const];\r\n  for (let [, dir] of dirs) {\r\n    const foundDirs = globDirs(dir, fileName, globOptions, '.');\r\n    for (let [, foundDir] of foundDirs) {\r\n      dir.dirs.splice(dir.dirs.indexOf(foundDir), 1);\r\n      removedCount += 1;\r\n    }\r\n  }\r\n\r\n  return removedCount;\r\n}\r\n\r\n/**\r\n * \u5C06\u6587\u4EF6\u8DEF\u5F84\u62C6\u5206\u4E3A\u76EE\u5F55\u8DEF\u5F84\u548C\u6587\u4EF6\u540D\r\n * @param filePath\r\n * @returns [fileDirPath, fileName]\r\n */\r\nfunction splitPath(filePath: string) {\r\n  const parts = filePath.split('/');\r\n  const fileName = parts.pop() || '';\r\n  return [joinPath(...parts), fileName];\r\n}\r\n", "import { BuilderComponentPlugin, IChunkBuilder, ICodeChunk, ICodeStruct, FileType } from '../types';\r\n\r\nimport { COMMON_SUB_MODULE_NAME } from '../const/generator';\r\nimport { FILE_TYPE_FAMILY } from '../const/file';\r\n\r\ninterface ChunkGroupInfo {\r\n  chunk: ICodeChunk;\r\n  familyIdx?: number;\r\n}\r\n\r\nfunction whichFamily(type: FileType): [number, FileType[]] | undefined {\r\n  const idx = FILE_TYPE_FAMILY.findIndex((family) => family.indexOf(type) >= 0);\r\n  if (idx < 0) {\r\n    return undefined;\r\n  }\r\n  return [idx, FILE_TYPE_FAMILY[idx]];\r\n}\r\n\r\nexport const groupChunks = (chunks: ICodeChunk[]): ICodeChunk[][] => {\r\n  const tmp: Record<string, Record<number, number>> = {};\r\n  const col = chunks.reduce((chunksSet: Record<string, ChunkGroupInfo[]>, chunk) => {\r\n    const fileKey = chunk.subModule || COMMON_SUB_MODULE_NAME;\r\n    if (!chunksSet[fileKey]) {\r\n      // eslint-disable-next-line no-param-reassign\r\n      chunksSet[fileKey] = [];\r\n    }\r\n    const res = whichFamily(chunk.fileType as FileType);\r\n    const info: ChunkGroupInfo = {\r\n      chunk,\r\n    };\r\n    if (res) {\r\n      const [familyIdx, family] = res;\r\n      const rank = family.indexOf(chunk.fileType as FileType);\r\n      if (tmp[fileKey]) {\r\n        if (tmp[fileKey][familyIdx] !== undefined) {\r\n          if (tmp[fileKey][familyIdx] > rank) {\r\n            tmp[fileKey][familyIdx] = rank;\r\n          }\r\n        } else {\r\n          tmp[fileKey][familyIdx] = rank;\r\n        }\r\n      } else {\r\n        tmp[fileKey] = {};\r\n        tmp[fileKey][familyIdx] = rank;\r\n      }\r\n      info.familyIdx = familyIdx;\r\n    }\r\n\r\n    chunksSet[fileKey].push(info);\r\n    return chunksSet;\r\n  }, {});\r\n\r\n  const result: ICodeChunk[][] = [];\r\n  Object.keys(col).forEach((key) => {\r\n    const byType: Record<string, ICodeChunk[]> = {};\r\n    col[key].forEach((info) => {\r\n      let t: string = info.chunk.fileType;\r\n      if (info.familyIdx !== undefined) {\r\n        t = FILE_TYPE_FAMILY[info.familyIdx][tmp[key][info.familyIdx]];\r\n        // eslint-disable-next-line no-param-reassign\r\n        info.chunk.fileType = t;\r\n      }\r\n      if (!byType[t]) {\r\n        byType[t] = [];\r\n      }\r\n      byType[t].push(info.chunk);\r\n    });\r\n    result.push(...Object.keys(byType).map((t) => byType[t]));\r\n  });\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n * \u4EE3\u7801\u7247\u6BB5\u6784\u5EFA\u5668\r\n *\r\n * @export\r\n * @class ChunkBuilder\r\n * @template T\r\n */\r\nexport class ChunkBuilder implements IChunkBuilder {\r\n  private plugins: BuilderComponentPlugin[];\r\n\r\n  constructor(plugins: BuilderComponentPlugin[] = []) {\r\n    this.plugins = plugins;\r\n  }\r\n\r\n  async run(\r\n    ir: unknown,\r\n    initialStructure: ICodeStruct = {\r\n      ir,\r\n      chunks: [],\r\n      depNames: [],\r\n      contextData: {},\r\n    },\r\n  ) {\r\n    const structure = initialStructure;\r\n\r\n    const finalStructure: ICodeStruct = await this.plugins.reduce(\r\n      async (previousPluginOperation: Promise<ICodeStruct>, plugin) => {\r\n        const modifiedStructure = await previousPluginOperation;\r\n        return plugin(modifiedStructure);\r\n      },\r\n      Promise.resolve(structure),\r\n    );\r\n\r\n    const chunks = groupChunks(finalStructure.chunks);\r\n\r\n    return {\r\n      chunks,\r\n    };\r\n  }\r\n\r\n  getPlugins() {\r\n    return this.plugins;\r\n  }\r\n\r\n  addPlugin(plugin: BuilderComponentPlugin) {\r\n    this.plugins.push(plugin);\r\n  }\r\n}\r\n\r\nexport default ChunkBuilder;\r\n", "import {\r\n  ChunkContent,\r\n  ChunkType,\r\n  CodeGeneratorError,\r\n  CodeGeneratorFunction,\r\n  ICodeBuilder,\r\n  ICodeChunk,\r\n} from '../types';\r\n\r\nexport class CodeBuilder implements ICodeBuilder {\r\n  private chunkDefinitions: ICodeChunk[] = [];\r\n\r\n  private generators: { [key: string]: CodeGeneratorFunction<ChunkContent> } = {\r\n    [ChunkType.STRING]: (str: string) => str, // no-op for string chunks\r\n    [ChunkType.JSON]: (json: Record<string, unknown>) => JSON.stringify(json), // stringify json to string\r\n  };\r\n\r\n  constructor(chunkDefinitions: ICodeChunk[] = []) {\r\n    this.chunkDefinitions = chunkDefinitions;\r\n  }\r\n\r\n  /**\r\n   * Links all chunks together based on their requirements. Returns an array\r\n   * of ordered chunk names which need to be compiled and glued together.\r\n   */\r\n  link(chunkDefinitions: ICodeChunk[] = []): string {\r\n    const chunks = chunkDefinitions || this.chunkDefinitions;\r\n    if (chunks.length <= 0) {\r\n      return '';\r\n    }\r\n\r\n    const unprocessedChunks = chunks.map((chunk) => {\r\n      return {\r\n        name: chunk.name,\r\n        type: chunk.type,\r\n        content: chunk.content,\r\n        linkAfter: this.cleanupInvalidChunks(chunk.linkAfter, chunks),\r\n      };\r\n    });\r\n\r\n    const resultingString: string[] = [];\r\n\r\n    while (unprocessedChunks.length > 0) {\r\n      let indexToRemove = 0;\r\n      for (let index = 0; index < unprocessedChunks.length; index++) {\r\n        if (unprocessedChunks[index].linkAfter.length <= 0) {\r\n          indexToRemove = index;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (unprocessedChunks[indexToRemove].linkAfter.length > 0) {\r\n        throw new CodeGeneratorError(\r\n          'Operation aborted. Reason: cyclic dependency between chunks.',\r\n        );\r\n      }\r\n\r\n      const { type, content, name } = unprocessedChunks[indexToRemove];\r\n      const compiledContent = this.generateByType(type, content);\r\n      if (compiledContent) {\r\n        resultingString.push(`${compiledContent}\\n`);\r\n      }\r\n\r\n      unprocessedChunks.splice(indexToRemove, 1);\r\n      if (!unprocessedChunks.some((ch) => ch.name === name)) {\r\n        unprocessedChunks.forEach(\r\n          // remove the processed chunk from all the linkAfter arrays from the remaining chunks\r\n          (ch) => {\r\n            // eslint-disable-next-line no-param-reassign\r\n            ch.linkAfter = ch.linkAfter.filter((after) => after !== name);\r\n          },\r\n        );\r\n      }\r\n    }\r\n\r\n    return resultingString.join('\\n');\r\n  }\r\n\r\n  generateByType(type: string, content: unknown): string {\r\n    if (!content) {\r\n      return '';\r\n    }\r\n    if (Array.isArray(content)) {\r\n      return content.map((contentItem) => this.generateByType(type, contentItem)).join('\\n');\r\n    }\r\n\r\n    if (!this.generators[type]) {\r\n      throw new Error(\r\n        `Attempted to generate unknown type ${type}. Please register a generator for this type in builder/index.ts`,\r\n      );\r\n    }\r\n\r\n    return this.generators[type](content);\r\n  }\r\n\r\n  // remove invalid chunks (which did not end up being created) from the linkAfter fields\r\n  // one use-case is when you want to remove the import plugin\r\n  private cleanupInvalidChunks(linkAfter: string[], chunks: ICodeChunk[]) {\r\n    return linkAfter.filter((chunkName) => chunks.some((chunk) => chunk.name === chunkName));\r\n  }\r\n}\r\n\r\nexport default CodeBuilder;\r\n", "import { IPublicTypeProjectSchema, ResultFile, ResultDir } from '@alilc/lowcode-types';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  CodeGeneratorError,\r\n  ICodeChunk,\r\n  ICompiledModule,\r\n  IContextData,\r\n  IModuleBuilder,\r\n  IParseResult,\r\n  ISchemaParser,\r\n  PostProcessor,\r\n} from '../types';\r\n\r\nimport { COMMON_SUB_MODULE_NAME } from '../const/generator';\r\n\r\nimport { SchemaParser } from '../parser/SchemaParser';\r\nimport { ChunkBuilder } from './ChunkBuilder';\r\nimport { CodeBuilder } from './CodeBuilder';\r\nimport { createResultFile, createResultDir, addFile } from '../utils/resultHelper';\r\n\r\nexport function createModuleBuilder(\r\n  options: {\r\n    plugins: BuilderComponentPlugin[];\r\n    postProcessors: PostProcessor[];\r\n    mainFileName?: string;\r\n    contextData?: IContextData;\r\n  } = {\r\n    plugins: [],\r\n    postProcessors: [],\r\n  },\r\n): IModuleBuilder {\r\n  const chunkGenerator = new ChunkBuilder(options.plugins);\r\n  const linker = new CodeBuilder();\r\n\r\n  const generateModule = async (input: unknown): Promise<ICompiledModule> => {\r\n    const moduleMainName = options.mainFileName || COMMON_SUB_MODULE_NAME;\r\n    if (chunkGenerator.getPlugins().length <= 0) {\r\n      throw new CodeGeneratorError(\r\n        'No plugins found. Component generation cannot work without any plugins!',\r\n      );\r\n    }\r\n\r\n    let files: ResultFile[] = [];\r\n\r\n    const { chunks } = await chunkGenerator.run(input, {\r\n      ir: input,\r\n      chunks: [],\r\n      depNames: [],\r\n      contextData: options.contextData || {},\r\n    });\r\n\r\n    chunks.forEach((fileChunkList) => {\r\n      const content = linker.link(fileChunkList);\r\n      const file = createResultFile(\r\n        fileChunkList[0].subModule || moduleMainName,\r\n        fileChunkList[0].fileType,\r\n        content,\r\n      );\r\n      files.push(file);\r\n    });\r\n\r\n    if (options.postProcessors.length > 0) {\r\n      files = files.map((file) => {\r\n        let { content, ext: type, name } = file;\r\n        options.postProcessors.forEach((processer) => {\r\n          content = processer(content, type, name);\r\n        });\r\n\r\n        return createResultFile(file.name, type, content);\r\n      });\r\n    }\r\n\r\n    return {\r\n      files,\r\n    };\r\n  };\r\n\r\n  const generateModuleCode = async (schema: IPublicTypeProjectSchema | string): Promise<ResultDir> => {\r\n    // Init\r\n    const schemaParser: ISchemaParser = new SchemaParser();\r\n    const parseResult: IParseResult = schemaParser.parse(schema);\r\n\r\n    const containerInfo = parseResult.containers[0];\r\n    const { files } = await generateModule(containerInfo);\r\n\r\n    const dir = createResultDir(containerInfo.moduleName);\r\n    files.forEach((file) => addFile(dir, file));\r\n\r\n    return dir;\r\n  };\r\n\r\n  const linkCodeChunks = (chunks: Record<string, ICodeChunk[]>, fileName: string) => {\r\n    const files: ResultFile[] = [];\r\n\r\n    Object.keys(chunks).forEach((fileKey) => {\r\n      const fileChunkList = chunks[fileKey];\r\n      const content = linker.link(fileChunkList);\r\n      const file = createResultFile(\r\n        fileChunkList[0].subModule || fileName,\r\n        fileChunkList[0].fileType,\r\n        content,\r\n      );\r\n      files.push(file);\r\n    });\r\n\r\n    return files;\r\n  };\r\n\r\n  return {\r\n    generateModule,\r\n    generateModuleCode,\r\n    linkCodeChunks,\r\n    addPlugin: chunkGenerator.addPlugin.bind(chunkGenerator),\r\n  };\r\n}\r\n", "import { ResultDir, ResultFile, IPublicTypeProjectSchema } from '@alilc/lowcode-types';\r\n\r\nimport {\r\n  IModuleBuilder,\r\n  IParseResult,\r\n  IProjectBuilder,\r\n  IProjectPlugins,\r\n  IProjectTemplate,\r\n  ISchemaParser,\r\n  PostProcessor,\r\n} from '../types';\r\n\r\nimport { SchemaParser } from '../parser/SchemaParser';\r\nimport { createResultDir, addDirectory, addFile } from '../utils/resultHelper';\r\n\r\nimport { createModuleBuilder } from './ModuleBuilder';\r\nimport { ProjectPreProcessor, ProjectPostProcessor, IContextData } from '../types/core';\r\nimport { CodeGeneratorError } from '../types/error';\r\nimport { isBuiltinSlotName } from '../const';\r\n\r\ninterface IModuleInfo {\r\n  moduleName?: string;\r\n  path: string[];\r\n  files: ResultFile[];\r\n}\r\n\r\nexport interface ProjectBuilderInitOptions {\r\n\r\n  /** \u9879\u76EE\u6A21\u677F */\r\n  template: IProjectTemplate;\r\n\r\n  /** \u9879\u76EE\u63D2\u4EF6 */\r\n  plugins: IProjectPlugins;\r\n\r\n  /** \u6A21\u5757\u540E\u7F6E\u5904\u7406\u5668 */\r\n  postProcessors: PostProcessor[];\r\n\r\n  /** Schema \u89E3\u6790\u5668 */\r\n  schemaParser?: ISchemaParser;\r\n\r\n  /** \u9879\u76EE\u7EA7\u522B\u7684\u524D\u7F6E\u5904\u7406\u5668 */\r\n  projectPreProcessors?: ProjectPreProcessor[];\r\n\r\n  /** \u9879\u76EE\u7EA7\u522B\u7684\u540E\u7F6E\u5904\u7406\u5668 */\r\n  projectPostProcessors?: ProjectPostProcessor[];\r\n\r\n  /** \u662F\u5426\u5904\u4E8E\u4E25\u683C\u6A21\u5F0F */\r\n  inStrictMode?: boolean;\r\n\r\n  /** \u4E00\u4E9B\u989D\u5916\u7684\u4E0A\u4E0B\u6587\u6570\u636E */\r\n  extraContextData?: Record<string, unknown>;\r\n\r\n  /**\r\n   * Hook which is used to customize original options, we can reorder/add/remove plugins/processors\r\n   * of the existing solution.\r\n   */\r\n  customizeBuilderOptions?(originalOptions: ProjectBuilderInitOptions): ProjectBuilderInitOptions;\r\n}\r\n\r\nexport class ProjectBuilder implements IProjectBuilder {\r\n  /** \u9879\u76EE\u6A21\u677F */\r\n  private template: IProjectTemplate;\r\n\r\n  /** \u9879\u76EE\u63D2\u4EF6 */\r\n  private plugins: IProjectPlugins;\r\n\r\n  /** \u6A21\u5757\u540E\u7F6E\u5904\u7406\u5668 */\r\n  private postProcessors: PostProcessor[];\r\n\r\n  /** Schema \u89E3\u6790\u5668 */\r\n  private schemaParser: ISchemaParser;\r\n\r\n  /** \u9879\u76EE\u7EA7\u522B\u7684\u524D\u7F6E\u5904\u7406\u5668 */\r\n  private projectPreProcessors: ProjectPreProcessor[];\r\n\r\n  /** \u9879\u76EE\u7EA7\u522B\u7684\u540E\u7F6E\u5904\u7406\u5668 */\r\n  private projectPostProcessors: ProjectPostProcessor[];\r\n\r\n  /** \u662F\u5426\u5904\u4E8E\u4E25\u683C\u6A21\u5F0F */\r\n  readonly inStrictMode: boolean;\r\n\r\n  /** \u4E00\u4E9B\u989D\u5916\u7684\u4E0A\u4E0B\u6587\u6570\u636E */\r\n  readonly extraContextData: IContextData;\r\n\r\n  constructor(builderOptions: ProjectBuilderInitOptions) {\r\n    let customBuilderOptions = builderOptions;\r\n    if (typeof builderOptions.customizeBuilderOptions === 'function') {\r\n      customBuilderOptions = builderOptions.customizeBuilderOptions(builderOptions);\r\n    }\r\n    const {\r\n      template,\r\n      plugins,\r\n      postProcessors,\r\n      schemaParser = new SchemaParser(),\r\n      projectPreProcessors = [],\r\n      projectPostProcessors = [],\r\n      inStrictMode = false,\r\n      extraContextData = {},\r\n    } = customBuilderOptions;\r\n    this.template = template;\r\n    this.plugins = plugins;\r\n    this.postProcessors = postProcessors;\r\n    this.schemaParser = schemaParser;\r\n    this.projectPreProcessors = projectPreProcessors;\r\n    this.projectPostProcessors = projectPostProcessors;\r\n    this.inStrictMode = inStrictMode;\r\n    this.extraContextData = extraContextData;\r\n  }\r\n\r\n  async generateProject(originalSchema: IPublicTypeProjectSchema | string): Promise<ResultDir> {\r\n    // Init\r\n    const { schemaParser } = this;\r\n\r\n    let schema: IPublicTypeProjectSchema =\r\n      typeof originalSchema === 'string' ? JSON.parse(originalSchema) : originalSchema;\r\n\r\n    // Parse / Format\r\n    // Preprocess\r\n    for (const preProcessor of this.projectPreProcessors) {\r\n      // eslint-disable-next-line no-await-in-loop\r\n      schema = await preProcessor(schema);\r\n    }\r\n\r\n    // Validate\r\n    if (!schemaParser.validate(schema)) {\r\n      throw new CodeGeneratorError('Schema is invalid');\r\n    }\r\n\r\n    // Collect Deps\r\n    // Parse JSExpression\r\n    const parseResult: IParseResult = schemaParser.parse(schema);\r\n    console.log('ProjectBuilder-133-parseResult: ', parseResult)\r\n    const projectRoot = await this.template.generateTemplate(parseResult);\r\n    console.log('ProjectBuilder-136-projectRoot: ', projectRoot)\r\n    let buildResult: IModuleInfo[] = [];\r\n\r\n    const builders = this.createModuleBuilders({\r\n      extraContextData: {\r\n        projectRemark: parseResult?.project?.projectRemark,\r\n        template: this.template,\r\n      },\r\n    });\r\n    console.log(JSON.stringify(builders))\r\n    console.log('ProjectBuilder-144-parseResult:', JSON.stringify(parseResult))\r\n    // Generator Code module\r\n    // components\r\n    // pages\r\n    const containerBuildResult: IModuleInfo[] = await Promise.all<IModuleInfo>(\r\n      parseResult.containers.map(async (containerInfo) => {\r\n        let builder: IModuleBuilder;\r\n        let path: string[];\r\n        console.log('ProjectBuilder-152-containerInfo:', JSON.stringify(containerInfo))\r\n        console.log('ProjectBuilder-152-path:', JSON.stringify(this.template.slots.pages.path))\r\n        \r\n        if (containerInfo.containerType === 'Page') {\r\n          builder = builders.pages;\r\n          path = this.template.slots.pages.path;\r\n        } else {\r\n          builder = builders.components;\r\n          path = [] // this.template.slots.components.path;\r\n        }\r\n        console.log('ProjectBuilder-162-path:', JSON.stringify(this.template.slots.pages.path))\r\n        console.log('ProjectBuilder-165-builder:', JSON.stringify(builders))\r\n        let files:any;\r\n        try {\r\n          let data = await builder.generateModule(containerInfo);\r\n          files = data.files;\r\n        } catch (e) {\r\n          console.log(69, e);\r\n        }\r\n        return {\r\n          moduleName: containerInfo.moduleName,\r\n          path,\r\n          files,\r\n        };\r\n      }),\r\n    );\r\n    console.log('ProjectBuilder-170-containerBuildResult:', JSON.stringify(containerBuildResult))\r\n    buildResult = buildResult.concat(containerBuildResult);\r\n    console.log('ProjectBuilder-180-buildResult:', JSON.stringify(buildResult))\r\n\r\n    // router\r\n    if (parseResult.globalRouter && builders.router) {\r\n      const { files } = await builders.router.generateModule(parseResult.globalRouter);\r\n      buildResult.push({\r\n        path: this.template.slots.router.path,\r\n        files,\r\n      }); \r\n    }\r\n\r\n    // entry\r\n    if (parseResult.project && builders.entry) {\r\n      const { files } = await builders.entry.generateModule(parseResult.project);\r\n\r\n      buildResult.push({\r\n        path: this.template.slots.entry.path,\r\n        files,\r\n      });\r\n    }\r\n\r\n    // appConfig\r\n    if (builders.appConfig) {\r\n      const { files } = await builders.appConfig.generateModule(parseResult);\r\n\r\n      buildResult.push({\r\n        path: this.template.slots.appConfig.path,\r\n        files,\r\n      });\r\n    }\r\n\r\n    // buildConfig\r\n    if (builders.buildConfig) {\r\n      const { files } = await builders.buildConfig.generateModule(parseResult);\r\n\r\n      buildResult.push({\r\n        path: this.template.slots.buildConfig.path,\r\n        files,\r\n      });\r\n    }\r\n\r\n    // constants?\r\n    if (parseResult.project && builders.constants && this.template.slots.constants) {\r\n      const { files } = await builders.constants.generateModule(parseResult.project);\r\n\r\n      buildResult.push({\r\n        path: this.template.slots.constants.path,\r\n        files,\r\n      });\r\n    }\r\n\r\n    // utils?\r\n    if (parseResult.globalUtils && builders.utils && this.template.slots.utils) {\r\n      const { files } = await builders.utils.generateModule(parseResult.globalUtils);\r\n\r\n      buildResult.push({\r\n        path: this.template.slots.utils.path,\r\n        files,\r\n      });\r\n    }\r\n\r\n    // i18n?\r\n    if (builders.i18n && this.template.slots.i18n) {\r\n      const { files } = await builders.i18n.generateModule(parseResult.project);\r\n\r\n      buildResult.push({\r\n        path: this.template.slots.i18n.path,\r\n        files,\r\n      });\r\n    }\r\n\r\n    // globalStyle\r\n    if (parseResult.project && builders.globalStyle) {\r\n      const { files } = await builders.globalStyle.generateModule(parseResult.project);\r\n\r\n      buildResult.push({\r\n        path: this.template.slots.globalStyle.path,\r\n        files,\r\n      });\r\n    }\r\n\r\n    // htmlEntry\r\n    if (parseResult.project && builders.htmlEntry) {\r\n      const { files } = await builders.htmlEntry.generateModule(parseResult.project);\r\n\r\n      buildResult.push({\r\n        path: this.template.slots.htmlEntry.path,\r\n        files,\r\n      });\r\n    }\r\n\r\n    // packageJSON\r\n    if (parseResult.project && builders.packageJSON) {\r\n      const { files } = await builders.packageJSON.generateModule(parseResult.project);\r\n\r\n      buildResult.push({\r\n        path: this.template.slots.packageJSON.path,\r\n        files,\r\n      });\r\n    }\r\n\r\n    // demo\r\n    if (parseResult.project && builders.demo) {\r\n      const { files } = await builders.demo.generateModule(parseResult.project);\r\n      buildResult.push({\r\n        path: this.template.slots.demo.path,\r\n        files,\r\n      });\r\n    }\r\n\r\n    // handle extra slots\r\n    await this.generateExtraSlots(builders, parseResult, buildResult);\r\n\r\n    // Post Process\r\n    const isSingleComponent = parseResult?.project?.projectRemark?.isSingleComponent;\r\n    // Combine Modules\r\n    console.log('ProjectBuilder-286-Combine Modules:', JSON.stringify(projectRoot))\r\n    buildResult.forEach((moduleInfo) => {\r\n      let targetDir = getDirFromRoot(projectRoot, moduleInfo.path);\r\n      // if project only contain single component, skip creation of directory.\r\n      if (moduleInfo.moduleName && !isSingleComponent) {\r\n        const dir = createResultDir(moduleInfo.moduleName);\r\n        addDirectory(targetDir, dir);\r\n        targetDir = dir;\r\n      }\r\n      moduleInfo.files.forEach((file) => addFile(targetDir, file));\r\n    });\r\n\r\n    // post-processors\r\n    let finalResult = projectRoot;\r\n    for (const projectPostProcessor of this.projectPostProcessors) {\r\n      // eslint-disable-next-line no-await-in-loop\r\n      finalResult = await projectPostProcessor(finalResult, schema, originalSchema, {\r\n        template: this.template,\r\n        parseResult,\r\n      });\r\n    }\r\n\r\n    return finalResult;\r\n  }\r\n\r\n  private createModuleBuilders(extraContextData: Record<string, unknown> = {}):\r\n    Record<string, IModuleBuilder> {\r\n    const builders: Record<string, IModuleBuilder> = {};\r\n\r\n    Object.keys(this.plugins).forEach((pluginName) => {\r\n      if (this.plugins[pluginName].length > 0) {\r\n        const options: { mainFileName?: string } = {};\r\n        if (this.template.slots[pluginName] && this.template.slots[pluginName].fileName) {\r\n          options.mainFileName = this.template.slots[pluginName].fileName;\r\n        }\r\n        builders[pluginName] = createModuleBuilder({\r\n          plugins: this.plugins[pluginName],\r\n          postProcessors: this.postProcessors,\r\n          contextData: {\r\n            // template: this.template,\r\n            inStrictMode: this.inStrictMode,\r\n            tolerateEvalErrors: true,\r\n            evalErrorsHandler: '',\r\n            ...this.extraContextData,\r\n            ...extraContextData,\r\n          },\r\n          ...options,\r\n        });\r\n      }\r\n    });\r\n\r\n    return builders;\r\n  }\r\n\r\n  private async generateExtraSlots(\r\n    builders: Record<string, IModuleBuilder>,\r\n    parseResult: IParseResult,\r\n    buildResult: IModuleInfo[],\r\n  ) {\r\n    for (const slotName in this.template.slots) {\r\n      if (!isBuiltinSlotName(slotName)) {\r\n        const { files } = await builders[slotName].generateModule(parseResult);\r\n        buildResult.push({\r\n          path: this.template.slots[slotName].path,\r\n          files,\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function createProjectBuilder(initOptions: ProjectBuilderInitOptions): IProjectBuilder {\r\n  return new ProjectBuilder(initOptions);\r\n}\r\n\r\nfunction getDirFromRoot(root: ResultDir, path: string[]): ResultDir {\r\n  let current: ResultDir = root;\r\n  path.forEach((p) => {\r\n    const exist = current.dirs.find((d) => d.name === p);\r\n    if (exist) {\r\n      current = exist;\r\n    } else {\r\n      const newDir = createResultDir(p);\r\n      addDirectory(current, newDir);\r\n      current = newDir;\r\n    }\r\n  });\r\n\r\n  return current;\r\n}\r\n", "import * as defaultFs from 'fs';\r\n\r\nimport { ResultDir } from '@alilc/lowcode-types';\r\nimport { PublisherFactory, IPublisher, IPublisherFactoryParams, PublisherError } from '../../types';\r\nimport { getErrorMessage } from '../../utils/errors';\r\nimport { writeFolder, IFileSystem } from './utils';\r\n\r\nexport interface IDiskFactoryParams extends IPublisherFactoryParams {\r\n  outputPath?: string;\r\n  projectSlug?: string;\r\n  createProjectFolder?: boolean;\r\n  fs?: IFileSystem;\r\n}\r\n\r\nexport interface IDiskPublisher extends IPublisher<IDiskFactoryParams, string> {\r\n  getOutputPath: () => string;\r\n  setOutputPath: (path: string) => void;\r\n}\r\n\r\nexport const createDiskPublisher: PublisherFactory<IDiskFactoryParams, IDiskPublisher> = (\r\n  params: IDiskFactoryParams = {},\r\n): IDiskPublisher => {\r\n  let { project, outputPath = './' } = params;\r\n  const { fs = defaultFs } = params;\r\n\r\n  const getProject = (): ResultDir => {\r\n    if (!project) {\r\n      throw new PublisherError('MissingProject');\r\n    }\r\n    return project;\r\n  };\r\n  const setProject = (projectToSet: ResultDir): void => {\r\n    project = projectToSet;\r\n  };\r\n\r\n  const getOutputPath = (): string => {\r\n    return outputPath;\r\n  };\r\n  const setOutputPath = (path: string): void => {\r\n    outputPath = path;\r\n  };\r\n\r\n  const publish = async (options: IDiskFactoryParams = {}) => {\r\n    const projectToPublish = options.project || project;\r\n    if (!projectToPublish) {\r\n      throw new PublisherError('MissingProject');\r\n    }\r\n\r\n    const projectOutputPath = options.outputPath || outputPath;\r\n    const overrideProjectSlug = options.projectSlug || params.projectSlug;\r\n    const createProjectFolder = options.createProjectFolder ?? params.createProjectFolder;\r\n\r\n    if (overrideProjectSlug) {\r\n      projectToPublish.name = overrideProjectSlug;\r\n    }\r\n\r\n    try {\r\n      await writeFolder(projectToPublish, projectOutputPath, createProjectFolder, fs);\r\n      return { success: true, payload: projectOutputPath };\r\n    } catch (error) {\r\n      throw new PublisherError(getErrorMessage(error) || 'UnknownError');\r\n    }\r\n  };\r\n\r\n  return {\r\n    publish,\r\n    getProject,\r\n    setProject,\r\n    getOutputPath,\r\n    setOutputPath,\r\n  };\r\n};\r\n", "import * as systemFs from 'fs';\r\nimport { join } from 'path';\r\nimport { ResultDir, ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport interface IFileSystem {\r\n  existsSync: typeof systemFs.existsSync;\r\n  mkdir: typeof systemFs.mkdir;\r\n  writeFile: typeof systemFs.writeFile;\r\n}\r\n\r\nexport const writeFolder = async (\r\n  folder: ResultDir,\r\n  currentPath: string,\r\n  createProjectFolder = true,\r\n  fs: IFileSystem = systemFs,\r\n): Promise<void> => {\r\n  const { name, files, dirs } = folder;\r\n\r\n  const folderPath = createProjectFolder ? join(currentPath, name) : currentPath;\r\n\r\n  if (!fs.existsSync(folderPath)) {\r\n    await createDirectory(folderPath, fs);\r\n  }\r\n\r\n  const promises = [\r\n    writeFilesToFolder(folderPath, files, fs),\r\n    writeSubFoldersToFolder(folderPath, dirs, fs),\r\n  ];\r\n\r\n  await Promise.all(promises);\r\n};\r\n\r\nconst writeFilesToFolder = async (\r\n  folderPath: string,\r\n  files: ResultFile[],\r\n  fs: IFileSystem,\r\n): Promise<void> => {\r\n  const promises = files.map((file) => {\r\n    const fileName = file.ext ? `${file.name}.${file.ext}` : file.name;\r\n    const filePath = join(folderPath, fileName);\r\n    return writeContentToFile(filePath, file.content, 'utf8', fs);\r\n  });\r\n\r\n  await Promise.all(promises);\r\n};\r\n\r\nconst writeSubFoldersToFolder = async (\r\n  folderPath: string,\r\n  subFolders: ResultDir[],\r\n  fs: IFileSystem,\r\n): Promise<void> => {\r\n  const promises = subFolders.map((subFolder) => {\r\n    return writeFolder(subFolder, folderPath, true, fs);\r\n  });\r\n\r\n  await Promise.all(promises);\r\n};\r\n\r\nconst createDirectory = (pathToDir: string, fs: IFileSystem): Promise<void> => {\r\n  return new Promise((resolve, reject) => {\r\n    fs.mkdir(pathToDir, { recursive: true }, (err) => {\r\n      err ? reject(err) : resolve();\r\n    });\r\n  });\r\n};\r\n\r\nconst writeContentToFile = (\r\n  filePath: string,\r\n  fileContent: string,\r\n  encoding = 'utf8',\r\n  fs: IFileSystem,\r\n): Promise<void> => {\r\n  return new Promise((resolve, reject) => {\r\n    fs.writeFile(filePath, fileContent, { encoding: encoding as BufferEncoding }, (err) => {\r\n      err ? reject(err) : resolve();\r\n    });\r\n  });\r\n};\r\n", "import JSZip from 'jszip';\r\nimport { ResultDir, ResultFile } from '@alilc/lowcode-types';\r\nimport type { ZipBuffer } from './index';\r\n\r\nexport const isNodeProcess = (): boolean => {\r\n  return (\r\n    typeof process === 'object' &&\r\n    typeof process.versions === 'object' &&\r\n    typeof process.versions.node !== 'undefined'\r\n  );\r\n};\r\n\r\nexport const writeZipToDisk = (\r\n  zipFolderPath: string,\r\n  content: ZipBuffer,\r\n  zipName: string,\r\n): void => {\r\n  if (!isNodeProcess()) {\r\n    throw new Error('ZipPublisher: writeZipToDisk is only available in NodeJS');\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\r\n  const fs = require('fs');\r\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\r\n  const path = require('path');\r\n\r\n  if (!fs.existsSync(zipFolderPath)) {\r\n    fs.mkdirSync(zipFolderPath, { recursive: true });\r\n  }\r\n\r\n  const zipPath = path.join(zipFolderPath, `${zipName}.zip`);\r\n\r\n  const writeStream = fs.createWriteStream(zipPath);\r\n  writeStream.write(content);\r\n  writeStream.end();\r\n};\r\n\r\nexport const generateProjectZip = async (project: ResultDir): Promise<ZipBuffer> => {\r\n  let zip = new JSZip();\r\n  zip = writeFolderToZip(project, zip, true);\r\n  const zipType = isNodeProcess() ? 'nodebuffer' : 'blob';\r\n  console.log('44 zip utils zipType: ', zipType);\r\n  \r\n  return zip.generateAsync({ type: zipType });\r\n};\r\n\r\nconst writeFolderToZip = (folder: ResultDir, parentFolder: JSZip, ignoreFolder = false) => {\r\n  const zipFolder = ignoreFolder ? parentFolder : parentFolder.folder(folder.name);\r\n  if (zipFolder !== null) {\r\n    folder.files.forEach((file: ResultFile) => {\r\n      // const options = file.contentEncoding === 'base64' ? { base64: true } : {};\r\n      const options = {};\r\n      const fileName = file.ext ? `${file.name}.${file.ext}` : file.name;\r\n      zipFolder.file(fileName, file.content, options);\r\n    });\r\n\r\n    folder.dirs.forEach((subFolder: ResultDir) => {\r\n      writeFolderToZip(subFolder, zipFolder);\r\n    });\r\n  }\r\n\r\n  return parentFolder;\r\n};\r\n", "import { ResultDir } from '@alilc/lowcode-types';\r\nimport { PublisherFactory, IPublisher, IPublisherFactoryParams, PublisherError } from '../../types';\r\nimport { getErrorMessage } from '../../utils/errors';\r\nimport { isNodeProcess, writeZipToDisk, generateProjectZip } from './utils';\r\nimport { saveAs } from 'file-saver';\r\n\r\nexport type ZipBuffer = Buffer | Blob;\r\n\r\ndeclare type ZipPublisherResponse = string | ZipBuffer;\r\n\r\nexport interface ZipFactoryParams extends IPublisherFactoryParams {\r\n  outputPath?: string;\r\n  projectSlug?: string;\r\n}\r\n\r\nexport interface ZipPublisher extends IPublisher<ZipFactoryParams, ZipPublisherResponse> {\r\n  getOutputPath: () => string | undefined;\r\n  setOutputPath: (path: string) => void;\r\n}\r\n\r\nexport const createZipPublisher: PublisherFactory<ZipFactoryParams, ZipPublisher> = (\r\n  params: ZipFactoryParams = {},\r\n): ZipPublisher => {\r\n  let { project, outputPath } = params;\r\n\r\n  const getProject = () => project;\r\n  const setProject = (projectToSet: ResultDir) => {\r\n    project = projectToSet;\r\n  };\r\n\r\n  const getOutputPath = () => outputPath;\r\n  const setOutputPath = (path: string) => {\r\n    outputPath = path;\r\n  };\r\n\r\n  const publish = async (options: ZipFactoryParams = {}) => {\r\n    const projectToPublish = options.project || project;\r\n    if (!projectToPublish) {\r\n      throw new PublisherError('MissingProject');\r\n    }\r\n\r\n    const zipName = options.projectSlug || params.projectSlug || projectToPublish.name;\r\n\r\n    try {\r\n      console.log('45 lowcode projectToPublish: ', projectToPublish);\r\n      const zipContent = await generateProjectZip(projectToPublish);\r\n      console.log('46 lowcode zipContent: ', zipContent);\r\n      console.log('47 lowcode isNodeProcess: ', isNodeProcess());\r\n      \r\n      if (isNodeProcess()) {\r\n        // If not output path is provided on the node side, zip is not written to disk\r\n        const projectOutputPath = options.outputPath || outputPath;\r\n        if (projectOutputPath) {\r\n          await writeZipToDisk(projectOutputPath, zipContent, zipName);\r\n        }\r\n      } else {\r\n        // the browser end does not require a path\r\n        // auto download zip files\r\n        saveAs(zipContent as Blob, `${zipName}.zip`);\r\n      }\r\n\r\n      return { success: true, payload: zipContent };\r\n    } catch (error) {\r\n      throw new PublisherError(getErrorMessage(error) || 'UnknownError');\r\n    }\r\n  };\r\n\r\n  return {\r\n    publish,\r\n    getProject,\r\n    setProject,\r\n    getOutputPath,\r\n    setOutputPath,\r\n  };\r\n};\r\n", "import { flatMap, camelCase, get } from 'lodash';\r\nimport { COMMON_CHUNK_NAME } from '../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  CodeGeneratorError,\r\n  DependencyType,\r\n  FileType,\r\n  ICodeChunk,\r\n  ICodeStruct,\r\n  IDependency,\r\n  IExternalDependency,\r\n  IInternalDependency,\r\n  IWithDependency,\r\n} from '../../types';\r\n\r\nimport { isValidIdentifier } from '../../utils/validate';\r\n\r\n// TODO: main \u8FD9\u4E2A\u4FE1\u606F\u5230\u5E95\u600E\u4E48\u7528\uFF0C\u662F\u4E0D\u662F\u5916\u90E8\u5305\u4E0D\u9700\u8981\u4F7F\u7528\uFF1F\r\nconst DEP_MAIN_BLOCKLIST = ['lib', 'lib/index', 'es', 'es/index', 'main'];\r\nconst DEFAULT_EXPORT_NAME = '__default__';\r\n\r\nfunction groupDepsByPack(deps: IDependency[]): Record<string, IDependency[]> {\r\n  const depMap: Record<string, IDependency[]> = {};\r\n\r\n  const addDep = (pkg: string, dep: IDependency) => {\r\n    if (!depMap[pkg]) {\r\n      depMap[pkg] = [];\r\n    }\r\n    depMap[pkg].push(dep);\r\n  };\r\n\r\n  deps.forEach((dep) => {\r\n    if (dep.dependencyType === DependencyType.Internal) {\r\n      addDep(`${(dep as IInternalDependency).moduleName}${dep.main ? `/${dep.main}` : ''}`, dep);\r\n    } else {\r\n      let depMain = '';\r\n      // TODO: \u90E8\u5206\u7C7B\u578B\u7684 main \u6682\u65F6\u8BA4\u4E3A\u6CA1\u7528\r\n      if (dep.main && DEP_MAIN_BLOCKLIST.indexOf(dep.main) < 0) {\r\n        depMain = dep.main;\r\n      }\r\n      if (depMain.substring(0, 1) === '/') {\r\n        depMain = depMain.substring(1);\r\n      }\r\n      addDep(`${(dep as IExternalDependency).package}${depMain ? `/${depMain}` : ''}`, dep);\r\n    }\r\n  });\r\n\r\n  return depMap;\r\n}\r\n\r\ninterface IDependencyItem {\r\n  exportName: string;\r\n  aliasName?: string;\r\n  isDefault?: boolean;\r\n  subName?: string;\r\n  nodeIdentifier?: string; // \u4E0E\u4F7F\u7528\u5904\u7684\u6620\u5C04\u5173\u7CFB\uFF0C\u7406\u8BBA\u4E0A\u662F\u4E0D\u53EF\u53D8\u66F4\u7684\uFF0C\u5982\u9700\u53D8\u66F4\u9700\u8981\u63D0\u4F9B\u989D\u5916\u4FE1\u606F\r\n  source: IDependency;\r\n}\r\n\r\ninterface IExportItem {\r\n  exportName: string;\r\n  aliasNames: string[];\r\n  isDefault?: boolean;\r\n  needOriginExport: boolean;\r\n}\r\n\r\nfunction getDependencyIdentifier(info: IDependencyItem): string {\r\n  return info.aliasName || info.exportName;\r\n}\r\n\r\nfunction getExportNameOfDep(dep: IDependency): string {\r\n  if (dep.destructuring) {\r\n    return (\r\n      dep.exportName ||\r\n      dep.componentName ||\r\n      throwNewError('destructuring dependency must have exportName or componentName')\r\n    );\r\n  }\r\n\r\n  if (!dep.subName) {\r\n    return (\r\n      dep.componentName ||\r\n      dep.exportName ||\r\n      throwNewError('dependency item must have componentName or exportName')\r\n    );\r\n  }\r\n\r\n  return (\r\n    dep.exportName ||\r\n    `__$${camelCase(\r\n      get(dep, 'moduleName') ||\r\n        get(dep, 'package') ||\r\n        throwNewError('dep.moduleName or dep.package is undefined'),\r\n    )}_default`\r\n  );\r\n}\r\n\r\nfunction throwNewError(msg: string): never {\r\n  throw new Error(msg);\r\n}\r\n\r\nfunction buildPackageImport(\r\n  pkg: string,\r\n  deps: IDependency[],\r\n  targetFileType: string,\r\n  useAliasName: boolean,\r\n): ICodeChunk[] {\r\n  // \u5982\u679C\u538B\u6839\u6CA1\u6709\u5305\uFF0C\u5219\u4E0D\u751F\u6210\u5BF9\u5E94\u7684 import \u8BED\u53E5\uFF08\u751F\u6210\u4E86\u6CA1\u6709\u4EFB\u4F55\u610F\u4E49\uFF09\r\n  if (!pkg || pkg === 'undefined' || pkg === 'null') {\r\n    // TODO: \u8981\u4E0D\u8981\u52A0\u4E2A warning\uFF1F\r\n    return [];\r\n  }\r\n\r\n  const chunks: ICodeChunk[] = [];\r\n\r\n  const exportItems: Record<string, IExportItem> = {};\r\n  const defaultExportNames: string[] = [];\r\n\r\n  const depsInfo: IDependencyItem[] = deps.map((dep) => {\r\n    const info: IDependencyItem = {\r\n      exportName: getExportNameOfDep(dep),\r\n      isDefault: !dep.destructuring,\r\n      subName: dep.subName || undefined,\r\n      nodeIdentifier: dep.componentName || undefined,\r\n      source: dep,\r\n    };\r\n\r\n    // \u4E0B\u9762 5 \u4E2A\u903B\u8F91\u662F\u6E05\u7406\u4E0D\u5FC5\u8981\u7684\u5197\u4F59\u4FE1\u606F\uFF0C\u505A\u5230\u6570\u636E\u7ED3\u6784\u5F52\u4E00\u5316\r\n    if (info.isDefault) {\r\n      if (defaultExportNames.indexOf(info.exportName) < 0) {\r\n        defaultExportNames.push(info.exportName);\r\n      }\r\n    }\r\n\r\n    if (!info.subName) {\r\n      if (info.nodeIdentifier === info.exportName) {\r\n        info.nodeIdentifier = undefined;\r\n      }\r\n\r\n      if (info.isDefault) {\r\n        info.aliasName = info.nodeIdentifier || info.exportName;\r\n        info.exportName = DEFAULT_EXPORT_NAME;\r\n      }\r\n\r\n      if (info.nodeIdentifier) {\r\n        info.aliasName = info.nodeIdentifier;\r\n        info.nodeIdentifier = undefined;\r\n      }\r\n    } else {\r\n      if (info.isDefault) {\r\n        info.aliasName = info.exportName;\r\n        info.exportName = DEFAULT_EXPORT_NAME;\r\n      }\r\n\r\n      if (info.nodeIdentifier === `${info.exportName}.${info.subName}`) {\r\n        info.nodeIdentifier = undefined;\r\n      }\r\n    }\r\n\r\n    return info;\r\n  });\r\n\r\n  // \u5EFA\u7ACB export \u9879\u76EE\u7684\u5217\u8868\r\n  depsInfo.forEach((info) => {\r\n    if (!exportItems[info.exportName]) {\r\n      exportItems[info.exportName] = {\r\n        exportName: info.exportName,\r\n        isDefault: info.isDefault,\r\n        aliasNames: [],\r\n        needOriginExport: false,\r\n      };\r\n    }\r\n\r\n    if (!info.nodeIdentifier && !info.aliasName) {\r\n      exportItems[info.exportName].needOriginExport = true;\r\n    }\r\n  });\r\n\r\n  // \u5EFA\u7ACB\u522B\u540D\u5B57\u5178\r\n  depsInfo.forEach((info) => {\r\n    if (info.aliasName) {\r\n      const { aliasNames } = exportItems[info.exportName];\r\n      if (aliasNames.indexOf(info.aliasName) < 0) {\r\n        aliasNames.push(info.aliasName);\r\n      }\r\n    }\r\n  });\r\n\r\n  // fix: \u7236\u7EC4\u4EF6ImportAliasDefine, \u4E0E\u5B50\u7EC4\u4EF6import\u7684\u7236\u7EC4\u4EF6\u51B2\u7A81\u60C5\u51B5\r\n  depsInfo.forEach((info) => {\r\n    if (info.nodeIdentifier) {\r\n      const exportItem = exportItems[info.exportName];\r\n      if (!exportItem.needOriginExport && exportItem.aliasNames.length > 0) {\r\n        // eslint-disable-next-line no-param-reassign\r\n        info.aliasName = exportItem.aliasNames[0];\r\n      }\r\n    }\r\n  });\r\n\r\n  // \u53D1\u73B0 nodeIdentifier \u4E0E exportName \u6216\u8005 aliasName \u51B2\u7A81\u7684\u573A\u666F\r\n  const nodeIdentifiers = depsInfo.map((info) => info.nodeIdentifier).filter(Boolean);\r\n  const conflictInfos = flatMap(Object.keys(exportItems), (exportName) => {\r\n    const exportItem = exportItems[exportName];\r\n    const usedNames = [\r\n      ...exportItem.aliasNames,\r\n      ...(exportItem.needOriginExport || exportItem.aliasNames.length <= 0 ? [exportName] : []),\r\n    ];\r\n    const conflictNames = usedNames.filter((n) => nodeIdentifiers.indexOf(n) >= 0);\r\n    if (conflictNames.length > 0) {\r\n      return [\r\n        ...(conflictNames.indexOf(exportName) >= 0 ? [[exportName, true, exportItem]] : []),\r\n        ...conflictNames.filter((n) => n !== exportName).map((n) => [n, false, exportItem]),\r\n      ];\r\n    }\r\n    return [];\r\n  });\r\n\r\n  const conflictExports = conflictInfos.filter((c) => c[1]).map((c) => c[0] as string);\r\n  const conflictAlias = conflictInfos.filter((c) => !c[1]).map((c) => c[0] as string);\r\n\r\n  const solutions: Record<string, string> = {};\r\n\r\n  depsInfo.forEach((info) => {\r\n    if (info.aliasName && conflictAlias.indexOf(info.aliasName) >= 0) {\r\n      // find solution\r\n      let solution = solutions[info.aliasName];\r\n      if (!solution) {\r\n        solution = `${info.aliasName}Alias`;\r\n        const conflictItem = (conflictInfos.find((c) => c[0] === info.aliasName) ||\r\n          [])[2] as IExportItem;\r\n        conflictItem.aliasNames = conflictItem.aliasNames.filter((a) => a !== info.aliasName);\r\n        conflictItem.aliasNames.push(solution);\r\n        solutions[info.aliasName] = solution;\r\n      }\r\n      // eslint-disable-next-line no-param-reassign\r\n      info.aliasName = solution;\r\n    }\r\n\r\n    if (conflictExports.indexOf(info.exportName) >= 0) {\r\n      // find solution\r\n      let solution = solutions[info.exportName];\r\n      if (!solution) {\r\n        solution = `${info.exportName}Export`;\r\n        const conflictItem = (conflictInfos.find((c) => c[0] === info.exportName) ||\r\n          [])[2] as IExportItem;\r\n        conflictItem.aliasNames.push(solution);\r\n        conflictItem.needOriginExport = false;\r\n        solutions[info.exportName] = solution;\r\n      }\r\n      // eslint-disable-next-line no-param-reassign\r\n      info.aliasName = solution;\r\n    }\r\n  });\r\n\r\n  // \u5224\u65AD\u662F\u5426\u6240\u6709\u4F9D\u8D56\u90FD\u6709\u5408\u6CD5\u7684 Identifier\r\n  depsInfo.forEach((info) => {\r\n    const name = info.aliasName || info.exportName;\r\n    if (!isValidIdentifier(name)) {\r\n      throw new CodeGeneratorError(`Invalid Identifier [${name}]`);\r\n    }\r\n    if (info.nodeIdentifier && !isValidIdentifier(info.nodeIdentifier)) {\r\n      throw new CodeGeneratorError(`Invalid Identifier [${info.nodeIdentifier}]`);\r\n    }\r\n  });\r\n\r\n  const aliasDefineStatements: Record<string, string> = {};\r\n  if (useAliasName) {\r\n    Object.keys(exportItems).forEach((exportName) => {\r\n      const aliasList = exportItems[exportName]?.aliasNames || [];\r\n      if (aliasList.length > 0) {\r\n        const srcName = exportItems[exportName].needOriginExport ? exportName : aliasList[0];\r\n        const aliasNameList = exportItems[exportName].needOriginExport\r\n          ? aliasList\r\n          : aliasList.slice(1);\r\n        aliasNameList.forEach((a) => {\r\n          if (!aliasDefineStatements[a]) {\r\n            aliasDefineStatements[a] = `const ${a} = ${srcName};`;\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  function getDefaultExportName(info: IDependencyItem): string {\r\n    if (info.isDefault) {\r\n      return defaultExportNames[0];\r\n    }\r\n    return info.exportName;\r\n  }\r\n\r\n  depsInfo.forEach((info) => {\r\n    // \u5982\u679C\u662F\u5B50\u7EC4\u4EF6\uFF0C\u5219\u5BFC\u51FA\u7236\u7EC4\u4EF6\uFF0C\u5E76\u4E14\u6839\u636E\u81EA\u7EC4\u4EF6\u547D\u540D\u89C4\u5219\uFF0C\u5224\u65AD\u662F\u5426\u9700\u8981\u5B9A\u4E49\u6807\u8BC6\u7B26\r\n    if (info.nodeIdentifier) {\r\n      // \u524D\u63D0\uFF0C\u5B58\u5728 nodeIdentifier \u4E00\u5B9A\u662F\u6709 subName \u7684\uFF0C\u4E0D\u7136\u524D\u9762\u4F1A\u4F18\u5316\u6389\r\n      const ownerName = getDependencyIdentifier(info);\r\n\r\n      chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: targetFileType,\r\n        name: COMMON_CHUNK_NAME.ImportAliasDefine,\r\n        content: useAliasName ? `const ${info.nodeIdentifier} = ${ownerName}.${info.subName};` : '',\r\n        linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport, COMMON_CHUNK_NAME.InternalDepsImport],\r\n        ext: {\r\n          originalName: `${getDefaultExportName(info)}.${info.subName}`,\r\n          aliasName: info.nodeIdentifier,\r\n          dependency: info.source,\r\n        },\r\n      });\r\n    } else if (info.aliasName) {\r\n      // default \u65B9\u5F0F\u7684\u5BFC\u5165\u4F1A\u751F\u6210\u5355\u72ECde import \u8BED\u53E5\uFF0C\u65E0\u9700\u751F\u6210\u8D4B\u503C\u8BED\u53E5\r\n      if (info.isDefault && defaultExportNames.find((n) => n === info.aliasName)) {\r\n        delete aliasDefineStatements[info.aliasName];\r\n        return;\r\n      }\r\n\r\n      let contentStatement = '';\r\n      if (aliasDefineStatements[info.aliasName]) {\r\n        contentStatement = aliasDefineStatements[info.aliasName];\r\n        delete aliasDefineStatements[info.aliasName];\r\n      }\r\n\r\n      chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: targetFileType,\r\n        name: COMMON_CHUNK_NAME.ImportAliasDefine,\r\n        content: contentStatement,\r\n        linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport, COMMON_CHUNK_NAME.InternalDepsImport],\r\n        ext: {\r\n          originalName: getDefaultExportName(info),\r\n          aliasName: info.aliasName,\r\n          dependency: info.source,\r\n        },\r\n      });\r\n    }\r\n  });\r\n\r\n  // \u53EF\u80FD\u4F1A\u5269\u4F59\u4E00\u4E9B\u5B58\u5728\u4E8C\u6B21\u8F6C\u6362\u7684\u5B9A\u4E49\r\n  Object.keys(aliasDefineStatements).forEach((a) => {\r\n    chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: targetFileType,\r\n      name: COMMON_CHUNK_NAME.ImportAliasDefine,\r\n      content: aliasDefineStatements[a],\r\n      linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport, COMMON_CHUNK_NAME.InternalDepsImport],\r\n    });\r\n  });\r\n\r\n  const exportItemList = Object.keys(exportItems).map((k) => exportItems[k]);\r\n  const defaultExport = exportItemList.filter((item) => item.isDefault);\r\n  const otherExports = exportItemList.filter((item) => !item.isDefault);\r\n\r\n  const statementL = ['import'];\r\n  if (defaultExport.length > 0) {\r\n    if (useAliasName) {\r\n      statementL.push(defaultExportNames[0]);\r\n    } else {\r\n      statementL.push(defaultExport[0].aliasNames[0]);\r\n    }\r\n    if (otherExports.length > 0) {\r\n      statementL.push(', ');\r\n    }\r\n  }\r\n  if (otherExports.length > 0) {\r\n    const items = otherExports.map((item) => {\r\n      return !useAliasName || item.needOriginExport || item.aliasNames.length <= 0\r\n        ? item.exportName\r\n        : `${item.exportName} as ${item.aliasNames[0]}`;\r\n    });\r\n    statementL.push(`{ ${items.join(', ')} }`);\r\n  }\r\n  statementL.push('from');\r\n\r\n  const getInternalDependencyModuleId = () => `@/${(deps[0] as IInternalDependency).type}/${pkg}`;\r\n\r\n  if (deps[0].dependencyType === DependencyType.Internal) {\r\n    // TODO: Internal Deps path use project slot setting\r\n    statementL.push(`'${getInternalDependencyModuleId()}';`);\r\n    chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: targetFileType,\r\n      name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n      content: statementL.join(' '),\r\n      linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n    });\r\n  } else {\r\n    statementL.push(`'${pkg}';`);\r\n    chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: targetFileType,\r\n      name: COMMON_CHUNK_NAME.ExternalDepsImport,\r\n      content: statementL.join(' '),\r\n      linkAfter: [],\r\n    });\r\n  }\r\n\r\n  // \u5904\u7406\u4E0B\u4E00\u4E9B\u989D\u5916\u7684 default \u65B9\u5F0F\u7684\u5BFC\u5165\r\n  if (defaultExportNames.length > 1) {\r\n    if (deps[0].dependencyType === DependencyType.Internal) {\r\n      defaultExportNames.slice(1).forEach((exportName) => {\r\n        chunks.push({\r\n          type: ChunkType.STRING,\r\n          fileType: targetFileType,\r\n          name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n          content: `import ${exportName} from '${getInternalDependencyModuleId()}';`,\r\n          linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n        });\r\n      });\r\n    } else {\r\n      defaultExportNames.slice(1).forEach((exportName) => {\r\n        chunks.push({\r\n          type: ChunkType.STRING,\r\n          fileType: targetFileType,\r\n          name: COMMON_CHUNK_NAME.ExternalDepsImport,\r\n          content: `import ${exportName} from '${pkg}';`,\r\n          linkAfter: [],\r\n        });\r\n\r\n        chunks.push({\r\n          type: ChunkType.STRING,\r\n          fileType: targetFileType,\r\n          name: COMMON_CHUNK_NAME.ImportAliasDefine,\r\n          content: '',\r\n          linkAfter: [],\r\n          ext: {\r\n            aliasName: exportName,\r\n            originalName: exportName,\r\n            dependency: {\r\n              package: pkg,\r\n              componentName: exportName,\r\n            },\r\n          },\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  return chunks;\r\n}\r\n\r\nexport interface PluginConfig {\r\n  fileType?: string; // \u5BFC\u51FA\u7684\u6587\u4EF6\u7C7B\u578B\r\n  useAliasName?: boolean; // \u662F\u5426\u4F7F\u7528 componentName \u91CD\u547D\u540D\u7EC4\u4EF6 identifier\r\n  filter?: (deps: IDependency[]) => IDependency[]; // \u652F\u6301\u8FC7\u6EE4\u80FD\u529B\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?: PluginConfig) => {\r\n  const cfg = {\r\n    fileType: FileType.JS,\r\n    useAliasName: true,\r\n    ...(config || {}),\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IWithDependency;\r\n\r\n    if (ir && ir.deps && ir.deps.length > 0) {\r\n      const deps = cfg.filter ? cfg.filter(ir.deps) : ir.deps;\r\n      const packs = groupDepsByPack(deps);\r\n\r\n      Object.keys(packs).forEach((pkg) => {\r\n        const chunks = buildPackageImport(pkg, packs[pkg], cfg.fileType, cfg.useAliasName);\r\n        next.chunks.push(...chunks);\r\n      });\r\n    }\r\n\r\n    return next;\r\n  };\r\n\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import changeCase from 'change-case';\r\nimport {\r\n  FileType,\r\n  BuilderComponentPluginFactory,\r\n  BuilderComponentPlugin,\r\n  ICodeStruct,\r\n  IWithDependency,\r\n  ChunkType,\r\n} from '../../types';\r\n\r\nimport { COMMON_CHUNK_NAME } from '../../const/generator';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IWithDependency;\r\n    const { chunks } = next;\r\n\r\n    if (ir && ir.deps && ir.deps.length > 0) {\r\n      let lowcodeMaterialsStyleAdded = false;\r\n      let fusionUIStyleAdded = false;\r\n      let nextStyleAddedMap: Record<string, boolean> = {};\r\n      ir.deps.forEach((dep: any) => {\r\n        if (dep.package === '@alifd/next' && !nextStyleAddedMap[dep.exportName]) {\r\n          chunks.push({\r\n            type: ChunkType.STRING,\r\n            fileType: FileType.JSX,\r\n            name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n            content: `import '@alifd/next/lib/${changeCase.paramCase(dep.exportName)}/style';`,\r\n            linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n          });\r\n          nextStyleAddedMap[dep.exportName] = true;\r\n        } else if (dep.package === '@alilc/lowcode-materials' && !lowcodeMaterialsStyleAdded) {\r\n          chunks.push({\r\n            type: ChunkType.STRING,\r\n            fileType: FileType.JSX,\r\n            name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n            content: 'import \\'@alilc/lowcode-materials/lib/style\\';',\r\n            linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n          });\r\n          lowcodeMaterialsStyleAdded = true;\r\n        } else if (dep.package === '@alifd/fusion-ui' && !fusionUIStyleAdded) {\r\n          chunks.push({\r\n            type: ChunkType.STRING,\r\n            fileType: FileType.JSX,\r\n            name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n            content: 'import \\'@alifd/fusion-ui/lib/style\\';',\r\n            linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n          });\r\n          fusionUIStyleAdded = true;\r\n        }\r\n      });\r\n    }\r\n\r\n    return next;\r\n  };\r\n\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import changeCase from 'change-case';\r\nimport {\r\n  COMMON_CHUNK_NAME,\r\n  CLASS_DEFINE_CHUNK_NAME,\r\n  DEFAULT_LINK_AFTER,\r\n} from '../../../const/generator';\r\nimport { REACT_CHUNK_NAME } from './const';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n} from '../../../types';\r\nimport { ensureValidClassName } from '../../../utils/validate';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n\r\n    // \u5C06\u6A21\u5757\u540D\u8F6C\u6362\u6210 PascalCase \u7684\u683C\u5F0F\uFF0C\u5E76\u6DFB\u52A0\u7279\u5B9A\u540E\u7F00\uFF0C\u9632\u6B62\u547D\u540D\u51B2\u7A81\r\n    const componentClassName = ensureValidClassName(\r\n      `${changeCase.pascalCase(ir.moduleName)}$$${ir.containerType}`,\r\n    );\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: CLASS_DEFINE_CHUNK_NAME.Start,\r\n      content: `class ${componentClassName} extends React.Component {`,\r\n      linkAfter: [\r\n        COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        COMMON_CHUNK_NAME.InternalDepsImport,\r\n        COMMON_CHUNK_NAME.ImportAliasDefine,\r\n        COMMON_CHUNK_NAME.FileVarDefine,\r\n        COMMON_CHUNK_NAME.FileUtilDefine,\r\n      ],\r\n    });\r\n\r\n    if (ir.containerType === 'Component') {\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: FileType.JSX,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n        content: `static displayName = '${ir.moduleName}';`,\r\n        linkAfter: [\r\n          CLASS_DEFINE_CHUNK_NAME.Start,\r\n        ],\r\n      });\r\n    }\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: CLASS_DEFINE_CHUNK_NAME.End,\r\n      content: '}',\r\n      linkAfter: [\r\n        ...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.End],\r\n        REACT_CHUNK_NAME.ClassRenderEnd,\r\n        REACT_CHUNK_NAME.ClassDidMountEnd,\r\n      ],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: CLASS_DEFINE_CHUNK_NAME.ConstructorStart,\r\n      content: 'constructor(props, context) { super(props); ',\r\n      linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.ConstructorStart]],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: CLASS_DEFINE_CHUNK_NAME.ConstructorEnd,\r\n      content: '}',\r\n      linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.ConstructorEnd]],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: REACT_CHUNK_NAME.ClassDidMountStart,\r\n      content: 'componentDidMount() {',\r\n      linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.End]],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: REACT_CHUNK_NAME.ClassDidMountEnd,\r\n      content: '}',\r\n      linkAfter: [REACT_CHUNK_NAME.ClassDidMountContent, REACT_CHUNK_NAME.ClassDidMountStart],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: REACT_CHUNK_NAME.ClassRenderStart,\r\n      content: 'render() {',\r\n      linkAfter: [\r\n        ...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.End],\r\n        REACT_CHUNK_NAME.ClassDidMountEnd,\r\n      ],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: REACT_CHUNK_NAME.ClassRenderEnd,\r\n      content: '}',\r\n      linkAfter: [\r\n        REACT_CHUNK_NAME.ClassRenderStart,\r\n        REACT_CHUNK_NAME.ClassRenderPre,\r\n        REACT_CHUNK_NAME.ClassRenderJSX,\r\n      ],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: COMMON_CHUNK_NAME.FileExport,\r\n      content: `export default ${componentClassName};`,\r\n      linkAfter: [\r\n        COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        COMMON_CHUNK_NAME.InternalDepsImport,\r\n        COMMON_CHUNK_NAME.ImportAliasDefine,\r\n        COMMON_CHUNK_NAME.FileVarDefine,\r\n        COMMON_CHUNK_NAME.FileUtilDefine,\r\n        CLASS_DEFINE_CHUNK_NAME.End,\r\n      ],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "export const REACT_CHUNK_NAME = {\r\n  ClassRenderStart: 'ReactComponentClassRenderStart',\r\n  ClassRenderPre: 'ReactComponentClassRenderPre',\r\n  ClassRenderEnd: 'ReactComponentClassRenderEnd',\r\n  ClassRenderJSX: 'ReactComponentClassRenderJSX',\r\n  ClassDidMountStart: 'ReactComponentClassDidMountStart',\r\n  ClassDidMountEnd: 'ReactComponentClassDidMountEnd',\r\n  ClassDidMountContent: 'ReactComponentClassDidMountContent',\r\n};\r\n", "import {\r\n  IPublicTypeCompositeArray,\r\n  IPublicTypeCompositeValue,\r\n  IPublicTypeCompositeObject,\r\n  IPublicTypeJSFunction,\r\n  IPublicTypeJSExpression,\r\n  isJSExpression,\r\n  isJSFunction,\r\n  isJSSlot,\r\n  IPublicTypeJSSlot,\r\n} from '@alilc/lowcode-types';\r\nimport _ from 'lodash';\r\n\r\nimport { IScope, CompositeValueGeneratorOptions, CodeGeneratorError } from '../types';\r\nimport { generateExpression, generateFunction } from './jsExpression';\r\nimport { generateJsSlot } from './jsSlot';\r\nimport { executeFunctionStack } from './aopHelper';\r\nimport { parseExpressionGetKeywords } from './expressionParser';\r\nimport { isJSExpressionFn } from './common';\r\n\r\ninterface ILegaoVariable {\r\n  type: 'variable';\r\n  value: string;\r\n  variable: string;\r\n}\r\n\r\nfunction isVariable(v: any): v is ILegaoVariable {\r\n  if (_.isObject(v) && (v as ILegaoVariable).type === 'variable') {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\ninterface DataSource {\r\n  type: 'DataSource';\r\n  id: string;\r\n}\r\n\r\n/**\r\n * \u5224\u65AD\u662F\u5426\u662F\u6570\u636E\u6E90\u7C7B\u578B\r\n */\r\nfunction isDataSource(v: unknown): v is DataSource {\r\n  return typeof v === 'object' && v != null && (v as Partial<DataSource>).type === 'DataSource';\r\n}\r\n\r\nfunction generateArray(\r\n  value: IPublicTypeCompositeArray,\r\n  scope: IScope,\r\n  options: CompositeValueGeneratorOptions = {},\r\n): string {\r\n  const body = value.map((v) => generateUnknownType(v, scope, options)).join(',');\r\n  return `[${body}]`;\r\n}\r\n\r\nfunction generateObject(\r\n  value: IPublicTypeCompositeObject,\r\n  scope: IScope,\r\n  options: CompositeValueGeneratorOptions = {},\r\n): string {\r\n  if (value.type === 'i18n') {\r\n    // params \u53EF\u80FD\u4F1A\u7ED1\u5B9A\u53D8\u91CF\uFF0C\u8FD9\u91CC\u9700\u8981\u5904\u7406\u4E0B\r\n    if (value.params && typeof value.params === 'object') {\r\n      return `this._i18nText(${generateUnknownType(_.omit(value, 'type'), scope, options)})`;\r\n    }\r\n    return `this._i18nText(${JSON.stringify(_.omit(value, 'type'))})`; // TODO: \u4F18\u5316\uFF1A\u8FD9\u91CC\u53EF\u4EE5\u8003\u8651\u63D0\u53D6\u6210\u4E2A\u5E38\u91CF...\r\n  }\r\n\r\n  const body = Object.keys(value)\r\n    .map((key) => {\r\n      const propName = JSON.stringify(key);\r\n      const v = generateUnknownType(value[key], scope, options);\r\n      return `${propName}: ${v}`;\r\n    })\r\n    .join(',\\n');\r\n\r\n  return `{${body}}`;\r\n}\r\n\r\nfunction generateString(value: string): string {\r\n  // \u6709\u7684\u5B57\u7B26\u4E32\u91CC\u9762\u4F1A\u6709\u7279\u6B8A\u5B57\u7B26\uFF0C\u6BD4\u5982\u6362\u884C\u6216\u5F15\u53F7\u4E4B\u7C7B\u7684\uFF0C\u8FD9\u91CC\u6211\u4EEC\u501F\u52A9 JSON \u7684\u5B57\u7B26\u4E32\u8F6C\u4E49\u529F\u80FD\u6765\u505A\u4E0B\u8F6C\u4E49\u5E76\u52A0\u4E0A\u53CC\u5F15\u53F7\r\n  return JSON.stringify(value);\r\n}\r\n\r\nfunction generateNumber(value: number): string {\r\n  return String(value);\r\n}\r\n\r\nfunction generateBool(value: boolean): string {\r\n  return value ? 'true' : 'false';\r\n}\r\n\r\nfunction genFunction(value: IPublicTypeJSFunction): string {\r\n  const globalVars = parseExpressionGetKeywords(value.value);\r\n\r\n  if (globalVars.includes('arguments')) {\r\n    return generateFunction(value, { isBindExpr: true });\r\n  }\r\n\r\n  return generateFunction(value, { isArrow: true });\r\n}\r\n\r\nfunction genJsSlot(value: IPublicTypeJSSlot, scope: IScope, options: CompositeValueGeneratorOptions = {}) {\r\n  if (options.nodeGenerator) {\r\n    return generateJsSlot(value, scope, options.nodeGenerator);\r\n  }\r\n  return '';\r\n}\r\n\r\nfunction generateUnknownType(\r\n  value: IPublicTypeCompositeValue,\r\n  scope: IScope,\r\n  options: CompositeValueGeneratorOptions = {},\r\n): string {\r\n  if (_.isUndefined(value)) {\r\n    return 'undefined';\r\n  }\r\n\r\n  if (_.isNull(value)) {\r\n    return 'null';\r\n  }\r\n\r\n  if (_.isArray(value)) {\r\n    if (options.handlers?.array) {\r\n      return executeFunctionStack(value, scope, options.handlers.array, generateArray, options);\r\n    }\r\n    return generateArray(value, scope, options);\r\n  }\r\n\r\n  // FIXME: \u8FD9\u4E2A\u662F\u4E34\u65F6\u65B9\u6848\r\n  // \u5728\u9047\u5230 type variable \u79C1\u6709\u7C7B\u578B\u65F6\uFF0C\u8F6C\u6362\u4E3A JSExpression\r\n  if (isVariable(value)) {\r\n    const transValue: IPublicTypeJSExpression = {\r\n      type: 'JSExpression',\r\n      value: value.variable,\r\n    };\r\n\r\n    if (options.handlers?.expression) {\r\n      const expression = executeFunctionStack(\r\n        transValue,\r\n        scope,\r\n        options.handlers.expression,\r\n        generateExpression,\r\n        options,\r\n      );\r\n      return expression || 'undefined';\r\n    }\r\n    return generateExpression(transValue, scope);\r\n  }\r\n\r\n  if (isJSExpression(value)) {\r\n    if (options.handlers?.expression) {\r\n      return executeFunctionStack(\r\n        value,\r\n        scope,\r\n        options.handlers.expression,\r\n        generateExpression,\r\n        options,\r\n      );\r\n    }\r\n    return generateExpression(value, scope);\r\n  }\r\n\r\n  if (isJSFunction(value) || isJSExpressionFn(value)) {\r\n    if (options.handlers?.function) {\r\n      return executeFunctionStack(value, scope, options.handlers.function, genFunction, options);\r\n    }\r\n    return genFunction(value);\r\n  }\r\n\r\n  if (isJSSlot(value)) {\r\n    if (options.handlers?.slot) {\r\n      return executeFunctionStack(value, scope, options.handlers.slot, genJsSlot, options);\r\n    }\r\n    return genJsSlot(value, scope, options);\r\n  }\r\n\r\n  if (isDataSource(value)) {\r\n    return generateUnknownType(\r\n      {\r\n        type: 'JSExpression',\r\n        value: `this.dataSourceMap[${JSON.stringify(value.id)}]`,\r\n      },\r\n      scope,\r\n      options,\r\n    );\r\n  }\r\n\r\n  if (_.isObject(value)) {\r\n    if (options.handlers?.object) {\r\n      return executeFunctionStack(value, scope, options.handlers.object, generateObject, options);\r\n    }\r\n    return generateObject(value as IPublicTypeCompositeObject, scope, options);\r\n  }\r\n\r\n  if (_.isString(value)) {\r\n    if (options.handlers?.string) {\r\n      return executeFunctionStack(value, scope, options.handlers.string, generateString, options);\r\n    }\r\n    return generateString(value);\r\n  }\r\n\r\n  if (_.isNumber(value)) {\r\n    if (options.handlers?.number) {\r\n      return executeFunctionStack(value, scope, options.handlers.number, generateNumber, options);\r\n    }\r\n    return generateNumber(value);\r\n  }\r\n\r\n  if (_.isBoolean(value)) {\r\n    if (options.handlers?.boolean) {\r\n      return executeFunctionStack(value, scope, options.handlers.boolean, generateBool, options);\r\n    }\r\n    return generateBool(value);\r\n  }\r\n\r\n  throw new CodeGeneratorError('Meet unknown composite value type');\r\n}\r\n\r\n// \u8FD9\u4E00\u5C42\u66FE\u7ECF\u662F\u5BF9\u4EA7\u51FA\u505A\u6700\u5916\u5C42\u5305\u88C5\u7684\uFF0C\u4F46\u5176\u5B9E\u5305\u88C5\u903B\u8F91\u4E0D\u5E94\u8BE5\u5C5E\u4E8E\u8FD9\u4E00\u5C42\r\n// \u8FD9\u4E00\u5C42\u5148\u4E0D\u53BB\u6389\uFF0C\u505A\u5197\u4F59\uFF0C\u65B9\u4FBF\u540E\u7EED\u91CD\u6784\r\nexport function generateCompositeType(\r\n  value: IPublicTypeCompositeValue,\r\n  scope: IScope,\r\n  options: CompositeValueGeneratorOptions = {},\r\n): string {\r\n  const result = generateUnknownType(value, scope, options);\r\n  return result;\r\n}\r\n", "import * as parser from '@babel/parser';\r\nimport generate from '@babel/generator';\r\nimport traverse from '@babel/traverse';\r\nimport * as t from '@babel/types';\r\nimport { IPublicTypeJSExpression, IPublicTypeJSFunction, isJSExpression, isJSFunction } from '@alilc/lowcode-types';\r\nimport { CodeGeneratorError, IScope } from '../types';\r\nimport { transformExpressionLocalRef, ParseError } from './expressionParser';\r\nimport { isJSExpressionFn } from './common';\r\n\r\nfunction parseFunction(content: string): t.FunctionExpression | null {\r\n  try {\r\n    const ast = parser.parse(`(${content});`, {\r\n      plugins: [\r\n        'jsx',\r\n      ],\r\n    });\r\n\r\n    let resultNode: t.FunctionExpression | null = null;\r\n    traverse(ast, {\r\n      FunctionExpression(path) {\r\n        resultNode = path.node;\r\n        path.stop();\r\n      },\r\n    });\r\n    return resultNode;\r\n  } catch (e) {\r\n    throw new ParseError(content, e);\r\n  }\r\n}\r\n\r\nfunction transformFuncExpr2MethodMember(methodName: string, content: string): string {\r\n  const funcNode = parseFunction(content);\r\n  if (funcNode) {\r\n    const targetNode = t.classMethod(\r\n      'method',\r\n      (methodName && t.identifier(methodName)) || funcNode.id || t.identifier('notDefineName'),\r\n      funcNode.params,\r\n      funcNode.body,\r\n      undefined,\r\n      undefined,\r\n      undefined,\r\n      funcNode.async || undefined,\r\n    );\r\n\r\n    const { code: resultCode } = generate(targetNode, { sourceMaps: false });\r\n    return resultCode;\r\n  }\r\n\r\n  throw new Error('Can not find Function Statement');\r\n}\r\n\r\nfunction getArrowFunction(content: string) {\r\n  const funcNode = parseFunction(content);\r\n  if (funcNode) {\r\n    const targetNode = t.arrowFunctionExpression(\r\n      funcNode.params,\r\n      funcNode.body,\r\n      funcNode.async || undefined,\r\n    );\r\n\r\n    const { code: resultCode } = generate(targetNode, { sourceMaps: false });\r\n    return resultCode;\r\n  }\r\n\r\n  throw new Error('Can not find Function Statement');\r\n}\r\n\r\nfunction getBodyStatements(content: string) {\r\n  const funcNode = parseFunction(content);\r\n  if (funcNode) {\r\n    const statements: t.Statement[] = funcNode.body.body;\r\n\r\n    const targetNode = t.program(statements, undefined, 'module', undefined);\r\n\r\n    const { code: resultCode } = generate(targetNode, { sourceMaps: false });\r\n    return resultCode;\r\n  }\r\n\r\n  throw new Error('Can not find Function Statement');\r\n}\r\n\r\n/**\r\n * \u662F\u5426\u662F\u5E7F\u4E49\u4E0A\u7684 JSFunction\r\n * @param value\r\n * @returns\r\n */\r\nexport function isBroadJSFunction(value: unknown): boolean {\r\n  return isJSExpressionFn(value) || isJSFunction(value);\r\n}\r\n\r\nexport function generateExpression(value: any, scope: IScope): string {\r\n  if (isJSExpression(value)) {\r\n    const exprVal = (value as IPublicTypeJSExpression).value.trim();\r\n    if (!exprVal) {\r\n      return 'null';\r\n    }\r\n\r\n    const afterProcessWithLocals = transformExpressionLocalRef(exprVal, scope);\r\n    return afterProcessWithLocals;\r\n  }\r\n\r\n  throw new CodeGeneratorError('Not a JSExpression');\r\n}\r\n\r\nfunction getFunctionSource(cfg: IPublicTypeJSFunction): string {\r\n  return cfg.source || cfg.value || cfg.compiled;\r\n}\r\n\r\nexport function generateFunction(\r\n  value: any,\r\n  config: {\r\n    name?: string;\r\n    isMember?: boolean;\r\n    isBlock?: boolean;\r\n    isArrow?: boolean;\r\n    isBindExpr?: boolean;\r\n  } = {\r\n    name: undefined,\r\n    isMember: false,\r\n    isBlock: false,\r\n    isArrow: false,\r\n    isBindExpr: false,\r\n  },\r\n) {\r\n  if (isBroadJSFunction(value)) {\r\n    const functionCfg = value as IPublicTypeJSFunction;\r\n    const functionSource = getFunctionSource(functionCfg);\r\n    if (config.isMember) {\r\n      return transformFuncExpr2MethodMember(config.name || '', functionSource);\r\n    }\r\n    if (config.isBlock) {\r\n      return getBodyStatements(functionSource);\r\n    }\r\n    if (config.isArrow) {\r\n      return getArrowFunction(functionSource);\r\n    }\r\n    if (config.isBindExpr) {\r\n      return `(${functionSource}).bind(this)`;\r\n    }\r\n    return functionSource;\r\n  }\r\n\r\n  if (isJSExpression(value)) {\r\n    return value.value;\r\n  }\r\n\r\n  throw new CodeGeneratorError('Not a JSFunction or JSExpression');\r\n}\r\n", "import * as parser from '@babel/parser';\r\nimport generate from '@babel/generator';\r\nimport traverse, { NodePath } from '@babel/traverse';\r\nimport * as t from '@babel/types';\r\nimport { isIdentifier, Node } from '@babel/types';\r\n\r\nimport { OrderedSet } from './OrderedSet';\r\nimport { IScope } from '../types';\r\n\r\nexport class ParseError extends Error {\r\n  readonly expr: string | t.Expression;\r\n\r\n  readonly detail: unknown;\r\n\r\n  constructor(expr: string | t.Expression, detail: unknown) {\r\n    super(`Failed to parse expression \"${typeof expr === 'string' ? expr : generate(expr)}\"`);\r\n    this.expr = expr;\r\n    this.detail = detail;\r\n    Object.setPrototypeOf(this, new.target.prototype);\r\n  }\r\n}\r\n\r\nconst MAYBE_EXPRESSIONS: {\r\n  [k in Node['type']]?: {\r\n    // fields: Array<keyof (Node & { type: k })>\r\n    fields: string[] | ((node: Node) => string[]);\r\n  };\r\n} = {\r\n  ArrayExpression: { fields: ['elements'] },\r\n  AssignmentExpression: { fields: ['left', 'right'] },\r\n  BinaryExpression: { fields: ['left', 'right'] },\r\n  CallExpression: { fields: ['arguments', 'callee'] },\r\n  ConditionalExpression: { fields: ['test', 'consequent', 'alternate'] },\r\n  DoWhileStatement: { fields: ['test'] },\r\n  ExpressionStatement: { fields: ['expression'] },\r\n  ForInStatement: { fields: ['right'] },\r\n  ForStatement: { fields: ['init', 'test', 'update'] },\r\n  IfStatement: { fields: ['test'] },\r\n  LogicalExpression: { fields: ['left', 'right'] },\r\n  MemberExpression: {\r\n    fields: (node) => {\r\n      return node.type === 'MemberExpression' && node.computed\r\n        ? ['object', 'property']\r\n        : ['object'];\r\n    },\r\n  },\r\n  NewExpression: { fields: ['callee', 'arguments'] },\r\n  ObjectMethod: {\r\n    fields: (node) => {\r\n      return node.type === 'ObjectMethod' && node.computed ? ['key'] : [];\r\n    },\r\n  },\r\n  ObjectProperty: {\r\n    fields: (node) => {\r\n      return node.type === 'ObjectProperty' && node.computed ? ['key', 'value'] : ['value'];\r\n    },\r\n  },\r\n  ReturnStatement: { fields: ['argument'] },\r\n  SequenceExpression: { fields: ['expressions'] },\r\n  ParenthesizedExpression: { fields: ['expression'] },\r\n  SwitchCase: { fields: ['test'] },\r\n  SwitchStatement: { fields: ['discriminant'] },\r\n  ThrowStatement: { fields: ['argument'] },\r\n  UnaryExpression: { fields: ['argument'] },\r\n  UpdateExpression: { fields: ['argument'] },\r\n  VariableDeclarator: { fields: ['init'] },\r\n  WhileStatement: { fields: ['test'] },\r\n  WithStatement: { fields: ['object'] },\r\n  AssignmentPattern: { fields: ['right'] },\r\n  ArrowFunctionExpression: { fields: ['body'] },\r\n  ClassExpression: { fields: ['superClass'] },\r\n  ClassDeclaration: { fields: ['superClass'] },\r\n  ExportDefaultDeclaration: { fields: ['declaration'] },\r\n  ForOfStatement: { fields: ['right'] },\r\n  ClassMethod: {\r\n    fields: (node) => {\r\n      return node.type === 'ClassMethod' && node.computed ? ['key'] : [];\r\n    },\r\n  },\r\n  SpreadElement: { fields: ['argument'] },\r\n  TaggedTemplateExpression: { fields: ['tag'] },\r\n  TemplateLiteral: { fields: ['expressions'] },\r\n  YieldExpression: { fields: ['argument'] },\r\n  AwaitExpression: { fields: ['argument'] },\r\n  OptionalMemberExpression: {\r\n    fields: (node) => {\r\n      return node.type === 'OptionalMemberExpression' && node.computed\r\n        ? ['object', 'property']\r\n        : ['object'];\r\n    },\r\n  },\r\n  OptionalCallExpression: { fields: ['callee', 'arguments'] },\r\n  JSXSpreadAttribute: { fields: ['argument'] },\r\n  BindExpression: { fields: ['object', 'callee'] },\r\n  ClassProperty: {\r\n    fields: (node) => {\r\n      return node.type === 'ClassProperty' && node.computed ? ['key', 'value'] : ['value'];\r\n    },\r\n  },\r\n  PipelineTopicExpression: { fields: ['expression'] },\r\n  PipelineBareFunction: { fields: ['callee'] },\r\n  ClassPrivateProperty: { fields: ['value'] },\r\n  Decorator: { fields: ['expression'] },\r\n  TupleExpression: { fields: ['elements'] },\r\n  TSDeclareMethod: {\r\n    fields: (node) => {\r\n      return node.type === 'TSDeclareMethod' && node.computed ? ['key'] : [];\r\n    },\r\n  },\r\n  TSPropertySignature: {\r\n    fields: (node) => {\r\n      return node.type === 'TSPropertySignature' && node.computed\r\n        ? ['key', 'initializer']\r\n        : ['initializer'];\r\n    },\r\n  },\r\n\r\n  TSMethodSignature: {\r\n    fields: (node) => {\r\n      return node.type === 'TSMethodSignature' && node.computed ? ['key'] : [];\r\n    },\r\n  },\r\n  TSAsExpression: { fields: ['expression'] },\r\n  TSTypeAssertion: { fields: ['expression'] },\r\n  TSEnumDeclaration: { fields: ['initializer'] },\r\n  TSEnumMember: { fields: ['initializer'] },\r\n  TSNonNullExpression: { fields: ['expression'] },\r\n  TSExportAssignment: { fields: ['expression'] },\r\n};\r\n\r\nexport interface ParseExpressionGetGlobalVariablesOptions {\r\n  filter?: (varName: string) => boolean;\r\n}\r\n\r\nconst CROSS_THIS_SCOPE_TYPE_NODE: {\r\n  [k in Node['type']]?: boolean;\r\n} = {\r\n  ArrowFunctionExpression: false, // \u7BAD\u5934\u51FD\u6570\u4E0D\u8DE8\u8D8A this \u7684 scope\r\n  FunctionExpression: true,\r\n  FunctionDeclaration: true,\r\n  // FunctionTypeAnnotation: false, // \u8FD9\u662F TS \u5B9A\u4E49\r\n  // FunctionTypeParam: false, // \u8FD9\u662F TS \u5B9A\u4E49\r\n  ClassDeclaration: true,\r\n  ClassExpression: true,\r\n  ClassBody: true,\r\n  ClassImplements: true,\r\n  ClassMethod: true,\r\n  ClassPrivateMethod: true,\r\n  ClassProperty: true,\r\n  ClassPrivateProperty: true,\r\n  DeclareClass: true,\r\n};\r\n\r\nconst JS_KEYWORDS = ['arguments', 'this', 'super'];\r\n\r\nexport function parseExpressionGetKeywords(expr: string | null | undefined): string[] {\r\n  if (!expr) {\r\n    return [];\r\n  }\r\n\r\n  try {\r\n    const keywordVars = new OrderedSet<string>();\r\n\r\n    const ast = parser.parse(`!(${expr});`, {\r\n      plugins: [\r\n        'jsx',\r\n      ],\r\n    });\r\n\r\n    const addIdentifierIfNeeded = (x: Node | null | undefined) => {\r\n      if (typeof x === 'object' && isIdentifier(x) && JS_KEYWORDS.includes(x.name)) {\r\n        keywordVars.add(x.name);\r\n      }\r\n    };\r\n\r\n    traverse(ast, {\r\n      enter(path) {\r\n        const { node } = path;\r\n        const expressionFields = MAYBE_EXPRESSIONS[node.type]?.fields;\r\n        if (expressionFields) {\r\n          (typeof expressionFields === 'function'\r\n            ? expressionFields(node)\r\n            : expressionFields\r\n          ).forEach((fieldName) => {\r\n            const fieldValue = node[fieldName as keyof typeof node];\r\n            if (typeof fieldValue === 'object') {\r\n              if (Array.isArray(fieldValue)) {\r\n                fieldValue.forEach((item: any) => {\r\n                  addIdentifierIfNeeded(item);\r\n                });\r\n              } else {\r\n                addIdentifierIfNeeded(fieldValue as any);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      },\r\n    });\r\n\r\n    return keywordVars.toArray().filter(Boolean);\r\n  } catch (e) {\r\n    throw new ParseError(expr, e);\r\n  }\r\n}\r\n\r\nexport function parseExpressionGetGlobalVariables(\r\n  expr: string | null | undefined,\r\n  { filter = () => true }: ParseExpressionGetGlobalVariablesOptions = {},\r\n): string[] {\r\n  if (!expr) {\r\n    return [];\r\n  }\r\n\r\n  try {\r\n    const undeclaredVars = new OrderedSet<string>();\r\n\r\n    const ast = parser.parse(`!(${expr});`);\r\n\r\n    const addUndeclaredIdentifierIfNeeded = (\r\n      x: Node | null | undefined,\r\n      path: NodePath<Node>,\r\n    ) => {\r\n      if (typeof x === 'object' && isIdentifier(x) && !path.scope.hasBinding(x.name)) {\r\n        undeclaredVars.add(x.name);\r\n      }\r\n    };\r\n\r\n    traverse(ast, {\r\n      enter(path) {\r\n        const { node } = path;\r\n        const expressionFields = MAYBE_EXPRESSIONS[node.type]?.fields;\r\n        if (expressionFields) {\r\n          (typeof expressionFields === 'function'\r\n            ? expressionFields(node)\r\n            : expressionFields\r\n          ).forEach((fieldName) => {\r\n            const fieldValue = node[fieldName as keyof typeof node];\r\n            if (typeof fieldValue === 'object') {\r\n              if (Array.isArray(fieldValue)) {\r\n                fieldValue.forEach((item: any) => {\r\n                  addUndeclaredIdentifierIfNeeded(item, path);\r\n                });\r\n              } else {\r\n                addUndeclaredIdentifierIfNeeded(fieldValue as any, path);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      },\r\n    });\r\n\r\n    return undeclaredVars.toArray().filter(filter);\r\n  } catch (e) {\r\n    throw new ParseError(expr, e);\r\n  }\r\n}\r\n\r\nexport function parseExpressionConvertThis2Context(\r\n  expr: string | t.Expression,\r\n  contextName = '__$$context',\r\n  localVariables: string[] = [],\r\n): string {\r\n  if (!expr) {\r\n    return expr;\r\n  }\r\n\r\n  try {\r\n    const exprAst = typeof expr === 'string' ? parser.parseExpression(expr) : expr;\r\n    const exprWrapAst = t.expressionStatement(exprAst);\r\n    const fileAst = t.file(t.program([exprWrapAst]));\r\n\r\n    const localVariablesSet = new Set(localVariables);\r\n\r\n    let thisScopeLevel = CROSS_THIS_SCOPE_TYPE_NODE[exprAst.type] ? -1 : 0;\r\n    traverse(fileAst, {\r\n      enter(path) {\r\n        if (CROSS_THIS_SCOPE_TYPE_NODE[path.node.type]) {\r\n          thisScopeLevel++;\r\n        }\r\n      },\r\n      exit(path) {\r\n        if (CROSS_THIS_SCOPE_TYPE_NODE[path.node.type]) {\r\n          thisScopeLevel--;\r\n        }\r\n      },\r\n      MemberExpression(path) {\r\n        if (!path.isMemberExpression()) {\r\n          return;\r\n        }\r\n\r\n        const obj = path.get('object');\r\n        if (!obj.isThisExpression()) {\r\n          return;\r\n        }\r\n\r\n        // \u5904\u7406\u5C40\u90E8\u53D8\u91CF\r\n        if (!path.node.computed) {\r\n          const prop = path.get('property');\r\n          if (prop.isIdentifier() && localVariablesSet.has(prop.node.name)) {\r\n            path.replaceWith(t.identifier(prop.node.name));\r\n            return;\r\n          }\r\n        }\r\n\r\n        // \u66FF\u6362 this (\u53EA\u5728\u9876\u5C42\u66FF\u6362)\r\n        if (thisScopeLevel <= 0) {\r\n          obj.replaceWith(t.identifier(contextName));\r\n        }\r\n      },\r\n      ThisExpression(path) {\r\n        if (!path.isThisExpression()) {\r\n          return;\r\n        }\r\n\r\n        // MemberExpression \u4E2D\u7684 this.xxx \u5DF2\u7ECF\u5904\u7406\u8FC7\u4E86\r\n        if (path.parent.type === 'MemberExpression') {\r\n          return;\r\n        }\r\n\r\n        if (thisScopeLevel <= 0) {\r\n          path.replaceWith(t.identifier(contextName));\r\n        }\r\n      },\r\n    });\r\n\r\n    const { code } = generate(exprWrapAst.expression, { sourceMaps: false });\r\n    return code;\r\n  } catch (e) {\r\n    throw new ParseError(expr, e);\r\n  }\r\n}\r\n\r\nexport function parseExpression(expr: string) {\r\n  try {\r\n    return parser.parseExpression(expr);\r\n  } catch (e) {\r\n    throw new ParseError(expr, e);\r\n  }\r\n}\r\n\r\nexport function transformExpressionLocalRef(expr: string, scope: IScope) {\r\n  if (!expr) {\r\n    return expr;\r\n  }\r\n\r\n  if (!scope) {\r\n    throw new Error('transform expression without scope');\r\n  }\r\n\r\n  try {\r\n    const exprAst = typeof expr === 'string' ? parser.parseExpression(expr) : expr;\r\n    const exprWrapAst = t.expressionStatement(exprAst);\r\n    const fileAst = t.file(t.program([exprWrapAst]));\r\n\r\n    traverse(fileAst, {\r\n      MemberExpression(path) {\r\n        if (!path.isMemberExpression()) {\r\n          return;\r\n        }\r\n\r\n        const obj = path.get('object');\r\n        if (!obj.isThisExpression()) {\r\n          return;\r\n        }\r\n\r\n        // \u67E5\u770B\u662F\u5426\u5B58\u5728\u5F15\u7528 local \u503C\r\n        const prop = path.get('property');\r\n        let memberName = '';\r\n        if (!path.node.computed && prop.isIdentifier()) {\r\n          memberName = prop.node.name;\r\n        } else if (path.node.computed && prop.isStringLiteral()) {\r\n          memberName = prop.node.value;\r\n        }\r\n        if (memberName && scope.bindings && scope.bindings.hasBinding(memberName)) {\r\n          path.replaceWith(t.identifier(memberName));\r\n        }\r\n      },\r\n    });\r\n\r\n    const { code } = generate(exprWrapAst.expression, { sourceMaps: false });\r\n    return code;\r\n  } catch (e) {\r\n    throw new ParseError(expr, e);\r\n    // throw e;\r\n  }\r\n}\r\n", "export class OrderedSet<T> {\r\n  private _set = new Set<T>();\r\n  private _arr: T[] = [];\r\n\r\n  constructor(items?: T[]) {\r\n    if (items) {\r\n      this._set = new Set(items);\r\n      this._arr = items.slice(0);\r\n    }\r\n  }\r\n\r\n  add(item: T) {\r\n    if (!this._set.has(item)) {\r\n      this._set.add(item);\r\n      this._arr.push(item);\r\n    }\r\n  }\r\n\r\n  delete(item: T) {\r\n    if (this._set.has(item)) {\r\n      this._set.delete(item);\r\n      this._arr.splice(this._arr.indexOf(item), 1);\r\n    }\r\n  }\r\n\r\n  has(item: T) {\r\n    return this._set.has(item);\r\n  }\r\n\r\n  toArray() {\r\n    return this._arr.slice(0);\r\n  }\r\n}\r\n", "import { IPublicTypeJSSlot, isJSSlot, IPublicTypeNodeData } from '@alilc/lowcode-types';\r\nimport { CodeGeneratorError, NodeGenerator, IScope } from '../types';\r\nimport { unwrapJsExprQuoteInJsx } from './jsxHelpers';\r\n\r\nfunction generateSingleLineComment(commentText: string): string {\r\n  return `/* ${commentText.split('\\n').join(' ').replace(/\\*\\//g, '*-/')}*/`;\r\n}\r\n\r\nexport function generateJsSlot(slot: any, scope: IScope, generator: NodeGenerator<string>): string {\r\n  if (isJSSlot(slot)) {\r\n    const { title, params, value } = slot as IPublicTypeJSSlot;\r\n\r\n    // slot \u4E5F\u662F\u5206\u6709\u53C2\u6570\u548C\u65E0\u53C2\u6570\u7684\r\n    // - \u6709\u53C2\u6570\u7684 slot \u5C31\u662F\u7C7B\u4F3C\u4E00\u4E2A render \u51FD\u6570\uFF0C\u9700\u8981\u521B\u5EFA\u5B50\u4F5C\u7528\u57DF\r\n    // - \u65E0\u53C2\u6570\u7684 slot \u5C31\u662F\u7C7B\u4F3C\u4E00\u4E2A JSX \u8282\u70B9\uFF0C\u4E0D\u9700\u8981\u521B\u5EFA\u5B50\u4F5C\u7528\u57DF\r\n    const slotScope = params ? scope.createSubScope(params || []) : scope;\r\n    const contentExpr = !value\r\n      ? 'null'\r\n      : generateNodeDataOrArrayForJsSlot(value, generator, slotScope);\r\n    if (params) {\r\n      return [\r\n        title && generateSingleLineComment(title),\r\n        '(',\r\n        (params || []).join(', '),\r\n        ') => ((__$$context) => (',\r\n        contentExpr,\r\n        '))(',\r\n        `  __$$createChildContext(__$$context, { ${(params || []).join(', ')} }`,\r\n        '))',\r\n      ]\r\n        .filter(Boolean)\r\n        .join('');\r\n    }\r\n\r\n    return contentExpr || '[]';\r\n  }\r\n\r\n  throw new CodeGeneratorError('Not a JSSlot');\r\n}\r\n\r\nfunction generateNodeDataOrArrayForJsSlot(\r\n  value: IPublicTypeNodeData | IPublicTypeNodeData[],\r\n  generator: NodeGenerator<string>,\r\n  scope: IScope,\r\n) {\r\n  if (Array.isArray(value)) {\r\n    if (value.length === 0) {\r\n      return '[]';\r\n    }\r\n\r\n    if (value.length === 1) {\r\n      return unwrapJsExprQuoteInJsx(generator(value, scope)) || 'null';\r\n    }\r\n\r\n    return `[\\n${\r\n      value\r\n        .map((v) => {\r\n          if (typeof v === 'string') {\r\n            return JSON.stringify(v);\r\n          }\r\n\r\n          return unwrapJsExprQuoteInJsx(generator(v, scope)) || 'null';\r\n        })\r\n        .join(',\\n') || 'null'\r\n    }\\n]`;\r\n  }\r\n\r\n  return unwrapJsExprQuoteInJsx(generator(value, scope)) || 'null';\r\n}\r\n", "/**\r\n * \u53BB\u6389 JS \u8868\u8FBE\u5F0F\u7684 \"{...}\" \u7684\u5C01\u88C5, \u5982:\r\n *  {<xxx />} => <xxx />\r\n */\r\nexport function unwrapJsExprQuoteInJsx(jsxExpr: string): string {\r\n  if (jsxExpr.length >= 2 && jsxExpr[0] === '{' && jsxExpr[jsxExpr.length - 1] === '}') {\r\n    return jsxExpr.slice(1, jsxExpr.length - 1);\r\n  }\r\n\r\n  return jsxExpr;\r\n}\r\n", "import { BaseGenerator, IScope } from '../types/core';\r\n\r\nexport function executeFunctionStack<I, T, C>(\r\n  input: I,\r\n  scope: IScope,\r\n  funcs: BaseGenerator<I, T, C> | Array<BaseGenerator<I, T, C>>,\r\n  baseFunc: BaseGenerator<I, T, C>,\r\n  config?: C,\r\n): T {\r\n  const funcList: Array<BaseGenerator<I, T, C>> = [];\r\n  if (Array.isArray(funcs)) {\r\n    funcList.push(...funcs);\r\n  } else {\r\n    funcList.push(funcs);\r\n  }\r\n\r\n  let next: BaseGenerator<I, T, C> = baseFunc;\r\n  while (funcList.length > 0) {\r\n    const func = funcList.pop();\r\n    if (func) {\r\n      const warppedFunc = ((nextFunc) => (i: I, s: IScope, cfg?: C) => func(i, s, cfg, nextFunc))(next);\r\n      next = warppedFunc;\r\n    }\r\n  }\r\n\r\n  return next(input, scope, config);\r\n}\r\n", "import { IScope } from '../types/core';\r\nimport { IScopeBindings, ScopeBindings } from './ScopeBindings';\r\n\r\nexport class Scope implements IScope {\r\n  /**\r\n   * \u521B\u5EFA\u6839\u90E8 Scope\uFF0C\u6839\u636E\u9700\u8981\u88AB\u4E0A\u6EAF\u7684\u4F5C\u7528\u57DF\u94FE\u51B3\u5B9A\u662F\u5426\u5F00\u542F\u65B0\u7684\r\n   */\r\n  static createRootScope(): IScope {\r\n    return new Scope();\r\n  }\r\n\r\n  bindings?: IScopeBindings;\r\n\r\n  constructor(public readonly parent: IScope | null = null) {\r\n    this.bindings = undefined;\r\n  }\r\n\r\n  createSubScope(ownIdentifiers: string[]): IScope {\r\n    const originalScopeBindings = this.bindings;\r\n    const newScopeBindings = new ScopeBindings(originalScopeBindings);\r\n    ownIdentifiers.forEach((identifier) => {\r\n      newScopeBindings.addBinding(identifier);\r\n    });\r\n    const newScope = new Scope(this);\r\n    newScope.bindings = newScopeBindings;\r\n    return newScope;\r\n  }\r\n}\r\n", "import { OrderedSet } from './OrderedSet';\r\n\r\nexport interface IScopeBindings {\r\n  readonly parent: IScopeBindings | null;\r\n\r\n  hasBinding: (varName: string) => boolean;\r\n  hasOwnBinding: (varName: string) => boolean;\r\n\r\n  addBinding: (varName: string) => void;\r\n  removeBinding: (varName: string) => void;\r\n\r\n  getAllBindings: () => string[];\r\n  getAllOwnedBindings: () => string[];\r\n}\r\n\r\nexport class ScopeBindings implements IScopeBindings {\r\n  readonly parent: IScopeBindings | null;\r\n\r\n  private _bindings = new OrderedSet<string>();\r\n\r\n  constructor(p: IScopeBindings | null = null) {\r\n    this.parent = p;\r\n  }\r\n\r\n  hasBinding(varName: string): boolean {\r\n    return this._bindings.has(varName) || !!this.parent?.hasBinding(varName);\r\n  }\r\n\r\n  hasOwnBinding(varName: string): boolean {\r\n    return this._bindings.has(varName);\r\n  }\r\n\r\n  addBinding(varName: string): void {\r\n    this._bindings.add(varName);\r\n  }\r\n\r\n  removeBinding(varName: string): void {\r\n    this._bindings.delete(varName);\r\n  }\r\n\r\n  getAllBindings(): string[] {\r\n    const allBindings = new OrderedSet(this._bindings.toArray());\r\n\r\n    for (let { parent } = this; parent; parent = parent?.parent) {\r\n      parent.getAllOwnedBindings().forEach((varName) => {\r\n        allBindings.add(varName);\r\n      });\r\n    }\r\n\r\n    return allBindings.toArray();\r\n  }\r\n\r\n  getAllOwnedBindings(): string[] {\r\n    return this._bindings.toArray();\r\n  }\r\n}\r\n", "import { CLASS_DEFINE_CHUNK_NAME, DEFAULT_LINK_AFTER } from '../../../const/generator';\r\n\r\nimport { generateCompositeType } from '../../../utils/compositeType';\r\nimport { Scope } from '../../../utils/Scope';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n} from '../../../types';\r\n\r\nexport interface PluginConfig {\r\n  fileType?: string;\r\n  implementType: 'inConstructor' | 'insMember' | 'hooks';\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig & { fileType: string } = {\r\n    fileType: FileType.JSX,\r\n    implementType: 'inConstructor',\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n    const scope = Scope.createRootScope();\r\n\r\n    const state = ir.state || {};\r\n    const fields = Object.keys(state).map<string>((stateName) => {\r\n      const value = generateCompositeType(state[stateName], scope);\r\n      return `${stateName}: ${value},`;\r\n    });\r\n\r\n    if (cfg.implementType === 'inConstructor') {\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.ConstructorContent,\r\n        content: `this.state = { ${fields.join('')} };`,\r\n        linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.ConstructorContent]],\r\n      });\r\n    } else if (cfg.implementType === 'insMember') {\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n        content: `state = { ${fields.join('')} };`,\r\n        linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.InsVar]],\r\n      });\r\n    }\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { CLASS_DEFINE_CHUNK_NAME } from '../../../const/generator';\r\n\r\nimport { Scope } from '../../../utils/Scope';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n} from '../../../types';\r\nimport { DEFAULT_LINK_AFTER } from '../../../const';\r\n\r\nexport interface PluginConfig {\r\n  fileType: string;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig = {\r\n    fileType: FileType.JSX,\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n    const scope = Scope.createRootScope();\r\n\r\n    const { inStrictMode } = next.contextData;\r\n    if (!inStrictMode) {\r\n      // \u975E\u4E25\u683C\u6A21\u5F0F\u4E0B\uFF0C\u4E0A\u4E0B\u6587\u5C31\u662F\u81EA\u5DF1\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n        content: `\r\n          _context = this;\r\n        `,\r\n        linkAfter: [CLASS_DEFINE_CHUNK_NAME.Start],\r\n      });\r\n    } else {\r\n      // \u4E25\u683C\u6A21\u5F0F\u4E0B\u7684\u4E0A\u4E0B\u6587\u53EA\u4FDD\u7559\u534F\u8BAE\u4E2D\u89C4\u5B9A\u7684\u90A3\u4E9B\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n        content: `\r\n          _context = this._createContext();\r\n        `,\r\n        linkAfter: [CLASS_DEFINE_CHUNK_NAME.Start],\r\n      });\r\n\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsPrivateMethod,\r\n        content: `\r\n          _createContext() {\r\n            const self = this;\r\n            const context = {\r\n              get state() { return self.state; },\r\n              setState(newState, callback) { self.setState(newState, callback); },\r\n              get dataSourceMap() { return self._dataSourceEngine.dataSourceMap || {}; },\r\n              async reloadDataSource() { await self._dataSourceEngine.reloadDataSource(); },\r\n              get utils() { return self.utils; },\r\n              get page() { return context; },\r\n              get component() { return context; },\r\n              get props() { return self.props; },\r\n              get constants() { return self.constants; },\r\n              get $() { return self.$ },\r\n              get $$() { return self.$$ },\r\n              ...this._methods,\r\n            };\r\n  \r\n            return context;\r\n          }\r\n        `,\r\n        linkAfter: DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.InsPrivateMethod],\r\n      });\r\n    }\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { IContextData } from '../types';\r\n\r\nfunction relativePath(from: string[], to: string[]): string[] {\r\n  const length = Math.min(from.length, to.length);\r\n  let samePartsLength = length;\r\n  for (let i = 0; i < length; i++) {\r\n    if (from[i] !== to[i]) {\r\n      samePartsLength = i;\r\n      break;\r\n    }\r\n  }\r\n  if (samePartsLength === 0) {\r\n    return to;\r\n  }\r\n  let outputParts = [];\r\n  for (let i = samePartsLength; i < from.length; i++) {\r\n    outputParts.push('..');\r\n  }\r\n  outputParts = [...outputParts, ...to.slice(samePartsLength)];\r\n  if (outputParts[0] !== '..') {\r\n    outputParts.unshift('.');\r\n  }\r\n  return outputParts;\r\n}\r\n\r\nexport function getSlotRelativePath(options: {\r\n  contextData: IContextData;\r\n  from: string;\r\n  to: string;\r\n}) {\r\n  const { contextData, from, to } = options;\r\n  const isSingleComponent = contextData?.extraContextData?.projectRemark?.isSingleComponent;\r\n  const template = contextData?.extraContextData?.template;\r\n  let toPath = template.slots[to].path;\r\n  toPath = [...toPath, template.slots[to].fileName!];\r\n  let fromPath = template.slots[from].path;\r\n  if (!isSingleComponent && ['components', 'pages'].indexOf(from) !== -1) {\r\n    fromPath = [...fromPath, 'pageName'];\r\n  }\r\n  return relativePath(fromPath, toPath).join('/');\r\n}", "import {\r\n  CLASS_DEFINE_CHUNK_NAME,\r\n  COMMON_CHUNK_NAME,\r\n  DEFAULT_LINK_AFTER,\r\n} from '../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n} from '../../../types';\r\nimport { getSlotRelativePath } from '../../../utils/pathHelper';\r\n\r\nexport interface PluginConfig {\r\n  fileType?: string;\r\n\r\n  /** prefer using class property to define utils */\r\n  preferClassProperty?: boolean;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig & { fileType: string } = {\r\n    fileType: FileType.JSX,\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n    next.contextData.useRefApi = true;\r\n    const useRef = !!ir.analyzeResult?.isUsingRef;\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n      content: `\r\n        import utils${useRef ? ', { RefsManager }' : ''} from '${getSlotRelativePath({ contextData: next.contextData, from: 'components', to: 'utils' })}';\r\n      `,\r\n      linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n    });\r\n\r\n    if (cfg.preferClassProperty) {\r\n      // mode: class property\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n        content: 'utils = utils;',\r\n        linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.InsVar]],\r\n      });\r\n    } else {\r\n      // mode: assign in constructor\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.ConstructorContent,\r\n        content: 'this.utils = utils;',\r\n        linkAfter: [CLASS_DEFINE_CHUNK_NAME.ConstructorStart],\r\n      });\r\n    }\r\n\r\n    if (useRef) {\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.ConstructorContent,\r\n        content: 'this._refsManager = new RefsManager();',\r\n        linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.ConstructorContent]],\r\n      });\r\n\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsMethod,\r\n        content: `\r\n          $ = (refName) => {\r\n            return this._refsManager.get(refName);\r\n          }\r\n        `,\r\n        linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.InsMethod]],\r\n      });\r\n\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsMethod,\r\n        content: `\r\n          $$ = (refName) => {\r\n            return this._refsManager.getAll(refName);\r\n          }\r\n        `,\r\n        linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.InsMethod]],\r\n      });\r\n    } else {\r\n      // useRef \u4E3A false \u7684\u65F6\u5019\u662F\u6307\u6CA1\u6709\u7EC4\u4EF6\u5728 props \u4E2D\u914D\u7F6E ref \u5C5E\u6027\uFF0C\u4F46\u8FD9\u4E2A\u65F6\u5019\u5176\u5B9E\u4E5F\u53EF\u80FD\u6709\u4EE3\u7801\u8BBF\u95EE this.$/$$ \u6240\u4EE5\u8FD8\u662F\u52A0\u4E0A\u4E2A\u7A7A\u7684\u4EE3\u7801\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsMethod,\r\n        content: ' $ = () => null; ',\r\n        linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.InsMethod]],\r\n      });\r\n\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsMethod,\r\n        content: ' $$ = () => [];        ',\r\n        linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.InsMethod]],\r\n      });\r\n    }\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "/* eslint-disable @typescript-eslint/indent */\r\n\r\nimport {\r\n  IPublicTypeCompositeValue,\r\n  IPublicTypeJSExpression,\r\n  InterpretDataSourceConfig,\r\n  isJSExpression,\r\n  isJSFunction,\r\n} from '@alilc/lowcode-types';\r\nimport changeCase from 'change-case';\r\n\r\nimport {\r\n  CLASS_DEFINE_CHUNK_NAME,\r\n  COMMON_CHUNK_NAME,\r\n  DEFAULT_LINK_AFTER,\r\n} from '../../../const/generator';\r\nimport { Scope } from '../../../utils/Scope';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IScope,\r\n} from '../../../types';\r\n\r\nimport { generateCompositeType } from '../../../utils/compositeType';\r\nimport { parseExpressionConvertThis2Context } from '../../../utils/expressionParser';\r\nimport { isValidContainerType } from '../../../utils/schema';\r\nimport { REACT_CHUNK_NAME } from './const';\r\nimport { isJSExpressionFn } from '../../../utils/common';\r\n\r\nexport interface PluginConfig {\r\n  fileType?: string;\r\n\r\n  /**\r\n   * \u6570\u636E\u6E90\u914D\u7F6E\r\n   */\r\n  datasourceConfig?: {\r\n\r\n    /** \u6570\u636E\u6E90\u5F15\u64CE\u7684\u7248\u672C */\r\n    engineVersion?: string;\r\n\r\n    /** \u6570\u636E\u6E90\u5F15\u64CE\u7684\u5305\u540D */\r\n    enginePackage?: string;\r\n\r\n    /** \u6570\u636E\u6E90 handlers \u7684\u7248\u672C */\r\n    handlersVersion?: {\r\n      [key: string]: string;\r\n    };\r\n\r\n    /** \u6570\u636E\u6E90 handlers \u7684\u5305\u540D */\r\n    handlersPackages?: {\r\n      [key: string]: string;\r\n    };\r\n  };\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg = {\r\n    ...config,\r\n    fileType: config?.fileType || FileType.JSX,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const scope = Scope.createRootScope();\r\n    const dataSourceConfig = isValidContainerType(pre.ir) ? pre.ir.dataSource : null;\r\n    const dataSourceItems: InterpretDataSourceConfig[] =\r\n      (dataSourceConfig && dataSourceConfig.list) || [];\r\n    const dataSourceEngineOptions = { runtimeConfig: true };\r\n    if (dataSourceItems.length > 0) {\r\n      const requestHandlersMap: Record<string, IPublicTypeJSExpression> = {};\r\n\r\n      dataSourceItems.forEach((ds) => {\r\n        const dsType = ds.type || 'fetch';\r\n        if (!(dsType in requestHandlersMap) && dsType !== 'custom') {\r\n          const handlerFactoryName = `__$$create${changeCase.pascal(dsType)}RequestHandler`;\r\n\r\n          requestHandlersMap[dsType] = {\r\n            type: 'JSExpression',\r\n            value:\r\n              handlerFactoryName + (dsType === 'urlParams' ? '(window.location.search)' : '()'),\r\n          };\r\n\r\n          const handlerFactoryExportName = `create${changeCase.pascal(dsType)}Handler`;\r\n          const handlerPkgName =\r\n            cfg.datasourceConfig?.handlersPackages?.[dsType] ||\r\n            `@alilc/lowcode-datasource-${changeCase.kebab(dsType)}-handler`;\r\n\r\n          next.chunks.push({\r\n            type: ChunkType.STRING,\r\n            fileType: FileType.JSX,\r\n            name: COMMON_CHUNK_NAME.ExternalDepsImport,\r\n            content: `\r\n              import { ${handlerFactoryExportName} as ${handlerFactoryName} } from '${handlerPkgName}';\r\n            `,\r\n            linkAfter: [],\r\n          });\r\n        }\r\n      });\r\n\r\n      Object.assign(dataSourceEngineOptions, { requestHandlersMap });\r\n\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: FileType.JSX,\r\n        name: COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        content: `\r\n          import { create as __$$createDataSourceEngine } from '@alilc/lowcode-datasource-engine/runtime';\r\n        `,\r\n        linkAfter: [],\r\n      });\r\n\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n        content: `\r\n          _dataSourceConfig = this._defineDataSourceConfig();\r\n          _dataSourceEngine = __$$createDataSourceEngine(\r\n            this._dataSourceConfig,\r\n            this,\r\n            ${generateCompositeType(dataSourceEngineOptions, scope)}\r\n          );\r\n\r\n          get dataSourceMap() {\r\n            return this._dataSourceEngine.dataSourceMap || {};\r\n          }\r\n\r\n          reloadDataSource = async () => {\r\n            await this._dataSourceEngine.reloadDataSource();\r\n          }\r\n\r\n          `,\r\n        linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.InsVar]],\r\n      });\r\n\r\n      next.chunks.unshift({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: REACT_CHUNK_NAME.ClassDidMountContent,\r\n        content: `\r\n          this._dataSourceEngine.reloadDataSource();\r\n        `,\r\n        linkAfter: [REACT_CHUNK_NAME.ClassDidMountStart],\r\n      });\r\n\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsMethod,\r\n        content: `\r\n  _defineDataSourceConfig() {\r\n    const _this = this;\r\n    return (${generateCompositeType(\r\n      {\r\n        ...dataSourceConfig,\r\n        list: [\r\n          ...dataSourceItems.map((item) => ({\r\n            ...item,\r\n            isInit: wrapAsFunction(item.isInit, scope),\r\n            options: wrapAsFunction(item.options, scope),\r\n          })),\r\n        ],\r\n      },\r\n      scope,\r\n      {\r\n        handlers: {\r\n          function: (jsFunc) => parseExpressionConvertThis2Context(jsFunc.value, '_this'),\r\n          expression: (jsExpr) => parseExpressionConvertThis2Context(jsExpr.value, '_this'),\r\n        },\r\n      },\r\n    )});\r\n  }\r\n        `,\r\n        linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.InsMethod]],\r\n      });\r\n    }\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n\r\nfunction wrapAsFunction(value: IPublicTypeCompositeValue, scope: IScope): IPublicTypeCompositeValue {\r\n  if (isJSExpression(value) || isJSFunction(value) || isJSExpressionFn(value)) {\r\n    return {\r\n      type: 'JSExpression',\r\n      value: `function(){ return ((${value.value}))}.bind(this)`,\r\n    };\r\n  }\r\n\r\n  return {\r\n    type: 'JSExpression',\r\n    value: `function(){return((${generateCompositeType(value, scope)}))}.bind(this)`,\r\n  };\r\n}\r\n", "import {\r\n  CLASS_DEFINE_CHUNK_NAME,\r\n  COMMON_CHUNK_NAME,\r\n  DEFAULT_LINK_AFTER,\r\n} from '../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n} from '../../../types';\r\n\r\nexport interface PluginConfig {\r\n  fileType: string;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig = {\r\n    fileType: FileType.JSX,\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n      content: \"import __$$constants from '../../constants';\",\r\n      linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n      content: `\r\n        get constants() {\r\n          return __$$constants || {};\r\n        }\r\n        `,\r\n      linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.InsVar]],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import {\r\n  CLASS_DEFINE_CHUNK_NAME,\r\n  COMMON_CHUNK_NAME,\r\n  DEFAULT_LINK_AFTER,\r\n} from '../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n} from '../../../types';\r\nimport { getSlotRelativePath } from '../../../utils/pathHelper';\r\n\r\nexport interface PluginConfig {\r\n  fileType: string;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig = {\r\n    fileType: FileType.JSX,\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n      content: `\r\n        import * as __$$i18n from '${getSlotRelativePath({ contextData: next.contextData, from: 'components', to: 'i18n' })}';\r\n      `,\r\n      linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: CLASS_DEFINE_CHUNK_NAME.ConstructorContent,\r\n      content: `\r\n        __$$i18n._inject2(this);\r\n      `,\r\n      linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.ConstructorContent]],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { CLASS_DEFINE_CHUNK_NAME, DEFAULT_LINK_AFTER } from '../../../const/generator';\r\nimport { REACT_CHUNK_NAME } from './const';\r\n\r\nimport { generateFunction } from '../../../utils/jsExpression';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeChunk,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n} from '../../../types';\r\nimport { isJSFunction, isJSExpression } from '@alilc/lowcode-types';\r\nimport { isJSExpressionFn } from '../../../utils/common';\r\n\r\nexport interface PluginConfig {\r\n  fileType?: string;\r\n  exportNameMapping?: Record<string, string>;\r\n  normalizeNameMapping?: Record<string, string>;\r\n  exclude?: string[];\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg = {\r\n    fileType: FileType.JSX,\r\n    exportNameMapping: {},\r\n    normalizeNameMapping: {},\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n\r\n    if (ir.lifeCycles) {\r\n      const { lifeCycles } = ir;\r\n      const chunks = Object.keys(lifeCycles).map<ICodeChunk | null>((lifeCycleName) => {\r\n        // \u8FC7\u6EE4\u6389\u975E\u6CD5\u6570\u636E\uFF08\u6709\u4E9B\u573A\u666F\u4E0B\u4F1A\u8BEF\u4F20\u5165\u7A7A\u5B57\u7B26\u4E32\u6216 null)\r\n        if (\r\n          !isJSFunction(lifeCycles[lifeCycleName]) &&\r\n          !isJSExpressionFn(lifeCycles[lifeCycleName]) &&\r\n          !isJSExpression(lifeCycles[lifeCycleName])\r\n        ) {\r\n          return null;\r\n        }\r\n\r\n        let normalizeName;\r\n        // constructor\u4F1A\u53D6\u5230\u5BF9\u8C61\u7684\u6784\u9020\u51FD\u6570\r\n        if (lifeCycleName === 'constructor') {\r\n          normalizeName = lifeCycleName;\r\n        } else {\r\n          normalizeName = cfg.normalizeNameMapping[lifeCycleName] || lifeCycleName;\r\n        }\r\n\r\n        if (cfg?.exclude?.includes(normalizeName)) {\r\n          return null;\r\n        }\r\n\r\n        const exportName = cfg.exportNameMapping[lifeCycleName] || lifeCycleName;\r\n        if (normalizeName === 'constructor') {\r\n          return {\r\n            type: ChunkType.STRING,\r\n            fileType: cfg.fileType,\r\n            name: CLASS_DEFINE_CHUNK_NAME.ConstructorContent,\r\n            content: generateFunction(lifeCycles[lifeCycleName], { isBlock: true }),\r\n            linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.ConstructorStart]],\r\n          };\r\n        }\r\n\r\n        if (normalizeName === 'componentDidMount') {\r\n          return {\r\n            type: ChunkType.STRING,\r\n            fileType: cfg.fileType,\r\n            name: REACT_CHUNK_NAME.ClassDidMountContent,\r\n            content: generateFunction(lifeCycles[lifeCycleName], { isBlock: true }),\r\n            linkAfter: [REACT_CHUNK_NAME.ClassDidMountStart],\r\n          };\r\n        }\r\n\r\n        if (normalizeName === 'render') {\r\n          return {\r\n            type: ChunkType.STRING,\r\n            fileType: cfg.fileType,\r\n            name: REACT_CHUNK_NAME.ClassRenderPre,\r\n            content: generateFunction(lifeCycles[lifeCycleName], { isBlock: true }),\r\n            linkAfter: [REACT_CHUNK_NAME.ClassRenderStart],\r\n          };\r\n        }\r\n\r\n        return {\r\n          type: ChunkType.STRING,\r\n          fileType: cfg.fileType,\r\n          name: CLASS_DEFINE_CHUNK_NAME.InsMethod,\r\n          content: generateFunction(lifeCycles[lifeCycleName], {\r\n            name: exportName,\r\n            isMember: true,\r\n          }),\r\n          linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.InsMethod]],\r\n        };\r\n      }).filter((i) => !!i);\r\n\r\n      next.chunks.push(...chunks.filter((x): x is ICodeChunk => x !== null));\r\n    }\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { CLASS_DEFINE_CHUNK_NAME, DEFAULT_LINK_AFTER } from '../../../const/generator';\r\n\r\nimport { generateFunction } from '../../../utils/jsExpression';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeChunk,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n} from '../../../types';\r\nimport { isValidIdentifier } from '../../../utils/validate';\r\n\r\nexport interface PluginConfig {\r\n  fileType: string;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig = {\r\n    fileType: FileType.JSX,\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n    const { inStrictMode } = next.contextData;\r\n\r\n    if (!ir.methods) {\r\n      return next;\r\n    }\r\n\r\n    // \u5C06\u8FD9\u4E9B methods \u90FD\u5B9A\u4E49\u5230 class \u4E0A\r\n    const { methods } = ir;\r\n    const chunks = Object.keys(methods).map<ICodeChunk>((methodName) => ({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: CLASS_DEFINE_CHUNK_NAME.InsMethod,\r\n      content: generateFunction(methods[methodName], { name: methodName, isMember: true }),\r\n      linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.InsMethod]],\r\n    }));\r\n    next.chunks.push(...chunks);\r\n\r\n    // \u4E25\u683C\u6A21\u5F0F\u4E0B\u9700\u8981\u5C06\u8FD9\u4E9B\u65B9\u6CD5\u90FD\u6302\u5230\u4E0A\u4E0B\u6587\u4E2D\r\n    if (inStrictMode) {\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.ConstructorContent,\r\n        content: Object.keys(ir.methods)\r\n          .map((methodName) =>\r\n            isValidIdentifier(methodName) ? `.${methodName}` : `[${JSON.stringify(methodName)}]`,\r\n          )\r\n          .map((method) => `this._context${method} = this${method};`)\r\n          .join('\\n'),\r\n        linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.ConstructorContent]],\r\n      });\r\n    }\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import _ from 'lodash';\r\nimport { pipe } from 'fp-ts/function';\r\nimport { IPublicTypeNodeSchema, isNodeSchema, IPublicTypeNodeDataType, IPublicTypeCompositeValue } from '@alilc/lowcode-types';\r\n\r\nimport {\r\n  IScope,\r\n  CodeGeneratorError,\r\n  PIECE_TYPE,\r\n  CodePiece,\r\n  NodeGenerator,\r\n  NodeGeneratorConfig,\r\n  NodePlugin,\r\n  AttrData,\r\n} from '../types';\r\n\r\nimport { generateCompositeType } from './compositeType';\r\nimport { getStaticExprValue } from './common';\r\nimport { executeFunctionStack } from './aopHelper';\r\nimport { encodeJsxStringNode } from './encodeJsxAttrString';\r\nimport { unwrapJsExprQuoteInJsx } from './jsxHelpers';\r\nimport { transformThis2Context } from '../core/jsx/handlers/transformThis2Context';\r\nimport { isValidIdentifier } from './validate';\r\n\r\nfunction mergeNodeGeneratorConfig(\r\n  cfg1: NodeGeneratorConfig,\r\n  cfg2: NodeGeneratorConfig = {},\r\n): NodeGeneratorConfig {\r\n  const resCfg: NodeGeneratorConfig = {};\r\n  if (cfg1.handlers || cfg2.handlers) {\r\n    resCfg.handlers = {\r\n      ...(cfg1.handlers || {}),\r\n      ...(cfg2.handlers || {}),\r\n    };\r\n  }\r\n\r\n  if (cfg1.tagMapping || cfg2.tagMapping) {\r\n    resCfg.tagMapping = cfg2.tagMapping || cfg1.tagMapping;\r\n  }\r\n\r\n  if (cfg1.attrPlugins || cfg2.attrPlugins) {\r\n    resCfg.attrPlugins = [];\r\n    resCfg.attrPlugins.push(...(cfg2.attrPlugins || []));\r\n    resCfg.attrPlugins.push(...(cfg1.attrPlugins || []));\r\n  }\r\n\r\n  if (cfg1.nodePlugins || cfg2.nodePlugins) {\r\n    resCfg.nodePlugins = [];\r\n    resCfg.nodePlugins.push(...(cfg2.nodePlugins || []));\r\n    resCfg.nodePlugins.push(...(cfg1.nodePlugins || []));\r\n  }\r\n\r\n  return resCfg;\r\n}\r\n\r\nexport function isPureString(v: string) {\r\n  // FIXME: \u76EE\u524D\u7684\u65B9\u5F0F\u4E0D\u591F\u4E25\u8C28\r\n  return (v[0] === \"'\" && v[v.length - 1] === \"'\") || (v[0] === '\"' && v[v.length - 1] === '\"');\r\n}\r\n\r\nfunction generateAttrValue(\r\n  attrData: { attrName: string; attrValue: IPublicTypeCompositeValue },\r\n  scope: IScope,\r\n  config?: NodeGeneratorConfig,\r\n): CodePiece[] {\r\n  const valueStr = generateCompositeType(attrData.attrValue, scope, {\r\n    handlers: config?.handlers,\r\n    nodeGenerator: config?.self,\r\n  });\r\n  return [\r\n    {\r\n      type: PIECE_TYPE.ATTR,\r\n      name: attrData.attrName,\r\n      value: valueStr,\r\n    },\r\n  ];\r\n}\r\n\r\nfunction generateAttr(\r\n  attrName: string,\r\n  attrValue: IPublicTypeCompositeValue,\r\n  scope: IScope,\r\n  config?: NodeGeneratorConfig,\r\n): CodePiece[] {\r\n  let pieces: CodePiece[];\r\n  if (config?.attrPlugins) {\r\n    pieces = executeFunctionStack<AttrData, CodePiece[], NodeGeneratorConfig>(\r\n      { attrName, attrValue },\r\n      scope,\r\n      config.attrPlugins,\r\n      generateAttrValue,\r\n      config,\r\n    );\r\n  } else {\r\n    pieces = generateAttrValue({ attrName, attrValue }, scope, config);\r\n  }\r\n\r\n  pieces = pieces.map((p) => {\r\n    // FIXME: \u5728\u7ECF\u8FC7 generateCompositeType \u5904\u7406\u8FC7\u4E4B\u540E\uFF0C\u5176\u5B9E\u5DF2\u7ECF\u65E0\u6CD5\u901A\u8FC7\u4F20\u5165\u503C\u7684\u7C7B\u578B\u5224\u65AD\u4F20\u51FA\u503C\u662F\u5426\u4E3A\u7EAF\u5B57\u9762\u503C\u5B57\u7B26\u4E32\u4E86\uFF08\u53EF\u80FD\u5305\u88F9\u4E86\u52A0\u5DE5\u51FD\u6570\u4E4B\u7C7B\u7684\uFF09\r\n    //        \u56E0\u6B64\u8FD9\u4E2A\u5904\u7406\u6700\u597D\u7684\u65B9\u5F0F\u662F\u5BF9\u4F20\u51FA\u503C\u505A\u8BED\u6CD5\u5206\u6790\uFF0C\u5224\u65AD\u4EE5\u54EA\u79CD\u6A21\u7248\u4EA7\u51FA Attr \u503C\r\n    let newValue: string;\r\n    if (p.value && isPureString(p.value)) {\r\n      // \u4F3C\u4E4E\u591A\u6B21\u4E00\u4E3E\uFF0C\u76EE\u524D\u7684\u8BC9\u6C42\u662F\u5904\u7406\u591A\u79CD\u5F15\u53F7\u7C7B\u578B\u5B57\u7B26\u4E32\u7684 case\uFF0C\u6B63\u786E\u5904\u7406\u8F6C\u4E49\r\n      const content = getStaticExprValue<string>(p.value);\r\n      newValue = JSON.stringify(encodeJsxStringNode(content));\r\n    } else {\r\n      newValue = `{${p.value}}`;\r\n    }\r\n\r\n    return {\r\n      value: `${p.name}=${newValue}`,\r\n      type: PIECE_TYPE.ATTR,\r\n    };\r\n  });\r\n\r\n  return pieces;\r\n}\r\n\r\nfunction generateAttrs(\r\n  nodeItem: IPublicTypeNodeSchema,\r\n  scope: IScope,\r\n  config?: NodeGeneratorConfig,\r\n): CodePiece[] {\r\n  const { props } = nodeItem;\r\n\r\n  let pieces: CodePiece[] = [];\r\n\r\n  if (props) {\r\n    if (!Array.isArray(props)) {\r\n      Object.keys(props).forEach((propName: string) => {\r\n        if (isValidIdentifier(propName)) {\r\n          pieces = pieces.concat(generateAttr(propName, props[propName] as IPublicTypeCompositeValue, scope, config));\r\n        }\r\n      });\r\n    } else {\r\n      props.forEach((prop) => {\r\n        if (prop.name && isValidIdentifier(prop.name) && !prop.spread) {\r\n          pieces = pieces.concat(generateAttr(prop.name, prop.value, scope, config));\r\n        }\r\n\r\n        // TODO: \u5904\u7406 spread \u573A\u666F\uFF08<Xxx {...(something)}/>)\r\n        // \u8FD9\u79CD\u5728 schema \u91CC\u9762\u600E\u4E48\u63CF\u8FF0\r\n      });\r\n    }\r\n  }\r\n\r\n  return pieces;\r\n}\r\n\r\nfunction generateBasicNode(\r\n  nodeItem: IPublicTypeNodeSchema,\r\n  scope: IScope,\r\n  config?: NodeGeneratorConfig,\r\n): CodePiece[] {\r\n  const pieces: CodePiece[] = [];\r\n  const tagName = (config?.tagMapping || _.identity)(nodeItem.componentName);\r\n\r\n  pieces.push({\r\n    value: tagName || '', // FIXME: type detection error\r\n    type: PIECE_TYPE.TAG,\r\n  });\r\n\r\n  return pieces;\r\n}\r\n\r\nfunction generateSimpleNode(\r\n  nodeItem: IPublicTypeNodeSchema,\r\n  scope: IScope,\r\n  config?: NodeGeneratorConfig,\r\n): CodePiece[] {\r\n  const basicParts = generateBasicNode(nodeItem, scope, config) || [];\r\n  const attrParts = generateAttrs(nodeItem, scope, config) || [];\r\n  const childrenParts: CodePiece[] = [];\r\n  if (nodeItem.children && config?.self) {\r\n    const childrenStr = config.self(nodeItem.children, scope);\r\n\r\n    childrenParts.push({\r\n      type: PIECE_TYPE.CHILDREN,\r\n      value: childrenStr,\r\n    });\r\n  }\r\n\r\n  return [...basicParts, ...attrParts, ...childrenParts];\r\n}\r\n\r\nfunction linkPieces(pieces: CodePiece[]): string {\r\n  const tagsPieces = pieces.filter((p) => p.type === PIECE_TYPE.TAG);\r\n  if (tagsPieces.length !== 1) {\r\n    throw new CodeGeneratorError('Only one tag definition required', tagsPieces);\r\n  }\r\n  const tagName = tagsPieces[0].value;\r\n\r\n  const beforeParts = pieces\r\n    .filter((p) => p.type === PIECE_TYPE.BEFORE)\r\n    .map((p) => p.value)\r\n    .join('');\r\n\r\n  const afterParts = pieces\r\n    .filter((p) => p.type === PIECE_TYPE.AFTER)\r\n    .map((p) => p.value)\r\n    .join('');\r\n\r\n  const childrenParts = pieces\r\n    .filter((p) => p.type === PIECE_TYPE.CHILDREN)\r\n    .map((p) => p.value)\r\n    .join('');\r\n\r\n  let attrsParts = pieces\r\n    .filter((p) => p.type === PIECE_TYPE.ATTR)\r\n    .map((p) => p.value)\r\n    .join(' ');\r\n\r\n  attrsParts = attrsParts ? ` ${attrsParts}` : '';\r\n\r\n  if (childrenParts) {\r\n    return `${beforeParts}<${tagName}${attrsParts}>${childrenParts}</${tagName}>${afterParts}`;\r\n  }\r\n\r\n  return `${beforeParts}<${tagName}${attrsParts} />${afterParts}`;\r\n}\r\n\r\nfunction generateNodeSchema(\r\n  nodeItem: IPublicTypeNodeSchema,\r\n  scope: IScope,\r\n  config?: NodeGeneratorConfig,\r\n): string {\r\n  const pieces: CodePiece[] = [];\r\n  if (config?.nodePlugins) {\r\n    const res = executeFunctionStack<IPublicTypeNodeSchema, CodePiece[], NodeGeneratorConfig>(\r\n      nodeItem,\r\n      scope,\r\n      config.nodePlugins,\r\n      generateSimpleNode,\r\n      config,\r\n    );\r\n    pieces.push(...res);\r\n  } else {\r\n    pieces.push(...generateSimpleNode(nodeItem, scope, config));\r\n  }\r\n\r\n  return linkPieces(pieces);\r\n}\r\n\r\n// TODO: \u751F\u6210\u6587\u6863\r\n// \u4E3A\u5305\u88F9\u7684\u4EE3\u7801\u7247\u6BB5\u751F\u6210\u5B50\u4E0A\u4E0B\u6587\uFF0C\u96C6\u6210\u7236\u7EA7\u4E0A\u4E0B\u6587\uFF0C\u5E76\u4F20\u5165\u5B50\u7EA7\u4E0A\u4E0B\u6587\u65B0\u589E\u5185\u5BB9\u3002\uFF08\u5982\u679C\u5B58\u5728\u591A\u7EA7\u4E0A\u4E0B\u6587\u600E\u4E48\u5904\u7406\uFF1F\uFF09\r\n// \u521B\u5EFA\u65B0\u7684\u4E0A\u4E0B\u6587\uFF0C\u5E76\u4ECE\u4F5C\u7528\u57DF\u4E2D\u53D6\u5BF9\u5E94\u540C\u540D\u53D8\u91CF\u585E\u5230\u4F5C\u7528\u57DF\u91CC\u9762\uFF1F\r\n// export function createSubContext() {}\r\n\r\n/**\r\n * JSX \u751F\u6210\u903B\u8F91\u63D2\u4EF6\u3002\u5728 React \u4EE3\u7801\u6A21\u5F0F\u4E0B\u751F\u6210 loop \u76F8\u5173\u7684\u903B\u8F91\u4EE3\u7801\r\n * @type NodePlugin Extended\r\n *\r\n * @export\r\n * @param {IPublicTypeNodeSchema} nodeItem \u5F53\u524D UI \u8282\u70B9\r\n * @returns {CodePiece[]} \u5B9E\u73B0\u529F\u80FD\u7684\u76F8\u5173\u4EE3\u7801\u7247\u6BB5\r\n */\r\nexport function generateReactLoopCtrl(\r\n  nodeItem: IPublicTypeNodeSchema,\r\n  scope: IScope,\r\n  config?: NodeGeneratorConfig,\r\n  next?: NodePlugin,\r\n): CodePiece[] {\r\n  if (nodeItem.loop) {\r\n    const tolerateEvalErrors = config?.tolerateEvalErrors ?? true;\r\n\r\n    const loopItemName = nodeItem.loopArgs?.[0] || 'item';\r\n    const loopIndexName = nodeItem.loopArgs?.[1] || 'index';\r\n\r\n    // \u65B0\u5EFA\u4F5C\u7528\u57DF\r\n    const subScope = scope.createSubScope([loopItemName, loopIndexName]);\r\n    const pieces: CodePiece[] = next ? next(nodeItem, subScope, config) : [];\r\n\r\n    // \u751F\u6210\u5FAA\u73AF\u53D8\u91CF\u8868\u8FBE\u5F0F\r\n    const loopDataExpr = pipe(\r\n      nodeItem.loop,\r\n      // \u5C06 JSExpression \u8F6C\u6362\u4E3A JS \u8868\u8FBE\u5F0F\u4EE3\u7801:\r\n      (expr) => generateCompositeType(expr, scope, {\r\n          handlers: config?.handlers,\r\n          tolerateEvalErrors: false, // \u8FD9\u4E2A\u5185\u90E8\u4E0D\u9700\u8981\u5305 try catch, \u4E0B\u9762\u4F1A\u7EDF\u4E00\u52A0\u7684\r\n        }),\r\n      // \u5C06 this.xxx \u8F6C\u6362\u4E3A __$$context.xxx:\r\n      (expr) => transformThis2Context(expr, scope, { ignoreRootScope: true }),\r\n      // \u5982\u679C\u8981\u5BB9\u5FCD\u9519\u8BEF\uFF0C\u5219\u5305\u4E00\u5C42 try catch (\u57FA\u4E8E\u52A9\u624B\u51FD\u6570 __$$evalArray)\r\n      (expr) => (tolerateEvalErrors ? `__$$evalArray(() => (${expr}))` : expr),\r\n    );\r\n\r\n    pieces.unshift({\r\n      value: `(${loopDataExpr}).map((${loopItemName}, ${loopIndexName}) => ((__$$context) => (`,\r\n      type: PIECE_TYPE.BEFORE,\r\n    });\r\n\r\n    pieces.push({\r\n      value: `))(__$$createChildContext(__$$context, { ${loopItemName}, ${loopIndexName} })))`,\r\n      type: PIECE_TYPE.AFTER,\r\n    });\r\n\r\n    return pieces;\r\n  }\r\n\r\n  return next ? next(nodeItem, scope, config) : [];\r\n}\r\n\r\n/**\r\n * JSX \u751F\u6210\u903B\u8F91\u63D2\u4EF6\u3002\u5728 React \u4EE3\u7801\u6A21\u5F0F\u4E0B\u751F\u6210 condition \u76F8\u5173\u7684\u903B\u8F91\u4EE3\u7801\r\n * @type NodePlugin\r\n *\r\n * @export\r\n * @param {IPublicTypeNodeSchema} nodeItem \u5F53\u524D UI \u8282\u70B9\r\n * @returns {CodePiece[]} \u5B9E\u73B0\u529F\u80FD\u7684\u76F8\u5173\u4EE3\u7801\u7247\u6BB5\r\n */\r\nexport function generateConditionReactCtrl(\r\n  nodeItem: IPublicTypeNodeSchema,\r\n  scope: IScope,\r\n  config?: NodeGeneratorConfig,\r\n  next?: NodePlugin,\r\n): CodePiece[] {\r\n  const pieces: CodePiece[] = next ? next(nodeItem, scope, config) : [];\r\n\r\n  if (nodeItem.condition != null && nodeItem.condition !== true) {\r\n    const value = generateCompositeType(nodeItem.condition, scope, {\r\n      handlers: config?.handlers,\r\n    });\r\n\r\n    pieces.unshift({\r\n      value: `!!(${value}) && (`,\r\n      type: PIECE_TYPE.BEFORE,\r\n    });\r\n\r\n    pieces.push({\r\n      value: ')',\r\n      type: PIECE_TYPE.AFTER,\r\n    });\r\n  }\r\n\r\n  return pieces;\r\n}\r\n\r\n/**\r\n * JSX \u751F\u6210\u903B\u8F91\u63D2\u4EF6\u3002\u5728 React \u4EE3\u7801\u6A21\u5F0F\u4E0B\uFF0C\u5982\u679C Node \u751F\u6210\u7ED3\u679C\u662F\u4E00\u4E2A\u8868\u8FBE\u5F0F\uFF0C\u5219\u5BF9\u5176\u8FDB\u884C { Expression } \u5305\u88C5\r\n * @type NodePlugin\r\n *\r\n * @export\r\n * @param {IPublicTypeNodeSchema} nodeItem \u5F53\u524D UI \u8282\u70B9\r\n * @returns {CodePiece[]} \u5B9E\u73B0\u529F\u80FD\u7684\u76F8\u5173\u4EE3\u7801\u7247\u6BB5\r\n */\r\nexport function generateReactExprInJS(\r\n  nodeItem: IPublicTypeNodeSchema,\r\n  scope: IScope,\r\n  config?: NodeGeneratorConfig,\r\n  next?: NodePlugin,\r\n): CodePiece[] {\r\n  const pieces: CodePiece[] = next ? next(nodeItem, scope, config) : [];\r\n\r\n  if ((nodeItem.condition != null && nodeItem.condition !== true) || nodeItem.loop != null) {\r\n    pieces.unshift({\r\n      value: '{',\r\n      type: PIECE_TYPE.BEFORE,\r\n    });\r\n\r\n    pieces.push({\r\n      value: '}',\r\n      type: PIECE_TYPE.AFTER,\r\n    });\r\n  }\r\n\r\n  return pieces;\r\n}\r\n\r\nconst handleChildren = (v: string[]) => v.join('');\r\n\r\nexport function createNodeGenerator(cfg: NodeGeneratorConfig = {}): NodeGenerator<string> {\r\n  const generateNode = (nodeItem: IPublicTypeNodeDataType, scope: IScope): string => {\r\n    if (_.isArray(nodeItem)) {\r\n      const resList = nodeItem.map((n) => generateNode(n, scope));\r\n      return handleChildren(resList);\r\n    }\r\n\r\n    if (isNodeSchema(nodeItem)) {\r\n      return generateNodeSchema(nodeItem, scope, {\r\n        ...cfg,\r\n        self: generateNode,\r\n      });\r\n    }\r\n\r\n    const valueStr = generateCompositeType(nodeItem, scope, {\r\n      handlers: cfg.handlers,\r\n      nodeGenerator: generateNode,\r\n    });\r\n\r\n    if (isPureString(valueStr)) {\r\n      return encodeJsxStringNode(getStaticExprValue<string>(valueStr));\r\n    }\r\n\r\n    return `{${valueStr}}`;\r\n  };\r\n\r\n  return (nodeItem: IPublicTypeNodeDataType, scope: IScope) => unwrapJsExprQuoteInJsx(generateNode(nodeItem, scope));\r\n}\r\n\r\nconst defaultReactGeneratorConfig: NodeGeneratorConfig = {\r\n  nodePlugins: [generateReactExprInJS, generateReactLoopCtrl, generateConditionReactCtrl],\r\n};\r\n\r\nexport function createReactNodeGenerator(cfg?: NodeGeneratorConfig): NodeGenerator<string> {\r\n  const newCfg = mergeNodeGeneratorConfig(defaultReactGeneratorConfig, cfg);\r\n\r\n  return createNodeGenerator(newCfg);\r\n}\r\n", "import _ from 'lodash';\r\n// import { encode } from 'html-entities';\r\n\r\nconst SPECIAL_CHARS = '\\n\\r\\'\"<>&';\r\nconst SPECIAL_CHARS_REG = new RegExp(\r\n  `[${SPECIAL_CHARS.split('')\r\n    .map((c) => `\\\\x${_.padStart(c.charCodeAt(0).toString(16), 2, '0')}`)\r\n    .join('')}]`,\r\n  'g',\r\n);\r\n\r\nexport function encodeJsxStringNode(str: string): string {\r\n  return str.replace(SPECIAL_CHARS_REG, (c) => `&#${c.charCodeAt(0)};`);\r\n}\r\n\r\n// export function encodeJsxStringNode(str: string): string {\r\n//   return encode(str);\r\n// }\r\n", "import { Expression } from '@babel/types';\r\nimport generate from '@babel/generator';\r\nimport { IScope } from '../../../types';\r\nimport { parseExpressionConvertThis2Context } from '../../../utils/expressionParser';\r\n\r\n/**\r\n * \u5C06\u6240\u6709\u7684 this.xxx \u66FF\u6362\u4E3A __$$context.xxx\r\n * @param expr\r\n */\r\nexport function transformThis2Context(\r\n  expr: string | Expression,\r\n  scope: IScope,\r\n  { ignoreRootScope = false } = {},\r\n): string {\r\n  if (ignoreRootScope && scope.parent == null) {\r\n    return typeof expr === 'string' ? expr : generate(expr).code;\r\n  }\r\n\r\n  // \u4E0B\u9762\u8FD9\u79CD\u5B57\u7B26\u4E32\u66FF\u6362\u7684\u65B9\u5F0F\u867D\u7136\u7B80\u5355\u76F4\u63A5\uFF0C\u4F46\u662F\u5BF9\u4E8E\u590D\u6742\u573A\u666F\u4F1A\u8BEF\u5339\u914D\uFF0C\u6545\u540E\u671F\u6539\u6210\u4E86\u89E3\u6790 AST \u7136\u540E\u4FEE\u6539 AST \u6700\u540E\u518D\u91CD\u65B0\u751F\u6210\u4EE3\u7801\u7684\u65B9\u5F0F\r\n  // return expr\r\n  //   .replace(/\\bthis\\.item\\./g, () => 'item.')\r\n  //   .replace(/\\bthis\\.index\\./g, () => 'index.')\r\n  //   .replace(/\\bthis\\./g, () => '__$$context.');\r\n  return parseExpressionConvertThis2Context(\r\n    expr,\r\n    '__$$context',\r\n    scope.bindings?.getAllBindings() || [],\r\n  );\r\n}\r\n", "/**\r\n * \u5224\u65AD\u662F\u5426\u662F\u539F\u5B50\u7C7B\u578B\u7684\u8868\u8FBE\u5F0F\r\n */\r\nexport function isLiteralAtomicExpr(expr: string): boolean {\r\n  return (\r\n    expr === 'null' ||\r\n    expr === 'undefined' ||\r\n    expr === 'true' ||\r\n    expr === 'false' ||\r\n    /^-?\\d+(\\.\\d+)?$/.test(expr)\r\n  );\r\n}\r\n", "import { Expression } from '@babel/types';\r\n\r\n/** \u5224\u65AD\u662F\u975E\u662F\u4E00\u4E9B\u7B80\u5355\u76F4\u63A5\u7684\u5B57\u9762\u503C */\r\nexport function isSimpleStraightLiteral(expr: Expression): boolean {\r\n  switch (expr.type) {\r\n    case 'BigIntLiteral':\r\n    case 'BooleanLiteral':\r\n    case 'DecimalLiteral':\r\n    case 'NullLiteral':\r\n    case 'NumericLiteral':\r\n    case 'RegExpLiteral':\r\n    case 'StringLiteral':\r\n      return true;\r\n    default:\r\n      return false;\r\n  }\r\n}\r\n", "import { IScope } from '../../../types';\r\nimport { parseExpression } from '../../../utils/expressionParser';\r\nimport { isLiteralAtomicExpr } from '../util/isLiteralAtomicExpr';\r\nimport { isSimpleStraightLiteral } from '../util/isSimpleStraightLiteral';\r\nimport { transformThis2Context } from './transformThis2Context';\r\n\r\nexport function transformJsExpr(\r\n  expr: string,\r\n  scope: IScope,\r\n  { dontWrapEval = false, dontTransformThis2ContextAtRootScope = false } = {},\r\n) {\r\n  if (!expr) {\r\n    return 'undefined';\r\n  }\r\n\r\n  if (isLiteralAtomicExpr(expr)) {\r\n    return expr;\r\n  }\r\n\r\n  const exprAst = parseExpression(expr);\r\n\r\n  // \u5BF9\u4E8E\u4E0B\u9762\u8FD9\u4E9B\u6BD4\u8F83\u5B89\u5168\u7684\u5B57\u9762\u503C\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8FD4\u56DE\u5BF9\u5E94\u7684\u8868\u8FBE\u5F0F\uFF0C\u800C\u975E\u5305\u4E00\u5C42\r\n  if (isSimpleStraightLiteral(exprAst)) {\r\n    return expr;\r\n  }\r\n\r\n  if (dontWrapEval) {\r\n    return transformThis2Context(exprAst, scope, {\r\n      ignoreRootScope: dontTransformThis2ContextAtRootScope,\r\n    });\r\n  }\r\n\r\n  switch (exprAst.type) {\r\n    // \u5BF9\u4E8E\u76F4\u63A5\u5199\u4E2A\u51FD\u6570\u7684\uFF0C\u5219\u4E0D\u7528\u518D\u5305\u4E0B\uFF0C\u56E0\u4E3A\u8FD9\u6837\u4E0D\u4F1A\u629B\u51FA\u5F02\u5E38\u7684\r\n    case 'ArrowFunctionExpression':\r\n    case 'FunctionExpression':\r\n      return transformThis2Context(exprAst, scope, {\r\n        ignoreRootScope: dontTransformThis2ContextAtRootScope,\r\n      });\r\n\r\n    default:\r\n      break;\r\n  }\r\n\r\n  // \u5176\u4ED6\u7684\u90FD\u9700\u8981\u5305\u4E00\u5C42\r\n  return `__$$eval(() => (${transformThis2Context(exprAst, scope, {\r\n    ignoreRootScope: dontTransformThis2ContextAtRootScope,\r\n  })}))`;\r\n}\r\n", "import {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  HandlerSet,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n  IScope,\r\n  NodeGeneratorConfig,\r\n  PIECE_TYPE,\r\n} from '../../../types';\r\n\r\nimport { REACT_CHUNK_NAME } from './const';\r\nimport { COMMON_CHUNK_NAME } from '../../../const/generator';\r\n\r\nimport { createReactNodeGenerator } from '../../../utils/nodeToJSX';\r\nimport { Scope } from '../../../utils/Scope';\r\nimport { IPublicTypeJSExpression } from '@alilc/lowcode-types';\r\nimport { generateExpression } from '../../../utils/jsExpression';\r\nimport { transformJsExpr } from '../../../core/jsx/handlers/transformJsExpression';\r\nimport { transformThis2Context } from '../../../core/jsx/handlers/transformThis2Context';\r\nimport { generateCompositeType } from '../../../utils/compositeType';\r\n\r\nexport interface PluginConfig {\r\n  fileType?: string;\r\n  nodeTypeMapping?: Record<string, string>;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg = {\r\n    fileType: FileType.JSX,\r\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\r\n    nodeTypeMapping: {} as Record<string, string>,\r\n    ...config,\r\n  };\r\n\r\n  const { nodeTypeMapping } = cfg;\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const { tolerateEvalErrors = true, evalErrorsHandler = '' } = next.contextData;\r\n\r\n    // \u8FD9\u91CC\u4F1A\u5C06\u5185\u90E8\u7684\u4E00\u4E9B\u5B50\u4E0A\u4E0B\u6587\u7684\u8BBF\u95EE(this.xxx)\u8F6C\u6362\u4E3A __$$context.xxx \u7684\u5F62\u5F0F\r\n    // \u4E0E Rax \u6240\u4E0D\u540C\u7684\u662F\uFF0C\u8FD9\u91CC\u4E0D\u4F1A\u5C06\u6700\u9876\u5C42\u7684 this \u8F6C\u6362\u6389\r\n    const customHandlers: HandlerSet<string> = {\r\n      expression(input: IPublicTypeJSExpression, scope: IScope, config) {\r\n        return transformJsExpr(generateExpression(input, scope), scope, {\r\n          dontWrapEval: !(config?.tolerateEvalErrors ?? tolerateEvalErrors),\r\n          dontTransformThis2ContextAtRootScope: true,\r\n        });\r\n      },\r\n      function(input, scope: IScope) {\r\n        return transformThis2Context(\r\n          generateCompositeType(\r\n            {\r\n              type: 'JSFunction',\r\n              value: input.value || 'function () {}',\r\n            },\r\n            Scope.createRootScope(),\r\n          ),\r\n          scope,\r\n          { ignoreRootScope: true },\r\n        );\r\n      },\r\n    };\r\n\r\n    const generatorPlugins: NodeGeneratorConfig = {\r\n      handlers: customHandlers,\r\n      tagMapping: (v) => nodeTypeMapping[v] || v,\r\n      tolerateEvalErrors,\r\n    };\r\n\r\n    if (next.contextData.useRefApi) {\r\n      generatorPlugins.attrPlugins = [\r\n        (attrData, scope, pluginCfg, nextFunc) => {\r\n          if (attrData.attrName === 'ref') {\r\n            return [\r\n              {\r\n                name: attrData.attrName,\r\n                value: `this._refsManager.linkRef('${attrData.attrValue}')`,\r\n                type: PIECE_TYPE.ATTR,\r\n              },\r\n            ];\r\n          }\r\n\r\n          return nextFunc ? nextFunc(attrData, scope, pluginCfg) : [];\r\n        },\r\n      ];\r\n    }\r\n\r\n    const generator = createReactNodeGenerator(generatorPlugins);\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n    const scope: IScope = Scope.createRootScope();\r\n    const jsxContent = generator(ir, scope);\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: REACT_CHUNK_NAME.ClassRenderJSX,\r\n      content: `\r\n        const __$$context = this._context || this;\r\n        const { state } = __$$context;\r\n        return ${jsxContent};\r\n      `,\r\n      linkAfter: [REACT_CHUNK_NAME.ClassRenderStart, REACT_CHUNK_NAME.ClassRenderPre],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: COMMON_CHUNK_NAME.CustomContent,\r\n      content: [\r\n        tolerateEvalErrors &&\r\n          `\r\n          function __$$eval(expr) {\r\n            try {\r\n              return expr();\r\n            } catch (error) {\r\n              ${evalErrorsHandler}\r\n            }\r\n          }\r\n\r\n          function __$$evalArray(expr) {\r\n            const res = __$$eval(expr);\r\n            return Array.isArray(res) ? res : [];\r\n          }\r\n      `,\r\n        `\r\n        function __$$createChildContext(oldContext, ext) {\r\n          const childContext = {\r\n            ...oldContext,\r\n            ...ext,\r\n          };\r\n          childContext.__proto__ = oldContext;\r\n          return childContext;\r\n        }\r\n      `,\r\n      ]\r\n        .filter(Boolean)\r\n        .join('\\n'),\r\n      linkAfter: [COMMON_CHUNK_NAME.FileExport],\r\n    });\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { COMMON_CHUNK_NAME } from '../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n} from '../../../types';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: COMMON_CHUNK_NAME.ExternalDepsImport,\r\n      content: `\r\n// \u6CE8\u610F: \u51FA\u7801\u5F15\u64CE\u6CE8\u5165\u7684\u4E34\u65F6\u53D8\u91CF\u9ED8\u8BA4\u90FD\u4EE5 \"__$$\" \u5F00\u5934\uFF0C\u7981\u6B62\u5728\u642D\u5EFA\u7684\u4EE3\u7801\u4E2D\u76F4\u63A5\u8BBF\u95EE\u3002\r\n// \u4F8B\u5916\uFF1Areact \u6846\u67B6\u7684\u5BFC\u51FA\u540D\u548C\u5404\u79CD\u7EC4\u4EF6\u540D\u9664\u5916\u3002\r\n\\'use client\\';\r\nimport React from \\'react\\';`,\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { COMMON_CHUNK_NAME } from '../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n} from '../../../types';\r\n\r\nexport interface PluginConfig {\r\n  fileType: string;\r\n  moduleFileType: string;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig = {\r\n    fileType: FileType.CSS,\r\n    moduleFileType: FileType.JSX,\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: COMMON_CHUNK_NAME.StyleCssContent,\r\n      content: ir.css,\r\n      linkAfter: [COMMON_CHUNK_NAME.StyleDepsImport],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.moduleFileType,\r\n      name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n      content: `import './page.${cfg.fileType}';`,\r\n      linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { COMMON_CHUNK_NAME } from '../../const/generator';\r\nimport { generateCompositeType } from '../../utils/compositeType';\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IProjectInfo,\r\n} from '../../types';\r\nimport { Scope } from '../../utils/Scope';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IProjectInfo;\r\n    const scope = Scope.createRootScope();\r\n    const constantStr = generateCompositeType(ir.constants || {}, scope);\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JS,\r\n      name: COMMON_CHUNK_NAME.FileVarDefine,\r\n      content: `\r\n        const __$$constants = (${constantStr});\r\n      `,\r\n      linkAfter: [\r\n        COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        COMMON_CHUNK_NAME.InternalDepsImport,\r\n        COMMON_CHUNK_NAME.ImportAliasDefine,\r\n      ],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JS,\r\n      name: COMMON_CHUNK_NAME.FileExport,\r\n      content: `\r\n        export default __$$constants;\r\n      `,\r\n      linkAfter: [\r\n        COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        COMMON_CHUNK_NAME.InternalDepsImport,\r\n        COMMON_CHUNK_NAME.ImportAliasDefine,\r\n        COMMON_CHUNK_NAME.FileVarDefine,\r\n        COMMON_CHUNK_NAME.FileUtilDefine,\r\n        COMMON_CHUNK_NAME.FileMainContent,\r\n      ],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { COMMON_CHUNK_NAME } from '../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IProjectInfo,\r\n} from '../../types';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IProjectInfo;\r\n    const i18nStr = ir.i18n ? JSON.stringify(ir.i18n, null, 2) : '{}';\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JS,\r\n      name: COMMON_CHUNK_NAME.FileMainContent,\r\n      content: `\r\n        const i18nConfig = ${i18nStr};\r\n\r\n        let locale = typeof navigator === 'object' && typeof navigator.language === 'string' ? navigator.language : 'zh-CN';\r\n\r\n        const getLocale = () => locale;\r\n\r\n        const setLocale = (target) => {\r\n          locale = target;\r\n        };\r\n\r\n        const isEmptyVariables = variables => (\r\n          Array.isArray(variables) && variables.length === 0\r\n          || typeof variables === 'object' && (!variables || Object.keys(variables).length === 0)\r\n        );\r\n\r\n        // \u6309\u4F4E\u4EE3\u7801\u89C4\u8303\u91CC\u9762\u7684\u8981\u6C42\u8FDB\u884C\u53D8\u91CF\u66FF\u6362\r\n        const format = (msg, variables) => (\r\n          typeof msg === 'string'\r\n            ? msg.replace(/\\\\\\$?\\\\{(\\\\w+)\\\\}/g, (match, key) => variables?.[key] ?? '')\r\n            : msg\r\n        );\r\n\r\n        const i18nFormat = ({ id, defaultMessage, fallback }, variables) => {\r\n          const msg = i18nConfig[locale]?.[id] ??  i18nConfig[locale.replace('-', '_')]?.[id] ??  defaultMessage;\r\n          if (msg == null) {\r\n            console.warn('[i18n]: unknown message id: %o (locale=%o)', id, locale);\r\n            return fallback === undefined ? \\`\\${id}\\` : fallback;\r\n          }\r\n\r\n          return format(msg, variables);\r\n        }\r\n\r\n        const i18n = (id, params) => {\r\n          return i18nFormat({ id }, params);\r\n        };\r\n\r\n        // \u5C06\u56FD\u9645\u5316\u7684\u4E00\u4E9B\u65B9\u6CD5\u6CE8\u5165\u5230\u76EE\u6807\u5BF9\u8C61&\u4E0A\u4E0B\u6587\u4E2D\r\n        const _inject2 = (target) => {\r\n          target.i18n = i18n;\r\n          target.getLocale = getLocale;\r\n          target.setLocale = (locale) => {\r\n            setLocale(locale);\r\n            target.forceUpdate();\r\n          };\r\n          target._i18nText = (t) => {\r\n            // \u4F18\u5148\u53D6\u76F4\u63A5\u4F20\u8FC7\u6765\u7684\u8BED\u6599\r\n            const localMsg = t[locale] ?? t[String(locale).replace('-', '_')]\r\n            if (localMsg != null) {\r\n              return format(localMsg, t.params);\r\n            }\r\n\r\n            // \u5176\u6B21\u7528\u9879\u76EE\u7EA7\u522B\u7684\r\n            const projectMsg = i18nFormat({ id: t.key, fallback: null }, t.params);\r\n            if (projectMsg != null) {\r\n              return projectMsg;\r\n            }\r\n\r\n            // \u515C\u5E95\u7528 use \u6307\u5B9A\u7684\u6216\u9ED8\u8BA4\u8BED\u8A00\u7684\r\n            return format(t[t.use || \"zh-CN\"] ?? t.en_US, t.params);\r\n          }\r\n\r\n          // \u6CE8\u5165\u5230\u4E0A\u4E0B\u6587\u4E2D\u53BB\r\n          if (target._context && target._context !== target) {\r\n            Object.assign(target._context, {\r\n              i18n,\r\n              getLocale, setLocale: target.setLocale\r\n            });\r\n          }\r\n        }\r\n      `,\r\n      linkAfter: [\r\n        COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        COMMON_CHUNK_NAME.InternalDepsImport,\r\n        COMMON_CHUNK_NAME.ImportAliasDefine,\r\n        COMMON_CHUNK_NAME.FileVarDefine,\r\n        COMMON_CHUNK_NAME.FileUtilDefine,\r\n      ],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JS,\r\n      name: COMMON_CHUNK_NAME.FileExport,\r\n      content: `\r\n        export {\r\n          getLocale,\r\n          setLocale,\r\n          i18n,\r\n          i18nFormat,\r\n          _inject2,\r\n        };\r\n      `,\r\n      linkAfter: [\r\n        COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        COMMON_CHUNK_NAME.InternalDepsImport,\r\n        COMMON_CHUNK_NAME.ImportAliasDefine,\r\n        COMMON_CHUNK_NAME.FileVarDefine,\r\n        COMMON_CHUNK_NAME.FileUtilDefine,\r\n        COMMON_CHUNK_NAME.FileMainContent,\r\n      ],\r\n    });\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { COMMON_CHUNK_NAME, DEFAULT_LINK_AFTER } from '../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IUtilInfo,\r\n} from '../../types';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<string> = (baseFramework?: string) => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const framework = baseFramework || 'react';\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IUtilInfo;\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JS,\r\n      name: COMMON_CHUNK_NAME.ExternalDepsImport,\r\n      content: `\r\n        import { createRef } from '${framework}';\r\n      `,\r\n      linkAfter: [],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JS,\r\n      name: COMMON_CHUNK_NAME.FileUtilDefine,\r\n      content: `\r\n        export class RefsManager {\r\n          constructor() {\r\n            this.refInsStore = {};\r\n          }\r\n\r\n          clearNullRefs() {\r\n            Object.keys(this.refInsStore).forEach((refName) => {\r\n              const filteredInsList = this.refInsStore[refName].filter(insRef => !!insRef.current);\r\n              if (filteredInsList.length > 0) {\r\n                this.refInsStore[refName] = filteredInsList;\r\n              } else {\r\n                delete this.refInsStore[refName];\r\n              }\r\n            });\r\n          }\r\n\r\n          get(refName) {\r\n            this.clearNullRefs();\r\n            if (this.refInsStore[refName] && this.refInsStore[refName].length > 0) {\r\n              return this.refInsStore[refName][0].current;\r\n            }\r\n\r\n            return null;\r\n          }\r\n\r\n          getAll(refName) {\r\n            this.clearNullRefs();\r\n            if (this.refInsStore[refName] && this.refInsStore[refName].length > 0) {\r\n              return this.refInsStore[refName].map(i => i.current);\r\n            }\r\n\r\n            return [];\r\n          }\r\n\r\n          linkRef(refName) {\r\n            const refIns = createRef();\r\n            this.refInsStore[refName] = this.refInsStore[refName] || [];\r\n            this.refInsStore[refName].push(refIns);\r\n            return refIns;\r\n          }\r\n        }\r\n      `,\r\n      linkAfter: [...DEFAULT_LINK_AFTER[COMMON_CHUNK_NAME.FileUtilDefine]],\r\n    });\r\n\r\n    if (ir.utils) {\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: FileType.JS,\r\n        name: COMMON_CHUNK_NAME.FileExport,\r\n        content: `\r\n          export default {\r\n        `,\r\n        linkAfter: [\r\n          COMMON_CHUNK_NAME.ExternalDepsImport,\r\n          COMMON_CHUNK_NAME.InternalDepsImport,\r\n          COMMON_CHUNK_NAME.ImportAliasDefine,\r\n          COMMON_CHUNK_NAME.FileVarDefine,\r\n          COMMON_CHUNK_NAME.FileUtilDefine,\r\n          COMMON_CHUNK_NAME.FileMainContent,\r\n        ],\r\n      });\r\n\r\n      ir.utils.forEach((util) => {\r\n        if (util.type === 'function') {\r\n          next.chunks.push({\r\n            type: ChunkType.STRING,\r\n            fileType: FileType.JS,\r\n            name: COMMON_CHUNK_NAME.FileVarDefine,\r\n            content: `\r\n              const ${util.name} = ${util.content.value};\r\n            `,\r\n            linkAfter: [\r\n              COMMON_CHUNK_NAME.ExternalDepsImport,\r\n              COMMON_CHUNK_NAME.InternalDepsImport,\r\n              COMMON_CHUNK_NAME.ImportAliasDefine,\r\n            ],\r\n          });\r\n        }\r\n\r\n        next.chunks.push({\r\n          type: ChunkType.STRING,\r\n          fileType: FileType.JS,\r\n          name: COMMON_CHUNK_NAME.FileExport,\r\n          content: `${util.name},`,\r\n          linkAfter: [\r\n            COMMON_CHUNK_NAME.ExternalDepsImport,\r\n            COMMON_CHUNK_NAME.InternalDepsImport,\r\n            COMMON_CHUNK_NAME.ImportAliasDefine,\r\n            COMMON_CHUNK_NAME.FileVarDefine,\r\n            COMMON_CHUNK_NAME.FileUtilDefine,\r\n            COMMON_CHUNK_NAME.FileMainContent,\r\n          ],\r\n        });\r\n      });\r\n\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: FileType.JS,\r\n        name: COMMON_CHUNK_NAME.FileExport,\r\n        content: `\r\n          };\r\n        `,\r\n        linkAfter: [\r\n          COMMON_CHUNK_NAME.ExternalDepsImport,\r\n          COMMON_CHUNK_NAME.InternalDepsImport,\r\n          COMMON_CHUNK_NAME.ImportAliasDefine,\r\n          COMMON_CHUNK_NAME.FileVarDefine,\r\n          COMMON_CHUNK_NAME.FileUtilDefine,\r\n          COMMON_CHUNK_NAME.FileMainContent,\r\n        ],\r\n      });\r\n    }\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { ResultDir, ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultDir, addDirectory, addFile } from './resultHelper';\r\n\r\ntype FuncFileGenerator = () => [string[], ResultFile];\r\n\r\nexport function insertFile(root: ResultDir, path: string[], file: ResultFile) {\r\n  let current: ResultDir = root;\r\n  path.forEach((pathNode) => {\r\n    const dir = current.dirs.find((d) => d.name === pathNode);\r\n    if (dir) {\r\n      current = dir;\r\n    } else {\r\n      const newDir = createResultDir(pathNode);\r\n      addDirectory(current, newDir);\r\n      current = newDir;\r\n    }\r\n  });\r\n\r\n  addFile(current, file);\r\n}\r\n\r\nexport function runFileGenerator(root: ResultDir, fun: FuncFileGenerator) {\r\n  try {\r\n    const result = fun();\r\n    const [path, file] = result;\r\n    insertFile(root, path, file);\r\n  } catch (error) {\r\n    throw new Error(`Error: ${typeof fun}`);\r\n  }\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    [],\r\n    {\r\n      name: 'abc',\r\n      ext: 'json',\r\n      content: `\r\n{\r\n  \"type\": \"ice-app\",\r\n  \"builder\": \"@ali/builder-ice-app\"\r\n}\r\n    `,\r\n    },\r\n  ];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    [],\r\n    {\r\n      name: 'build',\r\n      ext: 'json',\r\n      content: `\r\n{\r\n  \"entry\": \"src/app.js\",\r\n  \"plugins\": [\r\n    [\r\n      \"build-plugin-fusion\",\r\n      {\r\n        \"themePackage\": \"@alifd/theme-design-pro\"\r\n      }\r\n    ],\r\n    [\r\n      \"build-plugin-moment-locales\",\r\n      {\r\n        \"locales\": [\r\n          \"zh-cn\"\r\n        ]\r\n      }\r\n    ]\r\n  ]\r\n}\r\n      `,\r\n    },\r\n  ];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    '.editorconfig',\r\n    '',\r\n    `\r\n# http://editorconfig.org\r\nroot = true\r\n\r\n[*]\r\nindent_style = space\r\nindent_size = 2\r\ncharset = utf-8\r\ntrim_trailing_whitespace = true\r\ninsert_final_newline = true\r\n\r\n[*.md]\r\ntrim_trailing_whitespace = false\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    '.eslintignore',\r\n    '',\r\n    `\r\n# \u5FFD\u7565\u76EE\u5F55\r\nbuild/\r\ntests/\r\ndemo/\r\n.ice/\r\n\r\n# node \u8986\u76D6\u7387\u6587\u4EF6\r\ncoverage/\r\n\r\n# \u5FFD\u7565\u6587\u4EF6\r\n**/*-min.js\r\n**/*.min.js\r\n\r\npackage-lock.json\r\nyarn.lock\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    '.eslintrc',\r\n    'js',\r\n    `\r\nconst { eslint } = require('@ice/spec');\r\n\r\nmodule.exports = eslint;\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    '.gitignore',\r\n    '',\r\n    `\r\n# See https://help.github.com/ignore-files/ for more about ignoring files.\r\n\r\n# dependencies\r\nnode_modules/\r\n\r\n# production\r\nbuild/\r\ndist/\r\ntmp/\r\nlib/\r\n\r\n# misc\r\n.idea/\r\n.happypack\r\n.DS_Store\r\n*.swp\r\n*.dia~\r\n.ice\r\n\r\nnpm-debug.log*\r\nyarn-debug.log*\r\nyarn-error.log*\r\nindex.module.scss.d.ts\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'jsconfig',\r\n    'json',\r\n    `\r\n{\r\n  \"compilerOptions\": {\r\n    \"baseUrl\": \".\",\r\n    \"jsx\": \"react\",\r\n    \"paths\": {\r\n      \"@/*\": [\"./src/*\"],\r\n      \"ice\": [\".ice/index.ts\"],\r\n      \"ice/*\": [\".ice/pages/*\"]\r\n    }\r\n  }\r\n}\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    '.prettierignore',\r\n    '',\r\n    `\r\nbuild/\r\ntests/\r\ndemo/\r\n.ice/\r\ncoverage/\r\n**/*-min.js\r\n**/*.min.js\r\npackage-lock.json\r\nyarn.lock\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    '.prettierrc',\r\n    'js',\r\n    `\r\nconst { prettier } = require('@ice/spec');\r\n\r\nmodule.exports = prettier;\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'README',\r\n    'md',\r\n    `\r\n## Scaffold Lite\r\n\r\n> \u8F7B\u91CF\u7EA7\u6A21\u677F\uFF0C\u4F7F\u7528 JavaScript\uFF0C\u4EC5\u5305\u542B\u57FA\u7840\u7684 Layout\u3002\r\n\r\n## \u4F7F\u7528\r\n\r\n\\`\\`\\`bash\r\n# \u5B89\u88C5\u4F9D\u8D56\r\n$ npm install\r\n\r\n# \u542F\u52A8\u670D\u52A1\r\n$ npm start  # visit http://localhost:3333\r\n\\`\\`\\`\r\n\r\n[More docs](https://ice.work/docs/guide/about).\r\n\r\n## \u76EE\u5F55\r\n\r\n\\`\\`\\`md\r\n\u251C\u2500\u2500 build/                         # \u6784\u5EFA\u4EA7\u7269\r\n\u251C\u2500\u2500 mock/                          # \u672C\u5730\u6A21\u62DF\u6570\u636E\r\n\u2502   \u251C\u2500\u2500 index.[j,t]s\r\n\u251C\u2500\u2500 public/\r\n\u2502   \u251C\u2500\u2500 index.html                 # \u5E94\u7528\u5165\u53E3 HTML\r\n\u2502   \u2514\u2500\u2500 favicon.png                # Favicon\r\n\u251C\u2500\u2500 src/                           # \u6E90\u7801\u8DEF\u5F84\r\n\u2502   \u251C\u2500\u2500 components/                # \u81EA\u5B9A\u4E49\u4E1A\u52A1\u7EC4\u4EF6\r\n\u2502   \u2502   \u2514\u2500\u2500 Guide/\r\n\u2502   \u2502       \u251C\u2500\u2500 index.[j,t]sx\r\n\u2502   \u2502       \u251C\u2500\u2500 index.module.scss\r\n\u2502   \u251C\u2500\u2500 layouts/                   # \u5E03\u5C40\u7EC4\u4EF6\r\n\u2502   \u2502   \u2514\u2500\u2500 BasicLayout/\r\n\u2502   \u2502       \u251C\u2500\u2500 index.[j,t]sx\r\n\u2502   \u2502       \u2514\u2500\u2500 index.module.scss\r\n\u2502   \u251C\u2500\u2500 pages/                     # \u9875\u9762\r\n\u2502   \u2502   \u2514\u2500\u2500 Home/                  # home \u9875\u9762\uFF0C\u7EA6\u5B9A\u8DEF\u7531\u8F6C\u6210\u5C0F\u5199\r\n\u2502   \u2502       \u251C\u2500\u2500 components/        # \u9875\u9762\u7EA7\u81EA\u5B9A\u4E49\u4E1A\u52A1\u7EC4\u4EF6\r\n\u2502   \u2502       \u251C\u2500\u2500 models.[j,t]sx     # \u9875\u9762\u7EA7\u6570\u636E\u72B6\u6001\r\n\u2502   \u2502       \u251C\u2500\u2500 index.[j,t]sx      # \u9875\u9762\u5165\u53E3\r\n\u2502   \u2502       \u2514\u2500\u2500 index.module.scss  # \u9875\u9762\u6837\u5F0F\u6587\u4EF6\r\n\u2502   \u251C\u2500\u2500 configs/                   # [\u53EF\u9009] \u914D\u7F6E\u6587\u4EF6\r\n\u2502   \u2502   \u2514\u2500\u2500 menu.[j,t]s            # [\u53EF\u9009] \u83DC\u5355\u914D\u7F6E\r\n\u2502   \u251C\u2500\u2500 models/                    # [\u53EF\u9009] \u5E94\u7528\u7EA7\u6570\u636E\u72B6\u6001\r\n\u2502   \u2502   \u2514\u2500\u2500 user.[j,t]s\r\n\u2502   \u251C\u2500\u2500 utils/                     # [\u53EF\u9009] \u5DE5\u5177\u5E93\r\n\u2502   \u251C\u2500\u2500 global.scss                # \u5168\u5C40\u6837\u5F0F\r\n\u2502   \u251C\u2500\u2500 routes.[j,t]s              # \u8DEF\u7531\u914D\u7F6E\r\n\u2502   \u2514\u2500\u2500 app.[j,t]s[x]              # \u5E94\u7528\u5165\u53E3\u811A\u672C\r\n\u251C\u2500\u2500 build.json                     # \u5DE5\u7A0B\u914D\u7F6E\r\n\u251C\u2500\u2500 README.md\r\n\u251C\u2500\u2500 package.json\r\n\u251C\u2500\u2500 .editorconfig\r\n\u251C\u2500\u2500 .eslintignore\r\n\u251C\u2500\u2500 .eslintrc.[j,t]s\r\n\u251C\u2500\u2500 .gitignore\r\n\u251C\u2500\u2500 .stylelintignore\r\n\u251C\u2500\u2500 .stylelintrc.[j,t]s\r\n\u251C\u2500\u2500 .gitignore\r\n\u2514\u2500\u2500 [j,t]sconfig.json\r\n\\`\\`\\`\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'index',\r\n    'jsx',\r\n    `\r\nimport React from 'react';\r\nimport styles from './index.module.scss';\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <p className={styles.footer}>\r\n      <span className={styles.logo}>Alibaba Fusion</span>\r\n      <br />\r\n      <span className={styles.copyright}>\u00A9 2019-\u73B0\u5728 Alibaba Fusion & ICE</span>\r\n    </p>\r\n  );\r\n}\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout', 'components', 'Footer'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'index',\r\n    'module.scss',\r\n    `\r\n.footer {\r\n  line-height: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.logo {\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n}\r\n\r\n.copyright {\r\n  font-size: 12px;\r\n}\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout', 'components', 'Footer'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'index',\r\n    'jsx',\r\n    `\r\nimport React from 'react';\r\nimport { Link } from 'ice';\r\nimport styles from './index.module.scss';\r\n\r\nexport default function Logo({ image, text, url }) {\r\n  return (\r\n    <div className=\"logo\">\r\n      <Link to={url || '/'} className={styles.logo}>\r\n        {image && <img src={image} alt=\"logo\" />}\r\n        <span>{text}</span>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout', 'components', 'Logo'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'index',\r\n    'module.scss',\r\n    `\r\n.logo{\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: $color-text1-1;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  line-height: 22px;\r\n\r\n  &:visited, &:link {\r\n    color: $color-text1-1;\r\n  }\r\n\r\n  img {\r\n    height: 24px;\r\n    margin-right: 10px;\r\n  }\r\n}\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout', 'components', 'Logo'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'index',\r\n    'jsx',\r\n    `\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link, withRouter } from 'ice';\r\nimport { Nav } from '@alifd/next';\r\nimport { asideMenuConfig } from '../../menuConfig';\r\n\r\nconst { SubNav } = Nav;\r\nconst NavItem = Nav.Item;\r\n\r\nfunction getNavMenuItems(menusData) {\r\n  if (!menusData) {\r\n    return [];\r\n  }\r\n\r\n  return menusData\r\n    .filter(item => item.name && !item.hideInMenu)\r\n    .map((item, index) => getSubMenuOrItem(item, index));\r\n}\r\n\r\nfunction getSubMenuOrItem(item, index) {\r\n  if (item.children && item.children.some(child => child.name)) {\r\n    const childrenItems = getNavMenuItems(item.children);\r\n\r\n    if (childrenItems && childrenItems.length > 0) {\r\n      const subNav = (\r\n        <SubNav key={index} icon={item.icon} label={item.name}>\r\n          {childrenItems}\r\n        </SubNav>\r\n      );\r\n      return subNav;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  const navItem = (\r\n    <NavItem key={item.path} icon={item.icon}>\r\n      <Link to={item.path}>{item.name}</Link>\r\n    </NavItem>\r\n  );\r\n  return navItem;\r\n}\r\n\r\nconst Navigation = (props, context) => {\r\n  const { location } = props;\r\n  const { pathname } = location;\r\n  const { isCollapse } = context;\r\n  return (\r\n    <Nav\r\n      type=\"primary\"\r\n      selectedKeys={[pathname]}\r\n      defaultSelectedKeys={[pathname]}\r\n      embeddable\r\n      openMode=\"single\"\r\n      iconOnly={isCollapse}\r\n      hasArrow={false}\r\n      mode={isCollapse ? 'popup' : 'inline'}\r\n    >\r\n      {getNavMenuItems(asideMenuConfig)}\r\n    </Nav>\r\n  );\r\n};\r\n\r\nNavigation.contextTypes = {\r\n  isCollapse: PropTypes.bool,\r\n};\r\nconst PageNav = withRouter(Navigation);\r\nexport default PageNav;\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout', 'components', 'PageNav'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'index',\r\n    'jsx',\r\n    `\r\nimport React, { useState } from 'react';\r\nimport { Shell, ConfigProvider } from '@alifd/next';\r\nimport PageNav from './components/PageNav';\r\nimport Logo from './components/Logo';\r\nimport Footer from './components/Footer';\r\n\r\n(function() {\r\n  const throttle = function(type, name, obj = window) {\r\n    let running = false;\r\n\r\n    const func = () => {\r\n      if (running) {\r\n        return;\r\n      }\r\n\r\n      running = true;\r\n      requestAnimationFrame(() => {\r\n        obj.dispatchEvent(new CustomEvent(name));\r\n        running = false;\r\n      });\r\n    };\r\n\r\n    obj.addEventListener(type, func);\r\n  };\r\n\r\n  throttle('resize', 'optimizedResize');\r\n})();\r\n\r\nexport default function BasicLayout({ children }) {\r\n  const getDevice = width => {\r\n    const isPhone =\r\n      typeof navigator !== 'undefined' && navigator && navigator.userAgent.match(/phone/gi);\r\n\r\n    if (width < 680 || isPhone) {\r\n      return 'phone';\r\n    }\r\n    if (width < 1280 && width > 680) {\r\n      return 'tablet';\r\n    }\r\n    return 'desktop';\r\n  };\r\n\r\n  const [device, setDevice] = useState(getDevice(NaN));\r\n  window.addEventListener('optimizedResize', e => {\r\n    setDevice(getDevice(e && e.target && e.target.innerWidth));\r\n  });\r\n  return (\r\n    <ConfigProvider device={device}>\r\n      <Shell\r\n        type=\"dark\"\r\n        style={{\r\n          minHeight: '100vh',\r\n        }}\r\n      >\r\n        <Shell.Branding>\r\n          <Logo\r\n            image=\"https://img.alicdn.com/tfs/TB1.ZBecq67gK0jSZFHXXa9jVXa-904-826.png\"\r\n            text=\"Logo\"\r\n          />\r\n        </Shell.Branding>\r\n        <Shell.Navigation\r\n          direction=\"hoz\"\r\n          style={{\r\n            marginRight: 10,\r\n          }}\r\n        ></Shell.Navigation>\r\n        <Shell.Action></Shell.Action>\r\n        <Shell.Navigation>\r\n          <PageNav />\r\n        </Shell.Navigation>\r\n\r\n        <Shell.Content>{children}</Shell.Content>\r\n        <Shell.Footer>\r\n          <Footer />\r\n        </Shell.Footer>\r\n      </Shell>\r\n    </ConfigProvider>\r\n  );\r\n}\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'menuConfig',\r\n    'js',\r\n    `\r\nconst headerMenuConfig = [];\r\nconst asideMenuConfig = [\r\n  {\r\n    name: 'Dashboard',\r\n    path: '/',\r\n    icon: 'smile',\r\n  },\r\n];\r\nexport { headerMenuConfig, asideMenuConfig };\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    '.stylelintignore',\r\n    '',\r\n    `\r\n# \u5FFD\u7565\u76EE\u5F55\r\nbuild/\r\ntests/\r\ndemo/\r\n\r\n# node \u8986\u76D6\u7387\u6587\u4EF6\r\ncoverage/\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    '.stylelintrc',\r\n    'js',\r\n    `\r\nconst { stylelint } = require('@ice/spec');\r\n\r\nmodule.exports = stylelint;\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'tsconfig',\r\n    'json',\r\n    `\r\n{\r\n  \"compileOnSave\": false,\r\n  \"buildOnSave\": false,\r\n  \"compilerOptions\": {\r\n    \"baseUrl\": \".\",\r\n    \"outDir\": \"build\",\r\n    \"module\": \"esnext\",\r\n    \"target\": \"es6\",\r\n    \"jsx\": \"react\",\r\n    \"moduleResolution\": \"node\",\r\n    \"allowSyntheticDefaultImports\": true,\r\n    \"lib\": [\"es6\", \"dom\"],\r\n    \"sourceMap\": true,\r\n    \"allowJs\": true,\r\n    \"rootDir\": \"./\",\r\n    \"forceConsistentCasingInFileNames\": true,\r\n    \"noImplicitReturns\": true,\r\n    \"noImplicitThis\": true,\r\n    \"noImplicitAny\": false,\r\n    \"importHelpers\": true,\r\n    \"strictNullChecks\": true,\r\n    \"suppressImplicitAnyIndexErrors\": true,\r\n    \"noUnusedLocals\": true,\r\n    \"skipLibCheck\": true,\r\n    \"paths\": {\r\n      \"@/*\": [\"./src/*\"],\r\n      \"ice\": [\".ice/index.ts\"],\r\n      \"ice/*\": [\".ice/pages/*\"]\r\n    }\r\n  },\r\n  \"include\": [\"src/*\", \".ice\"],\r\n  \"exclude\": [\"node_modules\", \"build\", \"public\"]\r\n}\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultDir } from '@alilc/lowcode-types';\r\n\r\nimport { createResultDir } from '../../../../../utils/resultHelper';\r\nimport { runFileGenerator } from '../../../../../utils/templateHelper';\r\n\r\nimport file12 from './files/abc.json';\r\nimport file11 from './files/build.json';\r\nimport file10 from './files/editorconfig';\r\nimport file9 from './files/eslintignore';\r\nimport file8 from './files/eslintrc.js';\r\nimport file7 from './files/gitignore';\r\nimport file6 from './files/jsconfig.json';\r\nimport file5 from './files/prettierignore';\r\nimport file4 from './files/prettierrc.js';\r\nimport file13 from './files/README.md';\r\nimport file16 from './files/src/layouts/BasicLayout/components/Footer/index.jsx';\r\nimport file17 from './files/src/layouts/BasicLayout/components/Footer/index.style';\r\nimport file18 from './files/src/layouts/BasicLayout/components/Logo/index.jsx';\r\nimport file19 from './files/src/layouts/BasicLayout/components/Logo/index.style';\r\nimport file20 from './files/src/layouts/BasicLayout/components/PageNav/index.jsx';\r\nimport file14 from './files/src/layouts/BasicLayout/index.jsx';\r\nimport file15 from './files/src/layouts/BasicLayout/menuConfig.js';\r\nimport file3 from './files/stylelintignore';\r\nimport file2 from './files/stylelintrc.js';\r\nimport file1 from './files/tsconfig.json';\r\n\r\nexport function generateStaticFiles(root = createResultDir('.')): ResultDir {\r\n  runFileGenerator(root, file1);\r\n  runFileGenerator(root, file2);\r\n  runFileGenerator(root, file3);\r\n  runFileGenerator(root, file4);\r\n  runFileGenerator(root, file5);\r\n  runFileGenerator(root, file6);\r\n  runFileGenerator(root, file7);\r\n  runFileGenerator(root, file8);\r\n  runFileGenerator(root, file9);\r\n  runFileGenerator(root, file10);\r\n  runFileGenerator(root, file11);\r\n  runFileGenerator(root, file12);\r\n  runFileGenerator(root, file13);\r\n  runFileGenerator(root, file14);\r\n  runFileGenerator(root, file15);\r\n  runFileGenerator(root, file16);\r\n  runFileGenerator(root, file17);\r\n  runFileGenerator(root, file18);\r\n  runFileGenerator(root, file19);\r\n  runFileGenerator(root, file20);\r\n\r\n  return root;\r\n}\r\n", "import { ResultDir } from '@alilc/lowcode-types';\r\nimport { IProjectTemplate } from '../../../../../types';\r\nimport { generateStaticFiles } from './static-files';\r\n\r\nconst icejsTemplate: IProjectTemplate = {\r\n  slots: {\r\n    components: {\r\n      path: ['src', 'components'],\r\n    },\r\n    pages: {\r\n      path: ['src', 'pages'],\r\n    },\r\n    router: {\r\n      path: ['src'],\r\n      fileName: 'routes',\r\n    },\r\n    entry: {\r\n      path: ['src'],\r\n      fileName: 'app',\r\n    },\r\n    constants: {\r\n      path: ['src'],\r\n      fileName: 'constants',\r\n    },\r\n    utils: {\r\n      path: ['src'],\r\n      fileName: 'utils',\r\n    },\r\n    i18n: {\r\n      path: ['src'],\r\n      fileName: 'i18n',\r\n    },\r\n    globalStyle: {\r\n      path: ['src'],\r\n      fileName: 'global',\r\n    },\r\n    htmlEntry: {\r\n      path: ['public'],\r\n      fileName: 'index',\r\n    },\r\n    packageJSON: {\r\n      path: [],\r\n      fileName: 'package',\r\n    },\r\n  },\r\n\r\n  generateTemplate(): ResultDir {\r\n    return generateStaticFiles();\r\n  },\r\n};\r\n\r\nexport default icejsTemplate;\r\n", "import { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n} from '../../../../../types';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JS,\r\n      name: COMMON_CHUNK_NAME.ExternalDepsImport,\r\n      content: `\r\n        import { createApp } from 'ice';\r\n      `,\r\n      linkAfter: [],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JS,\r\n      name: COMMON_CHUNK_NAME.FileMainContent,\r\n      content: `\r\n        const appConfig = {\r\n          app: {\r\n            rootId: 'app',\r\n          },\r\n          router: {\r\n            type: 'hash',\r\n          },\r\n        };\r\n        createApp(appConfig);\r\n      `,\r\n      linkAfter: [\r\n        COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        COMMON_CHUNK_NAME.InternalDepsImport,\r\n        COMMON_CHUNK_NAME.ImportAliasDefine,\r\n        COMMON_CHUNK_NAME.FileVarDefine,\r\n        COMMON_CHUNK_NAME.FileUtilDefine,\r\n      ],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IProjectInfo,\r\n} from '../../../../../types';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IProjectInfo;\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.HTML,\r\n      name: COMMON_CHUNK_NAME.HtmlContent,\r\n      content: `\r\n        <!DOCTYPE html>\r\n        <html>\r\n          <head>\r\n            <meta charset=\"utf-8\" />\r\n            <meta http-equiv=\"x-ua-compatible\" content=\"ie=edge,chrome=1\" />\r\n            <meta name=\"viewport\" content=\"width=device-width\" />\r\n            <title>${ir?.meta?.name || 'Ice App'}</title>\r\n          </head>\r\n          <body>\r\n            <div id=\"app\"></div>\r\n          </body>\r\n        </html>\r\n      `,\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IProjectInfo,\r\n} from '../../../../../types';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IProjectInfo;\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.SCSS,\r\n      name: COMMON_CHUNK_NAME.StyleDepsImport,\r\n      content: `\r\n        // \u5F15\u5165\u9ED8\u8BA4\u5168\u5C40\u6837\u5F0F\r\n        @import '@alifd/next/reset.scss';\r\n      `,\r\n      linkAfter: [],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.SCSS,\r\n      name: COMMON_CHUNK_NAME.StyleCssContent,\r\n      content: `\r\n        body {\r\n          -webkit-font-smoothing: antialiased;\r\n        }\r\n      `,\r\n      linkAfter: [COMMON_CHUNK_NAME.StyleDepsImport],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.SCSS,\r\n      name: COMMON_CHUNK_NAME.StyleCssContent,\r\n      content: ir.css || '',\r\n      linkAfter: [COMMON_CHUNK_NAME.StyleDepsImport],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import changeCase from 'change-case';\r\nimport type { IProjectInfo } from '../types/intermediate';\r\n\r\nexport interface DataSourceDependenciesConfig {\r\n\r\n  /** \u6570\u636E\u6E90\u5F15\u64CE\u7684\u7248\u672C */\r\n  engineVersion?: string;\r\n\r\n  /** \u6570\u636E\u6E90\u5F15\u64CE\u7684\u5305\u540D */\r\n  enginePackage?: string;\r\n\r\n  /** \u6570\u636E\u6E90 handlers \u7684\u7248\u672C */\r\n  handlersVersion?: {\r\n    [key: string]: string;\r\n  };\r\n\r\n  /** \u6570\u636E\u6E90 handlers \u7684\u5305\u540D */\r\n  handlersPackages?: {\r\n    [key: string]: string;\r\n  };\r\n}\r\n\r\nexport function buildDataSourceDependencies(\r\n  ir: IProjectInfo,\r\n  cfg: DataSourceDependenciesConfig = {},\r\n): Record<string, string> {\r\n  return {\r\n    // \u6570\u636E\u6E90\u5F15\u64CE\u7684\u4F9D\u8D56\u5305\r\n    [cfg.enginePackage || '@alilc/lowcode-datasource-engine']: cfg.engineVersion || '^1.0.0',\r\n\r\n    // \u5404\u79CD\u6570\u636E\u6E90\u7684 handlers \u7684\u4F9D\u8D56\u5305\r\n    ...(ir.dataSourcesTypes || []).reduce(\r\n      (acc, dsType) => ({\r\n        ...acc,\r\n        [getDataSourceHandlerPackageName(dsType)]: cfg.handlersVersion?.[dsType] || '^1.0.0',\r\n      }),\r\n      {},\r\n    ),\r\n  };\r\n\r\n  function getDataSourceHandlerPackageName(dsType: string) {\r\n    return (\r\n      cfg.handlersPackages?.[dsType] ||\r\n      `@alilc/lowcode-datasource-${changeCase.kebab(dsType)}-handler`\r\n    );\r\n  }\r\n}\r\n", "import { PackageJSON } from '@alilc/lowcode-types';\r\n\r\nimport { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IProjectInfo,\r\n} from '../../../../../types';\r\nimport { buildDataSourceDependencies } from '../../../../../utils/dataSource';\r\n\r\ninterface IIceJsPackageJSON extends PackageJSON {\r\n  ideMode: {\r\n    name: string;\r\n  };\r\n  iceworks: {\r\n    type: string;\r\n    adapter: string;\r\n  };\r\n  originTemplate: string;\r\n}\r\n\r\nexport type IceJsPackageJsonPluginConfig = {\r\n  /**\r\n   * \u6570\u636E\u6E90\u914D\u7F6E\r\n   */\r\n  datasourceConfig?: {\r\n    /** \u6570\u636E\u6E90\u5F15\u64CE\u7684\u7248\u672C */\r\n    engineVersion?: string;\r\n    /** \u6570\u636E\u6E90\u5F15\u64CE\u7684\u5305\u540D */\r\n    enginePackage?: string;\r\n    /** \u6570\u636E\u6E90 handlers \u7684\u7248\u672C */\r\n    handlersVersion?: {\r\n      [key: string]: string;\r\n    };\r\n    /** \u6570\u636E\u6E90 handlers \u7684\u5305\u540D */\r\n    handlersPackages?: {\r\n      [key: string]: string;\r\n    };\r\n  };\r\n  /** \u5305\u540D */\r\n  packageName?: string;\r\n  /** \u7248\u672C */\r\n  packageVersion?: string;\r\n};\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<IceJsPackageJsonPluginConfig> = (cfg) => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IProjectInfo;\r\n\r\n    const packageJson: IIceJsPackageJSON = {\r\n      name: cfg?.packageName || 'icejs-demo-app',\r\n      version: cfg?.packageVersion || '0.1.5',\r\n      description: '\u8F7B\u91CF\u7EA7\u6A21\u677F\uFF0C\u4F7F\u7528 JavaScript\uFF0C\u4EC5\u5305\u542B\u57FA\u7840\u7684 Layout\u3002',\r\n      dependencies: {\r\n        moment: '^2.24.0',\r\n        react: '^16.4.1',\r\n        'react-dom': '^16.4.1',\r\n        'react-router': '^5.2.1',\r\n        '@alifd/theme-design-pro': '^0.x',\r\n        'intl-messageformat': '^9.3.6',\r\n        '@ice/store': '^1.4.3',\r\n        '@loadable/component': '^5.15.2',\r\n\r\n        // \u6570\u636E\u6E90\u76F8\u5173\u7684\u4F9D\u8D56:\r\n        ...buildDataSourceDependencies(ir, cfg?.datasourceConfig),\r\n      },\r\n      devDependencies: {\r\n        '@ice/spec': '^1.0.0',\r\n        'build-plugin-fusion': '^0.1.0',\r\n        'build-plugin-moment-locales': '^0.1.0',\r\n        eslint: '^6.0.1',\r\n        'ice.js': '^1.0.0',\r\n        stylelint: '^13.2.0',\r\n      },\r\n      scripts: {\r\n        start: 'icejs start',\r\n        build: 'icejs build',\r\n        lint: 'npm run eslint && npm run stylelint',\r\n        eslint: 'eslint --cache --ext .js,.jsx ./',\r\n        stylelint: 'stylelint ./**/*.scss',\r\n      },\r\n      ideMode: {\r\n        name: 'ice-react',\r\n      },\r\n      iceworks: {\r\n        type: 'react',\r\n        adapter: 'adapter-react-v3',\r\n      },\r\n      engines: {\r\n        node: '>=8.0.0',\r\n      },\r\n      repository: {\r\n        type: 'git',\r\n        url: 'http://gitlab.xxx.com/msd/leak-scan/tree/master',\r\n      },\r\n      private: true,\r\n      originTemplate: '@alifd/scaffold-lite-js',\r\n    };\r\n\r\n    ir.packages.forEach((packageInfo) => {\r\n      packageJson.dependencies[packageInfo.package] = packageInfo.version;\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.JSON,\r\n      fileType: FileType.JSON,\r\n      name: COMMON_CHUNK_NAME.FileMainContent,\r\n      content: packageJson,\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IRouterInfo,\r\n} from '../../../../../types';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IRouterInfo;\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JS,\r\n      name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n      content: `\r\n        import BasicLayout from '@/layouts/BasicLayout';\r\n      `,\r\n      linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JS,\r\n      name: COMMON_CHUNK_NAME.FileVarDefine,\r\n      content: `\r\n        const routerConfig = [\r\n          {\r\n            path: '/',\r\n            component: BasicLayout,\r\n            children: [\r\n              ${ir.routes\r\n    .map(\r\n      (route) => `\r\n                    {\r\n                      path: '${route.path}',\r\n                      component: ${route.componentName},\r\n                    }\r\n                  `,\r\n    )\r\n    .join(',')}\r\n            ],\r\n          },\r\n        ];\r\n      `,\r\n      linkAfter: [\r\n        COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        COMMON_CHUNK_NAME.InternalDepsImport,\r\n        COMMON_CHUNK_NAME.ImportAliasDefine,\r\n        COMMON_CHUNK_NAME.FileUtilDefine,\r\n      ],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JS,\r\n      name: COMMON_CHUNK_NAME.FileExport,\r\n      content: `\r\n        export default routerConfig;\r\n      `,\r\n      linkAfter: [\r\n        COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        COMMON_CHUNK_NAME.InternalDepsImport,\r\n        COMMON_CHUNK_NAME.FileUtilDefine,\r\n        COMMON_CHUNK_NAME.ImportAliasDefine,\r\n        COMMON_CHUNK_NAME.FileVarDefine,\r\n        COMMON_CHUNK_NAME.FileMainContent,\r\n      ],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import template from './template';\r\nimport entry from './plugins/entry';\r\nimport entryHtml from './plugins/entryHtml';\r\nimport globalStyle from './plugins/globalStyle';\r\nimport packageJSON from './plugins/packageJSON';\r\nimport router from './plugins/router';\r\n\r\nexport default {\r\n  template,\r\n  plugins: {\r\n    entry,\r\n    entryHtml,\r\n    globalStyle,\r\n    packageJSON,\r\n    router,\r\n  },\r\n};\r\n", "import prettier from 'prettier';\r\nimport parserBabel from 'prettier/parser-babel';\r\nimport parserPostCss from 'prettier/parser-postcss';\r\nimport parserHtml from 'prettier/parser-html';\r\n\r\nimport { PostProcessor, PostProcessorFactory } from '../../types';\r\n\r\nconst PARSERS = ['css', 'scss', 'less', 'json', 'html', 'vue'];\r\n\r\nexport interface ProcessorConfig {\r\n  customFileTypeParser: Record<string, string>;\r\n  plugins?: prettier.Plugin[];\r\n}\r\n\r\nconst factory: PostProcessorFactory<ProcessorConfig> = (config?: ProcessorConfig) => {\r\n  const cfg: ProcessorConfig = {\r\n    customFileTypeParser: {},\r\n    ...config,\r\n  };\r\n\r\n  const codePrettier: PostProcessor = (content: string, fileType: string) => {\r\n    let parser: prettier.BuiltInParserName | any;\r\n    if (fileType === 'js' || fileType === 'jsx' || fileType === 'ts' || fileType === 'tsx') {\r\n      parser = 'babel-ts';\r\n    } else if (fileType === 'json') {\r\n      parser = 'json-stringify';\r\n    } else if (PARSERS.indexOf(fileType) >= 0) {\r\n      parser = fileType;\r\n    } else if (cfg.customFileTypeParser[fileType]) {\r\n      parser = cfg.customFileTypeParser[fileType];\r\n    } else {\r\n      return content;\r\n    }\r\n\r\n    return prettier.format(content, {\r\n      parser,\r\n      plugins: [parserBabel, parserPostCss, parserHtml, ...(cfg.plugins || [])],\r\n      singleQuote: true,\r\n      jsxSingleQuote: false,\r\n    });\r\n  };\r\n\r\n  return codePrettier;\r\n};\r\n\r\nexport default factory;\r\n", "import { IProjectBuilder, IProjectBuilderOptions } from '../types';\r\n\r\nimport { createProjectBuilder } from '../generator/ProjectBuilder';\r\n\r\nimport esmodule from '../plugins/common/esmodule';\r\nimport styleImport from '../plugins/common/styleImport';\r\nimport containerClass from '../plugins/component/react/containerClass';\r\nimport containerInitState from '../plugins/component/react/containerInitState';\r\nimport containerInjectContext from '../plugins/component/react/containerInjectContext';\r\nimport containerInjectUtils from '../plugins/component/react/containerInjectUtils';\r\nimport containerInjectDataSourceEngine from '../plugins/component/react/containerInjectDataSourceEngine';\r\nimport containerInjectConstants from '../plugins/component/react/containerInjectConstants';\r\nimport containerInjectI18n from '../plugins/component/react/containerInjectI18n';\r\nimport containerLifeCycle from '../plugins/component/react/containerLifeCycle';\r\nimport containerMethod from '../plugins/component/react/containerMethod';\r\nimport jsx from '../plugins/component/react/jsx';\r\nimport reactCommonDeps from '../plugins/component/react/reactCommonDeps';\r\nimport css from '../plugins/component/style/css';\r\nimport constants from '../plugins/project/constants';\r\nimport i18n from '../plugins/project/i18n';\r\nimport utils from '../plugins/project/utils';\r\n\r\nimport icejs from '../plugins/project/framework/icejs';\r\n\r\nimport { prettier } from '../postprocessor';\r\n\r\nexport type IceJsProjectBuilderOptions = IProjectBuilderOptions;\r\n\r\nexport default function createIceJsProjectBuilder(\r\n  options?: IceJsProjectBuilderOptions,\r\n): IProjectBuilder {\r\n  return createProjectBuilder({\r\n    inStrictMode: options?.inStrictMode,\r\n    extraContextData: { ...options },\r\n    template: icejs.template,\r\n    plugins: {\r\n      components: [\r\n        reactCommonDeps(),\r\n        esmodule({\r\n          fileType: 'jsx',\r\n        }),\r\n        styleImport(),\r\n        containerClass(),\r\n        containerInjectContext(),\r\n        containerInjectUtils(),\r\n        containerInjectDataSourceEngine(),\r\n        containerInjectI18n(),\r\n        containerInjectConstants(),\r\n        containerInitState(),\r\n        containerLifeCycle(),\r\n        containerMethod(),\r\n        jsx({\r\n          nodeTypeMapping: {\r\n            Div: 'div',\r\n            Component: 'div',\r\n            Page: 'div',\r\n            Block: 'div',\r\n          },\r\n        }),\r\n        css(),\r\n      ],\r\n      pages: [\r\n        reactCommonDeps(),\r\n        esmodule({\r\n          fileType: 'jsx',\r\n        }),\r\n        styleImport(),\r\n        containerClass(),\r\n        containerInjectContext(),\r\n        containerInjectUtils(),\r\n        containerInjectDataSourceEngine(),\r\n        containerInjectI18n(),\r\n        containerInjectConstants(),\r\n        containerInitState(),\r\n        containerLifeCycle(),\r\n        containerMethod(),\r\n        jsx({\r\n          nodeTypeMapping: {\r\n            Div: 'div',\r\n            Component: 'div',\r\n            Page: 'div',\r\n            Block: 'div',\r\n            // Box: 'div',\r\n          },\r\n        }),\r\n        css(),\r\n      ],\r\n      router: [esmodule(), icejs.plugins.router()],\r\n      entry: [icejs.plugins.entry()],\r\n      constants: [constants()],\r\n      utils: [esmodule(), utils('react')],\r\n      i18n: [i18n()],\r\n      globalStyle: [icejs.plugins.globalStyle()],\r\n      htmlEntry: [icejs.plugins.entryHtml()],\r\n      packageJSON: [icejs.plugins.packageJSON()],\r\n    },\r\n    postProcessors: [prettier()],\r\n    customizeBuilderOptions: options?.customizeBuilderOptions,\r\n  });\r\n}\r\n\r\nexport const plugins = {\r\n  containerClass,\r\n  containerInjectContext,\r\n  containerInjectUtils,\r\n  containerInjectDataSourceEngine,\r\n  containerInjectI18n,\r\n  containerInjectConstants,\r\n  containerInitState,\r\n  containerLifeCycle,\r\n  containerMethod,\r\n  jsx,\r\n  commonDeps: reactCommonDeps,\r\n\r\n  /** @deprecated Please use commonDeps */\r\n  reactCommonDeps,\r\n};\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    '.gitignore',\r\n    '',\r\n    `\r\n# See https://help.github.com/ignore-files/ for more about ignoring files.\r\n\r\n# dependencies\r\nnode_modules/\r\n\r\n# production\r\nbuild/\r\ndist/\r\ntmp/\r\nlib/\r\n\r\n# misc\r\n.idea/\r\n.happypack\r\n.DS_Store\r\n*.swp\r\n*.dia~\r\n.ice\r\n\r\nnpm-debug.log*\r\nyarn-debug.log*\r\nyarn-error.log*\r\nindex.module.scss.d.ts\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'README',\r\n    'md',\r\n    'This project is generated by lowcode-code-generator & lowcode-solution-icejs3.',\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    '.browserslistrc',\r\n    '',\r\n    `defaults\r\nios_saf 9\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'typings.d',\r\n    'ts',\r\n    `/// <reference types=\"@ice/app/types\" />\r\n\r\nexport {};\r\ndeclare global {\r\n  interface Window {\r\n    g_config: Record<string, any>;\r\n  }\r\n}\r\n    `,\r\n  );\r\n\r\n  return [['src'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\n/* eslint-disable max-len */\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'document',\r\n    'tsx',\r\n    `import React from 'react';\r\nimport { Meta, Title, Links, Main, Scripts } from 'ice';\r\n\r\nexport default function Document() {\r\n  return (\r\n    <html>\r\n      <head>\r\n        <meta charSet=\"utf-8\" />\r\n        <meta name=\"description\" content=\"ice.js 3 lite scaffold\" />\r\n        <link rel=\"icon\" href=\"/favicon.ico\" />\r\n        <link rel=\"stylesheet\" href=\"//alifd.alicdn.com/npm/@alifd/next/1.21.16/next.min.css\" />\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\" />\r\n        <Meta />\r\n        <Title />\r\n        <Links />\r\n      </head>\r\n      <body>\r\n        <Main />\r\n        <script crossOrigin=\"anonymous\" src=\"//g.alicdn.com/code/lib/react/18.2.0/umd/react.development.js\" />\r\n        <script crossOrigin=\"anonymous\" src=\"//g.alicdn.com/code/lib/react-dom/18.2.0/umd/react-dom.development.js\" />\r\n        <script crossOrigin=\"anonymous\" src=\"//g.alicdn.com/code/lib/??react-router/6.9.0/react-router.production.min.js,react-router-dom/6.9.0/react-router-dom.production.min.js\" />\r\n        <script crossOrigin=\"anonymous\" src=\"//g.alicdn.com/code/lib/alifd__next/1.26.22/next.min.js\" />\r\n        <script crossOrigin=\"anonymous\" src=\"//g.alicdn.com/code/lib/prop-types/15.7.2/prop-types.js\" />\r\n        <script crossOrigin=\"anonymous\" src=\"//g.alicdn.com/platform/c/??lodash/4.6.1/lodash.min.js,immutable/3.7.6/dist/immutable.min.js\" />\r\n        <Scripts />\r\n      </body>\r\n    </html>\r\n  );\r\n}`,\r\n  );\r\n\r\n  return [['src'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'index',\r\n    'jsx',\r\n    `\r\nimport React from 'react';\r\nimport styles from './index.module.scss';\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <p className={styles.footer}>\r\n      <span className={styles.logo}>Alibaba Fusion</span>\r\n      <br />\r\n      <span className={styles.copyright}>\u00A9 2019-\u73B0\u5728 Alibaba Fusion & ICE</span>\r\n    </p>\r\n  );\r\n}\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout', 'components', 'Footer'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'index',\r\n    'module.scss',\r\n    `\r\n.footer {\r\n  line-height: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.logo {\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n}\r\n\r\n.copyright {\r\n  font-size: 12px;\r\n}\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout', 'components', 'Footer'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'index',\r\n    'jsx',\r\n    `\r\nimport React from 'react';\r\nimport { Link } from 'ice';\r\nimport styles from './index.module.scss';\r\n\r\nexport default function Logo({ image, text, url }) {\r\n  return (\r\n    <div className=\"logo\">\r\n      <Link to={url || '/'} className={styles.logo}>\r\n        {image && <img src={image} alt=\"logo\" />}\r\n        <span>{text}</span>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout', 'components', 'Logo'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'index',\r\n    'module.scss',\r\n    `\r\n.logo{\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #FF7300;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  line-height: 22px;\r\n\r\n  &:visited, &:link {\r\n    color: #FF7300;\r\n  }\r\n\r\n  img {\r\n    height: 24px;\r\n    margin-right: 10px;\r\n  }\r\n}\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout', 'components', 'Logo'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'index',\r\n    'jsx',\r\n    `import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link, useLocation } from 'ice';\r\nimport { Nav } from '@alifd/next';\r\nimport { asideMenuConfig } from '../../menuConfig';\r\n\r\nconst { SubNav } = Nav;\r\nconst NavItem = Nav.Item;\r\n\r\nfunction getNavMenuItems(menusData) {\r\n  if (!menusData) {\r\n    return [];\r\n  }\r\n\r\n  return menusData\r\n    .filter(item => item.name && !item.hideInMenu)\r\n    .map((item, index) => getSubMenuOrItem(item, index));\r\n}\r\n\r\nfunction getSubMenuOrItem(item, index) {\r\n  if (item.children && item.children.some(child => child.name)) {\r\n    const childrenItems = getNavMenuItems(item.children);\r\n\r\n    if (childrenItems && childrenItems.length > 0) {\r\n      const subNav = (\r\n        <SubNav key={index} icon={item.icon} label={item.name}>\r\n          {childrenItems}\r\n        </SubNav>\r\n      );\r\n      return subNav;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  const navItem = (\r\n    <NavItem key={item.path} icon={item.icon}>\r\n      <Link to={item.path}>{item.name}</Link>\r\n    </NavItem>\r\n  );\r\n  return navItem;\r\n}\r\n\r\nconst Navigation = (props, context) => {\r\n  const location = useLocation();\r\n  const { pathname } = location;\r\n  const { isCollapse } = context;\r\n  return (\r\n    <Nav\r\n      type=\"primary\"\r\n      selectedKeys={[pathname]}\r\n      defaultSelectedKeys={[pathname]}\r\n      embeddable\r\n      openMode=\"single\"\r\n      iconOnly={isCollapse}\r\n      hasArrow={false}\r\n      mode={isCollapse ? 'popup' : 'inline'}\r\n    >\r\n      {getNavMenuItems(asideMenuConfig)}\r\n    </Nav>\r\n  );\r\n};\r\n\r\nNavigation.contextTypes = {\r\n  isCollapse: PropTypes.bool,\r\n};\r\nexport default Navigation;\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout', 'components', 'PageNav'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'index',\r\n    'jsx',\r\n    `\r\nimport React, { useState } from 'react';\r\nimport { Shell, ConfigProvider } from '@alifd/next';\r\nimport PageNav from './components/PageNav';\r\nimport Logo from './components/Logo';\r\nimport Footer from './components/Footer';\r\n\r\n(function() {\r\n  const throttle = function(type, name, obj = window) {\r\n    let running = false;\r\n\r\n    const func = () => {\r\n      if (running) {\r\n        return;\r\n      }\r\n\r\n      running = true;\r\n      requestAnimationFrame(() => {\r\n        obj.dispatchEvent(new CustomEvent(name));\r\n        running = false;\r\n      });\r\n    };\r\n\r\n    obj.addEventListener(type, func);\r\n  };\r\n\r\n  throttle('resize', 'optimizedResize');\r\n})();\r\n\r\nexport default function BasicLayout({ children }) {\r\n  const getDevice = width => {\r\n    const isPhone =\r\n      typeof navigator !== 'undefined' && navigator && navigator.userAgent.match(/phone/gi);\r\n\r\n    if (width < 680 || isPhone) {\r\n      return 'phone';\r\n    }\r\n    if (width < 1280 && width > 680) {\r\n      return 'tablet';\r\n    }\r\n    return 'desktop';\r\n  };\r\n\r\n  const [device, setDevice] = useState(getDevice(NaN));\r\n  window.addEventListener('optimizedResize', e => {\r\n    setDevice(getDevice(e && e.target && e.target.innerWidth));\r\n  });\r\n  return (\r\n    <ConfigProvider device={device}>\r\n      <Shell\r\n        type=\"dark\"\r\n        style={{\r\n          minHeight: '100vh',\r\n        }}\r\n      >\r\n        <Shell.Branding>\r\n          <Logo\r\n            image=\"https://img.alicdn.com/tfs/TB1.ZBecq67gK0jSZFHXXa9jVXa-904-826.png\"\r\n            text=\"Logo\"\r\n          />\r\n        </Shell.Branding>\r\n        <Shell.Navigation\r\n          direction=\"hoz\"\r\n          style={{\r\n            marginRight: 10,\r\n          }}\r\n        ></Shell.Navigation>\r\n        <Shell.Action></Shell.Action>\r\n        <Shell.Navigation>\r\n          <PageNav />\r\n        </Shell.Navigation>\r\n\r\n        <Shell.Content>{children}</Shell.Content>\r\n        <Shell.Footer>\r\n          <Footer />\r\n        </Shell.Footer>\r\n      </Shell>\r\n    </ConfigProvider>\r\n  );\r\n}\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'menuConfig',\r\n    'js',\r\n    `\r\nconst headerMenuConfig = [];\r\nconst asideMenuConfig = [\r\n  {\r\n    name: 'Dashboard',\r\n    path: '/',\r\n    icon: 'smile',\r\n  },\r\n];\r\nexport { headerMenuConfig, asideMenuConfig };\r\n    `,\r\n  );\r\n\r\n  return [['src', 'layouts', 'BasicLayout'], file];\r\n}\r\n", "import { ResultDir } from '@alilc/lowcode-types';\r\nimport { createResultDir } from '../../../../../utils/resultHelper';\r\nimport { runFileGenerator } from '../../../../../utils/templateHelper';\r\n\r\nimport file1 from './files/gitignore';\r\nimport file2 from './files/README.md';\r\nimport file3 from './files/browserslistrc';\r\nimport file4 from './files/typings';\r\nimport file5 from './files/document';\r\nimport file6 from './files/src/layouts/BasicLayout/components/Footer/index.jsx';\r\nimport file7 from './files/src/layouts/BasicLayout/components/Footer/index.style';\r\nimport file8 from './files/src/layouts/BasicLayout/components/Logo/index.jsx';\r\nimport file9 from './files/src/layouts/BasicLayout/components/Logo/index.style';\r\nimport file10 from './files/src/layouts/BasicLayout/components/PageNav/index.jsx';\r\nimport file11 from './files/src/layouts/BasicLayout/index.jsx';\r\nimport file12 from './files/src/layouts/BasicLayout/menuConfig.js';\r\n\r\nexport function generateStaticFiles(root = createResultDir('.')): ResultDir {\r\n  runFileGenerator(root, file1);\r\n  runFileGenerator(root, file2);\r\n  runFileGenerator(root, file3);\r\n  runFileGenerator(root, file4);\r\n  runFileGenerator(root, file5);\r\n  runFileGenerator(root, file6);\r\n  runFileGenerator(root, file7);\r\n  runFileGenerator(root, file8);\r\n  runFileGenerator(root, file9);\r\n  runFileGenerator(root, file10);\r\n  runFileGenerator(root, file11);\r\n  runFileGenerator(root, file12);\r\n\r\n  return root;\r\n}\r\n", "import { IProjectTemplate } from '../../../../../types';\r\nimport { generateStaticFiles } from './static-files';\r\n\r\nconst icejs3Template: IProjectTemplate = {\r\n  slots: {\r\n    components: {\r\n      path: ['src', 'components'],\r\n      fileName: 'index',\r\n    },\r\n    pages: {\r\n      path: ['src', 'pages'],\r\n      fileName: 'index',\r\n    },\r\n    entry: {\r\n      path: ['src'],\r\n      fileName: 'app',\r\n    },\r\n    constants: {\r\n      path: ['src'],\r\n      fileName: 'constants',\r\n    },\r\n    utils: {\r\n      path: ['src'],\r\n      fileName: 'utils',\r\n    },\r\n    i18n: {\r\n      path: ['src'],\r\n      fileName: 'i18n',\r\n    },\r\n    globalStyle: {\r\n      path: ['src'],\r\n      fileName: 'global',\r\n    },\r\n    packageJSON: {\r\n      path: [],\r\n      fileName: 'package',\r\n    },\r\n    appConfig: {\r\n      path: ['src'],\r\n      fileName: 'app',\r\n    },\r\n    buildConfig: {\r\n      path: [],\r\n      fileName: 'ice.config',\r\n    },\r\n    layout: {\r\n      path: ['src', 'pages'],\r\n      fileName: 'layout',\r\n    },\r\n  },\r\n\r\n  generateTemplate() {\r\n    return generateStaticFiles();\r\n  },\r\n};\r\n\r\nexport default icejs3Template;\r\n", "import { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IProjectInfo,\r\n} from '../../../../../types';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IProjectInfo;\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.SCSS,\r\n      name: COMMON_CHUNK_NAME.StyleDepsImport,\r\n      content: `\r\n        // \u5F15\u5165\u9ED8\u8BA4\u5168\u5C40\u6837\u5F0F\r\n        @import '@alifd/next/reset.scss';\r\n      `,\r\n      linkAfter: [],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.SCSS,\r\n      name: COMMON_CHUNK_NAME.StyleCssContent,\r\n      content: `\r\n        body {\r\n          -webkit-font-smoothing: antialiased;\r\n        }\r\n      `,\r\n      linkAfter: [COMMON_CHUNK_NAME.StyleDepsImport],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.SCSS,\r\n      name: COMMON_CHUNK_NAME.StyleCssContent,\r\n      content: ir.css || '',\r\n      linkAfter: [COMMON_CHUNK_NAME.StyleDepsImport],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { PackageJSON } from '@alilc/lowcode-types';\r\n\r\nimport { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IProjectInfo,\r\n} from '../../../../../types';\r\nimport { buildDataSourceDependencies } from '../../../../../utils/dataSource';\r\n\r\ninterface IIceJs3PackageJSON extends PackageJSON {\r\n  originTemplate: string;\r\n}\r\n\r\nexport type IceJs3PackageJsonPluginConfig = {\r\n\r\n  /**\r\n   * \u6570\u636E\u6E90\u914D\u7F6E\r\n   */\r\n  datasourceConfig?: {\r\n\r\n    /** \u6570\u636E\u6E90\u5F15\u64CE\u7684\u7248\u672C */\r\n    engineVersion?: string;\r\n\r\n    /** \u6570\u636E\u6E90\u5F15\u64CE\u7684\u5305\u540D */\r\n    enginePackage?: string;\r\n\r\n    /** \u6570\u636E\u6E90 handlers \u7684\u7248\u672C */\r\n    handlersVersion?: {\r\n      [key: string]: string;\r\n    };\r\n\r\n    /** \u6570\u636E\u6E90 handlers \u7684\u5305\u540D */\r\n    handlersPackages?: {\r\n      [key: string]: string;\r\n    };\r\n  };\r\n\r\n  /** \u5305\u540D */\r\n  packageName?: string;\r\n\r\n  /** \u7248\u672C */\r\n  packageVersion?: string;\r\n};\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<IceJs3PackageJsonPluginConfig> = (cfg) => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IProjectInfo;\r\n\r\n    const packageJson: IIceJs3PackageJSON = {\r\n      name: cfg?.packageName || 'icejs3-demo-app',\r\n      version: cfg?.packageVersion || '0.1.5',\r\n      description: 'icejs 3 \u8F7B\u91CF\u7EA7\u6A21\u677F\uFF0C\u4F7F\u7528 JavaScript\uFF0C\u4EC5\u5305\u542B\u57FA\u7840\u7684 Layout\u3002',\r\n      dependencies: {\r\n        moment: '^2.24.0',\r\n        react: '^18.2.0',\r\n        'react-dom': '^18.2.0',\r\n        'react-router': '^6.9.0',\r\n        'react-router-dom': '^6.9.0',\r\n        'intl-messageformat': '^9.3.6',\r\n        '@alifd/next': '1.26.15',\r\n        '@ice/runtime': '~1.1.0',\r\n        // \u6570\u636E\u6E90\u76F8\u5173\u7684\u4F9D\u8D56:\r\n        ...buildDataSourceDependencies(ir, cfg?.datasourceConfig),\r\n      },\r\n      devDependencies: {\r\n        '@ice/app': '~3.1.0',\r\n        '@types/react': '^18.0.0',\r\n        '@types/react-dom': '^18.0.0',\r\n        '@types/node': '^18.11.17',\r\n        '@ice/plugin-fusion': '^1.0.1',\r\n        '@ice/plugin-moment-locales': '^1.0.0',\r\n        eslint: '^6.0.1',\r\n        stylelint: '^13.2.0',\r\n      },\r\n      scripts: {\r\n        start: 'ice start',\r\n        build: 'ice build',\r\n        lint: 'npm run eslint && npm run stylelint',\r\n        eslint: 'eslint --cache --ext .js,.jsx ./',\r\n        stylelint: 'stylelint ./**/*.scss',\r\n      },\r\n      engines: {\r\n        node: '>=14.0.0',\r\n      },\r\n      repository: {\r\n        type: 'git',\r\n        url: 'http://gitlab.xxx.com/msd/leak-scan/tree/master',\r\n      },\r\n      private: true,\r\n      originTemplate: '@alifd/scaffold-lite-js',\r\n    };\r\n\r\n    ir.packages.forEach((packageInfo) => {\r\n      packageJson.dependencies[packageInfo.package] = packageInfo.version;\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.JSON,\r\n      fileType: FileType.JSON,\r\n      name: COMMON_CHUNK_NAME.FileMainContent,\r\n      content: packageJson,\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n} from '../../../../../types';\r\nimport { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: COMMON_CHUNK_NAME.FileMainContent,\r\n      content: `\r\n      import { Outlet } from 'ice';\r\n      import BasicLayout from '@/layouts/BasicLayout';\r\n\r\n      export default function Layout() {\r\n        return (\r\n          <BasicLayout>\r\n            <Outlet />\r\n          </BasicLayout>\r\n        );;\r\n      }\r\n      `,\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n} from '../../../../../types';\r\nimport { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nexport interface AppConfigPluginConfig {\r\n\r\n}\r\n\r\nfunction getContent() {\r\n  return `import { defineAppConfig } from 'ice';\r\n\r\n// App config, see https://v3.ice.work/docs/guide/basic/app\r\nexport default defineAppConfig(() => ({\r\n  // Set your configs here.\r\n  app: {\r\n    rootId: 'App',\r\n  },\r\n  router: {\r\n    type: 'browser',\r\n    basename: '/',\r\n  },\r\n}));`;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<AppConfigPluginConfig> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.TS,\r\n      name: COMMON_CHUNK_NAME.FileMainContent,\r\n      content: getContent(),\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import prettier from 'prettier';\r\nimport parserBabel from 'prettier/parser-babel';\r\n\r\nexport function format(content: string, options = {}) {\r\n  return prettier.format(content, {\r\n    parser: 'babel',\r\n    plugins: [parserBabel],\r\n    singleQuote: true,\r\n    jsxSingleQuote: false,\r\n    ...options,\r\n  });\r\n}\r\n", "/**\r\n * \u83B7\u53D6\u4E3B\u9898\u4FE1\u606F\r\n * @param theme theme \u5F62\u5982 @alife/theme-97 \u6216\u8005 @alife/theme-97@^1.0.0\r\n */\r\n\r\nexport interface ThemeInfo {\r\n  name: string;\r\n  version?: string;\r\n}\r\n\r\nexport function getThemeInfo(theme: string): ThemeInfo {\r\n  const sepIdx = theme.indexOf('@', 1);\r\n  if (sepIdx === -1) {\r\n    return { name: theme };\r\n  }\r\n  return {\r\n    name: theme.slice(0, sepIdx),\r\n    version: theme.slice(sepIdx + 1),\r\n  };\r\n}", "import {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n} from '../../../../../types';\r\nimport { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\nimport { format } from '../../../../../utils/format';\r\nimport { getThemeInfo } from '../../../../../utils/theme';\r\n\r\nexport interface BuildConfigPluginConfig {\r\n\r\n  /** \u5305\u540D */\r\n  themePackage?: string;\r\n}\r\n\r\nfunction getContent(cfg?: BuildConfigPluginConfig, routesContent?: string) {\r\n  return `\r\nimport { join } from 'path';\r\nimport { defineConfig } from '@ice/app';\r\nimport _ from 'lodash';\r\nimport fusion from '@ice/plugin-fusion';\r\nimport locales from '@ice/plugin-moment-locales';\r\nimport type { Plugin } from '@ice/app/esm/types';\r\n\r\ninterface PluginOptions {\r\n  id: string;\r\n}\r\n\r\nconst plugin: Plugin<PluginOptions> = (options) => ({\r\n  // name \u53EF\u9009\uFF0C\u63D2\u4EF6\u540D\u79F0\r\n  name: 'plugin-name',\r\n  // setup \u5FC5\u9009\uFF0C\u7528\u4E8E\u5B9A\u5236\u5DE5\u7A0B\u6784\u5EFA\u914D\u7F6E\r\n  setup: ({ onGetConfig, modifyUserConfig }) => {\r\n    modifyUserConfig('codeSplitting', 'page');\r\n\r\n    onGetConfig((config) => {\r\n      config.entry = {\r\n        web: join(process.cwd(), '.ice/entry.client.tsx'),\r\n      };\r\n\r\n      config.cssFilename = '[name].css';\r\n\r\n      config.configureWebpack = config.configureWebpack || [];\r\n      config.configureWebpack?.push((webpackConfig) => {\r\n        if (webpackConfig.output) {\r\n          webpackConfig.output.filename = '[name].js';\r\n          webpackConfig.output.chunkFilename = '[name].js';\r\n        }\r\n        return webpackConfig;\r\n      });\r\n\r\n      config.swcOptions = _.merge(config.swcOptions, {\r\n        compilationConfig: {\r\n          jsc: {\r\n            transform: {\r\n              react: {\r\n                runtime: 'classic',\r\n              },\r\n            },\r\n          },\r\n        }\r\n      });\r\n\r\n      // \u89E3\u51B3 webpack publicPath \u95EE\u9898\r\n      config.transforms = config.transforms || [];\r\n      config.transforms.push((source: string, id: string) => {\r\n        if (id.includes('.ice/entry.client.tsx')) {\r\n          let code = \\`\r\n          if (!__webpack_public_path__?.startsWith('http') && document.currentScript) {\r\n            // @ts-ignore\r\n            __webpack_public_path__ = document.currentScript.src.replace(/^(.*\\\\\\\\/)[^/]+$/, '$1');\r\n            window.__ICE_ASSETS_MANIFEST__ = window.__ICE_ASSETS_MANIFEST__ || {};\r\n            window.__ICE_ASSETS_MANIFEST__.publicPath = __webpack_public_path__;\r\n          }\r\n          \\`;\r\n          code += source;\r\n          return { code };\r\n        }\r\n      });\r\n    });\r\n  },\r\n});\r\n\r\n// The project config, see https://v3.ice.work/docs/guide/basic/config\r\nconst minify = process.env.NODE_ENV === 'production' ? 'swc' : false;\r\nexport default defineConfig(() => ({\r\n  ssr: false,\r\n  ssg: false,\r\n  minify,\r\n  ${routesContent}\r\n  externals: {\r\n    react: 'React',\r\n    'react-dom': 'ReactDOM',\r\n    'react-dom/client': 'ReactDOM',\r\n    '@alifd/next': 'Next',\r\n    lodash: 'var window._',\r\n    '@alilc/lowcode-engine': 'var window.AliLowCodeEngine',\r\n  },\r\n  plugins: [\r\n    fusion(${cfg?.themePackage ? `{\r\n      importStyle: 'sass',\r\n      themePackage: '${getThemeInfo(cfg.themePackage).name}',\r\n    }` : `{\r\n      importStyle: 'sass',\r\n    }`}),\r\n    locales(),\r\n    plugin(),\r\n  ]\r\n}));\r\n  `;\r\n}\r\n\r\nfunction getRoutesContent(navData: any, needShell = true) {\r\n  const routes = [\r\n    'routes: {',\r\n    '  defineRoutes: route => {',\r\n  ];\r\n  function _getRoutes(nav: any, _routes: string[] = []) {\r\n    const { slug, children } = nav;\r\n    if (children && children.length > 0) {\r\n      children.forEach((_nav: any) => _getRoutes(_nav, _routes));\r\n    } else if (slug) {\r\n      _routes.push(`route('/${slug}', '${slug}/index.jsx');`);\r\n    }\r\n  }\r\n  if (needShell) {\r\n    routes.push(\"    route('/', 'layout.jsx', () => {\");\r\n  }\r\n  navData?.forEach((nav: any) => {\r\n    _getRoutes(nav, routes);\r\n  });\r\n  if (needShell) {\r\n    routes.push('    });');\r\n  }\r\n  routes.push('  }'); // end of defineRoutes\r\n  routes.push('  },'); // end of routes\r\n  return routes.join('\\n');\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<BuildConfigPluginConfig> = (cfg?) => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const { navConfig } = next.contextData;\r\n    const routesContent = navConfig?.data ? getRoutesContent(navConfig.data, true) : '';\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.MTS,\r\n      name: COMMON_CHUNK_NAME.FileMainContent,\r\n      content: format(getContent(cfg, routesContent)),\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import template from './template';\r\nimport globalStyle from './plugins/globalStyle';\r\nimport packageJSON from './plugins/packageJSON';\r\nimport layout from './plugins/layout';\r\nimport appConfig from './plugins/appConfig';\r\nimport buildConfig from './plugins/buildConfig';\r\n\r\nexport default {\r\n  template,\r\n  plugins: {\r\n    appConfig,\r\n    buildConfig,\r\n    globalStyle,\r\n    packageJSON,\r\n    layout,\r\n  },\r\n};\r\n", "import { IProjectBuilder, IProjectBuilderOptions } from '../types';\r\n\r\nimport { createProjectBuilder } from '../generator/ProjectBuilder';\r\n\r\nimport esmodule from '../plugins/common/esmodule';\r\nimport styleImport from '../plugins/common/styleImport';\r\nimport containerClass from '../plugins/component/react/containerClass';\r\nimport containerInitState from '../plugins/component/react/containerInitState';\r\nimport containerInjectContext from '../plugins/component/react/containerInjectContext';\r\nimport containerInjectUtils from '../plugins/component/react/containerInjectUtils';\r\nimport containerInjectDataSourceEngine from '../plugins/component/react/containerInjectDataSourceEngine';\r\nimport containerInjectConstants from '../plugins/component/react/containerInjectConstants';\r\nimport containerInjectI18n from '../plugins/component/react/containerInjectI18n';\r\nimport containerLifeCycle from '../plugins/component/react/containerLifeCycle';\r\nimport containerMethod from '../plugins/component/react/containerMethod';\r\nimport jsx from '../plugins/component/react/jsx';\r\nimport reactCommonDeps from '../plugins/component/react/reactCommonDeps';\r\nimport css from '../plugins/component/style/css';\r\nimport constants from '../plugins/project/constants';\r\nimport i18n from '../plugins/project/i18n';\r\nimport utils from '../plugins/project/utils';\r\n\r\nimport icejs3 from '../plugins/project/framework/icejs3';\r\n\r\nimport { prettier } from '../postprocessor';\r\n\r\nexport type IceJs3ProjectBuilderOptions = IProjectBuilderOptions;\r\n\r\nexport default function createIceJsProjectBuilder(\r\n  options?: IceJs3ProjectBuilderOptions,\r\n): IProjectBuilder {\r\n  return createProjectBuilder({\r\n    inStrictMode: options?.inStrictMode,\r\n    extraContextData: { ...options },\r\n    template: icejs3.template,\r\n    plugins: {\r\n      components: [\r\n        reactCommonDeps(),\r\n        esmodule({\r\n          fileType: 'jsx',\r\n        }),\r\n        styleImport(),\r\n        containerClass(),\r\n        containerInjectContext(),\r\n        containerInjectUtils(),\r\n        containerInjectDataSourceEngine(),\r\n        containerInjectI18n(),\r\n        containerInjectConstants(),\r\n        containerInitState(),\r\n        containerLifeCycle(),\r\n        containerMethod(),\r\n        jsx({\r\n          nodeTypeMapping: {\r\n            Div: 'div',\r\n            Component: 'div',\r\n            Page: 'div',\r\n            Block: 'div',\r\n          },\r\n        }),\r\n        css(),\r\n      ],\r\n      pages: [\r\n        reactCommonDeps(),\r\n        esmodule({\r\n          fileType: 'jsx',\r\n        }),\r\n        styleImport(),\r\n        containerClass(),\r\n        containerInjectContext(),\r\n        containerInjectUtils(),\r\n        containerInjectDataSourceEngine(),\r\n        containerInjectI18n(),\r\n        containerInjectConstants(),\r\n        containerInitState(),\r\n        containerLifeCycle(),\r\n        containerMethod(),\r\n        jsx({\r\n          nodeTypeMapping: {\r\n            Div: 'div',\r\n            Component: 'div',\r\n            Page: 'div',\r\n            Block: 'div',\r\n            Box: 'div',\r\n          },\r\n        }),\r\n        css(),\r\n      ],\r\n      constants: [constants()],\r\n      utils: [esmodule(), utils('react')],\r\n      i18n: [i18n()],\r\n      globalStyle: [icejs3.plugins.globalStyle()],\r\n      packageJSON: [icejs3.plugins.packageJSON()],\r\n      buildConfig: [icejs3.plugins.buildConfig()],\r\n      appConfig: [icejs3.plugins.appConfig()],\r\n      layout: [icejs3.plugins.layout()],\r\n    },\r\n    postProcessors: [prettier()],\r\n    customizeBuilderOptions: options?.customizeBuilderOptions,\r\n  });\r\n}\r\n\r\nexport const plugins = {\r\n  containerClass,\r\n  containerInitState,\r\n  containerInjectContext,\r\n  containerInjectUtils,\r\n  containerInjectI18n,\r\n  containerInjectDataSourceEngine,\r\n  containerLifeCycle,\r\n  containerMethod,\r\n  jsx,\r\n  commonDeps: reactCommonDeps,\r\n};\r\n", "import changeCase from 'change-case';\r\nimport {\r\n  COMMON_CHUNK_NAME,\r\n  CLASS_DEFINE_CHUNK_NAME,\r\n  DEFAULT_LINK_AFTER,\r\n} from '../../../const/generator';\r\nimport { RAX_CHUNK_NAME } from './const';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n} from '../../../types';\r\nimport { ensureValidClassName } from '../../../utils/validate';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n\r\n    // \u5C06\u6A21\u5757\u540D\u8F6C\u6362\u6210 PascalCase \u7684\u683C\u5F0F\uFF0C\u5E76\u6DFB\u52A0\u7279\u5B9A\u540E\u7F00\uFF0C\u9632\u6B62\u547D\u540D\u51B2\u7A81\r\n    const componentClassName = ensureValidClassName(\r\n      `${changeCase.pascalCase(ir.moduleName)}$$Page`,\r\n    );\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: CLASS_DEFINE_CHUNK_NAME.Start,\r\n      content: `class ${componentClassName} extends Component {`,\r\n      linkAfter: [\r\n        COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        COMMON_CHUNK_NAME.InternalDepsImport,\r\n        COMMON_CHUNK_NAME.ImportAliasDefine,\r\n        COMMON_CHUNK_NAME.FileVarDefine,\r\n        COMMON_CHUNK_NAME.FileUtilDefine,\r\n      ],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: CLASS_DEFINE_CHUNK_NAME.End,\r\n      content: '}',\r\n      linkAfter: [\r\n        CLASS_DEFINE_CHUNK_NAME.Start,\r\n        CLASS_DEFINE_CHUNK_NAME.InsPrivateMethod,\r\n        RAX_CHUNK_NAME.ClassRenderEnd,\r\n        RAX_CHUNK_NAME.MethodsEnd,\r\n      ],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: CLASS_DEFINE_CHUNK_NAME.ConstructorStart,\r\n      content: 'constructor(props, context) { super(props); ',\r\n      linkAfter: DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.ConstructorStart],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: CLASS_DEFINE_CHUNK_NAME.ConstructorEnd,\r\n      content: '} /* end of constructor */',\r\n      linkAfter: DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.ConstructorEnd],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: RAX_CHUNK_NAME.ClassDidMountBegin,\r\n      content: 'componentDidMount() {',\r\n      linkAfter: [\r\n        CLASS_DEFINE_CHUNK_NAME.Start,\r\n        CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n        CLASS_DEFINE_CHUNK_NAME.InsMethod,\r\n        CLASS_DEFINE_CHUNK_NAME.ConstructorEnd,\r\n      ],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: RAX_CHUNK_NAME.ClassDidMountEnd,\r\n      content: '} /* end of componentDidMount */',\r\n      linkAfter: [RAX_CHUNK_NAME.ClassDidMountBegin, RAX_CHUNK_NAME.ClassDidMountContent],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: RAX_CHUNK_NAME.ClassWillUnmountBegin,\r\n      content: 'componentWillUnmount() {',\r\n      linkAfter: [\r\n        CLASS_DEFINE_CHUNK_NAME.Start,\r\n        CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n        CLASS_DEFINE_CHUNK_NAME.InsMethod,\r\n        RAX_CHUNK_NAME.ClassDidMountEnd,\r\n      ],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: RAX_CHUNK_NAME.ClassWillUnmountEnd,\r\n      content: '} /* end of componentWillUnmount */',\r\n      linkAfter: [RAX_CHUNK_NAME.ClassWillUnmountBegin, RAX_CHUNK_NAME.ClassWillUnmountContent],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: RAX_CHUNK_NAME.ClassRenderBegin,\r\n      content: 'render() {',\r\n      linkAfter: [RAX_CHUNK_NAME.ClassDidMountEnd, RAX_CHUNK_NAME.ClassWillUnmountEnd],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: RAX_CHUNK_NAME.ClassRenderEnd,\r\n      content: '} /* end of render */',\r\n      linkAfter: [\r\n        RAX_CHUNK_NAME.ClassRenderBegin,\r\n        RAX_CHUNK_NAME.ClassRenderPre,\r\n        RAX_CHUNK_NAME.ClassRenderJSX,\r\n      ],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: COMMON_CHUNK_NAME.FileExport,\r\n      content: `export default ${componentClassName};`,\r\n      linkAfter: [\r\n        COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        COMMON_CHUNK_NAME.InternalDepsImport,\r\n        COMMON_CHUNK_NAME.ImportAliasDefine,\r\n        COMMON_CHUNK_NAME.FileVarDefine,\r\n        COMMON_CHUNK_NAME.FileUtilDefine,\r\n        CLASS_DEFINE_CHUNK_NAME.End,\r\n      ],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "export const RAX_CHUNK_NAME = {\r\n  ClassDidMountBegin: 'RaxComponentClassDidMountBegin',\r\n  ClassDidMountContent: 'RaxComponentClassDidMountContent',\r\n  ClassDidMountEnd: 'RaxComponentClassDidMountEnd',\r\n  ClassWillUnmountBegin: 'RaxComponentClassWillUnmountBegin',\r\n  ClassWillUnmountContent: 'RaxComponentClassWillUnmountContent',\r\n  ClassWillUnmountEnd: 'RaxComponentClassWillUnmountEnd',\r\n  ClassRenderBegin: 'RaxComponentClassRenderBegin',\r\n  ClassRenderPre: 'RaxComponentClassRenderPre',\r\n  ClassRenderJSX: 'RaxComponentClassRenderJSX',\r\n  ClassRenderEnd: 'RaxComponentClassRenderEnd',\r\n  MethodsBegin: 'RaxComponentMethodsBegin',\r\n  MethodsContent: 'RaxComponentMethodsContent',\r\n  MethodsEnd: 'RaxComponentMethodsEnd',\r\n  LifeCyclesBegin: 'RaxComponentLifeCyclesBegin',\r\n  LifeCyclesContent: 'RaxComponentLifeCyclesContent',\r\n  LifeCyclesEnd: 'RaxComponentLifeCyclesEnd',\r\n};\r\n", "import _ from 'lodash';\r\nimport { isJSExpression, isJSFunction } from '@alilc/lowcode-types';\r\n\r\nimport { CLASS_DEFINE_CHUNK_NAME } from '../../../const/generator';\r\nimport { RAX_CHUNK_NAME } from './const';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  FileType,\r\n  ChunkType,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n} from '../../../types';\r\nimport { debug } from '../../../utils/debug';\r\nimport { isJSExpressionFn } from '../../../utils/common';\r\n\r\nexport interface PluginConfig {\r\n  fileType: string;\r\n  exportNameMapping: Record<string, string>;\r\n  normalizeNameMapping: Record<string, string>;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig = {\r\n    fileType: FileType.JSX,\r\n    exportNameMapping: {},\r\n    normalizeNameMapping: {\r\n      didMount: 'componentDidMount',\r\n      willUnmount: 'componentWillUnmount',\r\n    },\r\n    ...config,\r\n  };\r\n\r\n  const exportNameMapping = new Map(Object.entries(cfg.exportNameMapping));\r\n  const normalizeNameMapping = new Map(Object.entries(cfg.normalizeNameMapping));\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    // Rax \u5148\u53EA\u652F\u6301 didMount \u548C willUnmount \u5427\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n    const { lifeCycles } = ir;\r\n\r\n    if (lifeCycles && !_.isEmpty(lifeCycles)) {\r\n      Object.entries(lifeCycles).forEach(([lifeCycleName, lifeCycleMethodExpr]) => {\r\n        // \u8FC7\u6EE4\u6389\u975E\u6CD5\u6570\u636E\uFF08\u6709\u4E9B\u573A\u666F\u4E0B\u4F1A\u8BEF\u4F20\u5165\u7A7A\u5B57\u7B26\u4E32\u6216 null)\r\n        if (\r\n          !isJSFunction(lifeCycles[lifeCycleName]) &&\r\n          !isJSExpressionFn(lifeCycles[lifeCycleName]) &&\r\n          !isJSExpression(lifeCycles[lifeCycleName])\r\n        ) {\r\n          return;\r\n        }\r\n\r\n        const normalizeName = normalizeNameMapping.get(lifeCycleName) || lifeCycleName;\r\n        const exportName = exportNameMapping.get(lifeCycleName) || lifeCycleName;\r\n\r\n        next.chunks.push({\r\n          type: ChunkType.STRING,\r\n          fileType: cfg.fileType,\r\n          name: RAX_CHUNK_NAME.LifeCyclesContent,\r\n          content: `${exportName}: (${lifeCycleMethodExpr.value}),`,\r\n          linkAfter: [RAX_CHUNK_NAME.LifeCyclesBegin],\r\n        });\r\n\r\n        if (normalizeName === 'constructor') {\r\n          next.chunks.push({\r\n            type: ChunkType.STRING,\r\n            fileType: cfg.fileType,\r\n            name: CLASS_DEFINE_CHUNK_NAME.ConstructorContent,\r\n            content: `this._lifeCycles.${exportName}();`,\r\n            linkAfter: [CLASS_DEFINE_CHUNK_NAME.ConstructorStart],\r\n          });\r\n        } else if (normalizeName === 'componentDidMount') {\r\n          next.chunks.push({\r\n            type: ChunkType.STRING,\r\n            fileType: cfg.fileType,\r\n            name: RAX_CHUNK_NAME.ClassDidMountContent,\r\n            content: `this._lifeCycles.${exportName}();`,\r\n            linkAfter: [RAX_CHUNK_NAME.ClassDidMountBegin],\r\n          });\r\n        } else if (normalizeName === 'componentWillUnmount') {\r\n          next.chunks.push({\r\n            type: ChunkType.STRING,\r\n            fileType: cfg.fileType,\r\n            name: RAX_CHUNK_NAME.ClassWillUnmountContent,\r\n            content: `this._lifeCycles.${exportName}();`,\r\n            linkAfter: [RAX_CHUNK_NAME.ClassWillUnmountBegin],\r\n          });\r\n        } else {\r\n          debug(`[CodeGen]: unknown life cycle: ${lifeCycleName}`);\r\n        }\r\n      });\r\n\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n        content: '_lifeCycles = this._defineLifeCycles();',\r\n        linkAfter: [CLASS_DEFINE_CHUNK_NAME.Start],\r\n      });\r\n\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: RAX_CHUNK_NAME.LifeCyclesBegin,\r\n        content: `\r\n          _defineLifeCycles() {\r\n            const __$$lifeCycles = ({\r\n        `,\r\n        linkAfter: [RAX_CHUNK_NAME.ClassRenderEnd, CLASS_DEFINE_CHUNK_NAME.InsPrivateMethod],\r\n      });\r\n\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: RAX_CHUNK_NAME.LifeCyclesEnd,\r\n        content: `\r\n            });\r\n\r\n            // \u4E3A\u6240\u6709\u7684\u65B9\u6CD5\u7ED1\u5B9A\u4E0A\u4E0B\u6587\r\n            Object.entries(__$$lifeCycles).forEach(([lifeCycleName, lifeCycleMethod]) => {\r\n              if (typeof lifeCycleMethod === 'function') {\r\n                __$$lifeCycles[lifeCycleName] = (...args) => {\r\n                  return lifeCycleMethod.apply(this._context, args);\r\n                }\r\n              }\r\n            });\r\n\r\n            return __$$lifeCycles;\r\n          }\r\n        `,\r\n        linkAfter: [RAX_CHUNK_NAME.LifeCyclesBegin, RAX_CHUNK_NAME.LifeCyclesContent],\r\n      });\r\n    }\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import createDebug from 'debug';\r\n\r\nexport const debug = createDebug('code-generator');\r\n", "import { CLASS_DEFINE_CHUNK_NAME } from '../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n} from '../../../types';\r\n\r\nimport { RAX_CHUNK_NAME } from './const';\r\n\r\nexport interface PluginConfig {\r\n  fileType: string;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig = {\r\n    fileType: FileType.JSX,\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n      content: `\r\n         _methods = this._defineMethods();\r\n      `,\r\n      linkAfter: [CLASS_DEFINE_CHUNK_NAME.Start],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: RAX_CHUNK_NAME.MethodsBegin,\r\n      content: `\r\n        _defineMethods() {\r\n          return ({\r\n      `,\r\n      linkAfter: [\r\n        RAX_CHUNK_NAME.ClassRenderEnd,\r\n        CLASS_DEFINE_CHUNK_NAME.InsPrivateMethod,\r\n        RAX_CHUNK_NAME.LifeCyclesEnd,\r\n      ],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: RAX_CHUNK_NAME.MethodsEnd,\r\n      content: `\r\n          });\r\n        }\r\n      `,\r\n      linkAfter: [RAX_CHUNK_NAME.MethodsBegin, RAX_CHUNK_NAME.MethodsContent],\r\n    });\r\n\r\n    if (ir.methods && Object.keys(ir.methods).length > 0) {\r\n      Object.entries(ir.methods).forEach(([methodName, methodDefine]) => {\r\n        next.chunks.push({\r\n          type: ChunkType.STRING,\r\n          fileType: cfg.fileType,\r\n          name: RAX_CHUNK_NAME.MethodsContent,\r\n          content: `${methodName}: (${methodDefine.value}),`,\r\n          linkAfter: [RAX_CHUNK_NAME.MethodsBegin],\r\n        });\r\n      });\r\n    }\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { CLASS_DEFINE_CHUNK_NAME, DEFAULT_LINK_AFTER } from '../../../const/generator';\r\n\r\nimport { generateCompositeType } from '../../../utils/compositeType';\r\nimport { Scope } from '../../../utils/Scope';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n} from '../../../types';\r\n\r\nexport interface PluginConfig {\r\n  fileType: string;\r\n  implementType: 'inConstructor' | 'insMember' | 'hooks';\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig = {\r\n    fileType: FileType.JSX,\r\n    implementType: 'insMember',\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n    const scope = Scope.createRootScope();\r\n\r\n    const state = ir.state || {};\r\n    const fields = Object.keys(state).map<string>((stateName) => {\r\n      // TODO: \u8FD9\u91CC\u7528\u4EC0\u4E48 handlers?\r\n      const value = generateCompositeType(state[stateName], scope);\r\n      return `${JSON.stringify(stateName)}: ${value}`;\r\n    });\r\n\r\n    if (cfg.implementType === 'inConstructor') {\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.ConstructorContent,\r\n        content: `this.state = { ${fields.join(',')} };`,\r\n        linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.ConstructorContent]],\r\n      });\r\n    } else if (cfg.implementType === 'insMember') {\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n        content: `state = { ${fields.join(',')} };`,\r\n        linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.InsVar]],\r\n      });\r\n    }\r\n    // TODO: hooks state??\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "/* eslint-disable @typescript-eslint/indent */\r\nimport { CLASS_DEFINE_CHUNK_NAME, COMMON_CHUNK_NAME } from '../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n} from '../../../types';\r\nimport { RAX_CHUNK_NAME } from './const';\r\nimport { DEFAULT_LINK_AFTER } from '../../../const';\r\n\r\nexport interface PluginConfig {\r\n  fileType: string;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig = {\r\n    fileType: FileType.JSX,\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n    const useRef = !!ir.analyzeResult?.isUsingRef;\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n      content: \"import __$$constants from '../../constants';\",\r\n      linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n    });\r\n\r\n    // TODO: i18n \u662F\u53EF\u9009\u7684\uFF0C\u5982\u679C\u6CA1\u6709 i18n \u8FD9\u4E2A\u6587\u4EF6\u600E\u4E48\u529E\uFF1F\u8BE5\u600E\u4E48\u5224\u65AD\uFF1F\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n      content: \"import * as __$$i18n from '../../i18n';\",\r\n      linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: CLASS_DEFINE_CHUNK_NAME.ConstructorContent,\r\n      content: `\r\n        __$$i18n._inject2(this);\r\n      `,\r\n      linkAfter: [...DEFAULT_LINK_AFTER[CLASS_DEFINE_CHUNK_NAME.ConstructorContent]],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n      content: `\r\n        _context = this._createContext();\r\n      `,\r\n      linkAfter: [CLASS_DEFINE_CHUNK_NAME.Start],\r\n    });\r\n\r\n    // TODO: \u6309\u7167\u76EE\u524D\u7684\u5B9E\u73B0\u65B9\u6848\uFF0C\u4EE3\u7801\u7684\u63D2\u62D4\u80FD\u529B\u592A\u5F31\u4E86\uFF0C\u9700\u8981\u6709\u4E00\u4E9B\u53D8\u5316\u3002\r\n    //   Step 1: \u589E\u52A0\u524D\u7F6E\u7684\u5206\u6790\u5668\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: CLASS_DEFINE_CHUNK_NAME.InsPrivateMethod,\r\n      content: `\r\n        _createContext() {\r\n          const self = this;\r\n          const context = {\r\n            get state() {\r\n              return self.state;\r\n            },\r\n            setState(newState, callback) {\r\n              self.setState(newState, callback);\r\n            },\r\n            get dataSourceMap() {\r\n              return self._dataSourceEngine.dataSourceMap || {};\r\n            },\r\n            async reloadDataSource() {\r\n              await self._dataSourceEngine.reloadDataSource();\r\n            },\r\n            get utils() {\r\n              return self._utils;\r\n            },\r\n            get page() {\r\n              return context;\r\n            },\r\n            get component() {\r\n              return context;\r\n            },\r\n            get props() {\r\n              return self.props;\r\n            },\r\n            get constants() {\r\n              return __$$constants;\r\n            },\r\n            i18n: __$$i18n.i18n,\r\n            i18nFormat: __$$i18n.i18nFormat,\r\n            getLocale: __$$i18n.getLocale,\r\n            setLocale(locale) {\r\n              __$$i18n.setLocale(locale);\r\n              self.forceUpdate();\r\n            },${\r\n              useRef\r\n                ? `\r\n                  $(refName) {\r\n                    return self._refsManager.get(refName);\r\n                  },\r\n                  $$(refName) {\r\n                    return self._refsManager.getAll(refName);\r\n                  },\r\n                  get _refsManager() {\r\n                    if (!self._refsManager) {\r\n                      self._refsManager = new RefsManager();\r\n                    }\r\n                    return self._refsManager;\r\n                  },\r\n                `\r\n                : ''\r\n            }\r\n            ...this._methods,\r\n          };\r\n\r\n          return context;\r\n        }\r\n      `,\r\n      linkAfter: [RAX_CHUNK_NAME.ClassRenderEnd],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "/* eslint-disable @typescript-eslint/indent */\r\n\r\nimport {\r\n  IPublicTypeCompositeValue,\r\n  IPublicTypeJSExpression,\r\n  InterpretDataSourceConfig,\r\n  isJSExpression,\r\n  isJSFunction,\r\n} from '@alilc/lowcode-types';\r\nimport changeCase from 'change-case';\r\n\r\nimport { CLASS_DEFINE_CHUNK_NAME, COMMON_CHUNK_NAME } from '../../../const/generator';\r\nimport { Scope } from '../../../utils/Scope';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IScope,\r\n} from '../../../types';\r\n\r\nimport { generateCompositeType } from '../../../utils/compositeType';\r\nimport { parseExpressionConvertThis2Context } from '../../../utils/expressionParser';\r\nimport { isContainerSchema } from '../../../utils/schema';\r\nimport { RaxFrameworkOptions } from '../../project/framework/rax/types/RaxFrameworkOptions';\r\nimport { RAX_CHUNK_NAME } from './const';\r\n\r\nexport interface PluginConfig extends RaxFrameworkOptions {\r\n  fileType?: string;\r\n\r\n  /**\r\n   * \u6570\u636E\u6E90\u7684 handlers \u7684\u6620\u5C04\u914D\u7F6E\r\n   * @deprecated \u8BF7\u4F7F\u7528 datasourceConfig.handlersPackages \u6765\u914D\u7F6E\r\n   */\r\n  dataSourceHandlersPackageMap?: Record<string, string>;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig = {\r\n    fileType: FileType.JSX,\r\n    ...config,\r\n    dataSourceHandlersPackageMap:\r\n      config?.dataSourceHandlersPackageMap || config?.datasourceConfig?.handlersPackages,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const scope = Scope.createRootScope();\r\n    const dataSourceConfig = isContainerSchema(pre.ir) ? pre.ir.dataSource : null;\r\n    const dataSourceItems: InterpretDataSourceConfig[] =\r\n      (dataSourceConfig && dataSourceConfig.list) || [];\r\n    const dataSourceEngineOptions = { runtimeConfig: true };\r\n    if (dataSourceItems.length > 0) {\r\n      const requestHandlersMap: Record<string, IPublicTypeJSExpression> = {};\r\n\r\n      dataSourceItems.forEach((ds) => {\r\n        const dsType = ds.type || 'fetch';\r\n        if (!(dsType in requestHandlersMap) && dsType !== 'custom') {\r\n          const handlerFactoryName = `__$$create${changeCase.pascal(dsType)}RequestHandler`;\r\n\r\n          requestHandlersMap[dsType] = {\r\n            type: 'JSExpression',\r\n            value: `${handlerFactoryName}(${\r\n              dsType === 'urlParams' ? '__$$getSearchParams()' : ''\r\n            })`,\r\n          };\r\n\r\n          const handlerFactoryExportName = `create${changeCase.pascal(dsType)}Handler`;\r\n          const handlerPkgName =\r\n            cfg.dataSourceHandlersPackageMap?.[dsType] ||\r\n            `@alilc/lowcode-datasource-${changeCase.kebab(dsType)}-handler`;\r\n\r\n          next.chunks.push({\r\n            type: ChunkType.STRING,\r\n            fileType: FileType.JSX,\r\n            name: COMMON_CHUNK_NAME.ExternalDepsImport,\r\n            content: `\r\n              import { ${handlerFactoryExportName} as ${handlerFactoryName} } from '${handlerPkgName}';\r\n            `,\r\n            linkAfter: [],\r\n          });\r\n        }\r\n      });\r\n\r\n      Object.assign(dataSourceEngineOptions, { requestHandlersMap });\r\n    }\r\n\r\n    const datasourceEnginePackageName =\r\n      cfg.datasourceConfig?.enginePackage || '@alilc/lowcode-datasource-engine';\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: COMMON_CHUNK_NAME.ExternalDepsImport,\r\n      content: `\r\n        import { create as __$$createDataSourceEngine } from '${datasourceEnginePackageName}/runtime';\r\n      `,\r\n      linkAfter: [],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType!,\r\n      name: CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n      content: `\r\n        _dataSourceConfig = this._defineDataSourceConfig();\r\n        _dataSourceEngine = __$$createDataSourceEngine(\r\n          this._dataSourceConfig,\r\n          this._context,\r\n          ${generateCompositeType(dataSourceEngineOptions, scope)}\r\n        );`,\r\n      linkAfter: [CLASS_DEFINE_CHUNK_NAME.Start],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType!,\r\n      name: RAX_CHUNK_NAME.ClassDidMountContent,\r\n      content: `\r\n        this._dataSourceEngine.reloadDataSource();\r\n      `,\r\n      linkAfter: [RAX_CHUNK_NAME.ClassDidMountBegin],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType!,\r\n      name: CLASS_DEFINE_CHUNK_NAME.InsPrivateMethod,\r\n      content: `\r\n_defineDataSourceConfig() {\r\n  const __$$context = this._context;\r\n  return (${generateCompositeType(\r\n    {\r\n      ...dataSourceConfig,\r\n      list: [\r\n        ...dataSourceItems.map((item) => ({\r\n          // \u6570\u636E\u6E90\u5F15\u64CE\u9ED8\u8BA4\u7684 errorHandler \u662F\u7A7A\u7684\uFF0C\u800C\u4E14\u5E76\u4E0D\u4F1A\u89E6\u53D1\u7EC4\u4EF6\u91CD\u65B0\u6E32\u67D3\u2026\u2026\r\n          // \u8FD9\u4F1A\u5BFC\u81F4\u9875\u9762\u72B6\u6001\u4E0D\u80FD\u6B63\u5E38\u5C55\u793A\uFF0C\u6545\u8FD9\u91CC\u5904\u7406\u4E0B:\r\n          errorHandler: {\r\n            type: 'JSFunction',\r\n            value: `function (err){\r\n              setTimeout(() => {\r\n                this.setState({ __refresh: Date.now() + Math.random() });\r\n              }, 0);\r\n              throw err;\r\n            }`,\r\n          },\r\n          ...item,\r\n          isInit:\r\n            typeof item.isInit === 'boolean' || typeof item.isInit === 'undefined'\r\n              ? item.isInit ?? true\r\n              : wrapAsFunction(item.isInit, scope),\r\n          options: wrapAsFunction(item.options, scope),\r\n        })),\r\n      ],\r\n    },\r\n    scope,\r\n    {\r\n      handlers: {\r\n        function: (jsFunc) => parseExpressionConvertThis2Context(jsFunc.value, '__$$context'),\r\n        expression: (jsExpr) => parseExpressionConvertThis2Context(jsExpr.value, '__$$context'),\r\n      },\r\n    },\r\n  )});\r\n}\r\n      `,\r\n      linkAfter: [RAX_CHUNK_NAME.ClassRenderEnd],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n\r\nfunction wrapAsFunction(value: IPublicTypeCompositeValue, scope: IScope): IPublicTypeCompositeValue {\r\n  if (isJSExpression(value) || isJSFunction(value)) {\r\n    return {\r\n      type: 'JSExpression',\r\n      value: `function(){ return ((${value.value}))}`,\r\n    };\r\n  }\r\n\r\n  return {\r\n    type: 'JSExpression',\r\n    value: `function(){return((${generateCompositeType(value, scope)}))}`,\r\n  };\r\n}\r\n", "import { CLASS_DEFINE_CHUNK_NAME, COMMON_CHUNK_NAME } from '../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n} from '../../../types';\r\nimport { RAX_CHUNK_NAME } from './const';\r\n\r\nexport interface PluginConfig {\r\n  fileType: string;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig = {\r\n    fileType: FileType.JSX,\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n    const useRef = !!ir.analyzeResult?.isUsingRef;\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n      // TODO: \u4E0B\u9762\u8FD9\u4E2A\u8DEF\u5F84\u6709\u6CA1\u6709\u66F4\u597D\u7684\u65B9\u5F0F\u6765\u83B7\u53D6\uFF1F\u800C\u975E\u5199\u6B7B\r\n      content: `\r\n        import __$$projectUtils${useRef ? ', { RefsManager }' : ''} from '../../utils';\r\n      `,\r\n      linkAfter: [COMMON_CHUNK_NAME.ExternalDepsImport],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: CLASS_DEFINE_CHUNK_NAME.InsVar,\r\n      content: '_utils = this._defineUtils();',\r\n      linkAfter: [CLASS_DEFINE_CHUNK_NAME.Start],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: CLASS_DEFINE_CHUNK_NAME.InsPrivateMethod,\r\n\r\n      content: `\r\n        _defineUtils() {\r\n          return {\r\n            ...__$$projectUtils,\r\n          };\r\n        }`,\r\n      linkAfter: [RAX_CHUNK_NAME.ClassRenderEnd],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import {\r\n  IPublicTypeNodeSchema,\r\n  IPublicTypeJSExpression,\r\n  IPublicTypeNpmInfo,\r\n  IPublicTypeCompositeValue,\r\n  isJSExpression,\r\n} from '@alilc/lowcode-types';\r\n\r\nimport _ from 'lodash';\r\nimport changeCase from 'change-case';\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  CodePiece,\r\n  FileType,\r\n  ICodeChunk,\r\n  ICodeStruct,\r\n  IContainerInfo,\r\n  PIECE_TYPE,\r\n  HandlerSet,\r\n  IScope,\r\n  NodeGeneratorConfig,\r\n  NodePlugin,\r\n  AttrPlugin,\r\n} from '../../../types';\r\n\r\nimport { RAX_CHUNK_NAME } from './const';\r\nimport { COMMON_CHUNK_NAME } from '../../../const/generator';\r\n\r\nimport { generateExpression } from '../../../utils/jsExpression';\r\nimport {\r\n  createNodeGenerator,\r\n  generateConditionReactCtrl,\r\n  generateReactExprInJS,\r\n} from '../../../utils/nodeToJSX';\r\nimport { generateCompositeType } from '../../../utils/compositeType';\r\nimport { Scope } from '../../../utils/Scope';\r\nimport { parseExpressionGetGlobalVariables } from '../../../utils/expressionParser';\r\nimport { transformThis2Context } from '../../../core/jsx/handlers/transformThis2Context';\r\nimport { transformJsExpr } from '../../../core/jsx/handlers/transformJsExpression';\r\n\r\nexport interface PluginConfig {\r\n  fileType: string;\r\n\r\n  /** \u662F\u5426\u8981\u5FFD\u7565\u5C0F\u7A0B\u5E8F */\r\n  ignoreMiniApp?: boolean;\r\n}\r\n\r\n// TODO: componentName \u82E5\u5E76\u975E\u5927\u5199\u5B57\u7B26\u6253\u5934\uFF0C\u751A\u81F3\u5E76\u975E\u662F\u4E00\u4E2A\u6709\u6548\u7684 JS \u6807\u8BC6\u7B26\u600E\u4E48\u529E\uFF1F\uFF1F\r\n// FIXME: \u6211\u60F3\u4E86\u4E0B\uFF0C\u8FD9\u5757\u5E94\u8BE5\u653E\u5230\u89E3\u6790\u9636\u6BB5\u5C31\u53BB\u505A\u6389\uFF0C\u5BF9\u6240\u6709 componentName \u505A identifier validate\uFF0C\u7136\u540E\u5BF9\u4E0D\u5408\u6CD5\u7684\u505A\u7EDF\u4E00\u66FF\u6362\u3002\r\nconst pluginFactory: BuilderComponentPluginFactory<PluginConfig> = (config?) => {\r\n  const cfg: PluginConfig = {\r\n    fileType: FileType.JSX,\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IContainerInfo;\r\n    const rootScope = Scope.createRootScope();\r\n    const { tolerateEvalErrors = true, evalErrorsHandler = '' } = next.contextData;\r\n\r\n    // Rax \u6784\u5EFA\u5230\u5C0F\u7A0B\u5E8F\u7684\u65F6\u5019\uFF0C\u4E0D\u80FD\u7ED9\u7EC4\u4EF6\u8D77\u8D77\u522B\u540D\uFF0C\u5F97\u76F4\u63A5\u5F15\u7528\uFF0C\u6545\u8FD9\u91CC\u5C06\u6240\u6709\u7684\u522B\u540D\u66FF\u6362\u6389\r\n    // \u5148\u6536\u96C6\u4E0B\u6240\u6709\u7684 alias \u7684\u6620\u5C04\r\n    const componentsNameAliasMap = new Map<string, string>();\r\n    next.chunks.forEach((chunk) => {\r\n      if (isImportAliasDefineChunk(chunk)) {\r\n        componentsNameAliasMap.set(chunk.ext.aliasName, chunk.ext.originalName);\r\n      }\r\n    });\r\n\r\n    // \u6CE8\u610F\uFF1A\u8FD9\u91CC\u5176\u5B9E\u9690\u542B\u4E86\u4E00\u4E2A\u5047\u8BBE\uFF1Aschema \u4E2D\u7684 componentName \u5E94\u8BE5\u662F\u4E00\u4E2A\u6709\u6548\u7684 JS \u6807\u8BC6\u7B26\uFF0C\u800C\u4E14\u662F\u5927\u5199\u5B57\u6BCD\u6253\u5934\u7684\r\n    // FIXME: \u4E3A\u4E86\u5FEB\u901F\u4FEE\u590D\u4E34\u65F6\u52A0\u7684\u903B\u8F91\uFF0C\u9700\u8981\u7528 pre-process \u7684\u65B9\u5F0F\u66FF\u4EE3\u5904\u7406\u3002\r\n    const mapComponentNameToAliasOrKeepIt = (componentName: string) => componentsNameAliasMap.get(componentName) || componentName;\r\n\r\n    // \u7136\u540E\u8FC7\u6EE4\u6389\u6240\u6709\u7684\u522B\u540D chunks\r\n    next.chunks = next.chunks.filter((chunk) => !isImportAliasDefineChunk(chunk));\r\n\r\n    // \u5982\u679C\u76F4\u63A5\u6309\u76EE\u524D\u7684 React \u7684\u65B9\u5F0F\u4E4B\u95F4\u51FA\u7801 JSX \u7684\u8BDD\uFF0C\u4F1A\u6709 3 \u4E2A\u95EE\u9898\uFF1A\r\n    // 1. \u5C0F\u7A0B\u5E8F\u51FA\u7801\u7684\u65F6\u5019\uFF0C\u5FAA\u73AF\u53D8\u91CF\u6CA1\u6CD5\u62FF\u5230\r\n    // 2. \u5C0F\u7A0B\u5E8F\u51FA\u7801\u7684\u65F6\u5019\uFF0C\u5F88\u5BB9\u6613\u51FA\u73B0 Uncaught TypeError: Cannot read property 'avatar' of undefined \u8FD9\u6837\u7684\u5F02\u5E38(\u5982\u4E0B\u56FE\u7684 50 \u884C) -- \u56E0\u4E3A\u82E5\u76F4\u63A5\u51FA\u7801\uFF0CRax \u6784\u5EFA\u5230\u5C0F\u7A0B\u5E8F\u7684\u65F6\u5019\u4F1A\u7ACB\u5373\u8BA1\u7B97\u6240\u6709\u5728\u89C6\u56FE\u4E2D\u7528\u5230\u7684\u53D8\u91CF\r\n    // 3. \u901A\u8FC7 this.xxx \u80FD\u62FF\u5230\u7684\u4E1C\u897F\u592A\u591A\u4E86\uFF0C\u800C\u4E14\u81EA\u5B9A\u4E49\u7684 methods \u53EF\u80FD\u4F1A\u65E0\u610F\u95F4\u7834\u574F Rax \u6846\u67B6\u6216\u5C0F\u7A0B\u5E8F\u6846\u67B6\u5728\u9875\u9762 this \u4E0A\u7684\u4E1C\u4E1C\r\n    const customHandlers: HandlerSet<string> = {\r\n      expression(input: IPublicTypeJSExpression, scope: IScope) {\r\n        return transformJsExpr(generateExpression(input, scope), scope, {\r\n          dontWrapEval: !tolerateEvalErrors,\r\n        });\r\n      },\r\n      function(input, scope: IScope) {\r\n        return transformThis2Context(input.value || 'null', scope);\r\n      },\r\n    };\r\n\r\n    // \u521B\u5EFA\u4EE3\u7801\u751F\u6210\u5668\r\n    const commonNodeGenerator = createNodeGenerator({\r\n      handlers: customHandlers,\r\n      tagMapping: mapComponentNameToAliasOrKeepIt,\r\n      nodePlugins: [generateReactExprInJS, generateConditionReactCtrl, generateRaxLoopCtrl],\r\n      attrPlugins: [generateNodeAttrForRax.bind({ cfg })],\r\n    });\r\n\r\n    // \u751F\u6210 JSX \u4EE3\u7801\r\n    const jsxContent = commonNodeGenerator(ir, rootScope);\r\n\r\n    if (!cfg.ignoreMiniApp) {\r\n      next.chunks.push({\r\n        type: ChunkType.STRING,\r\n        fileType: cfg.fileType,\r\n        name: COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        content: \"import { isMiniApp as __$$isMiniApp } from 'universal-env';\",\r\n        linkAfter: [],\r\n      });\r\n    }\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: RAX_CHUNK_NAME.ClassRenderPre,\r\n      // TODO: setState, dataSourceMap, reloadDataSource, utils, i18n, i18nFormat, getLocale, setLocale \u8FD9\u4E9B\u5728 Rax \u7684\u7F16\u8BD1\u6A21\u5F0F\u4E0B\u4E0D\u80FD\u5728\u89C6\u56FE\u4E2D\u76F4\u63A5\u8BBF\u95EE\uFF0C\u9700\u8981\u8F6C\u5316\u6210 this.xxx\r\n      content: `\r\n        const __$$context = this._context;\r\n        const { state, setState, dataSourceMap, reloadDataSource, utils, constants, i18n, i18nFormat, getLocale, setLocale } = __$$context;\r\n      `,\r\n      linkAfter: [RAX_CHUNK_NAME.ClassRenderBegin],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: RAX_CHUNK_NAME.ClassRenderJSX,\r\n      content: `return ${jsxContent};`,\r\n      linkAfter: [RAX_CHUNK_NAME.ClassRenderBegin, RAX_CHUNK_NAME.ClassRenderPre],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: COMMON_CHUNK_NAME.CustomContent,\r\n      content: [\r\n        tolerateEvalErrors &&\r\n          `\r\n        function __$$eval(expr) {\r\n          try {\r\n            return expr();\r\n          } catch (error) {\r\n            ${evalErrorsHandler}\r\n          }\r\n        }\r\n\r\n        function __$$evalArray(expr) {\r\n          const res = __$$eval(expr);\r\n          return Array.isArray(res) ? res : [];\r\n        }\r\n        `,\r\n        `\r\n        function __$$createChildContext(oldContext, ext) {\r\n          return Object.assign({}, oldContext, ext);\r\n        }\r\n      `,\r\n      ]\r\n        .filter(Boolean)\r\n        .join('\\n'),\r\n      linkAfter: [COMMON_CHUNK_NAME.FileExport],\r\n    });\r\n\r\n    return next;\r\n\r\n    function generateRaxLoopCtrl(\r\n      nodeItem: IPublicTypeNodeSchema,\r\n      scope: IScope,\r\n      config?: NodeGeneratorConfig,\r\n      next?: NodePlugin,\r\n    ): CodePiece[] {\r\n      if (nodeItem.loop) {\r\n        const loopItemName = nodeItem.loopArgs?.[0] || 'item';\r\n        const loopIndexName = nodeItem.loopArgs?.[1] || 'index';\r\n        const subScope = scope.createSubScope([loopItemName, loopIndexName]);\r\n        const pieces: CodePiece[] = next ? next(nodeItem, subScope, config) : [];\r\n\r\n        const loopDataExpr = tolerateEvalErrors\r\n          ? `__$$evalArray(() => (${transformThis2Context(\r\n              generateCompositeType(nodeItem.loop, scope, { handlers: config?.handlers }),\r\n              scope,\r\n            )}))`\r\n          : `(${transformThis2Context(\r\n              generateCompositeType(nodeItem.loop, scope, { handlers: config?.handlers }),\r\n              scope,\r\n            )})`;\r\n\r\n        pieces.unshift({\r\n          value: `${loopDataExpr}.map((${loopItemName}, ${loopIndexName}) => ((__$$context) => (`,\r\n          type: PIECE_TYPE.BEFORE,\r\n        });\r\n\r\n        pieces.push({\r\n          value: `))(__$$createChildContext(__$$context, { ${loopItemName}, ${loopIndexName} })))`,\r\n          type: PIECE_TYPE.AFTER,\r\n        });\r\n\r\n        return pieces;\r\n      }\r\n\r\n      return next ? next(nodeItem, scope, config) : [];\r\n    }\r\n  };\r\n\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n\r\nfunction isImportAliasDefineChunk(chunk: ICodeChunk): chunk is ICodeChunk & {\r\n  ext: {\r\n    aliasName: string;\r\n    originalName: string;\r\n    dependency: IPublicTypeNpmInfo;\r\n  };\r\n} {\r\n  return (\r\n    chunk.name === COMMON_CHUNK_NAME.ImportAliasDefine &&\r\n    !!chunk.ext &&\r\n    typeof chunk.ext.aliasName === 'string' &&\r\n    typeof chunk.ext.originalName === 'string' &&\r\n    !!(chunk.ext.dependency as IPublicTypeNpmInfo | null)?.componentName\r\n  );\r\n}\r\n\r\nfunction generateNodeAttrForRax(\r\n  this: { cfg: PluginConfig },\r\n  attrData: { attrName: string; attrValue: IPublicTypeCompositeValue },\r\n  scope: IScope,\r\n  config?: NodeGeneratorConfig,\r\n  next?: AttrPlugin,\r\n): CodePiece[] {\r\n  if (!this.cfg.ignoreMiniApp && /^on/.test(attrData.attrName)) {\r\n    // else: onXxx \u7684\u90FD\u662F\u4E8B\u4EF6\u5904\u7406\u51FD\u6570\u9700\u8981\u7279\u6B8A\u5904\u7406\u4E0B\r\n    return generateEventHandlerAttrForRax(attrData.attrName, attrData.attrValue, scope, config);\r\n  }\r\n\r\n  if (attrData.attrName === 'ref') {\r\n    return [\r\n      {\r\n        name: attrData.attrName,\r\n        value: `__$$context._refsManager.linkRef('${attrData.attrValue}')`,\r\n        type: PIECE_TYPE.ATTR,\r\n      },\r\n    ];\r\n  }\r\n\r\n  return next ? next(attrData, scope, config) : [];\r\n}\r\n\r\nfunction generateEventHandlerAttrForRax(\r\n  attrName: string,\r\n  attrValue: IPublicTypeCompositeValue,\r\n  scope: IScope,\r\n  config?: NodeGeneratorConfig,\r\n): CodePiece[] {\r\n  // -- \u4E8B\u4EF6\u5904\u7406\u51FD\u6570\u4E2D JSExpression \u8F6C\u6210 JSFunction \u6765\u5904\u7406\uFF0C\u907F\u514D\u5F53 JSExpression \u5904\u7406\u7684\u65F6\u5019\u591A\u5305\u4E00\u5C42 eval \u800C\u5BFC\u81F4 Rax \u8F6C\u7801\u6210\u5C0F\u7A0B\u5E8F\u7684\u65F6\u5019\u51FA\u95EE\u9898\r\n  const valueExpr = generateCompositeType(\r\n    isJSExpression(attrValue) ? { type: 'JSFunction', value: attrValue.value } : attrValue,\r\n    scope,\r\n    {\r\n      handlers: config?.handlers,\r\n    },\r\n  );\r\n\r\n  // \u67E5\u8BE2\u5F53\u524D\u4F5C\u7528\u57DF\u4E0B\u7684\u53D8\u91CF\r\n  const currentScopeVariables = scope.bindings?.getAllBindings() || [];\r\n  if (currentScopeVariables.length <= 0) {\r\n    return [\r\n      {\r\n        type: PIECE_TYPE.ATTR,\r\n        name: attrName,\r\n        value: valueExpr,\r\n      },\r\n    ];\r\n  }\r\n\r\n  // \u63D0\u53D6\u51FA\u6240\u6709\u7684\u672A\u5B9A\u4E49\u7684\u5168\u5C40\u53D8\u91CF\r\n  const undeclaredVariablesInValueExpr = parseExpressionGetGlobalVariables(valueExpr);\r\n  const referencedLocalVariables = _.intersection(\r\n    undeclaredVariablesInValueExpr,\r\n    currentScopeVariables,\r\n  );\r\n  if (referencedLocalVariables.length <= 0) {\r\n    return [\r\n      {\r\n        type: PIECE_TYPE.ATTR,\r\n        name: attrName,\r\n        value: valueExpr,\r\n      },\r\n    ];\r\n  }\r\n\r\n  const wrappedAttrValueExpr = [\r\n    '(...__$$args) => {',\r\n    '  if (__$$isMiniApp) {',\r\n    '    const __$$event = __$$args[0];',\r\n    ...referencedLocalVariables.map(\r\n      (localVar) => `const ${localVar} = __$$event.target.dataset.${localVar};`,\r\n    ),\r\n    `    return (${valueExpr}).apply(this, __$$args);`,\r\n    '  } else {',\r\n    `    return (${valueExpr}).apply(this, __$$args);`,\r\n    '  }',\r\n    '}',\r\n  ].join('\\n');\r\n\r\n  return [\r\n    ...referencedLocalVariables.map((localVar) => ({\r\n      type: PIECE_TYPE.ATTR,\r\n      name: `data-${changeCase.snake(localVar)}`,\r\n      value: localVar,\r\n    })),\r\n    {\r\n      type: PIECE_TYPE.ATTR,\r\n      name: attrName,\r\n      value: wrappedAttrValueExpr,\r\n    },\r\n  ];\r\n}\r\n", "import { COMMON_CHUNK_NAME } from '../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n} from '../../../types';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: COMMON_CHUNK_NAME.ExternalDepsImport,\r\n      content: `\r\n        // \u6CE8\u610F: \u51FA\u7801\u5F15\u64CE\u6CE8\u5165\u7684\u4E34\u65F6\u53D8\u91CF\u9ED8\u8BA4\u90FD\u4EE5 \"__$$\" \u5F00\u5934\uFF0C\u7981\u6B62\u5728\u642D\u5EFA\u7684\u4EE3\u7801\u4E2D\u76F4\u63A5\u8BBF\u95EE\u3002\r\n        // \u4F8B\u5916\uFF1Arax \u6846\u67B6\u7684\u5BFC\u51FA\u540D\u548C\u5404\u79CD\u7EC4\u4EF6\u540D\u9664\u5916\u3002\r\n        import { createElement, Component } from 'rax';\r\n        import { getSearchParams as __$$getSearchParams } from 'rax-app';\r\n      `,\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "/* eslint-disable max-len */\r\n/* Note: this file is generated by \"npm run template\", please dont modify this file directly */\r\n/* -- instead, you should modify \"static-files/rax/.eslintignore.template\" and run \"npm run template\" */\r\nimport { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    ['.'],\r\n    {\r\n      name: '.eslintignore',\r\n      ext: '',\r\n      content: 'node_modules/\\nlib/\\ndist/\\nbuild/\\ncoverage/\\ndemo/\\nes/\\n.rax/\\n',\r\n    },\r\n  ];\r\n}\r\n", "/* eslint-disable max-len */\r\n/* Note: this file is generated by \"npm run template\", please dont modify this file directly */\r\n/* -- instead, you should modify \"static-files/rax/.eslintrc.js.template\" and run \"npm run template\" */\r\nimport { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    ['.'],\r\n    {\r\n      name: '.eslintrc',\r\n      ext: 'js',\r\n      content:\r\n        \"const { getESLintConfig } = require('@iceworks/spec');\\n\\n// https://www.npmjs.com/package/@iceworks/spec\\nmodule.exports = {\\n  ...getESLintConfig('rax'),\\n  rules: {\\n    'max-len': ['error', { code: 200 }],\\n    'function-paren-newline': 'off',\\n    '@typescript-eslint/indent': 'off',\\n    'prettier/prettier': 'off',\\n    'no-empty': 'off',\\n    'no-unused-vars': 'off',\\n    '@iceworks/best-practices/recommend-functional-component': 'off',\\n  },\\n};\\n\",\r\n    },\r\n  ];\r\n}\r\n", "/* eslint-disable max-len */\r\n/* Note: this file is generated by \"npm run template\", please dont modify this file directly */\r\n/* -- instead, you should modify \"static-files/rax/.gitignore.template\" and run \"npm run template\" */\r\nimport { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    ['.'],\r\n    {\r\n      name: '.gitignore',\r\n      ext: '',\r\n      content:\r\n        '# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.\\n\\n*~\\n*.swp\\n*.log\\n\\n.DS_Store\\n.idea/\\n.temp/\\n\\nbuild/\\ndist/\\nlib/\\ncoverage/\\nnode_modules/\\n.rax/\\n\\ntemplate.yml',\r\n    },\r\n  ];\r\n}\r\n", "/* eslint-disable max-len */\r\n/* Note: this file is generated by \"npm run template\", please dont modify this file directly */\r\n/* -- instead, you should modify \"static-files/rax/.prettierignore.template\" and run \"npm run template\" */\r\nimport { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    ['.'],\r\n    {\r\n      name: '.prettierignore',\r\n      ext: '',\r\n      content: 'node_modules/\\nlib/\\ndist/\\nbuild/\\ncoverage/\\ndemo/\\nes/\\n.rax/\\n',\r\n    },\r\n  ];\r\n}\r\n", "/* eslint-disable max-len */\r\n/* Note: this file is generated by \"npm run template\", please dont modify this file directly */\r\n/* -- instead, you should modify \"static-files/rax/.prettierrc.js.template\" and run \"npm run template\" */\r\nimport { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    ['.'],\r\n    {\r\n      name: '.prettierrc',\r\n      ext: 'js',\r\n      content:\r\n        \"const { getPrettierConfig } = require('@iceworks/spec');\\n\\nmodule.exports = getPrettierConfig('rax');\\n\",\r\n    },\r\n  ];\r\n}\r\n", "/* eslint-disable max-len */\r\n/* Note: this file is generated by \"npm run template\", please dont modify this file directly */\r\n/* -- instead, you should modify \"static-files/rax/.stylelintignore.template\" and run \"npm run template\" */\r\nimport { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    ['.'],\r\n    {\r\n      name: '.stylelintignore',\r\n      ext: '',\r\n      content: 'node_modules/\\nlib/\\ndist/\\nbuild/\\ncoverage/\\ndemo/\\nes/\\n.rax/\\n',\r\n    },\r\n  ];\r\n}\r\n", "/* eslint-disable max-len */\r\n/* Note: this file is generated by \"npm run template\", please dont modify this file directly */\r\n/* -- instead, you should modify \"static-files/rax/.stylelintrc.js.template\" and run \"npm run template\" */\r\nimport { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    ['.'],\r\n    {\r\n      name: '.stylelintrc',\r\n      ext: 'js',\r\n      content:\r\n        \"const { getStylelintConfig } = require('@iceworks/spec');\\n\\nmodule.exports = getStylelintConfig('rax');\\n\",\r\n    },\r\n  ];\r\n}\r\n", "/* eslint-disable max-len */\r\n/* Note: this file is generated by \"npm run template\", please dont modify this file directly */\r\n/* -- instead, you should modify \"static-files/rax/jsconfig.json.template\" and run \"npm run template\" */\r\nimport { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    ['.'],\r\n    {\r\n      name: 'jsconfig',\r\n      ext: 'json',\r\n      content:\r\n        '{\\n  \"compilerOptions\": {\\n    \"baseUrl\": \".\",\\n    \"jsx\": \"react\",\\n    \"paths\": {\\n      \"@/*\": [\"./src/*\"],\\n      \"rax-app\": [\".rax/index.ts\"]\\n    }\\n  }\\n}\\n',\r\n    },\r\n  ];\r\n}\r\n", "/* eslint-disable max-len */\r\n/* Note: this file is generated by \"npm run template\", please dont modify this file directly */\r\n/* -- instead, you should modify \"static-files/rax/README.md.template\" and run \"npm run template\" */\r\nimport { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    ['.'],\r\n    {\r\n      name: 'README',\r\n      ext: 'md',\r\n      content:\r\n        '# rax-materials-basic-app\\n\\n## Getting Started\\n\\n### `npm run start`\\n\\nRuns the app in development mode.\\n\\nOpen [http://localhost:3333](http://localhost:3333) to view it in the browser.\\n\\nThe page will reload if you make edits.\\n\\n### `npm run build`\\n\\nBuilds the app for production to the `build` folder.\\n',\r\n    },\r\n  ];\r\n}\r\n", "/* eslint-disable max-len */\r\n/* Note: this file is generated by \"npm run template\", please dont modify this file directly */\r\n/* -- instead, you should modify \"static-files/rax/tsconfig.json.template\" and run \"npm run template\" */\r\nimport { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    ['.'],\r\n    {\r\n      name: 'tsconfig',\r\n      ext: 'json',\r\n      content:\r\n        '{\\n  \"compileOnSave\": false,\\n  \"buildOnSave\": false,\\n  \"compilerOptions\": {\\n    \"baseUrl\": \".\",\\n    \"outDir\": \"build\",\\n    \"module\": \"esnext\",\\n    \"target\": \"es6\",\\n    \"jsx\": \"preserve\",\\n    \"jsxFactory\": \"createElement\",\\n    \"moduleResolution\": \"node\",\\n    \"allowSyntheticDefaultImports\": true,\\n    \"lib\": [\"es6\", \"dom\"],\\n    \"sourceMap\": true,\\n    \"allowJs\": true,\\n    \"rootDir\": \"./\",\\n    \"forceConsistentCasingInFileNames\": true,\\n    \"noImplicitReturns\": true,\\n    \"noImplicitThis\": true,\\n    \"noImplicitAny\": false,\\n    \"importHelpers\": true,\\n    \"strictNullChecks\": true,\\n    \"suppressImplicitAnyIndexErrors\": true,\\n    \"noUnusedLocals\": true,\\n    \"skipLibCheck\": true,\\n    \"paths\": {\\n      \"@/*\": [\"./src/*\"],\\n      \"rax-app\": [\".rax/index.ts\"]\\n    }\\n  },\\n  \"include\": [\"src\", \".rax\"],\\n  \"exclude\": [\"node_modules\", \"build\", \"public\"]\\n}',\r\n    },\r\n  ];\r\n}\r\n", "/* Note: this file is generated by \"npm run template\", please dont modify this file directly */\r\nimport { ResultDir } from '@alilc/lowcode-types';\r\n\r\nimport { createResultDir } from '../../../../../utils/resultHelper';\r\nimport { runFileGenerator } from '../../../../../utils/templateHelper';\r\nimport file0 from './files/.eslintignore';\r\nimport file1 from './files/.eslintrc.js';\r\nimport file2 from './files/.gitignore';\r\nimport file3 from './files/.prettierignore';\r\nimport file4 from './files/.prettierrc.js';\r\nimport file5 from './files/.stylelintignore';\r\nimport file6 from './files/.stylelintrc.js';\r\nimport file7 from './files/jsconfig.json';\r\nimport file8 from './files/README.md';\r\nimport file9 from './files/tsconfig.json';\r\n\r\nexport function generateStaticFiles(root = createResultDir('.')): ResultDir {\r\n  runFileGenerator(root, file0);\r\n  runFileGenerator(root, file1);\r\n  runFileGenerator(root, file2);\r\n  runFileGenerator(root, file3);\r\n  runFileGenerator(root, file4);\r\n  runFileGenerator(root, file5);\r\n  runFileGenerator(root, file6);\r\n  runFileGenerator(root, file7);\r\n  runFileGenerator(root, file8);\r\n  runFileGenerator(root, file9);\r\n  return root;\r\n}\r\n", "import { ResultDir } from '@alilc/lowcode-types';\r\nimport { IProjectTemplate } from '../../../../../types';\r\nimport { generateStaticFiles } from './static-files';\r\n\r\nconst raxAppTemplate: IProjectTemplate = {\r\n  slots: {\r\n    components: {\r\n      path: ['src', 'components'],\r\n    },\r\n    pages: {\r\n      path: ['src', 'pages'],\r\n    },\r\n    router: {\r\n      path: ['src'],\r\n      fileName: 'router',\r\n    },\r\n    entry: {\r\n      path: ['src'],\r\n      fileName: 'app',\r\n    },\r\n    appConfig: {\r\n      path: ['src'],\r\n      fileName: 'app',\r\n    },\r\n    buildConfig: {\r\n      path: [],\r\n      fileName: 'build',\r\n    },\r\n    constants: {\r\n      path: ['src'],\r\n      fileName: 'constants',\r\n    },\r\n    utils: {\r\n      path: ['src'],\r\n      fileName: 'utils',\r\n    },\r\n    i18n: {\r\n      path: ['src'],\r\n      fileName: 'i18n',\r\n    },\r\n    globalStyle: {\r\n      path: ['src'],\r\n      fileName: 'global',\r\n    },\r\n    htmlEntry: {\r\n      path: ['src', 'document'],\r\n      fileName: 'index',\r\n    },\r\n    packageJSON: {\r\n      path: [],\r\n      fileName: 'package',\r\n    },\r\n  },\r\n\r\n  async generateTemplate(): Promise<ResultDir> {\r\n    return generateStaticFiles();\r\n  },\r\n};\r\n\r\nexport default raxAppTemplate;\r\n", "import { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n} from '../../../../../types';\r\nimport { RaxFrameworkOptions } from '../types/RaxFrameworkOptions';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<RaxFrameworkOptions> = (cfg) => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JS,\r\n      name: COMMON_CHUNK_NAME.ExternalDepsImport,\r\n      content: `\r\nimport { runApp } from 'rax-app';\r\n\r\nimport './global.${cfg?.globalStylesFileType || 'css'}';\r\n`,\r\n      linkAfter: [],\r\n    });\r\n\r\n    // \u5E94\u7528\u914D\u7F6E\r\n    const appConfig = cfg?.appConfig || {};\r\n    Object.assign(appConfig, {\r\n      // \u8DEF\u7531\u914D\u7F6E\r\n      router: {\r\n        mode: 'hash',\r\n        ...appConfig.router,\r\n      },\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JS,\r\n      name: COMMON_CHUNK_NAME.FileMainContent,\r\n      content: `\r\nrunApp(${JSON.stringify(appConfig, null, 2)});\r\n`,\r\n      linkAfter: [\r\n        COMMON_CHUNK_NAME.ExternalDepsImport,\r\n        COMMON_CHUNK_NAME.InternalDepsImport,\r\n        COMMON_CHUNK_NAME.ImportAliasDefine,\r\n        COMMON_CHUNK_NAME.FileVarDefine,\r\n        COMMON_CHUNK_NAME.FileUtilDefine,\r\n      ],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import changeCase from 'change-case';\r\nimport { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IParseResult,\r\n} from '../../../../../types';\r\nimport { ensureValidClassName } from '../../../../../utils/validate';\r\nimport { RaxFrameworkOptions } from '../types/RaxFrameworkOptions';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<RaxFrameworkOptions> = (cfg) => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IParseResult;\r\n\r\n    const routes = ir.globalRouter?.routes?.map((route) => ({\r\n      path: route.path,\r\n      source: `pages/${ensureValidClassName(changeCase.pascalCase(route.fileName))}/index`,\r\n    })) || [{ path: '/', source: 'pages/Home/index' }];\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSON,\r\n      name: COMMON_CHUNK_NAME.CustomContent,\r\n      content: `\r\n{\r\n  \"routes\": ${JSON.stringify(routes, null, 2)},\r\n  \"window\": {\r\n    \"title\": ${JSON.stringify(\r\n      cfg?.title || ir.project?.meta?.title || ir.project?.meta?.name || '',\r\n    )}\r\n  }\r\n}\r\n      `,\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IParseResult,\r\n} from '../../../../../types';\r\nimport type { RaxFrameworkOptions } from '../types/RaxFrameworkOptions';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<RaxFrameworkOptions> = (cfg) => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IParseResult;\r\n\r\n    const miniAppBuildType =\r\n      cfg?.buildConfig?.miniAppBuildType || ir.project?.config?.miniAppBuildType;\r\n    const targets = cfg?.targets || ['web'];\r\n\r\n    const buildCfg = {\r\n      inlineStyle: false,\r\n      plugins: [],\r\n      targets,\r\n      miniapp: miniAppBuildType\r\n        ? {\r\n            buildType: miniAppBuildType,\r\n            ...cfg?.buildConfig?.miniapp,\r\n          }\r\n        : cfg?.buildConfig?.miniapp,\r\n      ...cfg?.buildConfig,\r\n    };\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSON,\r\n      name: COMMON_CHUNK_NAME.CustomContent,\r\n      content: `${JSON.stringify(buildCfg, null, 2)}\\n`,\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IProjectInfo,\r\n} from '../../../../../types';\r\nimport { RaxFrameworkOptions } from '../types/RaxFrameworkOptions';\r\n\r\n/**\r\n * \u8FD9\u79CD\u65B9\u5F0F\u5DF2\u7ECF\u4E0D\u63A8\u8350\u4F7F\u7528\u4E86\r\n */\r\nconst pluginFactory: BuilderComponentPluginFactory<RaxFrameworkOptions> = (cfg) => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IProjectInfo;\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: COMMON_CHUNK_NAME.CustomContent,\r\n      content: `\r\nimport { createElement } from 'rax';\r\nimport { Root, Style, Script } from 'rax-document';\r\n\r\nfunction Document() {\r\n  return (\r\n    <html>\r\n      <head>\r\n        <meta charset=\"utf-8\" />\r\n        <meta\r\n          name=\"viewport\"\r\n          content=\"width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover\"\r\n        />\r\n        <title>${cfg?.title || ir?.meta?.name || 'Rax App'}</title>\r\n        <Style />\r\n      </head>\r\n      <body>\r\n        {/* root container */}\r\n        <Root />\r\n        <Script />\r\n      </body>\r\n    </html>\r\n  );\r\n}\r\n\r\nexport default Document;\r\n`,\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IProjectInfo,\r\n} from '../../../../../types';\r\n\r\nexport interface GlobalStylePluginConfig {\r\n  fileType: string;\r\n}\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<GlobalStylePluginConfig> = (\r\n  config?: Partial<GlobalStylePluginConfig>,\r\n) => {\r\n  const cfg: GlobalStylePluginConfig = {\r\n    fileType: FileType.SCSS,\r\n    ...config,\r\n  };\r\n\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IProjectInfo;\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: COMMON_CHUNK_NAME.StyleDepsImport,\r\n      content: '',\r\n      linkAfter: [],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: COMMON_CHUNK_NAME.StyleCssContent,\r\n      content: `\r\nbody {\r\n  -webkit-font-smoothing: antialiased;\r\n}\r\n`,\r\n      linkAfter: [COMMON_CHUNK_NAME.StyleDepsImport],\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: cfg.fileType,\r\n      name: COMMON_CHUNK_NAME.StyleCssContent,\r\n      content: ir.css || '',\r\n      linkAfter: [COMMON_CHUNK_NAME.StyleDepsImport],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import semver from 'semver';\r\n\r\nexport function calcCompatibleVersion(v1: string | undefined | null, v2: string | undefined | null): string {\r\n  if (!v1 && !v2) {\r\n    return '*';\r\n  }\r\n\r\n  if (!v1 || v1 === '*') {\r\n    return v2 || '*';\r\n  }\r\n\r\n  if (!v2 || v2 === '*') {\r\n    return v1;\r\n  }\r\n\r\n  if (v1 === v2) {\r\n    return v1;\r\n  }\r\n\r\n  if (!semver.intersects(v1, v2, { loose: true })) {\r\n    throw new Error(`no compatible versions for \"${v1}\" and \"${v2}\"`);\r\n  }\r\n\r\n  if (semver.subset(v1, v2, { loose: true })) {\r\n    return v1;\r\n  }\r\n\r\n  return v2;\r\n}\r\n", "import { IPublicTypeNpmInfo, PackageJSON } from '@alilc/lowcode-types';\r\nimport { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IProjectInfo,\r\n} from '../../../../../types';\r\nimport { isNpmInfo } from '../../../../../utils/schema';\r\nimport { getErrorMessage } from '../../../../../utils/errors';\r\nimport { calcCompatibleVersion } from '../../../../../utils/version';\r\nimport { RaxFrameworkOptions } from '../types/RaxFrameworkOptions';\r\nimport { buildDataSourceDependencies } from '../../../../../utils/dataSource';\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<RaxFrameworkOptions> = (cfg) => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IProjectInfo;\r\n\r\n    const npmDeps = getNpmDependencies(ir);\r\n\r\n    const packageJson: PackageJSON = {\r\n      name: cfg?.packageName || 'rax-demo-app',\r\n      private: true,\r\n      version: cfg?.packageVersion || '1.0.0',\r\n      scripts: {\r\n        start: 'rax-app start',\r\n        build: 'rax-app build',\r\n        eslint: 'eslint --ext .js,.jsx ./',\r\n        stylelint: 'stylelint \"**/*.{css,scss,less}\"',\r\n        prettier: 'prettier **/* --write',\r\n        lint: 'npm run eslint && npm run stylelint',\r\n      },\r\n      dependencies: {\r\n        // \u6570\u636E\u6E90\u76F8\u5173\u7684\u4F9D\u8D56:\r\n        ...buildDataSourceDependencies(ir, cfg?.datasourceConfig),\r\n\r\n        // \u73AF\u5883\u5224\u65AD\r\n        'universal-env': '^3.2.0',\r\n\r\n        // \u56FD\u9645\u5316\u76F8\u5173\u4F9D\u8D56:\r\n        'intl-messageformat': '^9.3.6',\r\n\r\n        // \u57FA\u7840\u5E93\r\n        rax: '^1.1.0',\r\n        'rax-document': '^0.1.6',\r\n\r\n        // \u5176\u4ED6\u7EC4\u4EF6\u5E93\r\n        ...npmDeps.reduce<Record<string, string>>(\r\n          (acc, npm) => ({\r\n            ...acc,\r\n            [npm.package]: npm.version || '*',\r\n          }),\r\n          {},\r\n        ),\r\n      },\r\n      devDependencies: {\r\n        '@iceworks/spec': '^1.0.0',\r\n        'rax-app': '^3.0.0',\r\n        eslint: '^6.8.0',\r\n        prettier: '^2.1.2',\r\n        stylelint: '^13.7.2',\r\n      },\r\n    };\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.JSON,\r\n      fileType: FileType.JSON,\r\n      name: COMMON_CHUNK_NAME.FileMainContent,\r\n      content: packageJson,\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n\r\nfunction getNpmDependencies(project: IProjectInfo): IPublicTypeNpmInfo[] {\r\n  const npmDeps: IPublicTypeNpmInfo[] = [];\r\n  const npmNameToPkgMap = new Map<string, IPublicTypeNpmInfo>();\r\n\r\n  const allDeps = project.packages;\r\n\r\n  allDeps.forEach((dep) => {\r\n    if (!isNpmInfo(dep)) {\r\n      return;\r\n    }\r\n\r\n    const existing = npmNameToPkgMap.get(dep.package);\r\n    if (!existing) {\r\n      npmNameToPkgMap.set(dep.package, dep);\r\n      npmDeps.push(dep);\r\n      return;\r\n    }\r\n\r\n    if (existing.version !== dep.version) {\r\n      try {\r\n        npmNameToPkgMap.set(dep.package, {\r\n          ...existing,\r\n          version: calcCompatibleVersion(existing.version, dep.version),\r\n        });\r\n      } catch (e) {\r\n        throw new Error(\r\n          `Cannot find compatible version for ${dep.package}. Detail: ${getErrorMessage(e)}`,\r\n        );\r\n      }\r\n    }\r\n  });\r\n\r\n  return npmDeps;\r\n}\r\n", "import template from './template';\r\nimport entry from './plugins/entry';\r\nimport appConfig from './plugins/appConfig';\r\nimport buildConfig from './plugins/buildConfig';\r\nimport entryDocument from './plugins/entryDocument';\r\nimport globalStyle from './plugins/globalStyle';\r\nimport packageJSON from './plugins/packageJSON';\r\n\r\nexport default {\r\n  template,\r\n  plugins: {\r\n    appConfig,\r\n    buildConfig,\r\n    entry,\r\n    entryDocument,\r\n    globalStyle,\r\n    packageJSON,\r\n  },\r\n};\r\n", "import { IProjectBuilder, IProjectBuilderOptions } from '../types';\r\n\r\nimport { createProjectBuilder } from '../generator/ProjectBuilder';\r\n\r\nimport esModule from '../plugins/common/esmodule';\r\nimport containerClass from '../plugins/component/rax/containerClass';\r\nimport containerLifeCycles from '../plugins/component/rax/containerLifeCycle';\r\nimport containerMethods from '../plugins/component/rax/containerMethods';\r\nimport containerInitState from '../plugins/component/rax/containerInitState';\r\nimport containerInjectContext from '../plugins/component/rax/containerInjectContext';\r\nimport containerInjectDataSourceEngine from '../plugins/component/rax/containerInjectDataSourceEngine';\r\nimport containerInjectUtils from '../plugins/component/rax/containerInjectUtils';\r\nimport jsx from '../plugins/component/rax/jsx';\r\nimport commonDeps from '../plugins/component/rax/commonDeps';\r\nimport css from '../plugins/component/style/css';\r\nimport constants from '../plugins/project/constants';\r\nimport i18n from '../plugins/project/i18n';\r\nimport utils from '../plugins/project/utils';\r\n\r\nimport raxApp from '../plugins/project/framework/rax';\r\n\r\nimport { prettier } from '../postprocessor';\r\nimport { RaxFrameworkOptions } from '../plugins/project/framework/rax/types/RaxFrameworkOptions';\r\n\r\nexport interface RaxProjectBuilderOptions extends IProjectBuilderOptions, RaxFrameworkOptions {}\r\n\r\nexport default function createRaxProjectBuilder(\r\n  options?: RaxProjectBuilderOptions,\r\n): IProjectBuilder {\r\n  return createProjectBuilder({\r\n    inStrictMode: options?.inStrictMode,\r\n    extraContextData: { ...options },\r\n    template: raxApp.template,\r\n    plugins: {\r\n      components: [\r\n        commonDeps(),\r\n        esModule({ fileType: 'jsx', useAliasName: false }),\r\n        containerClass(),\r\n        containerInitState(),\r\n        containerMethods(),\r\n        containerInjectContext(),\r\n        containerInjectDataSourceEngine(options),\r\n        containerInjectUtils(),\r\n        containerLifeCycles(),\r\n        jsx(),\r\n        css(),\r\n      ],\r\n      pages: [\r\n        commonDeps(),\r\n        esModule({ fileType: 'jsx' }),\r\n        containerClass(),\r\n        containerInitState(),\r\n        containerMethods(),\r\n        containerInjectContext(),\r\n        containerInjectDataSourceEngine(options),\r\n        containerInjectUtils(),\r\n        containerLifeCycles(),\r\n        jsx(),\r\n        css(),\r\n      ],\r\n      appConfig: [raxApp.plugins.appConfig(options)],\r\n      buildConfig: [raxApp.plugins.buildConfig(options)],\r\n      entry: [raxApp.plugins.entry(options)],\r\n      constants: [constants()],\r\n      utils: [esModule(), utils('rax')],\r\n      i18n: [i18n()],\r\n      globalStyle: [\r\n        raxApp.plugins.globalStyle({ fileType: options?.globalStylesFileType || 'css' }),\r\n      ],\r\n      htmlEntry: [raxApp.plugins.entryDocument(options)],\r\n      packageJSON: [raxApp.plugins.packageJSON(options)],\r\n    },\r\n    postProcessors: [prettier()],\r\n    customizeBuilderOptions: options?.customizeBuilderOptions,\r\n  });\r\n}\r\n\r\nexport const plugins = {\r\n  containerClass,\r\n  containerLifeCycles,\r\n  containerMethods,\r\n  containerInitState,\r\n  containerInjectContext,\r\n  containerInjectDataSourceEngine,\r\n  containerInjectUtils,\r\n  jsx,\r\n  commonDeps,\r\n  raxApp,\r\n};\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    [],\r\n    {\r\n      name: 'tsconfig',\r\n      ext: 'json',\r\n      content: `\r\n{\r\n  \"compilerOptions\": {\r\n    \"target\": \"es5\",\r\n    \"lib\": [\r\n      \"dom\",\r\n      \"dom.iterable\",\r\n      \"esnext\"\r\n    ],\r\n    \"allowJs\": true,\r\n    \"skipLibCheck\": true,\r\n    \"strict\": false,\r\n    \"noEmit\": true,\r\n    \"esModuleInterop\": true,\r\n    \"module\": \"esnext\",\r\n    \"moduleResolution\": \"bundler\",\r\n    \"resolveJsonModule\": true,\r\n    \"isolatedModules\": true,\r\n    \"jsx\": \"preserve\",\r\n    \"incremental\": true,\r\n    \"plugins\": [\r\n      {\r\n        \"name\": \"next\"\r\n      }\r\n    ],\r\n    \"paths\": {\r\n      \"@/*\": [\r\n        \"./src/*\"\r\n      ]\r\n    }\r\n  },\r\n  \"include\": [\r\n    \"next-env.d.ts\",\r\n    \"**/*.ts\",\r\n    \"**/*.tsx\",\r\n    \".next/types/**/*.ts\",\r\n    \"fontEnd/types/**/*.ts\",\r\n    \"imasacs/types/**/*.ts\",\r\n    \"counter-web/types/**/*.ts\",\r\n    \"web/types/**/*.ts\",\r\n    \"./web/types/**/*.ts\",\r\n    \"../web/types/**/*.ts\"\r\n  ],\r\n  \"exclude\": [\r\n    \"node_modules\"\r\n  ]\r\n}         \r\n    `,\r\n    },\r\n  ];\r\n}\r\n\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    [],\r\n    {\r\n      name: 'tailwind.config',\r\n      ext: 'ts',\r\n      content: `\r\nimport type { Config } from 'tailwindcss'\r\n\r\nconst config: Config = {\r\n  content: [\r\n    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',\r\n    './src/components/**/*.{js,ts,jsx,tsx,mdx}',\r\n    './src/app/**/*.{js,ts,jsx,tsx,mdx}',\r\n  ],\r\n  theme: {\r\n    extend: {\r\n      backgroundImage: {\r\n        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',\r\n        'gradient-conic':\r\n          'conic-gradient(from 180deg at 50% 50%, var(--tw-gradient-stops))',\r\n      },\r\n    },\r\n  },\r\n  plugins: [],\r\n  corePlugins: {\r\n    // preflight: false,\r\n  },\r\n}\r\nexport default config      \r\n    `,\r\n    },\r\n  ];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    [],\r\n    {\r\n      name: 'README',\r\n      ext: 'md',\r\n      content: `\r\nThis is a [Next.js](https://nextjs.org/) project bootstrapped with [\\`create-next-app\\`](https://github.com/vercel/next.js/tree/canary/packages/create-next-app).\r\n\r\n## Getting Started\r\n\r\nFirst, run the development server:\r\n\r\n\\`\\`\\`bash\r\nnpm run dev\r\n# or\r\nyarn dev\r\n# or\r\npnpm dev\r\n# or\r\nbun dev\r\n\\`\\`\\`\r\n\r\nOpen [http://localhost:3000](http://localhost:3000) with your browser to see the result.\r\n\r\nYou can start editing the page by modifying \\`app/page.tsx\\`. The page auto-updates as you edit the file.\r\n\r\nThis project uses [\\`next/font\\`](https://nextjs.org/docs/basic-features/font-optimization) to automatically optimize and load Inter, a custom Google Font.\r\n\r\n## Learn More\r\n\r\nTo learn more about Next.js, take a look at the following resources:\r\n\r\n- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.\r\n- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.\r\n\r\nYou can check out [the Next.js GitHub repository](https://github.com/vercel/next.js/) - your feedback and contributions are welcome!\r\n\r\n## Deploy on Vercel\r\n\r\nThe easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.\r\n\r\nCheck out our [Next.js deployment documentation](https://nextjs.org/docs/deployment) for more details.\r\n    `,\r\n    },\r\n  ];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    [],\r\n    {\r\n      name: 'postcss.config',\r\n      ext: 'js',\r\n      content: `\r\nmodule.exports = {\r\n  plugins: {\r\n    tailwindcss: {},\r\n    autoprefixer: {},\r\n  },\r\n}\r\n    `,\r\n    },\r\n  ];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    [],\r\n    {\r\n      name: 'next.config',\r\n      ext: 'js',\r\n      content: `\r\n/** @type {import('next').NextConfig} */\r\nconst nextConfig = {\r\n  output: process.env.BUILD_OUTPUT,\r\n  distDir: \"web\",\r\n  assetPrefix: \"/web\",\r\n  basePath: \"/web\",\r\n  trailingSlash: true,\r\n  typescript: {\r\n    // \u7981\u7528\u7C7B\u578B\u68C0\u67E5\r\n    ignoreBuildErrors: true,\r\n  }\r\n}\r\n\r\nmodule.exports = nextConfig;\r\n`\r\n    },\r\n  ];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  return [\r\n    [],\r\n    {\r\n      name: 'next-env.d',\r\n      ext: 'ts',\r\n      content: `\r\n/// <reference types=\"next\" />\r\n/// <reference types=\"next/image-types/global\" />\r\n\r\n// NOTE: This file should not be edited\r\n// see https://nextjs.org/docs/basic-features/typescript for more information.  \r\n    `,\r\n    },\r\n  ];\r\n}\r\n\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    '.env',\r\n    '',\r\n    `\r\nBUILD_OUTPUT='standalone'\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    '.env.production',\r\n    '',\r\n    `\r\nBUILD_OUTPUT='export'\r\n    `,\r\n  );\r\n\r\n  return [[], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      'utils',\r\n      'js',\r\n      `\r\nimport { parse } from 'querystring';\r\n/* eslint no-useless-escape:0 import/prefer-default-export:0 */\r\n\r\nconst reg = /(((^https?:(?:\\/\\/)?)(?:[-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9.-]+(?::\\d+)?|(?:www.|[-;:&=\\+\\$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[\\+~%\\/.\\w-_]*)?\\??(?:[-\\+=&;%@.\\w_]*)#?(?:[\\w]*))?)$/;\r\nexport const isUrl = (path) => reg.test(path);\r\nexport const isAntDesignPro = () => {\r\n  if (ANT_DESIGN_PRO_ONLY_DO_NOT_USE_IN_YOUR_PRODUCTION === 'site') {\r\n    return true;\r\n  }\r\n\r\n  return window.location.hostname === 'preview.pro.ant.design';\r\n}; // \u7ED9\u5B98\u65B9\u6F14\u793A\u7AD9\u70B9\u7528\uFF0C\u7528\u4E8E\u5173\u95ED\u771F\u5B9E\u5F00\u53D1\u73AF\u5883\u4E0D\u9700\u8981\u4F7F\u7528\u7684\u7279\u6027\r\n\r\nexport const isAntDesignProOrDev = () => {\r\n  const { NODE_ENV } = process.env;\r\n\r\n  if (NODE_ENV === 'development') {\r\n    return true;\r\n  }\r\n\r\n  return isAntDesignPro();\r\n};\r\nexport const getPageQuery = () => parse(window.location.href.split('?')[1]);         \r\n    `,\r\n  );\r\n\r\n  return [['src', 'utils'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      'DateUtil',\r\n      'js',\r\n      `\r\nimport moment from 'moment';\r\n\r\nexport function fixedZero(val) {\r\n  return val * 1 < 10 ? \\`0\\${val}\\` : val;\r\n}\r\n\r\nexport const dateFormatTime = 'YYYY-MM-DD HH:mm:ss';\r\nexport const dateFormat = 'YYYY-MM-DD';\r\nconst hhmmss = 'HHmmss';\r\nexport const timeFormat = 'HHmm';\r\nexport const hhmmssD = 'HH:mm:ss';\r\nconst YYYYMMDDHHmmss = 'YYYYMMDDHHmmss';\r\n\r\nexport function formatterTime (val) {\r\n    return val ? moment(new Date(val)).format(dateFormatTime) : '';\r\n}\r\n\r\nexport function formatterDate (val) {\r\n  return val ? moment(new Date(val)).format(dateFormat) : '';\r\n}\r\n\r\nexport function formatterHHmmss (val) {\r\n  return val ? moment(new Date(val)).format(hhmmss) : '';\r\n}\r\n\r\nexport function dateTimeByTime (val) {\r\n  if(!val){\r\n    return moment(new Date(), dateFormatTime);\r\n  }\r\n  let dateTime = moment(new Date()).format(dateFormat) + ' ' + val;\r\n  return moment(new Date(dateTime), dateFormatTime);\r\n}\r\n\r\nexport function formatterTimeByDate (val) {\r\n  return moment(val ? val : new Date(), dateFormatTime);\r\n}\r\n\r\nexport function getMomentStartTime (val) {\r\n  if(!val){\r\n    return;\r\n  }\r\n  return val + ' 00:00:00';\r\n}\r\n\r\nexport function getMomentEndTime (val) {\r\n  if(!val){\r\n    return;\r\n  }\r\n  return val + ' 23:59:59';\r\n}\r\n\r\nexport function getYYYYMMDDHHmmss (val) {\r\n  return val ? moment(new Date(val)).format(YYYYMMDDHHmmss) : '';\r\n}\r\n\r\nexport function formatterDateStr (val) {\r\n  return val ? moment(val, dateFormat) : '';\r\n}\r\n\r\nexport function YYYYMMDDHHmm (date) {\r\n  if(!date){\r\n    return \"\";\r\n  }\r\n  let year = date.getFullYear();\r\n  let months = (date.getMonth()+1) + \"\";\r\n  if(parseInt(months) < 10){\r\n      months = \"0\" + months;\r\n  }\r\n  let days = date.getDate() + \"\";\r\n  if(parseInt(days) < 10){\r\n      days = \"0\" + days;\r\n  }\r\n  let hour = date.getHours() + \"\";\r\n  if(parseInt(hour) < 10){\r\n      hour = \"0\" + hour;\r\n  }\r\n  let minute = date.getMinutes() + \"\";\r\n  if(parseInt(minute) < 10){\r\n      minute = \"0\" + minute;\r\n  }\r\n  return year + \"-\" + months + \"-\" + days + \" \" + hour + \":\" + minute;\r\n}\r\n    `,\r\n  );\r\n\r\n  return [['src', 'utils'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      'constants',\r\n      'js',\r\n      `\r\nexport const DAY_TYPE = {\r\n  workday: '\u5DE5\u4F5C\u65E5',\r\n  holiday: '\u8282\u5047\u65E5'\r\n}\r\n    `,\r\n  );\r\n\r\n  return [['src', 'utils'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      'Authorized',\r\n      'js',\r\n      `\r\nimport RenderAuthorize from '@/components/Authorized';\r\nimport { getAuthority } from './authority';\r\n/* eslint-disable eslint-comments/disable-enable-pair */\r\n\r\n/* eslint-disable import/no-mutable-exports */\r\n\r\nlet Authorized = RenderAuthorize(getAuthority()); // Reload the rights component\r\n\r\nconst reloadAuthorized = () => {\r\n  Authorized = RenderAuthorize(getAuthority());\r\n};\r\n/**\r\n * hard code\r\n * block need it\u3002\r\n */\r\n\r\nwindow.reloadAuthorized = reloadAuthorized;\r\nexport { reloadAuthorized };\r\nexport default Authorized;  \r\n    `,\r\n  );\r\n\r\n  return [['src', 'utils'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      'authority',\r\n      'js',\r\n      `\r\nimport { reloadAuthorized } from './Authorized'; // use localStorage to store the authority info, which might be sent from server in actual project.\r\nexport function getAuthority(str) {\r\n  const authorityString =\r\n    typeof str === 'undefined' && localStorage ? localStorage.getItem('antd-pro-authority') : str; // authorityString could be admin, \"admin\", [\"admin\"]\r\n\r\n  let authority;\r\n\r\n  try {\r\n    if (authorityString) {\r\n      authority = JSON.parse(authorityString);\r\n    }\r\n  } catch (e) {\r\n    authority = authorityString;\r\n  }\r\n\r\n  if (typeof authority === 'string') {\r\n    return [authority];\r\n  } // preview.pro.ant.design only do not use in your production.\r\n  // preview.pro.ant.design \u4E13\u7528\u73AF\u5883\u53D8\u91CF\uFF0C\u8BF7\u4E0D\u8981\u5728\u4F60\u7684\u9879\u76EE\u4E2D\u4F7F\u7528\u5B83\u3002\r\n\r\n  if (!authority && ANT_DESIGN_PRO_ONLY_DO_NOT_USE_IN_YOUR_PRODUCTION === 'site') {\r\n    return ['admin'];\r\n  }\r\n\r\n  return authority;\r\n}\r\nexport function setAuthority(authority) {\r\n  const proAuthority = typeof authority === 'string' ? [authority] : authority;\r\n  localStorage.setItem('antd-pro-authority', JSON.stringify(proAuthority)); // auto reload\r\n\r\n  reloadAuthorized();\r\n}    \r\n    `,\r\n  );\r\n\r\n  return [['src', 'utils'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      'themeConfig',\r\n      'ts',\r\n      `\r\n// theme/themeConfig.ts\r\nimport type { ThemeConfig } from 'antd';\r\n\r\nconst theme: ThemeConfig = {\r\n  token: {\r\n    fontSize: 16,\r\n    // colorPrimary: '#52c41a',\r\n  },\r\n};\r\n\r\nexport default theme;\r\n    `,\r\n  );\r\n\r\n  return [['src', 'theme'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'README',\r\n        'md',\r\n        `\r\n## \u63A5\u53E3\u8BF7\u6C42\u7BA1\u7406\r\n\r\nrequest.ts   \u81EA\u5B9A\u4E49\u5C01\u88C5axios\u5B9E\u4F8B\r\nservices.ts  \u8FDB\u4E00\u6B65\u5C01\u88C5\u516C\u5171\u8BF7\u6C42\u65B9\u6CD5            \r\n    `,\r\n    );\r\n\r\n    return [['src', 'services'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'hooks',\r\n        'ts',\r\n        `\r\nimport dynamic from 'next/dynamic';\r\nimport { pageResult } from \"@/lib/interface\";\r\nimport { post } from \"./request\";\r\nimport { message } from 'antd';\r\n\r\n/**\r\n * \u5206\u9875\u5217\u8868\r\n * @param {*} url\r\n * @param {*} params\r\n */\r\nexport async function pageRequest(url:string, params:any):Promise<pageResult> {\r\n    return post({\r\n    url,\r\n    params\r\n    }).then((res:any) => {\r\n    let list = [];\r\n    if (res.resultCode === '39500000') {\r\n        list = res.data === undefined ? [] : res.data;\r\n    } else {\r\n        message.error(res.resultMsg);\r\n    }\r\n    return { data: list, total: res.total };\r\n    }).catch((error) => {\r\n    message.error('\u7CFB\u7EDF\u6B63\u5FD9\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5');\r\n    return { data: [], total: 0 };\r\n    })\r\n}\r\n\r\n/**\r\n * \u4E00\u822C\u63D0\u4EA4\u4F7F\u7528\uFF0C\u6BD4\u5982\u65B0\u589E\u3001\u4FEE\u6539\uFF0C\u53EA\u9700\u8981\u6210\u529F\u6709\u5426\uFF0C\u6210\u529F\u9700\u8981\u6709\u63D0\u793A\r\n * @param {*} url\r\n * @param {*} data\r\n */\r\nexport async function requestSubmit(url: string, params: any) {\r\n    return post({url, params}).then((res) => {\r\n    if (res.resultCode === '39500000') {\r\n        message.success('\u63D0\u4EA4\u6210\u529F');\r\n        return true;\r\n    } else {\r\n        message.error(res.resultMsg);\r\n        return false;\r\n    }\r\n    }).catch((error) => {\r\n    message.error('\u7CFB\u7EDF\u6B63\u5FD9\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5');\r\n    return false;\r\n    })\r\n}    \r\n    `,\r\n    );\r\n\r\n    return [['src', 'services'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'request',\r\n        'ts',\r\n        `\r\nimport axios, { AxiosResponse, InternalAxiosRequestConfig } from \"axios\"\r\nimport { message } from \"antd\";\r\n// \u5BA2\u6237\u7AEF\u6E32\u67D3\u65F6\uFF0C\u624D\u5B58\u5728 window\r\n// \u82E5\u662F\u670D\u52A1\u6BB5\u6E32\u67D3\u754C\u9762\uFF0C\u8BF7\u4F7F\u7528\u539F\u751F nextjs \u6A21\u5F0F\uFF1B\r\nlet myWindow = { location: { host: \"\" }};\r\nif (typeof window !== \"undefined\") {\r\n    myWindow = window;\r\n} else {\r\n    myWindow = { location: { host: \"\" }}\r\n}\r\nlet base = myWindow.location.host ? \"http://\" + myWindow.location.host + '/counter' : \"/counter\";\r\nexport const requestUrl = base + '/sys/';\r\n/**\r\n * \u81EA\u5B9A\u4E49\u5C01\u88C5axios\u5B9E\u4F8B\r\n */\r\nconst request = axios.create({\r\n    baseURL: requestUrl, // \u8BBE\u7F6E\u57FA\u7840URL\r\n    timeout: 5000, // \u8D85\u65F6\u65F6\u95F4\r\n    withCredentials: true, // \u8DE8\u57DF\u8BF7\u6C42\u65F6\u9700\u8981\u4F7F\u7528\u51ED\u8BC1 or \u643A\u5E26 cookies\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n    },\r\n    maxRedirects: 0\r\n});\r\n\r\n//\u8BF7\u6C42\u679A\u4E3E\r\nexport enum MethodEnum {\r\n    Get = \"GET\",\r\n    Post = \"POST\",\r\n}\r\n\r\n//\u8FD4\u56DE\u7ED3\u679C\r\nexport interface ResponseResultInterface<Body> {\r\n    Header: {}\r\n    Body: Body\r\n}\r\n\r\n//\u8BF7\u6C42\u53C2\u6570\r\nexport interface RequestInterface<params> {\r\n    url: string\r\n    params?: params\r\n    method?: MethodEnum\r\n}\r\n\r\n// \u6DFB\u52A0\u8BF7\u6C42\u62E6\u622A\u5668\r\nrequest.interceptors.request.use(\r\n    (config: InternalAxiosRequestConfig) => {\r\n        return config\r\n    },\r\n    error => {\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\n// \u6DFB\u52A0\u54CD\u5E94\u62E6\u622A\u5668\r\nrequest.interceptors.response.use(\r\n    (response: AxiosResponse) => {\r\n        if (response.status && response.status == 200 && response.data.status == 'error') {\r\n            message.error(response.data.msg);\r\n            return;\r\n        }\r\n        return response;\r\n    },\r\n    error => {\r\n        const { response } = error;\r\n        if (!response) {\r\n            axios({\r\n                method: \"POST\",\r\n                url: \\`\\${base}\\` + \"/get/public/properties\",\r\n                headers: {\r\n                    'Content-Type': 'application/x-www-form-urlencoded',\r\n                },\r\n                data: '',\r\n            }).then((res) => {\r\n                window.location.href = res.data.logoutUrl;\r\n            })\r\n        } else {\r\n            message.error('\u8BF7\u6C42\u5F02\u5E38');\r\n        }\r\n        return response;\r\n    }\r\n)\r\n\r\nconst baseRequest = async <params, responseData>(requestPar: RequestInterface<params>): Promise<responseData> => {\r\n    const requestResult: AxiosResponse = await request({\r\n        method: requestPar.method || MethodEnum.Post,\r\n        url: requestPar.url,\r\n        data: requestPar.params,\r\n    })\r\n    return requestResult.data as responseData\r\n}\r\n\r\nconst post = async <data, responseData>(requestPar: RequestInterface<data>): Promise<responseData> => {\r\n    const requestResult: AxiosResponse = await request({\r\n        method: MethodEnum.Post,\r\n        url: requestPar.url,\r\n        data: requestPar.params,\r\n    })\r\n    return requestResult.data as responseData\r\n}\r\n\r\nconst get = async <data, responseData>(requestPar: RequestInterface<data>): Promise<responseData> => {\r\n    const requestResult: AxiosResponse = await request({\r\n        method: MethodEnum.Get,\r\n        url: requestPar.url,\r\n        data: requestPar.params,\r\n    })\r\n    return requestResult.data as responseData\r\n}\r\n\r\nconst postBigFile = async <data, responseData>(requestPar: RequestInterface<data>): Promise<responseData> => {\r\n    const requestResult: AxiosResponse = await request({\r\n        method: MethodEnum.Post,\r\n        url: requestPar.url,\r\n        data: requestPar.params,\r\n        headers: {\r\n            'Transfer-Encoding': 'chunked'\r\n        }\r\n    })\r\n    return requestResult.data as responseData\r\n}\r\nexport {\r\n    baseRequest,\r\n    post,\r\n    get,\r\n    postBigFile\r\n}\r\n        \r\n    `,\r\n    );\r\n\r\n    return [['src', 'services'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'dictMapRequest',\r\n        'ts',\r\n        `\r\nimport { post } from '../request';\r\n\r\n/**\r\n * \u5B57\u5178\u5217\u8868\uFF08\u4E0B\u62C9\u6846\uFF09\r\n * @param {*} data\r\n */\r\nexport async function dictItemList(params:any) {\r\n    return post({\r\n    url: \"dict_item_select\",\r\n    params\r\n    }).then((res:any) => {\r\n    return res.data;\r\n    }).catch((error) => {\r\n    return [];\r\n    })\r\n}\r\n    `,\r\n    );\r\n\r\n    return [['src', 'services', 'app', 'sys'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'index',\r\n        'ts',\r\n        `\r\nexport { dictItemList } from './dictMapRequest';\r\nexport { sysRole, resTreeSelect, resConfig } from './sysAuth';\r\n    `,\r\n    );\r\n\r\n    return [['src', 'services', 'app', 'sys'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'sysAuth',\r\n        'ts',\r\n        `\r\n// @ts-ignore\r\n\r\n/* eslint-disable */\r\nimport { requestSubmit, pageRequest } from '../hooks';\r\nimport { post } from \"../request\";\r\nimport { message } from 'antd'\r\n\r\n/**\r\n * \u89D2\u8272\u67E5\u8BE2\r\n * @param {*} params \r\n * @param {*} options \r\n */\r\nexport async function sysRole(data: any) {\r\n    return pageRequest('role', data)\r\n}\r\n\r\nexport async function resTreeSelect(data: any) {\r\n    return post({url: 'res/tree', params: data}).then((res) => {\r\n    if (res.resultCode === '39500000') {\r\n        return res.data;\r\n    } else {\r\n        message.error(res.resultMsg);\r\n        return {treeList: [], treeList: []};\r\n    }\r\n    }).catch((error) => {\r\n    message.error('\u7CFB\u7EDF\u6B63\u5FD9\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5');\r\n    return {treeList: [], treeList: []};\r\n    })\r\n}\r\n\r\nexport async function resConfig(data: any) {\r\n    return requestSubmit('res/config', data)\r\n}\r\n    `,\r\n    );\r\n\r\n    return [['src', 'services', 'app', 'sys'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'api',\r\n        'ts',\r\n        `\r\nimport { pageRequest } from \"../../hooks\";\r\n/**\r\n * \u76D1\u63A7\u914D\u7F6E\u67E5\u8BE2\r\n * @param {*} params \r\n * @param {*} options \r\n */\r\nexport async function imaDetailQry(data: any) {\r\n  return pageRequest('imasa_detail_qry', data);\r\n}        \r\n    `,\r\n    );\r\n\r\n    return [['src', 'services', 'app', 'TableDetail'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'index',\r\n        'ts',\r\n        `\r\nexport * from './api';     \r\n    `,\r\n    );\r\n\r\n    return [['src', 'services', 'app', 'TableDetail'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'user',\r\n        'ts',\r\n        `\r\nimport {post} from \"../request\";\r\n\r\nconst queryUserInfo = async () => {\r\n    // return post({url: 'current_user', params: null});\r\n    return Promise.resolve({\r\n        \"resultCode\": \"39500000\",\r\n        \"resultMsg\": null,\r\n        \"resultType\": null,\r\n        \"data\": {\r\n            \"loginId\": \"zhifu001\",\r\n            \"role\": [\r\n                \"chl_manager\"\r\n            ],\r\n            \"auth\": [\r\n                \"monitor\",\r\n            ],\r\n            \"logoutUrl\": \"http://uat.sso.webank.com:8080/cas/logout?service=http://localhost:8000/counter/sys/login\",\r\n            \"userName\": \"zhifu001\"\r\n        },\r\n        \"page\": null,\r\n        \"total\": 0\r\n    })\r\n}\r\nexport {\r\n    queryUserInfo\r\n}\r\n    `,\r\n    );\r\n\r\n    return [['src', 'services', 'app'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'README',\r\n        'md',\r\n        `\r\n## \u5168\u5C40 Store \u7BA1\u7406            \r\n    `,\r\n    );\r\n\r\n    return [['src', 'models'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'index',\r\n        'ts',\r\n        `\r\nimport storage from \"redux-persist/lib/storage\";\r\n\r\nimport { auth } from \"./authSlice\";\r\nimport { counter } from \"./counter/counterSlice\";\r\nimport { __sysInfo } from './_sysInfoSlice';\r\n\r\n// global store reducer register\r\nexport const storeReducer = {\r\n    auth,\r\n    counter,\r\n    __sysInfo\r\n}\r\n\r\n// configure which key we want to persist\r\nexport const persistConfig = {\r\n    \"auth\": {\r\n    key: \"auth\",\r\n    storage: storage,\r\n    whitelist: [\"authState\"],\r\n    },\r\n    \"counter\": {\r\n    key: \"counter\",\r\n    storage: storage,\r\n    // whitelist: [\"value\"],\r\n    },\r\n    \"__sysInfo\": {\r\n    key: \"__sysInfo\",\r\n    storage: storage,\r\n    whitelist: [\"user\"],\r\n    },\r\n}           \r\n    `,\r\n    );\r\n\r\n    return [['src', 'models'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'authSlice',\r\n        'ts',\r\n        `\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\nimport type { PayloadAction } from \"@reduxjs/toolkit\";\r\nexport interface IAuthState {\r\n    authState: boolean;\r\n}\r\n\r\nconst initialState: IAuthState = {\r\n    authState: false,\r\n};\r\n\r\nexport const authSlice = createSlice({\r\n    name: \"auth\",\r\n    initialState,\r\n    reducers: {\r\n    setAuthState: (state, action: PayloadAction<boolean>) => {\r\n        state.authState = action.payload;\r\n    },\r\n    },\r\n});\r\n\r\nexport const { setAuthState } = authSlice.actions;\r\nexport const auth = authSlice.reducer;         \r\n    `,\r\n    );\r\n\r\n    return [['src', 'models'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        '_sysInfoSlice',\r\n        'ts',\r\n        `\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\nimport type { PayloadAction } from \"@reduxjs/toolkit\";\r\nexport interface ISysState {\r\n    userInfo?: userInfo;\r\n}\r\nexport interface userInfo {\r\n    loginId?: string;\r\n    userName?: string;\r\n    role?: Array<string>;\r\n    auth?: Array<string>;\r\n    logoutUrl?: string;\r\n}\r\nconst initialState: ISysState = {\r\n    userInfo: {},\r\n};\r\n\r\nexport const __sysInfoSlice = createSlice({\r\n    name: \"__sysInfo\",\r\n    initialState,\r\n    reducers: {\r\n    __setUserInfoState: (state, action: PayloadAction<userInfo>) => {\r\n        state.userInfo = action.payload;\r\n    },\r\n    },\r\n    selectors: {\r\n    selectUserInfo: (sys) => sys.userInfo,\r\n    },\r\n});\r\nexport const { selectUserInfo } = __sysInfoSlice.selectors;\r\nexport const { __setUserInfoState } = __sysInfoSlice.actions;\r\nexport const __sysInfo = __sysInfoSlice.reducer;         \r\n    `,\r\n    );\r\n    return [['src', 'models'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'counterAPI',\r\n        'ts',\r\n        `\r\n// A mock function to mimic making an async request for data\r\nexport const fetchCount = async (amount = 1) => {\r\n    const response = await fetch(\"http://localhost:8000/api/counter\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ amount }),\r\n    });\r\n    const result: { data: number } = await response.json();\r\n\r\n    return result;\r\n};\r\n    `,\r\n    );\r\n\r\n    return [['src', 'models', 'counter'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'counterSlice',\r\n        'ts',\r\n        `\r\nimport { createAppSlice } from \"@/lib/store/createAppSlice\";\r\nimport type { AppThunk } from \"@/lib/_store\";\r\nimport type { PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { fetchCount } from \"./counterAPI\";\r\n\r\nexport interface CounterSliceState {\r\n    value: number;\r\n    status: \"idle\" | \"loading\" | \"failed\";\r\n}\r\n\r\nconst initialState: CounterSliceState = {\r\n    value: 0,\r\n    status: \"idle\",\r\n};\r\n\r\n// If you are not using async thunks you can use the standalone \\`createSlice\\`.\r\nexport const counterSlice = createAppSlice({\r\n    name: \"counter\",\r\n    // \\`createSlice\\` will infer the state type from the \\`initialState\\` argument\r\n    initialState,\r\n    // The \\`reducers\\` field lets us define reducers and generate associated actions\r\n    reducers: (create) => ({\r\n    increment: create.reducer((state) => {\r\n        // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\r\n        // doesn't actually mutate the state because it uses the Immer library,\r\n        // which detects changes to a \"draft state\" and produces a brand new\r\n        // immutable state based off those changes\r\n        state.value += 1;\r\n    }),\r\n    decrement: create.reducer((state) => {\r\n        state.value -= 1;\r\n    }),\r\n    // Use the \\`PayloadAction\\` type to declare the contents of \\`action.payload\\`\r\n    incrementByAmount: create.reducer(\r\n        (state, action: PayloadAction<number>) => {\r\n        state.value += action.payload;\r\n        },\r\n    ),\r\n    // The function below is called a thunk and allows us to perform async logic. It\r\n    // can be dispatched like a regular action: \\`dispatch(incrementAsync(10))\\`. This\r\n    // will call the thunk with the \\`dispatch\\` function as the first argument. Async\r\n    // code can then be executed and other actions can be dispatched. Thunks are\r\n    // typically used to make async requests.\r\n    incrementAsync: create.asyncThunk(\r\n        async (amount: number) => {\r\n        console.log(46);\r\n        const response = await fetchCount(amount);\r\n        // The value we return becomes the \\`fulfilled\\` action payload\r\n        console.log(48, response);\r\n        return response.data;\r\n        },\r\n        {\r\n        pending: (state) => {\r\n            state.status = \"loading\";\r\n        },\r\n        fulfilled: (state, action) => {\r\n            state.status = \"idle\";\r\n            state.value += action.payload;\r\n        },\r\n        rejected: (state) => {\r\n            state.status = \"failed\";\r\n        },\r\n        },\r\n    ),\r\n    }),\r\n    // You can define your selectors here. These selectors receive the slice\r\n    // state as their first argument.\r\n    selectors: {\r\n    selectCount: (counter) => counter.value,\r\n    selectStatus: (counter) => counter.status,\r\n    },\r\n});\r\n\r\n// Action creators are generated for each case reducer function.\r\nexport const { decrement, increment, incrementByAmount, incrementAsync } =\r\n    counterSlice.actions;\r\n\r\n// Selectors returned by \\`slice.selectors\\` take the root state as their first argument.\r\nexport const { selectCount, selectStatus } = counterSlice.selectors;\r\n\r\n// We can also write thunks by hand, which may contain both sync and async logic.\r\n// Here's an example of conditionally dispatching actions based on current state.\r\nexport const incrementIfOdd =\r\n    (amount: number): AppThunk =>\r\n    (dispatch, getState) => {\r\n    const currentValue = selectCount(getState());\r\n\r\n    if (currentValue % 2 === 1 || currentValue % 2 === -1) {\r\n        dispatch(incrementByAmount(amount));\r\n    }\r\n    };\r\n\r\n\r\nexport const counter = counterSlice.reducer;        \r\n    `,\r\n    );\r\n\r\n    return [['src', 'models', 'counter'], file];\r\n}", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'routes',\r\n        'tsx',\r\n        `\r\n/**\r\n * \u8DEF\u7531\r\n */\r\nimport {\r\n    ChromeFilled,\r\n    CrownFilled,\r\n    SmileFilled,\r\n    TabletFilled,\r\n} from '@ant-design/icons';\r\n\r\nconst routes = [\r\n    {\r\n        path: '/',\r\n        routes: [\r\n            {\r\n                path: '/',\r\n                icon: <SmileFilled />,\r\n                routes: [\r\n                    {\r\n                        path: '/Test/',\r\n                        name: '\u7BA1\u7406\u9875',\r\n                        icon: <CrownFilled />,\r\n                        access: 'monitor', // access \u53EF\u9009\u5C5E\u6027\uFF0C\u4E0D\u914D\u7F6E\u9ED8\u8BA4\u5C55\u793A\r\n                    },\r\n                    {\r\n                        path: '/TableDetail/',\r\n                        name: '\u5217\u8868\u67E5\u8BE2',\r\n                        icon: <ChromeFilled />,\r\n                        access: 'imasa_det',\r\n                    },\r\n                    {\r\n                        path: \"/sys/\",\r\n                        icon: <TabletFilled />,\r\n                        name: \"\u7CFB\u7EDF\u914D\u7F6E\",\r\n                        routes: [\r\n                            {\r\n                                path: \"/sys/sysRole/\",\r\n                                name: \"\u89D2\u8272\u914D\u7F6E\"\r\n                            }\r\n                        ]\r\n                    },\r\n                ]\r\n            },\r\n        ],\r\n    }\r\n];\r\n\r\nexport default routes;\r\n    `,\r\n    );\r\n\r\n    return [['src', 'lib'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'interface',\r\n        'ts',\r\n        `\r\n// Define the global interface\r\n// exapmle\r\nexport interface ApiResult {\r\n    resultCode: \"39500000\"; // systemId\r\n    resultMsg: \"string\";\r\n    data?: any;\r\n    total?:number\r\n} \r\nexport interface pageResult {\r\n    data: Array<any>;\r\n    total: number;\r\n} \r\n    `,\r\n    );\r\n\r\n    return [['src', 'lib'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'getInitialState',\r\n        'ts',\r\n        `\r\n/**\r\n * \u521D\u59CB state \u83B7\u53D6 userInfo/dict/ ...\r\n */\r\nimport { queryUserInfo } from \"../services/app/user\";\r\nexport async function getInitialState() {\r\n    let userInfo = {};\r\n    const getUserInfo = async () => {\r\n        const { data } = await queryUserInfo();\r\n        userInfo = data;\r\n    }\r\n    await getUserInfo();\r\n    return {\r\n        userInfo\r\n    };\r\n}\r\n    `,\r\n    );\r\n\r\n    return [['src', 'lib'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'definitions',\r\n        'ts',\r\n        `\r\n// Define the global types\r\n// exapmle\r\nexport type Invoice = {\r\n    id: string;\r\n    customer_id: string;\r\n    amount: number;\r\n    date: string;\r\n    // In TypeScript, this is called a string union type.\r\n    // It means that the \"status\" property can only be one of the two strings: 'pending' or 'paid'.\r\n    status: 'pending' | 'paid';\r\n};        \r\n    `,\r\n    );\r\n\r\n    return [['src', 'lib'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      'AntdRegistry',\r\n      'tsx',\r\n      `\r\n'use client';\r\n\r\nimport React from 'react';\r\nimport { createCache, extractStyle, StyleProvider } from '@ant-design/cssinjs';\r\nimport type Entity from '@ant-design/cssinjs/es/Cache';\r\nimport { useServerInsertedHTML } from 'next/navigation';\r\n\r\nconst StyledComponentsRegistry = ({ children }: React.PropsWithChildren) => {\r\n  const cache = React.useMemo<Entity>(() => createCache(), []);\r\n  const isServerInserted = React.useRef<boolean>(false);\r\n  useServerInsertedHTML(() => {\r\n    // \u907F\u514D css \u91CD\u590D\u63D2\u5165\r\n    if (isServerInserted.current) {\r\n      return;\r\n    }\r\n    isServerInserted.current = true;\r\n    return <style id=\"antd\" dangerouslySetInnerHTML={{ __html: extractStyle(cache, true) }} />;\r\n  });\r\n  return <StyleProvider cache={cache}>{children}</StyleProvider>;\r\n};\r\n\r\nexport default StyledComponentsRegistry;\r\n    `,\r\n  );\r\n\r\n  return [['src', 'lib'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'access',\r\n        'ts',\r\n        `\r\nimport { authFilter } from \"@/layout/utils\";\r\n\r\nexport default function accessFactory({ userInfo }: any): any {\r\n    return authFilter([\r\n        \"monitor\",\r\n        \"monitor_renhang\",\r\n        \"monitor_super\",\r\n        \"monitor_super_fund\",\r\n        \"monitor_super_info\",\r\n        \"monitor_super_mgt\",\r\n        \"monitor_super_check\",\r\n        \"imasa_det\",\r\n        \"async_auth\",\r\n        \"dashboard\",\r\n        \"sys\",\r\n        \"sys_role\"\r\n    ], userInfo.auth);\r\n    }        \r\n    `,\r\n    );\r\n\r\n    return [['src', 'lib'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        '_store',\r\n        'ts',\r\n        `\r\nimport type { Action, ThunkAction } from \"@reduxjs/toolkit\";\r\nimport { combineReducers, configureStore } from \"@reduxjs/toolkit\";\r\nimport { storeReducer, persistConfig } from \"@/models/index\";\r\n\r\nimport { persistReducer } from \"redux-persist\";\r\n\r\nconst iterate = (reducer:any, config:any) => {\r\n    let iterateReducer:any = {};\r\n    for (let i in reducer) {\r\n    iterateReducer[i] = config[i] ? persistReducer(config[i], reducer[i]) : reducer[i]\r\n    }\r\n    return iterateReducer;\r\n}\r\n\r\nconst rootReducer = combineReducers(iterate(storeReducer, persistConfig));\r\n\r\nexport const store = configureStore({\r\n    reducer: rootReducer,\r\n    middleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware({ serializableCheck: false }),\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport type AppThunk<ThunkReturnType = void> = ThunkAction<\r\n    ThunkReturnType,\r\n    RootState,\r\n    unknown,\r\n    Action\r\n>;        \r\n    `,\r\n    );\r\n\r\n    return [['src', 'lib'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      '_defaultProps',\r\n      'tsx',\r\n      `\r\nexport default {\r\n  title:\"\",\r\n  location: {\r\n    pathname: '/',\r\n  },\r\n  appList: [],\r\n  token:{\r\n    header: {\r\n      colorBgHeader: '#001529',\r\n      colorHeaderTitle: '#fff',\r\n      colorTextMenu: '#dfdfdf',\r\n      colorTextMenuSecondary: '#dfdfdf',\r\n      colorTextMenuSelected: '#fff',\r\n      colorBgMenuItemSelected: '#22272b',\r\n      colorTextMenuActive: 'rgba(255,255,255,0.85)',\r\n      colorTextRightActionsItem: '#dfdfdf',\r\n    },\r\n    colorTextAppListIconHover: '#fff',\r\n    colorTextAppListIcon: '#dfdfdf',\r\n    sider: {\r\n      colorMenuBackground: '#fff',\r\n      colorMenuItemDivider: '#dfdfdf',\r\n      colorBgMenuItemHover: '#f6f6f6',\r\n      colorTextMenu: '#595959',\r\n      colorTextMenuSelected: '#242424',\r\n      colorTextMenuActive: '#242424',\r\n    },\r\n  }\r\n};\r\n    `,\r\n  );\r\n\r\n  return [['src', 'lib'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      'hooks',\r\n      'ts',\r\n      `\r\n// This file serves as a central hub for re-exporting pre-typed Redux hooks.\r\nimport { useDispatch, useSelector, TypedUseSelectorHook } from \"react-redux\";\r\nimport type { AppDispatch, RootState } from \"../_store\";\r\n\r\n// Use throughout your app instead of plain \\`useDispatch\\` and \\`useSelector\\`\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;     \r\n    `,\r\n  );\r\n\r\n  return [['src', 'lib', 'store'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      'StoreProvider',\r\n      'tsx',\r\n      `\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"../_store\";\r\nimport { persistStore } from \"redux-persist\";\r\npersistStore(store);\r\n\r\nexport const StoreProvider = ({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) => {\r\n  return <Provider store={store}>{children}</Provider>;\r\n}      \r\n    `,\r\n  );\r\n\r\n  return [['src', 'lib', 'store'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      'createAppSlice',\r\n      'ts',\r\n      `\r\nimport { asyncThunkCreator, buildCreateSlice } from \"@reduxjs/toolkit\";\r\n\r\n// \\`buildCreateSlice\\` allows us to create a slice with async thunks.\r\nexport const createAppSlice = buildCreateSlice({\r\n  creators: { asyncThunk: asyncThunkCreator },\r\n});      \r\n    `,\r\n  );\r\n\r\n  return [['src', 'lib', 'store'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      'config',\r\n      'ts',\r\n      `\r\ninterface globalConfig {\r\n  type: 'localStorage' | 'sessionStorage';\r\n  prefix: string;\r\n  expire: number;\r\n  isEncrypt: boolean;\r\n}\r\n\r\nexport const config: globalConfig = {\r\n  type: 'localStorage',              //\u5B58\u50A8\u7C7B\u578B\uFF0ClocalStorage | sessionStorage\r\n  prefix: 'counter_systemId_0.0.1',     //\u7248\u672C\u53F7\r\n  expire: 24 * 60,                   //\u8FC7\u671F\u65F6\u95F4\uFF0C\u9ED8\u8BA4\u4E3A\u4E00\u5929\uFF0C\u5355\u4F4D\u4E3A\u5206\u949F\r\n  isEncrypt: true,                   //\u652F\u6301\u52A0\u5BC6\u3001\u89E3\u5BC6\u6570\u636E\u5904\u7406\r\n};        \r\n    `,\r\n  );\r\n\r\n  return [['src', 'lib', 'storage'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      'encrypt',\r\n      'ts',\r\n      `\r\nimport CryptoJS from 'crypto-js';\r\n\r\nconst SECRET_KEY = CryptoJS.enc.Utf8.parse('3333e6e143439161'); //\u5341\u516D\u4F4D\u5341\u516D\u8FDB\u5236\u6570\u4F5C\u4E3A\u5BC6\u94A5\r\nconst SECRET_IV = CryptoJS.enc.Utf8.parse('e3bbe7e3ba84431a'); //\u5341\u516D\u4F4D\u5341\u516D\u8FDB\u5236\u6570\u4F5C\u4E3A\u5BC6\u94A5\u504F\u79FB\u91CF\r\n\r\nconst encrypt = (data: object | string): string => {\r\n    //\u52A0\u5BC6\r\n    if (typeof data === 'object') {\r\n        try {\r\n            data = JSON.stringify(data);\r\n        } catch (e) {\r\n            throw new Error('encrypt error' + e);\r\n        }\r\n    }\r\n    const dataHex = CryptoJS.enc.Utf8.parse(data);\r\n    const encrypted = CryptoJS.AES.encrypt(dataHex, SECRET_KEY, {\r\n        iv: SECRET_IV,\r\n        mode: CryptoJS.mode.CBC,\r\n        padding: CryptoJS.pad.Pkcs7,\r\n    });\r\n    return encrypted.ciphertext.toString();\r\n};\r\n\r\nconst decrypt = (data: string) => {\r\n    //\u89E3\u5BC6\r\n    const encryptedHexStr = CryptoJS.enc.Hex.parse(data);\r\n    const str = CryptoJS.enc.Base64.stringify(encryptedHexStr);\r\n    const decrypt = CryptoJS.AES.decrypt(str, SECRET_KEY, {\r\n        iv: SECRET_IV,\r\n        mode: CryptoJS.mode.CBC,\r\n        padding: CryptoJS.pad.Pkcs7,\r\n    });\r\n    const decryptedStr = decrypt.toString(CryptoJS.enc.Utf8);\r\n    return decryptedStr.toString();\r\n};\r\n\r\nexport {\r\n    encrypt,\r\n    decrypt\r\n}    \r\n    `,\r\n  );\r\n\r\n  return [['src', 'lib', 'storage'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n      'hooks',\r\n      'ts',\r\n      `\r\n\"use client\";\r\nimport { config } from './config';\r\nimport { encrypt, decrypt } from './encrypt';\r\nconst setStorage = (key: string, value: any, expire: number = 24 * 60): boolean => {\r\n  //\u8BBE\u5B9A\u503C\r\n  if (value === '' || value === null || value === undefined) {\r\n    //\u7A7A\u503C\u91CD\u7F6E\r\n    value = null;\r\n  }\r\n  if (isNaN(expire) || expire < 0) {\r\n    //\u8FC7\u671F\u65F6\u95F4\u503C\u5408\u7406\u6027\u5224\u65AD\r\n    throw new Error('Expire must be a number');\r\n  }\r\n  const data = {\r\n    value, //\u5B58\u50A8\u503C\r\n    time: Date.now(), //\u5B58\u50A8\u65E5\u671F\r\n    expire: Date.now() + 1000 * 60 * expire, //\u8FC7\u671F\u65F6\u95F4\r\n  };\r\n  //\u662F\u5426\u9700\u8981\u52A0\u5BC6\uFF0C\u5224\u65AD\u88C5\u8F7D\u52A0\u5BC6\u6570\u636E\u6216\u539F\u6570\u636E\r\n  window[config.type].setItem(\r\n    autoAddPreFix(key),\r\n    config.isEncrypt ? encrypt(JSON.stringify(data)) : JSON.stringify(data),\r\n  );\r\n  return true;\r\n};\r\n\r\nconst getStorageFromKey = (key: string) => {\r\n  //\u83B7\u53D6\u6307\u5B9A\u503C\r\n  if (config.prefix) {\r\n    key = autoAddPreFix(key);\r\n  }\r\n  if (!window[config.type].getItem(key)) {\r\n    //\u4E0D\u5B58\u5728\u5224\u65AD\r\n    return null;\r\n  }\r\n  const storageVal = config.isEncrypt\r\n    ? JSON.parse(decrypt(window[config.type].getItem(key) as string))\r\n    : JSON.parse(window[config.type].getItem(key) as string);\r\n  const now = Date.now();\r\n  if (now >= storageVal.expire) {\r\n    //\u8FC7\u671F\u9500\u6BC1\r\n    removeStorageFromKey(key);\r\n    return null;\r\n    //\u4E0D\u8FC7\u671F\u56DE\u503C\r\n  } else {\r\n    return storageVal.value;\r\n  }\r\n};\r\n\r\nconst getAllStorage = () => {\r\n  //\u83B7\u53D6\u6240\u6709\u503C\r\n  const storageList: any = {};\r\n  const keys = Object.keys(window[config.type]);\r\n  keys.forEach((key) => {\r\n    const value = getStorageFromKey(key);\r\n    if (value !== null) {\r\n      //\u5982\u679C\u503C\u6CA1\u6709\u8FC7\u671F\uFF0C\u52A0\u5165\u5230\u5217\u8868\u4E2D\r\n      storageList[key] = value;\r\n    }\r\n  });\r\n  return storageList;\r\n};\r\n\r\nconst getStorageLength = () => {\r\n  //\u83B7\u53D6\u503C\u5217\u8868\u957F\u5EA6\r\n  return window[config.type].length;\r\n};\r\n\r\nconst removeStorageFromKey = (key: string) => {\r\n  //\u5220\u9664\u503C\r\n  if (config.prefix) {\r\n    key = autoAddPreFix(key);\r\n  }\r\n  window[config.type].removeItem(key);\r\n};\r\n\r\nconst clearStorage = () => {\r\n  window[config.type].clear();\r\n};\r\n\r\nconst autoAddPreFix = (key: string) => {\r\n  //\u6DFB\u52A0\u524D\u7F00\uFF0C\u4FDD\u6301\u6D4F\u89C8\u5668Application\u89C6\u56FE\u552F\u4E00\u6027\r\n  const prefix = config.prefix || '';\r\n  return \\`\\${prefix}_\\${key}\\`;\r\n};\r\n\r\n/** eg: \r\nsetStorage('name', 'fx', 1)\r\nsetStorage('age', { now: 18 }, 100000)\r\nsetStorage('history', [1, 2, 3], 100000)\r\nconsole.log('getStorageFromKey:name', getStorageFromKey('name'))\r\nconsole.log('getStorageFromKey:name', getStorageFromKey('history'))\r\nconsole.log('getStorageLength', getStorageLength());\r\nconsole.log('getAllStorage', getAllStorage());\r\nclearStorage();\r\n*/ \r\n\r\nexport {\r\n  setStorage,\r\n  getStorageFromKey,\r\n  getAllStorage,\r\n  getStorageLength,\r\n  removeStorageFromKey,\r\n  clearStorage,\r\n};    \r\n    `,\r\n  );\r\n\r\n  return [['src', 'lib', 'storage'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'StateLayout',\r\n        'tsx',\r\n        `\r\n\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { __setUserInfoState } from \"@/models/_sysInfoSlice\";\r\nimport { setStorage } from \"@/lib/storage/hooks\";\r\nimport { getInitialState } from \"@/lib/getInitialState\";\r\nimport { StoreProvider } from '@/lib/store/StoreProvider';\r\nimport { Spin } from \"antd\";\r\nlet watermark = undefined;\r\nif (typeof document !== \"undefined\") {\r\n    watermark = require('@webank/watermark');\r\n}\r\n\r\nexport default ({ children }: any) => {\r\n    const [state, setState] = useState(null);\r\n    useEffect(() => {\r\n    const init = async () => {\r\n        let initialState = await getInitialState();\r\n        setState(initialState);\r\n        setStorage(\"userInfo\", initialState.userInfo);\r\n        // \u652F\u6301\u914D\u7F6E\u7684\u5C5E\u6027\r\n        if (typeof document !== \"undefined\") {\r\n        watermark.init({\r\n            id: \"\",  // \u6307\u5B9A\u6C34\u5370\u8BA1\u7B97\u7684dom \u9ED8\u8BA4\u5F53\u524D\u7684\u9875\u9762body\r\n            waterMaskBoxId: \"root\", // \u6C34\u5370\u5BB9\u5668\u7684id\r\n            frontX: \"\", // \u6C34\u5370\u5F00\u59CB\u7684\u6A2A\u5750\u6807 \u9ED8\u8BA4\u4EE5body\u6807\u7B7E\u6765\u8BA1\u7B97\r\n            frontY: \"\", // \u6C34\u5370\u5F00\u59CB\u7684\u7EB5\u5750\u6807 \u9ED8\u8BA4\u4EE5body\u6807\u7B7E\u6765\u8BA1\u7B97\r\n            frontRows: \"\", // \u6C34\u5370\u7684\u884C\u6570 \u9ED8\u8BA4\u4EE5body\u6807\u7B7E\u6765\u8BA1\u7B97\r\n            frontCols: \"\", // \u6C34\u5370\u7684\u5217\u6570 \u9ED8\u8BA4\u4EE5body\u6807\u7B7E\u6765\u8BA1\u7B97\r\n            maskTxt: initialState.userInfo.loginId,  // \u6C34\u5370\u7684\u5185\u5BB9\r\n            color: \"#000000\", // \u5B57\u4F53\u989C\u8272\r\n            width: 150, // \u5BBD\u5EA6\r\n            height: 50, // \u9AD8\u5EA6\r\n            fontSize: \"16px\", // \u5B57\u4F53\u5927\u5C0F\r\n            frontFont: \"\u5FAE\u8F6F\u96C5\u9ED1\", // \u5B57\u4F53\r\n            frontBackgroundAlpha: 0, // \u80CC\u666F\u900F\u660E\u6BD4\u4F8B\r\n            frontTxtAlpha: 0.1, // \u6587\u5B57\u900F\u660E\u6BD4\u4F8B\r\n            angle: 15, // \u65CB\u8F6C\u89D2\u5EA6\r\n            frontXSpace: 15, // \u6C34\u5370\u6A2A\u5411\u95F4\u9699\r\n            frontYSpace: 15, // \u6C34\u5370\u7EB5\u5411\u95F4\u9699\r\n            backgroundColor: \"#000000\", // \u80CC\u666F\u989C\u8272\r\n            resizeable: true, // \u652F\u6301resize\u91CD\u65B0\u8BA1\u7B97\u6C34\u5370\r\n            addTime: true, // \u652F\u6301\u6C34\u5370\u5185\u5BB9\u540E\u9762\u65B0\u589E\u65F6\u95F4\r\n            setIntervalTime: \"60000\", // \u652F\u6301\u8BBE\u7F6E\u66F4\u65B0\u6C34\u5370\u65F6\u95F4\u7684\u7B49\u5F85\u65F6\u95F4\r\n            dateFormatter: \"YYYY-MM-DD hh:mm\", // \u652F\u6301\u8BBE\u7F6E\u6C34\u5370\u65F6\u95F4\u7684\u683C\u5F0F\r\n        });\r\n        }\r\n    }\r\n    init();\r\n    }, [])\r\n    if (state != null) {\r\n    return <StoreProvider>{React.cloneElement(children, { initialState: state })}</StoreProvider>;\r\n    } else {\r\n    return <Spin fullscreen></Spin>\r\n    }\r\n} \r\n    `,\r\n    );\r\n\r\n    return [['src', 'layout'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'README',\r\n        'md',\r\n        `\r\n## \u9ED8\u8BA4\u57FA\u7840\u5E03\u5C40         \r\n    `,\r\n    );\r\n\r\n    return [['src', 'layout'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'BasicLayout',\r\n        'tsx',\r\n        `\r\n\"use client\";\r\nimport dynamic from 'next/dynamic';\r\nimport { usePathname } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation'\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { PageContainer } from '@ant-design/pro-components';\r\nimport type { ProSettings } from '@ant-design/pro-components';\r\nimport { Result, Button, Dropdown } from 'antd';\r\nimport { LogoutOutlined } from '@ant-design/icons';\r\n\r\nimport '@/app/globals.css';\r\nimport defaultProps from '@/lib/_defaultProps';\r\nimport accessFactory from \"@/lib/access\";\r\nimport routes from \"@/lib/routes\";\r\n\r\nimport { isMatchPath, matchRouter } from './utils';\r\nimport { useAppDispatch } from '@/lib/store/hooks';\r\nimport { __setUserInfoState } from '@/models/_sysInfoSlice';\r\nconst ProLayout = dynamic(\r\n    () => import(\"@ant-design/pro-components\").then((com) => com.ProLayout),\r\n    { ssr: false }\r\n);\r\n\r\nconst noMatch = (\r\n    <Result\r\n        status={403}\r\n        title=\"403\"\r\n        subTitle=\"Sorry, you are not authorized to access this page.\"\r\n        extra={\r\n            <Button type=\"primary\">\r\n                <Link href=\"/\">Back to home</Link>\r\n            </Button>\r\n        }\r\n    />\r\n);\r\nconst BasicLayout = (props: any) => {\r\n    const {\r\n        children,\r\n        initialState\r\n    } = props;\r\n    useAppDispatch()(__setUserInfoState(initialState.userInfo));\r\n    const pathname = usePathname();\r\n    const [pathnameProp, setPathnameProp] = useState('/');\r\n    const [logoImg, setLogoImg] = useState(\"/web/menu_logo.png\");\r\n    const [collapsed, setCollapsed] = useState(true);\r\n    const router = useRouter()\r\n    const [settings, setSetting] = useState<Partial<ProSettings> | undefined>({\r\n        colorPrimary: '#1890ff',\r\n        fixSiderbar: true,\r\n        layout: 'mix',\r\n        splitMenus: true,\r\n        menu: { locale: true },\r\n    });\r\n    useEffect(() => {\r\n        setPathnameProp(pathname);\r\n    }, [pathname])\r\n    const access = accessFactory(initialState);\r\n    // \u8DEF\u7531\u6743\u9650\u8FC7\u6EE4\r\n    let newRoutes = matchRouter(access, routes);\r\n    const renderContent = useCallback(() => {\r\n        const matchPath = isMatchPath(pathname, newRoutes);\r\n        if (matchPath) {\r\n            return children\r\n        }\r\n        return noMatch\r\n    }, [pathname])\r\n    const handleMenuCollapse = (payload) => {\r\n        setCollapsed(payload);\r\n        payload ? setLogoImg(\"/web/user-empty.svg\") : setLogoImg(\"/web/menu_logo.png\")\r\n    };\r\n    return (\r\n        <ProLayout\r\n            logo={() => <img src={logoImg} alt=\"logImg\" />}\r\n            collapsed={collapsed}\r\n            onCollapse={handleMenuCollapse}\r\n            siderWidth={216}\r\n            {...defaultProps}\r\n            route={newRoutes[0]}\r\n            location={{\r\n                pathname: pathnameProp,\r\n            }}\r\n            avatarProps={{\r\n                src: '/web/user-empty.svg',\r\n                title: initialState.userInfo.userName || '\u67DC\u5458',\r\n                size: 'small',\r\n                render: (props, dom) => {\r\n                    return (\r\n                        <Dropdown\r\n                            menu={{\r\n                                items: [\r\n                                    {\r\n                                        key: 'logout',\r\n                                        icon: <LogoutOutlined />,\r\n                                        label: '\u9000\u51FA\u767B\u5F55',\r\n                                    },\r\n                                ],\r\n                                onClick: ({ key }) => {\r\n                                    // message.info(\\`Click on item \\${key}\\`);\r\n                                    if (key === \"logout\") {\r\n                                        window.location.href = initialState.userInfo.logoutUrl;\r\n                                    }\r\n                                }\r\n                            }}\r\n                        >\r\n                            {dom}\r\n                        </Dropdown>\r\n                    );\r\n                },\r\n            }}\r\n            actionsRender={(props) => {\r\n                if (props.isMobile) return [];\r\n                return [];\r\n            }}\r\n            onMenuHeaderClick={() => {\r\n                setPathnameProp('/');\r\n                router.push('/');\r\n            }}\r\n            menuItemRender={(item, dom) => (\r\n                <div\r\n                    onClick={() => {\r\n                        router.push(item.path || '/');\r\n                    }}>\r\n                    {dom}\r\n                </div>\r\n            )}\r\n            {...settings}\r\n        >\r\n            <PageContainer>\r\n                {renderContent()}\r\n            </PageContainer>\r\n        </ProLayout>\r\n    );\r\n};\r\nexport default BasicLayout;\r\n    `,\r\n    );\r\n\r\n    return [['src', 'layout'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'utils',\r\n        'ts',\r\n        `\r\nexport const matchRouter = (accessProp: any, routesProp: any) => {\r\n    let matchRoute = routesProp;\r\n    let newList = [];\r\n    for (let i = 0; i < matchRoute.length; i++) {\r\n        let currentRoute = matchRoute[i];\r\n        let currentAccess = currentRoute.access || undefined;\r\n        if (typeof currentAccess === \"string\" && accessProp[currentAccess] || typeof currentAccess === \"undefined\") {\r\n        let routesTmp = undefined;\r\n        if (currentRoute.routes && currentRoute.routes.length > 0) {\r\n            routesTmp = matchRouter(accessProp, currentRoute.routes)\r\n            if (routesTmp && routesTmp.length > 0) {\r\n            currentRoute.routes = routesTmp;\r\n            newList.push(currentRoute)\r\n            } else {\r\n            delete currentRoute.routes\r\n            }\r\n        } else {\r\n            newList.push(currentRoute)\r\n        }\r\n        }\r\n    }\r\n    return newList\r\n    }\r\n    export const isMatchPath = (path: string, routes: Array<any>): any => {\r\n    let isMatch = '';\r\n    \r\n    for (let i = 0; i < routes.length; i++) {\r\n        const routeItem = routes[i];\r\n        if (path === routeItem.path) {\r\n        isMatch = routeItem\r\n        break\r\n        }\r\n        if (routeItem.routes?.length) {\r\n        isMatch = isMatchPath(path, routeItem.routes)\r\n        if (isMatch) {\r\n            break;\r\n        }\r\n        }\r\n    }\r\n    return isMatch\r\n    }\r\n    export const hasRoleAuth = (roleList:any, auth:string):boolean => {\r\n    return roleList.findIndex((item:string) => item === auth) > -1\r\n    }\r\n    export const authFilter = (list: Array<string>, auth: any) => {\r\n    let tmp = {}\r\n    for (let i of list) {\r\n        tmp[i] = hasRoleAuth(auth, i)\r\n    }\r\n    return tmp;\r\n    }        \r\n    `,\r\n    );\r\n\r\n    return [['src', 'layout'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'page',\r\n        'tsx',\r\n        `\r\nimport React from \"react\";\r\nconst Page = ({children}: React.PropsWithChildren) => {\r\n    return (\r\n        <div>Welcome</div>\r\n    )\r\n}\r\nexport default Page;\r\n    `,\r\n    );\r\n\r\n    return [['src', 'app'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'not-found',\r\n        'tsx',\r\n        `\r\nimport React from 'react';\r\nimport { Button, Result } from 'antd';\r\nimport Link from 'next/link';\r\n\r\nconst App: React.FC = () => (\r\n    <Result\r\n        status=\"404\"\r\n        title=\"404\"\r\n        subTitle=\"Sorry, the page you visited does not exist.\"\r\n        extra={<Button type=\"primary\"><Link href=\"/\">Back to home</Link></Button>}\r\n    />\r\n\r\n);\r\n\r\nexport default App;\r\n    `,\r\n    );\r\n\r\n    return [['src', 'app'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'loading',\r\n        'tsx',\r\n        `\r\nexport default () => {\r\n    return (\r\n      <div>loading</div>\r\n    );\r\n  };\r\n    `,\r\n    );\r\n\r\n    return [['src', 'app'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'layout',\r\n        'tsx',\r\n        `\r\nimport React from 'react';\r\n// import { Inter } from 'next/font/google';\r\nimport { AntdRegistry } from '@ant-design/nextjs-registry';\r\nimport BasicLayout from '@/layout/BasicLayout';\r\nimport '@/app/globals.css';\r\nimport StateLayout from '@/layout/StateLayout';\r\n\r\n// const inter = Inter({ subsets: ['latin'] });\r\n\r\nexport const metadata = {\r\n\ttitle: '\u67DC\u9762',\r\n\tdescription: '\u67DC\u9762\u63CF\u8FF0',\r\n};\r\nconst RootLayout = async (props: React.PropsWithChildren) => {\r\n\tconst {\r\n\t\tchildren\r\n\t} = props;\r\n\treturn (\r\n\t\t<html lang=\"en\">\r\n\t\t\t<body >\r\n\t\t\t\t<AntdRegistry>\r\n\t\t\t\t\t<StateLayout id=\"root\">\r\n\t\t\t\t\t\t<BasicLayout >\r\n\t\t\t\t\t\t\t{children}\r\n\t\t\t\t\t\t</BasicLayout>\r\n\t\t\t\t\t</StateLayout>\r\n\t\t\t\t</AntdRegistry>\r\n\t\t\t</body>\r\n\t\t</html>\r\n\t);\r\n};\r\nexport default RootLayout;\r\n    `,\r\n    );\r\n\r\n    return [['src', 'app'], file];\r\n}\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n  'globals',\r\n  'css',\r\n  `\r\n/* @tailwind base;\r\n@tailwind components;\r\n@tailwind utilities; */\r\n\r\n:root {\r\n  --foreground-rgb: 0, 0, 0;\r\n  --background-start-rgb: 214, 219, 220;\r\n  --background-end-rgb: 255, 255, 255;\r\n}\r\n\r\nbody {}\r\n  \r\n  `,\r\n);\r\n\r\nreturn [['src', 'app'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n    const file = createResultFile(\r\n        'error',\r\n        'tsx',\r\n        `\r\n\"use client\";\r\nimport React from 'react';\r\nimport { Button, Result } from 'antd';\r\n\r\nconst App: React.FC = () => (\r\n  <Result\r\n    status=\"error\"\r\n    title=\"Error\"\r\n    subTitle=\"Sorry, something went wrong.\"\r\n    extra={<Button type=\"primary\">Back Home</Button>}\r\n  />\r\n);\r\n\r\nexport default App;\r\n  `,\r\n    );\r\n\r\n    return [['src', 'app'], file];\r\n}\r\n\r\n", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'next',\r\n    'svg',\r\n    `\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 394 80\"><path fill=\"#000\" d=\"M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z\"/><path fill=\"#000\" d=\"M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z\"/></svg>\r\n    `,\r\n  );\r\n\r\n  return [['public'], file];\r\n}", "import { ResultFile } from '@alilc/lowcode-types';\r\nimport { createResultFile } from '../../../../../../../utils/resultHelper';\r\n\r\nexport default function getFile(): [string[], ResultFile] {\r\n  const file = createResultFile(\r\n    'vercel',\r\n    'svg',\r\n    `\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 283 64\"><path fill=\"black\" d=\"M141 16c-11 0-19 7-19 18s9 18 20 18c7 0 13-3 16-7l-7-5c-2 3-6 4-9 4-5 0-9-3-10-7h28v-3c0-11-8-18-19-18zm-9 15c1-4 4-7 9-7s8 3 9 7h-18zm117-15c-11 0-19 7-19 18s9 18 20 18c6 0 12-3 16-7l-8-5c-2 3-5 4-8 4-5 0-9-3-11-7h28l1-3c0-11-8-18-19-18zm-10 15c2-4 5-7 10-7s8 3 9 7h-19zm-39 3c0 6 4 10 10 10 4 0 7-2 9-5l8 5c-3 5-9 8-17 8-11 0-19-7-19-18s8-18 19-18c8 0 14 3 17 8l-8 5c-2-3-5-5-9-5-6 0-10 4-10 10zm83-29v46h-9V5h9zM37 0l37 64H0L37 0zm92 5-27 48L74 5h10l18 30 17-30h10zm59 12v10l-3-1c-6 0-10 4-10 10v15h-9V17h9v9c0-5 6-9 13-9z\"/></svg>\r\n    `,\r\n  );\r\n\r\n  return [['public'], file];\r\n}", "import { ResultDir } from '@alilc/lowcode-types';\r\n\r\nimport { createResultDir } from '../../../../../utils/resultHelper';\r\nimport { runFileGenerator } from '../../../../../utils/templateHelper';\r\n\r\nimport tsconfig from './files/tsconfig.json';\r\nimport tailwind_config from './files/tailwind.config.ts';\r\nimport README from './files/README.md';\r\nimport postcss_config_js from './files/postcss.config.js';\r\nimport package_json from './files/package.json';\r\nimport next_config from './files/next.config.js';\r\nimport next_env_d from './files/next-env.d';\r\nimport env from './files/env';\r\nimport env_production from './files/env.production';\r\n\r\nimport utils from './files/src/utils/utils.js';\r\nimport DateUtil from './files/src/utils/DateUtil.js';\r\nimport constants from './files/src/utils/constants.js';\r\nimport Authorized from './files/src/utils/Authorized.js';\r\nimport authority from './files/src/utils/authority.js';\r\n\r\nimport theme_config from './files/src/theme/themeConfig.ts';\r\n\r\nimport s_README from './files/src/services/README.md';\r\nimport s_hook from './files/src/services/hooks.ts';\r\nimport request from './files/src/services/request.ts';\r\nimport dictMapRequest from './files/src/services/sys/dictMapRequest.ts';\r\nimport s_index from './files/src/services/sys/index.ts';\r\nimport sysAuth from './files/src/services/sys/sysAuth.ts';\r\nimport s_t_api from './files/src/services/app/TableDetail/api.ts';\r\nimport s_t_index from './files/src/services/app/TableDetail/index.ts';\r\nimport s_user from './files/src/services/app/user.ts';\r\n\r\nimport m_README from './files/src/models/README.md';\r\nimport m_index from './files/src/models/index.ts';\r\nimport m_authSlice from './files/src/models/authSlice.ts';\r\nimport m__sysInfoSlice from './files/src/models/_sysInfoSlice.ts';\r\nimport m_counterAPI from './files/src/models/counter/counterAPI.ts';\r\nimport m_counterSlice from './files/src/models/counter/counterSlice.ts';\r\n\r\nimport routes from './files/src/lib/routes.tsx';\r\nimport l_interface from './files/src/lib/interface.ts';\r\nimport l_getInitialState from './files/src/lib/getInitialState.ts';\r\nimport l_definitions from './files/src/lib/definitions.ts';\r\nimport l_AntdRegistry from './files/src/lib/AntdRegistry.tsx';\r\nimport l_access from './files/src/lib/access.ts';\r\nimport l__storete from './files/src/lib/_store.ts';\r\nimport l_defaultProps from './files/src/lib/_defaultProps.tsx';\r\nimport l_s_hooks from './files/src/lib/store/hooks.ts';\r\nimport l_s_hStoreProvider from './files/src/lib/store/StoreProvider.tsx';\r\nimport l_s_createAppSlice from './files/src/lib/store/createAppSlice.ts';\r\nimport l_st_config from './files/src/lib/storage/config.ts';\r\nimport l_st_encrypt from './files/src/lib/storage/encrypt.ts';\r\nimport l_st_hooks from './files/src/lib/storage/hooks.ts';\r\n\r\n\r\nimport lay_StateLayout from './files/src/layout/StateLayout.tsx';\r\nimport lay_README from './files/src/layout/README.md';\r\nimport lay_BasicLayout from './files/src/layout/BasicLayout.tsx';\r\nimport lay_utils from './files/src/layout/utils.ts';\r\n\r\n\r\n\r\nimport app_page from './files/src/app/page.tsx';\r\nimport app_not_found from './files/src/app/not-found.tsx';\r\nimport app_loading from './files/src/app/loading.tsx';\r\nimport app_layout from './files/src/app/layout.tsx';\r\nimport app_globals_css from './files/src/app/globals.css';\r\nimport app_error from './files/src/app/error.tsx';\r\n\r\nimport app_m_page from './files/src/app/manage/page.tsx';\r\n\r\nimport public_next_svg from './files/public/next.svg';\r\nimport public_vercel_svg from './files/public/vercel.svg';\r\n\r\nexport function generateStaticFiles(root = createResultDir('.')): ResultDir {\r\n  runFileGenerator(root, tsconfig);\r\n  runFileGenerator(root, tailwind_config);\r\n  runFileGenerator(root, README);\r\n  runFileGenerator(root, postcss_config_js);\r\n  // runFileGenerator(root, package_lock_json);\r\n  // runFileGenerator(root, package_json);\r\n  runFileGenerator(root, next_env_d);\r\n  runFileGenerator(root, next_config);\r\n  runFileGenerator(root, env);\r\n  runFileGenerator(root, env_production);\r\n  runFileGenerator(root, utils);\r\n  runFileGenerator(root, DateUtil);\r\n  runFileGenerator(root, constants);\r\n  runFileGenerator(root, Authorized);\r\n  runFileGenerator(root, authority);\r\n  runFileGenerator(root, theme_config);\r\n\r\n  runFileGenerator(root, s_README);\r\n  runFileGenerator(root, s_hook);\r\n  runFileGenerator(root, request);\r\n  runFileGenerator(root, dictMapRequest);\r\n  runFileGenerator(root, s_index);\r\n  runFileGenerator(root, sysAuth);\r\n  runFileGenerator(root, s_t_api);\r\n  runFileGenerator(root, s_t_index);\r\n  runFileGenerator(root, s_user);\r\n\r\n  runFileGenerator(root, m_README);\r\n  runFileGenerator(root, m_index);\r\n  runFileGenerator(root, m_authSlice);\r\n  runFileGenerator(root, m__sysInfoSlice);\r\n  runFileGenerator(root, m_counterAPI);\r\n  runFileGenerator(root, m_counterSlice);\r\n\r\n  runFileGenerator(root, routes);\r\n  runFileGenerator(root, l_interface);\r\n  runFileGenerator(root, l_getInitialState);\r\n  runFileGenerator(root, l_definitions);\r\n  runFileGenerator(root, l_AntdRegistry);\r\n  runFileGenerator(root, l_access);\r\n  runFileGenerator(root, l__storete);\r\n  runFileGenerator(root, l_defaultProps);\r\n  runFileGenerator(root, l_s_hooks);\r\n  runFileGenerator(root, l_s_hStoreProvider);\r\n  runFileGenerator(root, l_s_createAppSlice);\r\n  runFileGenerator(root, l_st_hooks);\r\n  runFileGenerator(root, l_st_encrypt);\r\n  runFileGenerator(root, l_st_config);\r\n\r\n  runFileGenerator(root, lay_StateLayout);\r\n  runFileGenerator(root, lay_README);\r\n  runFileGenerator(root, lay_BasicLayout);\r\n  runFileGenerator(root, lay_utils);\r\n\r\n  runFileGenerator(root, app_page);\r\n  runFileGenerator(root, app_not_found);\r\n  runFileGenerator(root, app_loading);\r\n  runFileGenerator(root, app_layout);\r\n  runFileGenerator(root, app_globals_css);\r\n  runFileGenerator(root, app_error);\r\n\r\n  runFileGenerator(root, public_next_svg);\r\n  runFileGenerator(root, public_vercel_svg);\r\n\r\n  return root;\r\n}\r\n", "import { ResultDir } from '@alilc/lowcode-types';\r\nimport { IProjectTemplate } from '../../../../../types';\r\nimport { generateStaticFiles } from './static-files';\r\n\r\nconst nextjsTemplate: IProjectTemplate = {\r\n  slots: {\r\n    components: {\r\n      path: ['src', 'components'],\r\n    },\r\n    pages: {\r\n      path: ['src', 'app'],\r\n      fileName: 'page',\r\n    },\r\n    router: {\r\n      path: ['src', 'lib'],\r\n      fileName: 'routes',\r\n    },\r\n    entry: {\r\n      path: ['src'],\r\n      fileName: 'app',\r\n    },\r\n    constants: {\r\n      path: ['src'],\r\n      fileName: 'constants',\r\n    },\r\n    utils: {\r\n      path: ['src'],\r\n      fileName: 'utils',\r\n    },\r\n    i18n: {\r\n      path: ['src'],\r\n      fileName: 'i18n',\r\n    },\r\n    globalStyle: {\r\n      path: ['src'],\r\n      fileName: 'global',\r\n    },\r\n    htmlEntry: {\r\n      path: ['public'],\r\n      fileName: 'index',\r\n    },\r\n    packageJSON: {\r\n      path: [],\r\n      fileName: 'package',\r\n    },\r\n  },\r\n\r\n  generateTemplate(): ResultDir {\r\n    return generateStaticFiles();\r\n  },\r\n};\r\n\r\nexport default nextjsTemplate;\r\n", "import { PackageJSON } from '@alilc/lowcode-types';\r\n\r\nimport { COMMON_CHUNK_NAME } from '../../../../../const/generator';\r\n\r\nimport {\r\n  BuilderComponentPlugin,\r\n  BuilderComponentPluginFactory,\r\n  ChunkType,\r\n  FileType,\r\n  ICodeStruct,\r\n  IProjectInfo,\r\n} from '../../../../../types';\r\nimport { buildDataSourceDependencies } from '../../../../../utils/dataSource';\r\n\r\ninterface INextJsPackageJSON extends PackageJSON {\r\n\r\n}\r\n\r\nexport type NextJsPackageJsonPluginConfig = {\r\n  /**\r\n   * \u6570\u636E\u6E90\u914D\u7F6E\r\n   */\r\n  datasourceConfig?: {\r\n    /** \u6570\u636E\u6E90\u5F15\u64CE\u7684\u7248\u672C */\r\n    engineVersion?: string;\r\n    /** \u6570\u636E\u6E90\u5F15\u64CE\u7684\u5305\u540D */\r\n    enginePackage?: string;\r\n    /** \u6570\u636E\u6E90 handlers \u7684\u7248\u672C */\r\n    handlersVersion?: {\r\n      [key: string]: string;\r\n    };\r\n    /** \u6570\u636E\u6E90 handlers \u7684\u5305\u540D */\r\n    handlersPackages?: {\r\n      [key: string]: string;\r\n    };\r\n  };\r\n  /** \u5305\u540D */\r\n  packageName?: string;\r\n  /** \u7248\u672C */\r\n  packageVersion?: string;\r\n};\r\n\r\nconst pluginFactory: BuilderComponentPluginFactory<NextJsPackageJsonPluginConfig> = (cfg) => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    const ir = next.ir as IProjectInfo;\r\n\r\n    const packageJson: INextJsPackageJSON = {\r\n      name: cfg?.packageName || 'counter-demo',\r\n      version: cfg?.packageVersion || '0.0.1',\r\n      description: '\u8F7B\u91CF\u7EA7\u6A21\u677F\uFF0C\u4F7F\u7528 JavaScript\uFF0C\u4EC5\u5305\u542B\u57FA\u7840\u7684 Layout\u3002',\r\n      dependencies: {\r\n        \"@ant-design/cssinjs\": \"^1.18.2\",\r\n        \"@ant-design/icons\": \"^5.2.6\",\r\n        \"@ant-design/nextjs-registry\": \"^1.0.0\",\r\n        \"@ant-design/pro-components\": \"^2.6.43\",\r\n        \"@emotion/css\": \"^11.11.2\",\r\n        \"@reduxjs/toolkit\": \"^2.2.1\",\r\n        \"@webank/watermark\": \"^1.0.9\",\r\n        \"antd\": \"^5.12.7\",\r\n        \"axios\": \"^1.6.5\",\r\n        \"moment\": \"^2.30.1\",\r\n        \"next-auth\": \"^4.24.5\",\r\n        \"react\": \"^18\",\r\n        \"react-dom\": \"^18\",\r\n        \"react-redux\": \"^9.1.0\",\r\n        \"redux-persist\": \"^6.0.0\",\r\n\r\n        // \u6570\u636E\u6E90\u76F8\u5173\u7684\u4F9D\u8D56:\r\n        ...buildDataSourceDependencies(ir, cfg?.datasourceConfig),\r\n      },\r\n      devDependencies: {\r\n        \"@types/crypto-js\": \"^4.2.2\",\r\n        \"@types/node\": \"^20\",\r\n        \"@types/react\": \"^18\",\r\n        \"@types/react-dom\": \"^18\",\r\n        \"autoprefixer\": \"^10.0.1\",\r\n        \"crypto-js\": \"^4.2.0\",\r\n        \"eslint\": \"^8\",\r\n        \"eslint-config-next\": \"14.0.4\",\r\n        \"express\": \"^4.18.2\",\r\n        \"http-proxy-middleware\": \"^2.0.6\",\r\n        \"next\": \"^14.1.0\",\r\n        \"next-env\": \"^1.0.0\",\r\n        \"postcss\": \"^8\",\r\n        \"tailwindcss\": \"^3.3.0\",\r\n        \"typescript\": \"^5\"\r\n      },\r\n      scripts: {\r\n        \"dev\": \"next dev -p 8000\",\r\n        \"build\": \"next build\",\r\n        \"start\": \"next start\",\r\n        \"lint\": \"next lint\",\r\n        \"dev:proxy\": \"node proxy.js\"\r\n      },\r\n      private: true,\r\n    };\r\n\r\n    ir.packages.forEach((packageInfo) => {\r\n      packageJson.dependencies[packageInfo.package] = packageInfo.version;\r\n    });\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.JSON,\r\n      fileType: FileType.JSON,\r\n      name: COMMON_CHUNK_NAME.FileMainContent,\r\n      content: packageJson,\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "import template from './template';\r\nimport packageJSON from './plugins/packageJSON';\r\n// import globalStyle from './plugins/globalStyle';\r\n// import layout from './plugins/layout';\r\n// import appConfig from './plugins/appConfig';\r\n// import buildConfig from './plugins/buildConfig';\r\n\r\nexport default {\r\n  template,\r\n  plugins: {\r\n    // appConfig,\r\n    // buildConfig,\r\n    // globalStyle,\r\n    packageJSON,\r\n    // layout,\r\n  },\r\n};\r\n", "import { IProjectBuilder, IProjectBuilderOptions } from '../types';\r\n\r\nimport { createProjectBuilder } from '../generator/ProjectBuilder';\r\n\r\nimport esmodule from '../plugins/common/esmodule';\r\nimport styleImport from '../plugins/common/styleImport';\r\nimport containerClass from '../plugins/component/react/containerClass';\r\nimport containerInitState from '../plugins/component/react/containerInitState';\r\nimport containerInjectContext from '../plugins/component/react/containerInjectContext';\r\nimport containerInjectUtils from '../plugins/component/react/containerInjectUtils';\r\nimport containerInjectDataSourceEngine from '../plugins/component/react/containerInjectDataSourceEngine';\r\nimport containerInjectConstants from '../plugins/component/react/containerInjectConstants';\r\nimport containerInjectI18n from '../plugins/component/react/containerInjectI18n';\r\nimport containerLifeCycle from '../plugins/component/react/containerLifeCycle';\r\nimport containerMethod from '../plugins/component/react/containerMethod';\r\nimport jsx from '../plugins/component/react/jsx';\r\nimport reactCommonDeps from '../plugins/component/react/reactCommonDeps';\r\nimport css from '../plugins/component/style/css';\r\nimport constants from '../plugins/project/constants';\r\nimport i18n from '../plugins/project/i18n';\r\nimport utils from '../plugins/project/utils';\r\n\r\nimport nextjs from '../plugins/project/framework/nextjs';\r\n\r\nimport { prettier } from '../postprocessor';\r\n\r\nexport type nextJsProjectBuilderOptions = IProjectBuilderOptions;\r\n\r\nexport default function createNextJsProjectBuilder(\r\n  options?: nextJsProjectBuilderOptions,\r\n): IProjectBuilder {\r\n  return createProjectBuilder({\r\n    inStrictMode: options?.inStrictMode,\r\n    extraContextData: { ...options },\r\n    template: nextjs.template,\r\n    plugins: {\r\n      components: [\r\n        reactCommonDeps(),\r\n        esmodule({\r\n          fileType: 'tsx',\r\n        }),\r\n        styleImport(),\r\n        containerClass(),\r\n        containerInjectContext(),\r\n        containerInjectUtils(),\r\n        containerInjectDataSourceEngine(),\r\n        containerInjectI18n(),\r\n        containerInjectConstants(),\r\n        containerInitState(),\r\n        containerLifeCycle(),\r\n        containerMethod(),\r\n        jsx({\r\n          nodeTypeMapping: {\r\n            Div: 'div',\r\n            Component: 'div',\r\n            Page: 'div',\r\n            Block: 'div',\r\n          },\r\n        }),\r\n        css(),\r\n      ],\r\n      pages: [\r\n        reactCommonDeps(),\r\n        esmodule({\r\n          fileType: 'tsx',\r\n        }),\r\n        styleImport(),\r\n        containerClass(),\r\n        containerInjectContext(),\r\n        containerInjectUtils(),\r\n        containerInjectDataSourceEngine(),\r\n        containerInjectI18n(),\r\n        containerInjectConstants(),\r\n        containerInitState(),\r\n        containerLifeCycle(),\r\n        containerMethod(),\r\n        jsx({\r\n          nodeTypeMapping: {\r\n            Div: 'div',\r\n            Component: 'div',\r\n            Page: 'div',\r\n            Block: 'div',\r\n            Box: 'div',\r\n          },\r\n        }),\r\n        css(),\r\n      ],\r\n      constants: [constants()],\r\n      utils: [esmodule(), utils('react')],\r\n      i18n: [i18n()],\r\n      // globalStyle: [icejs3.plugins.globalStyle()],\r\n      packageJSON: [nextjs.plugins.packageJSON()],\r\n      // buildConfig: [icejs3.plugins.buildConfig()],\r\n      // appConfig: [icejs3.plugins.appConfig()],\r\n      // layout: [icejs3.plugins.layout()],\r\n    },\r\n    postProcessors: [prettier()],\r\n    customizeBuilderOptions: options?.customizeBuilderOptions,\r\n  });\r\n}\r\n\r\nexport const plugins = {\r\n  containerClass,\r\n  containerInitState,\r\n  containerInjectContext,\r\n  containerInjectUtils,\r\n  containerInjectI18n,\r\n  containerInjectDataSourceEngine,\r\n  containerLifeCycle,\r\n  containerMethod,\r\n  jsx,\r\n  commonDeps: reactCommonDeps,\r\n};\r\n", "import { COMMON_CHUNK_NAME } from '../../const/generator';\r\n\r\nimport { BuilderComponentPlugin, BuilderComponentPluginFactory, ChunkType, FileType, ICodeStruct } from '../../types';\r\n\r\n// TODO: How to merge this logic to common deps\r\nconst pluginFactory: BuilderComponentPluginFactory<unknown> = () => {\r\n  const plugin: BuilderComponentPlugin = async (pre: ICodeStruct) => {\r\n    const next: ICodeStruct = {\r\n      ...pre,\r\n    };\r\n\r\n    next.chunks.push({\r\n      type: ChunkType.STRING,\r\n      fileType: FileType.JSX,\r\n      name: COMMON_CHUNK_NAME.InternalDepsImport,\r\n      content: 'import * from \\'react\\';',\r\n      linkAfter: [],\r\n    });\r\n\r\n    return next;\r\n  };\r\n  return plugin;\r\n};\r\n\r\nexport default pluginFactory;\r\n", "// \u672C\u6587\u4EF6\u662F\u8981\u5BFC\u51FA\u5230\u5916\u9762\u7684\uFF0C\u6CE8\u610F\u53EA\u5BFC\u51FA\u6BD4\u8F83\u7A33\u5B9A\u7684\u4E1C\u897F\r\nimport * as common from './common';\r\nimport * as compositeType from './compositeType';\r\nimport * as jsExpression from './jsExpression';\r\nimport * as jsSlot from './jsSlot';\r\nimport * as nodeToJSX from './nodeToJSX';\r\nimport * as resultHelper from './resultHelper';\r\nimport * as templateHelper from './templateHelper';\r\nimport * as validate from './validate';\r\nimport * as schema from './schema';\r\nimport * as version from './version';\r\nimport * as scope from './Scope';\r\nimport * as expressionParser from './expressionParser';\r\nimport * as dataSource from './dataSource';\r\nimport * as pathHelper from './pathHelper';\r\n\r\nexport {\r\n  common,\r\n  compositeType,\r\n  jsExpression,\r\n  jsSlot,\r\n  nodeToJSX,\r\n  resultHelper,\r\n  templateHelper,\r\n  validate,\r\n  schema,\r\n  version,\r\n  scope,\r\n  expressionParser,\r\n  dataSource,\r\n  pathHelper,\r\n};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACIA,IAAAA,sBAAuB;;;ACShB,IAAK,WAAL,kBAAKC,cAAL;AACL,EAAAA,UAAA,SAAM;AACN,EAAAA,UAAA,UAAO;AACP,EAAAA,UAAA,UAAO;AACP,EAAAA,UAAA,UAAO;AACP,EAAAA,UAAA,QAAK;AACL,EAAAA,UAAA,SAAM;AACN,EAAAA,UAAA,SAAM;AACN,EAAAA,UAAA,QAAK;AACL,EAAAA,UAAA,SAAM;AACN,EAAAA,UAAA,SAAM;AACN,EAAAA,UAAA,UAAO;AACP,EAAAA,UAAA,QAAK;AAZK,SAAAA;AAAA,GAAA;AAeL,IAAK,YAAL,kBAAKC,eAAL;AACL,EAAAA,WAAA,SAAM;AACN,EAAAA,WAAA,YAAS;AACT,EAAAA,WAAA,UAAO;AAHG,SAAAA;AAAA,GAAA;AAML,IAAK,aAAL,kBAAKC,gBAAL;AACL,EAAAA,YAAA,eAAY;AACZ,EAAAA,YAAA,WAAQ;AACR,EAAAA,YAAA,UAAO;AAHG,SAAAA;AAAA,GAAA;;;ACrBL,IAAK,yBAAL,kBAAKC,4BAAL;AACL,EAAAA,wBAAA,UAAO;AACP,EAAAA,wBAAA,WAAQ;AACR,EAAAA,wBAAA,eAAY;AACZ,EAAAA,wBAAA,WAAQ;AAJE,SAAAA;AAAA,GAAA;AAOL,IAAK,iBAAL,kBAAKC,oBAAL;AACL,EAAAA,gBAAA,cAAW;AACX,EAAAA,gBAAA,cAAW;AAFD,SAAAA;AAAA,GAAA;;;ACnBL,IAAM,qBAAN,cAAiC,MAAM;AAAA,EAG5C,YAAY,SAAiB,QAAkB;AAC7C,UAAM,OAAO;AAHf,wBAAS;AAIP,SAAK,OAAO,KAAK,YAAY;AAC7B,SAAK,SAAS;AACd,WAAO,eAAe,MAAM,WAAW,SAAS;AAAA,EAClD;AACF;AAEO,IAAM,2BAAN,cAAuC,mBAAmB;AAAC;AAE3D,IAAM,qBAAN,cAAiC,mBAAmB;AAAC;AAErD,IAAM,iBAAN,cAA6B,mBAAmB;AAAC;;;ACbjD,IAAK,aAAL,kBAAKC,gBAAL;AACL,EAAAA,YAAA,YAAS;AACT,EAAAA,YAAA,SAAM;AACN,EAAAA,YAAA,UAAO;AACP,EAAAA,YAAA,cAAW;AACX,EAAAA,YAAA,WAAQ;AALE,SAAAA;AAAA,GAAA;;;ACHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACEO,IAAM,mBAAmB,CAAC,+DAAqD,CAAC;;;ACFhF,IAAM,oBAAoB;AAAA,EAC/B,oBAAoB;AAAA,EACpB,oBAAoB;AAAA,EACpB,mBAAmB;AAAA,EACnB,eAAe;AAAA,EACf,gBAAgB;AAAA,EAChB,iBAAiB;AAAA,EACjB,YAAY;AAAA,EACZ,iBAAiB;AAAA,EACjB,iBAAiB;AAAA,EACjB,aAAa;AAAA,EACb,eAAe;AACjB;AAEO,IAAM,0BAA0B;AAAA,EACrC,OAAO;AAAA,EACP,kBAAkB;AAAA,EAClB,oBAAoB;AAAA,EACpB,gBAAgB;AAAA,EAChB,WAAW;AAAA,EACX,cAAc;AAAA,EACd,QAAQ;AAAA,EACR,cAAc;AAAA,EACd,WAAW;AAAA,EACX,kBAAkB;AAAA,EAClB,KAAK;AACP;AAEO,IAAM,qBAAqB;AAAA,EAChC,CAAC,kBAAkB,qBAAqB,CAAC;AAAA,EACzC,CAAC,kBAAkB,qBAAqB,CAAC,kBAAkB,kBAAkB;AAAA,EAC7E,CAAC,kBAAkB,oBAAoB;AAAA,IACrC,kBAAkB;AAAA,IAAoB,kBAAkB;AAAA,EAC1D;AAAA,EACA,CAAC,kBAAkB,gBAAgB;AAAA,IACjC,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,EACpB;AAAA,EACA,CAAC,kBAAkB,iBAAiB;AAAA,IAClC,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,EACpB;AAAA,EACA,CAAC,wBAAwB,QAAQ;AAAA,IAC/B,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,EACpB;AAAA,EACA,CAAC,wBAAwB,mBAAmB;AAAA,IAC1C,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,EAC1B;AAAA,EACA,CAAC,wBAAwB,qBAAqB,CAAC,wBAAwB,gBAAgB;AAAA,EACvF,CAAC,wBAAwB,iBAAiB;AAAA,IACxC,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,EAC1B;AAAA,EACA,CAAC,wBAAwB,YAAY,CAAC,wBAAwB,KAAK;AAAA,EACnE,CAAC,wBAAwB,eAAe;AAAA,IACtC,wBAAwB;AAAA,IAAO,wBAAwB;AAAA,EACzD;AAAA,EACA,CAAC,wBAAwB,SAAS;AAAA,IAChC,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,EAC1B;AAAA,EACA,CAAC,wBAAwB,eAAe;AAAA,IACtC,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,EAC1B;AAAA,EACA,CAAC,wBAAwB,YAAY;AAAA,IACnC,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,EAC1B;AAAA,EACA,CAAC,wBAAwB,mBAAmB;AAAA,IAC1C,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,EAC1B;AAAA,EACA,CAAC,wBAAwB,MAAM;AAAA,IAC7B,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,IACxB,wBAAwB;AAAA,EAC1B;AAAA,EACA,CAAC,kBAAkB,kBAAkB;AAAA,IACnC,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,wBAAwB;AAAA,EAC1B;AAAA,EACA,CAAC,kBAAkB,aAAa;AAAA,IAC9B,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,kBAAkB;AAAA,IAClB,wBAAwB;AAAA,IACxB,kBAAkB;AAAA,EACpB;AAAA,EACA,CAAC,kBAAkB,kBAAkB,CAAC;AAAA,EACtC,CAAC,kBAAkB,kBAAkB,CAAC,kBAAkB,eAAe;AAAA,EACvE,CAAC,kBAAkB,cAAc,CAAC;AACpC;AAEO,IAAM,yBAAyB;;;AFhI/B,IAAM,iBAAiB;AAEvB,IAAM,iBAAiB;AAAA,EAC5B,WAAW;AAAA,EACX,OAAO;AAAA,EACP,MAAM;AACR;AAEO,IAAM,8BAA8B,CAAC,SAAS,OAAO;AAGrD,IAAM,qBAAqB;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AAEO,IAAM,oBAAoB,SAAU,MAAc;AACvD,SAAO,mBAAmB,SAAS,IAAI;AACzC;;;AG1BO,SAAS,gBAAgB,OAA+B;AAC7D,MAAI,CAAC,OAAO;AACV,WAAO;AAAA,EACT;AAEA,MAAI,iBAAiB,OAAO;AAC1B,WAAO,MAAM;AAAA,EACf;AAEA,MAAI,OAAO,UAAU,UAAU;AAC7B,WAAO;AAAA,EACT;AAEA,MAAI,OAAO,UAAU,YAAY,UAAU,MAAM;AAC/C,WACE,gBAAiB,MAA8B,OAAO,KACtD,gBAAiB,MAAmC,YAAY,KAChE,gBAAiB,MAA6B,MAAM;AAAA,EAExD;AAEA,SAAO;AACT;;;ACzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAmB;AACnB,2BAYO;;;ACbP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,yBAAuB;AACvB,wBAAkB;AAKX,SAAS,WAAW,OAAuB;AAChD,SAAO,mBAAAC,QAAW,UAAU,KAAK;AACnC;AAKO,SAAS,SAAS,KAAqB;AAC5C,SAAO,mBAAAA,QAAW,UAAU,GAAG;AACjC;AAEO,SAAS,aAAqB;AACnC,SAAO,kBAAAC,QAAM,SAAS;AACxB;AAEO,SAAS,eAAe,YAA4B;AACzD,SAAO,mBAAAD,QAAW,eAAe,UAAU;AAC7C;AAEO,SAAS,YAAe,KAAU,IAAsB;AAC7D,QAAM,MAAyB,CAAC;AAChC,MAAI,QAAQ,CAAC,SAAS;AACpB,QAAI,GAAG,IAAI,KAAK;AAAA,EAClB,CAAC;AAGD,QAAM,aAAa,MAAM,KAAK,IAAI,IAAY,OAAO,KAAK,GAAG,CAAC,CAAC;AAC/D,QAAM,cAAc,WAAW,IAAI,CAAC,QAAQ,IAAI,IAAI;AACpD,SAAO;AACT;AAEO,SAAS,mBAAsB,MAAiB;AAGrD,SAAO,SAAS,wBAAwB,OAAO,EAAE;AACnD;AAEO,SAAS,iBAAiB,MAA0C;AACzE,UAAO,6BAAM,UAAS,mBAAkB,6BAAM,aAAY;AAC5D;AAEO,SAAS,qBACd,YACmC;AACnC,SAAO,WAAW;AACpB;AAEO,SAAS,qBACd,YACmC;AACnC,SAAO,WAAW;AACpB;;;ADzCO,SAAS,kBAAkB,GAAyC;AACzE,SACE,OAAO,MAAM,YACb,KACA,OAAO,EAAE,kBAAkB,YAC3B,OAAO,EAAE,aAAa;AAE1B;AAEO,SAAS,UAAU,GAAiC;AACzD,SAAO,OAAO,MAAM,YAAY,KAAK,OAAO,EAAE,YAAY;AAC5D;AAEA,IAAM,OAAO,MAAM;AAEnB,IAAM,+BAA+B;AAAA,EACnC,OAAO;AACT;AAEA,IAAM,oBAAoB;AASnB,SAAS,eACd,UACA,UAKA,SAIK;AAxDP;AAyDE,QAAM,MAAM;AAAA,IACV,GAAG;AAAA,IACH,GAAI,WAAW,CAAC;AAAA,EAClB;AACA,QAAM,YAAW,SAAI,aAAJ,YAAgB;AACjC,MAAI,YAAY,GAAG;AACjB,UAAM,IAAI,MAAM,iCAAiC;AAAA,EACnD;AAEA,MAAI,MAAM,QAAQ,QAAQ,GAAG;AAC3B,UAAM,OAA8B;AACpC,WAAO,KACJ,IAAI,CAAC,UAAU,eAAe,OAAO,UAAU,EAAE,GAAG,KAAK,UAAU,WAAW,EAAE,CAAC,CAAC,EAClF,OAAO,CAAC,GAAG,MAAM,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;AAAA,EACrC;AAEA,MAAI;AACJ,QAAM,cAAmB,CAAC;AAC1B,MAAI,aAAa,QAAQ,aAAa,QAAW;AAC/C,WAAO,CAAC;AAAA,EACV,eAAW,gCAAU,QAAQ,GAAG;AAC9B,UAAM,UAAU,SAAS,UAAU;AACnC,aAAS,QAAQ,QAAQ;AAAA,EAC3B,eAAW,qCAAe,QAAQ,GAAG;AACnC,UAAM,UAAU,SAAS,cAAc;AACvC,aAAS,QAAQ,QAAQ;AAAA,EAC3B,eAAW,+BAAS,QAAQ,GAAG;AAC7B,WAAO,eAAe,SAAS,OAAO,UAAU,EAAE,GAAG,KAAK,UAAU,WAAW,EAAE,CAAC;AAAA,EACpF,eAAW,mCAAa,QAAQ,GAAG;AACjC,UAAM,UAAU,SAAS,QAAQ;AACjC,UAAM,QAAQ;AACd,aAAS,QAAQ,KAAK;AAEtB,QAAI,MAAM,UAAU;AAClB,YAAM,WAAW,eAAe,MAAM,UAAU,UAAU,GAAG;AAC7D,kBAAY,KAAK,GAAG,QAAQ;AAAA,IAC9B;AAEA,QAAI,MAAM,OAAO;AACf,UAAI,MAAM,QAAQ,MAAM,KAAK,GAAG;AAC9B,cAAM,MAAM,QAAQ,CAAC,EAAE,MAAM,MAAM;AACjC,gBAAM,WAAW,4BAA4B,KAAK;AAClD,sBAAY,KAAK,GAAG,QAAQ;AAAA,QAC9B,CAAC;AAAA,MACH,OAAO;AACL,eAAO,OAAO,MAAM,KAAK,EAAE,QAAQ,CAAC,UAAU;AAC5C,gBAAM,WAAW,4BAA4B,KAAkC;AAC/E,sBAAY,KAAK,GAAG,QAAQ;AAAA,QAC9B,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF,OAAO;AACL,UAAM,IAAI,mBAAmB,uCAAuC,QAAQ;AAAA,EAC9E;AAEA,MAAI,WAAW,QAAW;AACxB,gBAAY,QAAQ,MAAM;AAAA,EAC5B;AAEA,SAAO;AAEP,WAAS,4BAA4B,OAAuC;AAC1E,YAAI,+BAAS,KAAK,GAAG;AACnB,aAAO,eAAe,MAAM,OAAO,UAAU,EAAE,GAAG,KAAK,UAAU,WAAW,EAAE,CAAC;AAAA,IACjF;AAGA,QAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,aAAS,UAAQ,OAAO,CAAC,MAAM,4BAA4B,CAAC,CAAC;AAAA,IAC/D;AAGA,QACE,KAAC,qCAAe,KAAK,KACrB,CAAC,iBAAiB,KAAK,KACvB,KAAC,mCAAa,KAAK,KACnB,OAAO,UAAU,YACjB,UAAU,MACV;AACA,aAAS,UAAQ,OAAO,OAAO,KAAK,GAAG,CAAC,MAAM,4BAA4B,CAAC,CAAC;AAAA,IAC9E;AAEA,WAAO,CAAC;AAAA,EACV;AACF;AAEO,SAAS,qBAAqB,QAA+B;AAClE,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,EACF,EAAE,SAAS,OAAO,aAAa;AACjC;AAEO,IAAW,gBAAX,kBAAWE,mBAAX;AACL,EAAAA,eAAA,UAAO;AACP,EAAAA,eAAA,eAAY;AACZ,EAAAA,eAAA,WAAQ;AAHQ,SAAAA;AAAA,GAAA;;;AElJX,IAAM,oBAAwC,CAAC,cAAc;AAClE,MAAI,aAAa;AACjB,QAAM,gBAAgB,CAAC,MAA6B;AAClD,QAAI,EAAE,OAAO;AACX,YAAM,QAAQ,EAAE;AAChB,UAAI,MAAM,KAAK;AACb,qBAAa;AAAA,MACf;AAAA,IACF;AAAA,EACF;AAEA,gBAAc,SAAS;AAEvB,MAAI,CAAC,cAAc,UAAU,UAAU;AAErC;AAAA,MACE,UAAU;AAAA,MACV;AAAA,QACE,MAAM;AAAA,MACR;AAAA,MACA;AAAA,QACE,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAEA,SAAO;AAAA,IACL,YAAY;AAAA,EACd;AACF;;;AClCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,IAAM,oBAAoB,CAAC,SAAiB;AACjD,SAAO,mDAAmD,KAAK,IAAI;AACrE;AAEO,IAAM,uBAAuB,CAAC,SAAiB;AACpD,SAAO,oDAAoD,KAAK,IAAI;AACtE;AAEO,IAAM,uBAAuB,CAAC,SAAiB;AACpD,MAAI,CAAC,kBAAkB,IAAI,GAAG;AAC5B,WAAO,IAAI,KAAK,QAAQ,mBAAmB,EAAE;AAAA,EAC/C;AACA,SAAO;AACT;;;AZ2BA,IAAM,mBAAmC;AAAA,EACvC,eAAe;AAAA,EACf,eAAe;AAAA,EACf,YAAY;AAAA,EACZ,UAAU;AAAA,EACV,KAAK;AAAA,EACL,OAAO,CAAC;AACV;AAEA,SAAS,qBAAqB,UAAkB,MAAmD;AACjG,MAAI,KAAK,WAAW;AAClB,UAAM,MAAM,KAAK;AACjB,QAAI,IAAI,eAAe;AACrB,aAAO,IAAI,iBAAiB;AAAA,IAC9B;AAEA,UAAM,WAAW,OAAO,KAAK,IAAI,EAAE,KAAK,CAAC,YAAoB;AAC3D,YAAM,UAAU,KAAK;AACrB,aACE,YAAY,YACZ,CAAC,QAAQ,iBACT,QAAQ,YAAY,IAAI,WACxB,QAAQ,YAAY,IAAI,WACxB,QAAQ,SAAS,IAAI,QACrB,QAAQ,eAAe,IAAI,cAC3B,QAAQ,YAAY,IAAI;AAAA,IAE5B,CAAC;AAED,WAAO,YAAY;AAAA,EACrB;AACA,SAAO;AACT;AAEA,SAAS,gBAAgB,QAAqC;AAC5D,MAAI,OAAO,OAAO;AAChB,QAAI,MAAM,QAAQ,OAAO,KAAK,GAAG;AAAA,IAEjC,OAAO;AACL,YAAM,YAAY,OAAO;AACzB,UAAI,UAAU,UAAU;AACtB,YAAI,CAAC,OAAO,UAAU;AAEpB,iBAAO,WAAW,UAAU;AAAA,QAC9B,OAAO;AACL,cAAI,YAAmC,CAAC;AAExC,cAAI,MAAM,QAAQ,OAAO,QAAQ,GAAG;AAClC,wBAAY,UAAU,OAAO,OAAO,QAAQ;AAAA,UAC9C,OAAO;AACL,sBAAU,KAAK,OAAO,QAAQ;AAAA,UAChC;AAEA,cAAI,MAAM,QAAQ,UAAU,QAAQ,GAAG;AACrC,wBAAY,UAAU,OAAO,UAAU,QAAiC;AAAA,UAC1E,OAAO;AACL,sBAAU,KAAK,UAAU,QAA+B;AAAA,UAC1D;AAGA,iBAAO,WAAW;AAAA,QACpB;AACA,eAAO,UAAU;AAAA,MACnB;AAAA,IACF;AAAA,EACF;AACF;AAEA,SAAS,eAAe,cAAmD,SAAiB;AAC1F,QAAM,MAAM,aAAa;AACzB,SAAQ,OAAO,IAAI,8BAAwC,MAAM;AACnE;AAEO,IAAM,eAAN,MAA4C;AAAA,EACjD,SAAS,QAA2C;AAClD,QAAI,4BAA4B,QAAQ,OAAO,OAAO,IAAI,GAAG;AAC3D,YAAM,IAAI,mBAAmB,oCAAoC,OAAO,UAAU;AAAA,IACpF;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,MAAM,WAA4D;AAEhE,UAAM,WAAgD,CAAC;AACvD,UAAM,eAAoD,CAAC;AAC3D,QAAI,YAAmC,CAAC;AAExC,UAAM,SAAS,KAAK,aAAa,SAAS;AAG1C,WAAO,cAAc,QAAQ,CAAC,SAAc;AAnIhD;AAoIM,UAAI,KAAK,eAAe;AACtB,iBAAS,KAAK,iBAAiB;AAAA,UAC7B,GAAG;AAAA,UACH;AAAA,UACA,eAAe,KAAK;AAAA,UACpB,aAAY,UAAK,eAAL,YAAmB,KAAK;AAAA,UACpC,SAAS,KAAK,WAAW;AAAA,UACzB,gBAAe,UAAK,kBAAL,YAAsB;AAAA,QACvC;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI;AAEJ,QAAI,OAAO,eAAe,SAAS,GAAG;AACpC,YAAM,YAAwC,OAAO,eAAe;AAEpE,UAAI,CAAC,UAAU,YAAY,CAAC,qBAAqB,SAAS,GAAG;AAE3D,cAAM,YAA4B;AAAA,UAChC,GAAG;AAAA,UACH,GAAG;AAAA,UACH,OAAO,UAAU,SAAS,iBAAiB;AAAA,UAC3C,KAAK,UAAU,OAAO,iBAAiB;AAAA,UACvC,YAAa,UAA6B,cAAc,iBAAiB;AAAA,UACzE,UAAU,OAAO;AAAA,QACnB;AACA,qBAAa,CAAC,SAAS;AAAA,MACzB,OAAO;AAEL,qBAAa,OAAO,eAAe,IAAI,CAAC,MAAM;AAC5C,gBAAM,UAAU;AAChB,gBAAM,YAA4B;AAAA,YAChC,GAAG;AAAA,YACH,eAAe,qBAAqB,QAAQ,eAAe,QAAQ;AAAA,YACnE,eAAe,QAAQ;AAAA,YACvB,YAAY,qBAAqB,QAAQ,gDACvC,QAAQ,WAAW,oBAAAC,QAAW,WAAW,QAAQ,QAAQ,CAAC;AAAA,UAC9D;AACA,iBAAO;AAAA,QACT,CAAC;AAAA,MACH;AAAA,IACF,OAAO;AACL,YAAM,IAAI,mBAAmB,kCAAkC;AAAA,IACjE;AAGA,iBAAa,WAAW,IAAI,CAAC,SAAS;AAAA,MACpC,GAAG;AAAA,MACH,eAAe,kBAAkB,GAAiC;AAAA,IACpE,EAAE;AAGF,eAAW,QAAQ,CAAC,cAAc;AAChC,UAAI;AACJ,cAAQ,UAAU;AAAA,aACX;AACH;AACA;AAAA,aACG;AACH;AACA;AAAA;AAEA;AACA;AAAA;AAGJ,YAAM,MAA2B;AAAA,QAC/B;AAAA,QACA,YAAY,UAAU;AAAA,QACtB,eAAe;AAAA,QACf,YAAY,UAAU;AAAA,QACtB;AAAA,MACF;AAEA,mBAAa,IAAI,cAAc;AAAA,IACjC,CAAC;AAED,UAAM,iBAAkB,CAAC,EAAoB,OAAO,GAAG,WAAW,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,CAAC;AAG1F,eAAW,QAAQ,CAAC,cAAc;AAChC,UAAI,UAAU,UAAU;AAEtB;AAAA,UACE,UAAU;AAAA,UACV;AAAA,YACE,MAAM,CAAC,MAA6B,gBAAgB,CAAC;AAAA,UACvD;AAAA,UACA;AAAA,YACE,OAAO;AAAA,UACT;AAAA,QACF;AAAA,MACF;AAAA,IACF,CAAC;AAED,eAAW,QAAQ,CAAC,cAAc;AAChC,YAAM,WAAW,KAAK,kBAAkB,SAAS;AAEjD,gBAAU,OAAO,YAAoB,UAAU,CAAC,MAAc,CAAC,EAC5D,IAAI,CAAC,YAAY,eAAe,cAAc,OAAO,KAAK,SAAS,QAAQ,EAC3E,OAAO,OAAO;AAAA,IAEnB,CAAC;AAGD,UAAM,SAAgC,WACnC,OAAO,CAAC,cAAc,UAAU,kBAAkB,MAAM,EACxD,IAAI,CAAC,SAAS;AACb,YAAM,EAAE,KAAK,IAAI;AACjB,UAAI,MAAM;AACR,eAAO;AAAA,UACL,MAAO,KAAmB,UAAU,IAAI,KAAK;AAAA,UAC7C,UAAU,KAAK;AAAA,UACf,eAAe,KAAK;AAAA,QACtB;AAAA,MACF;AAEA,aAAO;AAAA,QACL,MAAM;AAAA,QACN,UAAU,KAAK;AAAA,QACf,eAAe,KAAK;AAAA,MACtB;AAAA,IACF,CAAC;AAEH,UAAM,aAAa,OAChB,IAAI,CAAC,MAAM,aAAa,EAAE,kBAAkB,SAAS,EAAE,cAAc,EACrE,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG;AAGxB,QAAI;AACJ,QAAI,OAAO,OAAO;AAChB,cAAQ,OAAO;AACf,kBAAY,OAAO,MAChB;AAAA,QACC,CAAC,MAAgF,EAAE,SAAS;AAAA,MAC9F,EACC;AAAA,QACC,CAAC,MAAwB;AA9QnC;AA8QuC;AAAA,YAC3B,GAAG,EAAE;AAAA,YACL,eAAe,EAAE;AAAA,YACjB,SAAS,EAAE,QAAQ,WAAW;AAAA,YAC9B,gBAAe,OAAE,QAAQ,kBAAV,YAA2B;AAAA,YAC1C,aAAY,OAAE,QAAQ,eAAV,YAAwB,EAAE;AAAA,UACxC;AAAA;AAAA,MACF;AAAA,IACJ,OAAO;AACL,cAAQ,CAAC;AAAA,IACX;AAGA,QAAI,OAAsB,CAAC;AAC3B,eAAW,QAAQ,CAAC,QAAQ;AAC1B,YAAM,KAAK,IAAI,QAAQ,CAAC,GACrB,IAAI,CAAC,QAAQ;AACZ,eAAO,IAAI,+CAA6C,MAAM;AAAA,MAChE,CAAC,EACA,OAAO,CAAC,QAAQ,QAAQ,IAAI;AAC/B,YAAM,WAA0B,EAAE,OAAO,OAAO,EAAE,IAAI,CAAC,OAAO;AAAA,QAC5D,SAAU,EAA0B;AAAA,QACpC,SAAU,EAA0B;AAAA,MACtC,EAAE;AACF,WAAK,KAAK,GAAG,QAAQ;AAAA,IACvB,CAAC;AAED,SAAK;AAAA,MACH,GAAG,UAAU,IAAI,CAAC,cAAc;AAAA,QAC9B,SAAS,SAAS;AAAA,QAClB,SAAS,SAAS;AAAA,MACpB,EAAE;AAAA,IACJ;AAEA,WAAO,YAAyB,MAAM,CAAC,MAAM,EAAE,OAAO,EAAE,OAAO,OAAO;AAEtE,WAAO;AAAA,MACL;AAAA,MACA,aAAa;AAAA,QACX;AAAA,QACA,MAAM;AAAA,MACR;AAAA,MACA,YAAY,OAAO;AAAA,MACnB,cAAc;AAAA,QACZ;AAAA,QACA,MAAM;AAAA,MACR;AAAA,MACA,SAAS;AAAA,QACP,KAAK,OAAO;AAAA,QACZ,WAAW,OAAO;AAAA,QAClB,QAAQ,OAAO,UAAU,CAAC;AAAA,QAC1B,MAAM,OAAO,QAAQ,CAAC;AAAA,QACtB,MAAM,OAAO;AAAA,QACb;AAAA,QACA;AAAA,QACA,UAAU,QAAQ,CAAC;AAAA,QACnB,kBAAkB,KAAK,wBAAwB,MAAM;AAAA,QACrD,eAAe,KAAK,iBAAiB,UAAU;AAAA,MACjD;AAAA,IACF;AAAA,EACF;AAAA,EAEA,iBAAiB,YAA6C;AAC5D,WAAO;AAAA,MACL,mBAAmB,WAAW,WAAW,KAAK,WAAW,GAAG,kBAAkB;AAAA,IAChF;AAAA,EACF;AAAA,EAEA,kBAAkB,UAA6C;AAC7D,WAAO;AAAA,MACL;AAAA,MACA;AAAA,QACE,MAAM,CAAC,MAA6B,EAAE;AAAA,MACxC;AAAA,MACA;AAAA,QACE,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa,WAAwE;AACnF,QAAI;AACJ,QAAI,OAAO,cAAc,UAAU;AACjC,UAAI;AACF,iBAAS,KAAK,MAAM,SAAS;AAAA,MAC/B,SAAS,OAAP;AACA,cAAM,IAAI;AAAA,UACR,wBAAwB,gBAAgB,KAAK,KAAK;AAAA,QACpD;AAAA,MACF;AAAA,IACF,OAAO;AACL,eAAS;AAAA,IACX;AACA,WAAO;AAAA,EACT;AAAA,EAEQ,wBAAwB,QAA4C;AA9W9E;AA+WI,UAAM,mBAAmB,oBAAI,IAAY;AAGzC,UAAM,wBAAwB;AAG9B,uBAAO,eAAP,mBAAmB,SAAnB,mBAAyB,QAAQ,CAAC,OAAO;AACvC,uBAAiB,IAAI,GAAG,QAAQ,qBAAqB;AAAA,IACvD;AAGA,WAAO,eAAe,QAAQ,CAAC,aAAa;AA1XhD,UAAAC,KAAAC;AA2XM,OAAAA,OAAAD,MAAA,SAAS,eAAT,gBAAAA,IAAqB,SAArB,gBAAAC,IAA2B,QAAQ,CAAC,OAAO;AACzC,yBAAiB,IAAI,GAAG,QAAQ,qBAAqB;AAAA,MACvD;AAAA,IACF,CAAC;AAED,WAAO,MAAM,KAAK,iBAAiB,OAAO,CAAC;AAAA,EAC7C;AACF;;;AalYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,uBAAe;AAKR,SAAS,iBAAiB,MAAc,MAAM,OAAO,UAAU,IAAgB;AACpF,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;AAEO,SAAS,gBAAgB,MAAyB;AACvD,SAAO;AAAA,IACL;AAAA,IACA,MAAM,CAAC;AAAA,IACP,OAAO,CAAC;AAAA,EACV;AACF;AAEO,SAAS,aAAa,QAAmB,KAAsB;AACpE,MAAI,OAAO,KAAK,UAAU,CAAC,MAAM,EAAE,SAAS,IAAI,IAAI,IAAI,GAAG;AACzD,WAAO,KAAK,KAAK,GAAG;AAAA,EACtB,OAAO;AACL,UAAM,IAAI;AAAA,MACR,2CAA2C,IAAI,WAAW,OAAO;AAAA,IACnE;AAAA,EACF;AACF;AAEO,SAAS,QAAQ,QAAmBC,OAAwB;AACjE,MAAI,OAAO,MAAM,UAAU,CAAC,MAAM,EAAE,SAASA,MAAK,QAAQ,EAAE,QAAQA,MAAK,GAAG,IAAI,GAAG;AACjF,WAAO,MAAM,KAAKA,KAAI;AAAA,EACxB,OAAO;AACL,UAAM,IAAI;AAAA,MACR,sCAAsCA,MAAK,WAAW,OAAO;AAAA,IAC/D;AAAA,EACF;AACF;AAEO,SAAS,cAAc,KAAgB,MAAM,IAAmB;AACrE,MAAI,CAAC,IAAI,MAAM,UAAU,CAAC,IAAI,KAAK,QAAQ;AACzC,WAAO,CAAC;AAAA,EACV;AAEA,SAAO;AAAA,IACL,GAAG,IAAI,MAAM;AAAA,MACX,CAACA,WAAuB;AAAA,QACtB,UAAU,SAAS,KAAK,GAAGA,MAAK,OAAOA,MAAK,MAAM,IAAIA,MAAK,QAAQ,IAAI;AAAA,QACvE,SAASA,MAAK;AAAA,MAChB;AAAA,IACF;AAAA,EACF,EAAE,OAAO,GAAG,IAAI,KAAK,IAAI,CAAC,WAAW,cAAc,QAAQ,SAAS,KAAK,OAAO,IAAI,CAAC,CAAC,CAAC;AACzF;AAcO,SAAS,SACd,QACA,cACA,UAAuB,CAAC,GACxB,gBAAgB,uBAAuB,QAAQ,EAAE,GAC9B;AACnB,QAAM,WAAW,CAAC,UAAU,KAAK,YAAY,IAAI,IAAI;AACrD,QAAM,QAAQ,UAAU,QAAQ,eAAe,QAAQ;AAEvD,WAAS,CAAC,UAAUA,KAAI,KAAK,OAAO;AAClC,QAAI,iBAAAC,QAAG,QAAQ,UAAU,cAAc,OAAO,GAAG;AAC/C,aAAOD;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;AASO,UAAU,UACf,QACA,cACA,UAAuB,CAAC,GACxB,gBAAgB,uBAAuB,QAAQ,EAAE,GACT;AACxC,QAAM,QAAQ,UAAU,QAAQ,aAAa;AAE7C,WAAS,CAAC,UAAUA,KAAI,KAAK,OAAO;AAClC,QAAI,iBAAAC,QAAG,QAAQ,UAAU,cAAc,OAAO,GAAG;AAC/C,YAAM,CAAC,UAAUD,KAAI;AAAA,IACvB;AAAA,EACF;AACF;AAKO,UAAU,UACf,QACA,gBAAgB,uBAAuB,QAAQ,EAAE,GACjD,WAAW,KAC6B;AACxC,WAASA,SAAQ,OAAO,OAAO;AAC7B,UAAM,WAAW,mBAAmBA,KAAI;AACxC,UAAM,CAAC,SAAS,eAAe,QAAQ,GAAGA,KAAI;AAAA,EAChD;AAEA,WAAS,UAAU,OAAO,MAAM;AAC9B,WAAO,UAAU,QAAQ,SAAS,eAAe,OAAO,IAAI,GAAG,WAAW,CAAC;AAAA,EAC7E;AACF;AAEO,SAAS,mBAAmBA,OAAkB;AACnD,SAAO,GAAGA,MAAK,OAAOA,MAAK,MAAM,IAAIA,MAAK,QAAQ;AACpD;AAEA,SAAS,uBAAuB,QAAmB,aAAa,KAAK;AACnE,SAAO,OAAO,QAAQ,OAAO,SAAS,MAAM,OAAO,OAAO;AAC5D;AAEA,SAAS,YAAY,WAA6B;AAChD,SAAO,UACJ,OAAO,CAAC,MAAM,MAAM,MAAM,MAAM,GAAG,EACnC,KAAK,GAAG,EACR,QAAQ,QAAQ,GAAG,EACnB,QAAQ,QAAQ,GAAG;AACxB;AAEO,UAAU,SACf,QACA,gBAAgB,uBAAuB,QAAQ,EAAE,GACjD,WAAW,KAC4B;AACvC,QAAM,CAAC,eAAe,MAAM;AAE5B,WAAS,UAAU,OAAO,MAAM;AAC9B,WAAO,SAAS,QAAQ,SAAS,eAAe,OAAO,IAAI,GAAG,WAAW,CAAC;AAAA,EAC5E;AACF;AAEO,UAAU,SACf,QACA,aACA,UAAuB,CAAC,GACxB,gBAAgB,uBAAuB,QAAQ,EAAE,GACV;AACvC,QAAM,OAAO,SAAS,QAAQ,aAAa;AAE3C,WAAS,CAAC,SAAS,GAAG,KAAK,MAAM;AAC/B,QAAI,iBAAAC,QAAG,QAAQ,SAAS,aAAa,OAAO,GAAG;AAC7C,YAAM,CAAC,SAAS,GAAG;AAAA,IACrB;AAAA,EACF;AACF;AAEO,SAAS,QACd,QACA,aACA,UAAuB,CAAC,GACxB,gBAAgB,uBAAuB,QAAQ,EAAE,GAC/B;AAClB,QAAM,OAAO,SAAS,QAAQ,aAAa;AAE3C,WAAS,CAAC,SAAS,GAAG,KAAK,MAAM;AAC/B,QAAI,iBAAAA,QAAG,QAAQ,SAAS,aAAa,OAAO,GAAG;AAC7C,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;AASO,SAAS,sBACd,QACA,kBACA,cAA2B,CAAC,GACpB;AACR,MAAI,eAAe;AACnB,QAAM,CAAC,SAAS,QAAQ,IAAI,UAAU,gBAAgB;AAEtD,QAAM,OAAO,UAAU,SAAS,QAAQ,OAAO,IAAI,CAAC,CAAC,IAAI,MAAM,CAAU;AACzE,WAAS,CAAC,EAAE,GAAG,KAAK,MAAM;AACxB,UAAM,QAAQ,UAAU,KAAK,UAAU,aAAa,GAAG;AACvD,aAAS,CAAC,EAAED,KAAI,KAAK,OAAO;AAC1B,UAAI,MAAM,OAAO,IAAI,MAAM,QAAQA,KAAI,GAAG,CAAC;AAC3C,sBAAgB;AAAA,IAClB;AAAA,EACF;AAEA,SAAO;AACT;AASO,SAAS,qBACd,QACA,iBACA,cAA2B,CAAC,GACpB;AACR,MAAI,eAAe;AACnB,QAAM,CAAC,SAAS,QAAQ,IAAI,UAAU,eAAe;AAErD,QAAM,OAAO,UAAU,SAAS,QAAQ,OAAO,IAAI,CAAC,CAAC,IAAI,MAAM,CAAU;AACzE,WAAS,CAAC,EAAE,GAAG,KAAK,MAAM;AACxB,UAAM,YAAY,SAAS,KAAK,UAAU,aAAa,GAAG;AAC1D,aAAS,CAAC,EAAE,QAAQ,KAAK,WAAW;AAClC,UAAI,KAAK,OAAO,IAAI,KAAK,QAAQ,QAAQ,GAAG,CAAC;AAC7C,sBAAgB;AAAA,IAClB;AAAA,EACF;AAEA,SAAO;AACT;AAOA,SAAS,UAAU,UAAkB;AACnC,QAAM,QAAQ,SAAS,MAAM,GAAG;AAChC,QAAM,WAAW,MAAM,IAAI,KAAK;AAChC,SAAO,CAAC,SAAS,GAAG,KAAK,GAAG,QAAQ;AACtC;;;AChPA,SAAS,YAAY,MAAkD;AACrE,QAAM,MAAM,iBAAiB,UAAU,CAAC,WAAW,OAAO,QAAQ,IAAI,KAAK,CAAC;AAC5E,MAAI,MAAM,GAAG;AACX,WAAO;AAAA,EACT;AACA,SAAO,CAAC,KAAK,iBAAiB,IAAI;AACpC;AAEO,IAAM,cAAc,CAAC,WAAyC;AACnE,QAAM,MAA8C,CAAC;AACrD,QAAM,MAAM,OAAO,OAAO,CAAC,WAA6C,UAAU;AAChF,UAAM,UAAU,MAAM,aAAa;AACnC,QAAI,CAAC,UAAU,UAAU;AAEvB,gBAAU,WAAW,CAAC;AAAA,IACxB;AACA,UAAM,MAAM,YAAY,MAAM,QAAoB;AAClD,UAAM,OAAuB;AAAA,MAC3B;AAAA,IACF;AACA,QAAI,KAAK;AACP,YAAM,CAAC,WAAW,MAAM,IAAI;AAC5B,YAAM,OAAO,OAAO,QAAQ,MAAM,QAAoB;AACtD,UAAI,IAAI,UAAU;AAChB,YAAI,IAAI,SAAS,eAAe,QAAW;AACzC,cAAI,IAAI,SAAS,aAAa,MAAM;AAClC,gBAAI,SAAS,aAAa;AAAA,UAC5B;AAAA,QACF,OAAO;AACL,cAAI,SAAS,aAAa;AAAA,QAC5B;AAAA,MACF,OAAO;AACL,YAAI,WAAW,CAAC;AAChB,YAAI,SAAS,aAAa;AAAA,MAC5B;AACA,WAAK,YAAY;AAAA,IACnB;AAEA,cAAU,SAAS,KAAK,IAAI;AAC5B,WAAO;AAAA,EACT,GAAG,CAAC,CAAC;AAEL,QAAM,SAAyB,CAAC;AAChC,SAAO,KAAK,GAAG,EAAE,QAAQ,CAAC,QAAQ;AAChC,UAAM,SAAuC,CAAC;AAC9C,QAAI,KAAK,QAAQ,CAAC,SAAS;AACzB,UAAIE,KAAY,KAAK,MAAM;AAC3B,UAAI,KAAK,cAAc,QAAW;AAChC,QAAAA,KAAI,iBAAiB,KAAK,WAAW,IAAI,KAAK,KAAK;AAEnD,aAAK,MAAM,WAAWA;AAAA,MACxB;AACA,UAAI,CAAC,OAAOA,KAAI;AACd,eAAOA,MAAK,CAAC;AAAA,MACf;AACA,aAAOA,IAAG,KAAK,KAAK,KAAK;AAAA,IAC3B,CAAC;AACD,WAAO,KAAK,GAAG,OAAO,KAAK,MAAM,EAAE,IAAI,CAACA,OAAM,OAAOA,GAAE,CAAC;AAAA,EAC1D,CAAC;AAED,SAAO;AACT;AASO,IAAM,eAAN,MAA4C;AAAA,EAGjD,YAAYC,WAAoC,CAAC,GAAG;AAFpD,wBAAQ;AAGN,SAAK,UAAUA;AAAA,EACjB;AAAA,EAEA,MAAM,IACJ,IACA,mBAAgC;AAAA,IAC9B;AAAA,IACA,QAAQ,CAAC;AAAA,IACT,UAAU,CAAC;AAAA,IACX,aAAa,CAAC;AAAA,EAChB,GACA;AACA,UAAM,YAAY;AAElB,UAAM,iBAA8B,MAAM,KAAK,QAAQ;AAAA,MACrD,OAAO,yBAA+C,WAAW;AAC/D,cAAM,oBAAoB,MAAM;AAChC,eAAO,OAAO,iBAAiB;AAAA,MACjC;AAAA,MACA,QAAQ,QAAQ,SAAS;AAAA,IAC3B;AAEA,UAAM,SAAS,YAAY,eAAe,MAAM;AAEhD,WAAO;AAAA,MACL;AAAA,IACF;AAAA,EACF;AAAA,EAEA,aAAa;AACX,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,UAAU,QAAgC;AACxC,SAAK,QAAQ,KAAK,MAAM;AAAA,EAC1B;AACF;;;AC/GO,IAAM,cAAN,MAA0C;AAAA,EAQ/C,YAAY,mBAAiC,CAAC,GAAG;AAPjD,wBAAQ,oBAAiC,CAAC;AAE1C,wBAAQ,cAAqE;AAAA,MAC3E,yBAAoB,CAAC,QAAgB;AAAA,MACrC,qBAAkB,CAAC,SAAkC,KAAK,UAAU,IAAI;AAAA,IAC1E;AAGE,SAAK,mBAAmB;AAAA,EAC1B;AAAA,EAMA,KAAK,mBAAiC,CAAC,GAAW;AAChD,UAAM,SAAS,oBAAoB,KAAK;AACxC,QAAI,OAAO,UAAU,GAAG;AACtB,aAAO;AAAA,IACT;AAEA,UAAM,oBAAoB,OAAO,IAAI,CAAC,UAAU;AAC9C,aAAO;AAAA,QACL,MAAM,MAAM;AAAA,QACZ,MAAM,MAAM;AAAA,QACZ,SAAS,MAAM;AAAA,QACf,WAAW,KAAK,qBAAqB,MAAM,WAAW,MAAM;AAAA,MAC9D;AAAA,IACF,CAAC;AAED,UAAM,kBAA4B,CAAC;AAEnC,WAAO,kBAAkB,SAAS,GAAG;AACnC,UAAI,gBAAgB;AACpB,eAAS,QAAQ,GAAG,QAAQ,kBAAkB,QAAQ,SAAS;AAC7D,YAAI,kBAAkB,OAAO,UAAU,UAAU,GAAG;AAClD,0BAAgB;AAChB;AAAA,QACF;AAAA,MACF;AAEA,UAAI,kBAAkB,eAAe,UAAU,SAAS,GAAG;AACzD,cAAM,IAAI;AAAA,UACR;AAAA,QACF;AAAA,MACF;AAEA,YAAM,EAAE,MAAM,SAAS,KAAK,IAAI,kBAAkB;AAClD,YAAM,kBAAkB,KAAK,eAAe,MAAM,OAAO;AACzD,UAAI,iBAAiB;AACnB,wBAAgB,KAAK,GAAG;AAAA,CAAmB;AAAA,MAC7C;AAEA,wBAAkB,OAAO,eAAe,CAAC;AACzC,UAAI,CAAC,kBAAkB,KAAK,CAAC,OAAO,GAAG,SAAS,IAAI,GAAG;AACrD,0BAAkB;AAAA,UAEhB,CAAC,OAAO;AAEN,eAAG,YAAY,GAAG,UAAU,OAAO,CAAC,UAAU,UAAU,IAAI;AAAA,UAC9D;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,WAAO,gBAAgB,KAAK,IAAI;AAAA,EAClC;AAAA,EAEA,eAAe,MAAc,SAA0B;AACrD,QAAI,CAAC,SAAS;AACZ,aAAO;AAAA,IACT;AACA,QAAI,MAAM,QAAQ,OAAO,GAAG;AAC1B,aAAO,QAAQ,IAAI,CAAC,gBAAgB,KAAK,eAAe,MAAM,WAAW,CAAC,EAAE,KAAK,IAAI;AAAA,IACvF;AAEA,QAAI,CAAC,KAAK,WAAW,OAAO;AAC1B,YAAM,IAAI;AAAA,QACR,sCAAsC;AAAA,MACxC;AAAA,IACF;AAEA,WAAO,KAAK,WAAW,MAAM,OAAO;AAAA,EACtC;AAAA,EAIQ,qBAAqB,WAAqB,QAAsB;AACtE,WAAO,UAAU,OAAO,CAAC,cAAc,OAAO,KAAK,CAAC,UAAU,MAAM,SAAS,SAAS,CAAC;AAAA,EACzF;AACF;;;AC/EO,SAAS,oBACd,UAKI;AAAA,EACF,SAAS,CAAC;AAAA,EACV,gBAAgB,CAAC;AACnB,GACgB;AAChB,QAAM,iBAAiB,IAAI,aAAa,QAAQ,OAAO;AACvD,QAAM,SAAS,IAAI,YAAY;AAE/B,QAAM,iBAAiB,OAAO,UAA6C;AACzE,UAAM,iBAAiB,QAAQ,gBAAgB;AAC/C,QAAI,eAAe,WAAW,EAAE,UAAU,GAAG;AAC3C,YAAM,IAAI;AAAA,QACR;AAAA,MACF;AAAA,IACF;AAEA,QAAI,QAAsB,CAAC;AAE3B,UAAM,EAAE,OAAO,IAAI,MAAM,eAAe,IAAI,OAAO;AAAA,MACjD,IAAI;AAAA,MACJ,QAAQ,CAAC;AAAA,MACT,UAAU,CAAC;AAAA,MACX,aAAa,QAAQ,eAAe,CAAC;AAAA,IACvC,CAAC;AAED,WAAO,QAAQ,CAAC,kBAAkB;AAChC,YAAM,UAAU,OAAO,KAAK,aAAa;AACzC,YAAMC,QAAO;AAAA,QACX,cAAc,GAAG,aAAa;AAAA,QAC9B,cAAc,GAAG;AAAA,QACjB;AAAA,MACF;AACA,YAAM,KAAKA,KAAI;AAAA,IACjB,CAAC;AAED,QAAI,QAAQ,eAAe,SAAS,GAAG;AACrC,cAAQ,MAAM,IAAI,CAACA,UAAS;AAC1B,YAAI,EAAE,SAAS,KAAK,MAAM,KAAK,IAAIA;AACnC,gBAAQ,eAAe,QAAQ,CAAC,cAAc;AAC5C,oBAAU,UAAU,SAAS,MAAM,IAAI;AAAA,QACzC,CAAC;AAED,eAAO,iBAAiBA,MAAK,MAAM,MAAM,OAAO;AAAA,MAClD,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,MACL;AAAA,IACF;AAAA,EACF;AAEA,QAAM,qBAAqB,OAAO,WAAkE;AAElG,UAAM,eAA8B,IAAI,aAAa;AACrD,UAAM,cAA4B,aAAa,MAAM,MAAM;AAE3D,UAAM,gBAAgB,YAAY,WAAW;AAC7C,UAAM,EAAE,MAAM,IAAI,MAAM,eAAe,aAAa;AAEpD,UAAM,MAAM,gBAAgB,cAAc,UAAU;AACpD,UAAM,QAAQ,CAACA,UAAS,QAAQ,KAAKA,KAAI,CAAC;AAE1C,WAAO;AAAA,EACT;AAEA,QAAM,iBAAiB,CAAC,QAAsC,aAAqB;AACjF,UAAM,QAAsB,CAAC;AAE7B,WAAO,KAAK,MAAM,EAAE,QAAQ,CAAC,YAAY;AACvC,YAAM,gBAAgB,OAAO;AAC7B,YAAM,UAAU,OAAO,KAAK,aAAa;AACzC,YAAMA,QAAO;AAAA,QACX,cAAc,GAAG,aAAa;AAAA,QAC9B,cAAc,GAAG;AAAA,QACjB;AAAA,MACF;AACA,YAAM,KAAKA,KAAI;AAAA,IACjB,CAAC;AAED,WAAO;AAAA,EACT;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA,WAAW,eAAe,UAAU,KAAK,cAAc;AAAA,EACzD;AACF;;;ACxDO,IAAM,iBAAN,MAAgD;AAAA,EAyBrD,YAAY,gBAA2C;AAvBvD,wBAAQ;AAGR,wBAAQ;AAGR,wBAAQ;AAGR,wBAAQ;AAGR,wBAAQ;AAGR,wBAAQ;AAGR,wBAAS;AAGT,wBAAS;AAGP,QAAI,uBAAuB;AAC3B,QAAI,OAAO,eAAe,4BAA4B,YAAY;AAChE,6BAAuB,eAAe,wBAAwB,cAAc;AAAA,IAC9E;AACA,UAAM;AAAA,MACJ;AAAA,MACA,SAAAC;AAAA,MACA;AAAA,MACA,eAAe,IAAI,aAAa;AAAA,MAChC,uBAAuB,CAAC;AAAA,MACxB,wBAAwB,CAAC;AAAA,MACzB,eAAe;AAAA,MACf,mBAAmB,CAAC;AAAA,IACtB,IAAI;AACJ,SAAK,WAAW;AAChB,SAAK,UAAUA;AACf,SAAK,iBAAiB;AACtB,SAAK,eAAe;AACpB,SAAK,uBAAuB;AAC5B,SAAK,wBAAwB;AAC7B,SAAK,eAAe;AACpB,SAAK,mBAAmB;AAAA,EAC1B;AAAA,EAEA,MAAM,gBAAgB,gBAAuE;AA7G/F;AA+GI,UAAM,EAAE,aAAa,IAAI;AAEzB,QAAI,SACF,OAAO,mBAAmB,WAAW,KAAK,MAAM,cAAc,IAAI;AAIpE,eAAW,gBAAgB,KAAK,sBAAsB;AAEpD,eAAS,MAAM,aAAa,MAAM;AAAA,IACpC;AAGA,QAAI,CAAC,aAAa,SAAS,MAAM,GAAG;AAClC,YAAM,IAAI,mBAAmB,mBAAmB;AAAA,IAClD;AAIA,UAAM,cAA4B,aAAa,MAAM,MAAM;AAC3D,YAAQ,IAAI,oCAAoC,WAAW;AAC3D,UAAM,cAAc,MAAM,KAAK,SAAS,iBAAiB,WAAW;AACpE,YAAQ,IAAI,oCAAoC,WAAW;AAC3D,QAAI,cAA6B,CAAC;AAElC,UAAM,WAAW,KAAK,qBAAqB;AAAA,MACzC,kBAAkB;AAAA,QAChB,gBAAe,gDAAa,YAAb,mBAAsB;AAAA,QACrC,UAAU,KAAK;AAAA,MACjB;AAAA,IACF,CAAC;AACD,YAAQ,IAAI,KAAK,UAAU,QAAQ,CAAC;AACpC,YAAQ,IAAI,mCAAmC,KAAK,UAAU,WAAW,CAAC;AAI1E,UAAM,uBAAsC,MAAM,QAAQ;AAAA,MACxD,YAAY,WAAW,IAAI,OAAO,kBAAkB;AAClD,YAAI;AACJ,YAAI;AACJ,gBAAQ,IAAI,qCAAqC,KAAK,UAAU,aAAa,CAAC;AAC9E,gBAAQ,IAAI,4BAA4B,KAAK,UAAU,KAAK,SAAS,MAAM,MAAM,IAAI,CAAC;AAEtF,YAAI,cAAc,kBAAkB,QAAQ;AAC1C,oBAAU,SAAS;AACnB,iBAAO,KAAK,SAAS,MAAM,MAAM;AAAA,QACnC,OAAO;AACL,oBAAU,SAAS;AACnB,iBAAO,CAAC;AAAA,QACV;AACA,gBAAQ,IAAI,4BAA4B,KAAK,UAAU,KAAK,SAAS,MAAM,MAAM,IAAI,CAAC;AACtF,gBAAQ,IAAI,+BAA+B,KAAK,UAAU,QAAQ,CAAC;AACnE,YAAI;AACJ,YAAI;AACF,cAAI,OAAO,MAAM,QAAQ,eAAe,aAAa;AACrD,kBAAQ,KAAK;AAAA,QACf,SAAS,GAAP;AACA,kBAAQ,IAAI,IAAI,CAAC;AAAA,QACnB;AACA,eAAO;AAAA,UACL,YAAY,cAAc;AAAA,UAC1B;AAAA,UACA;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AACA,YAAQ,IAAI,4CAA4C,KAAK,UAAU,oBAAoB,CAAC;AAC5F,kBAAc,YAAY,OAAO,oBAAoB;AACrD,YAAQ,IAAI,mCAAmC,KAAK,UAAU,WAAW,CAAC;AAG1E,QAAI,YAAY,gBAAgB,SAAS,QAAQ;AAC/C,YAAM,EAAE,MAAM,IAAI,MAAM,SAAS,OAAO,eAAe,YAAY,YAAY;AAC/E,kBAAY,KAAK;AAAA,QACf,MAAM,KAAK,SAAS,MAAM,OAAO;AAAA,QACjC;AAAA,MACF,CAAC;AAAA,IACH;AAGA,QAAI,YAAY,WAAW,SAAS,OAAO;AACzC,YAAM,EAAE,MAAM,IAAI,MAAM,SAAS,MAAM,eAAe,YAAY,OAAO;AAEzE,kBAAY,KAAK;AAAA,QACf,MAAM,KAAK,SAAS,MAAM,MAAM;AAAA,QAChC;AAAA,MACF,CAAC;AAAA,IACH;AAGA,QAAI,SAAS,WAAW;AACtB,YAAM,EAAE,MAAM,IAAI,MAAM,SAAS,UAAU,eAAe,WAAW;AAErE,kBAAY,KAAK;AAAA,QACf,MAAM,KAAK,SAAS,MAAM,UAAU;AAAA,QACpC;AAAA,MACF,CAAC;AAAA,IACH;AAGA,QAAI,SAAS,aAAa;AACxB,YAAM,EAAE,MAAM,IAAI,MAAM,SAAS,YAAY,eAAe,WAAW;AAEvE,kBAAY,KAAK;AAAA,QACf,MAAM,KAAK,SAAS,MAAM,YAAY;AAAA,QACtC;AAAA,MACF,CAAC;AAAA,IACH;AAGA,QAAI,YAAY,WAAW,SAAS,aAAa,KAAK,SAAS,MAAM,WAAW;AAC9E,YAAM,EAAE,MAAM,IAAI,MAAM,SAAS,UAAU,eAAe,YAAY,OAAO;AAE7E,kBAAY,KAAK;AAAA,QACf,MAAM,KAAK,SAAS,MAAM,UAAU;AAAA,QACpC;AAAA,MACF,CAAC;AAAA,IACH;AAGA,QAAI,YAAY,eAAe,SAAS,SAAS,KAAK,SAAS,MAAM,OAAO;AAC1E,YAAM,EAAE,MAAM,IAAI,MAAM,SAAS,MAAM,eAAe,YAAY,WAAW;AAE7E,kBAAY,KAAK;AAAA,QACf,MAAM,KAAK,SAAS,MAAM,MAAM;AAAA,QAChC;AAAA,MACF,CAAC;AAAA,IACH;AAGA,QAAI,SAAS,QAAQ,KAAK,SAAS,MAAM,MAAM;AAC7C,YAAM,EAAE,MAAM,IAAI,MAAM,SAAS,KAAK,eAAe,YAAY,OAAO;AAExE,kBAAY,KAAK;AAAA,QACf,MAAM,KAAK,SAAS,MAAM,KAAK;AAAA,QAC/B;AAAA,MACF,CAAC;AAAA,IACH;AAGA,QAAI,YAAY,WAAW,SAAS,aAAa;AAC/C,YAAM,EAAE,MAAM,IAAI,MAAM,SAAS,YAAY,eAAe,YAAY,OAAO;AAE/E,kBAAY,KAAK;AAAA,QACf,MAAM,KAAK,SAAS,MAAM,YAAY;AAAA,QACtC;AAAA,MACF,CAAC;AAAA,IACH;AAGA,QAAI,YAAY,WAAW,SAAS,WAAW;AAC7C,YAAM,EAAE,MAAM,IAAI,MAAM,SAAS,UAAU,eAAe,YAAY,OAAO;AAE7E,kBAAY,KAAK;AAAA,QACf,MAAM,KAAK,SAAS,MAAM,UAAU;AAAA,QACpC;AAAA,MACF,CAAC;AAAA,IACH;AAGA,QAAI,YAAY,WAAW,SAAS,aAAa;AAC/C,YAAM,EAAE,MAAM,IAAI,MAAM,SAAS,YAAY,eAAe,YAAY,OAAO;AAE/E,kBAAY,KAAK;AAAA,QACf,MAAM,KAAK,SAAS,MAAM,YAAY;AAAA,QACtC;AAAA,MACF,CAAC;AAAA,IACH;AAGA,QAAI,YAAY,WAAW,SAAS,MAAM;AACxC,YAAM,EAAE,MAAM,IAAI,MAAM,SAAS,KAAK,eAAe,YAAY,OAAO;AACxE,kBAAY,KAAK;AAAA,QACf,MAAM,KAAK,SAAS,MAAM,KAAK;AAAA,QAC/B;AAAA,MACF,CAAC;AAAA,IACH;AAGA,UAAM,KAAK,mBAAmB,UAAU,aAAa,WAAW;AAGhE,UAAM,qBAAoB,sDAAa,YAAb,mBAAsB,kBAAtB,mBAAqC;AAE/D,YAAQ,IAAI,uCAAuC,KAAK,UAAU,WAAW,CAAC;AAC9E,gBAAY,QAAQ,CAAC,eAAe;AAClC,UAAI,YAAY,eAAe,aAAa,WAAW,IAAI;AAE3D,UAAI,WAAW,cAAc,CAAC,mBAAmB;AAC/C,cAAM,MAAM,gBAAgB,WAAW,UAAU;AACjD,qBAAa,WAAW,GAAG;AAC3B,oBAAY;AAAA,MACd;AACA,iBAAW,MAAM,QAAQ,CAACC,UAAS,QAAQ,WAAWA,KAAI,CAAC;AAAA,IAC7D,CAAC;AAGD,QAAI,cAAc;AAClB,eAAW,wBAAwB,KAAK,uBAAuB;AAE7D,oBAAc,MAAM,qBAAqB,aAAa,QAAQ,gBAAgB;AAAA,QAC5E,UAAU,KAAK;AAAA,QACf;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AAAA,EAEQ,qBAAqB,mBAA4C,CAAC,GACzC;AAC/B,UAAM,WAA2C,CAAC;AAElD,WAAO,KAAK,KAAK,OAAO,EAAE,QAAQ,CAAC,eAAe;AAChD,UAAI,KAAK,QAAQ,YAAY,SAAS,GAAG;AACvC,cAAM,UAAqC,CAAC;AAC5C,YAAI,KAAK,SAAS,MAAM,eAAe,KAAK,SAAS,MAAM,YAAY,UAAU;AAC/E,kBAAQ,eAAe,KAAK,SAAS,MAAM,YAAY;AAAA,QACzD;AACA,iBAAS,cAAc,oBAAoB;AAAA,UACzC,SAAS,KAAK,QAAQ;AAAA,UACtB,gBAAgB,KAAK;AAAA,UACrB,aAAa;AAAA,YAEX,cAAc,KAAK;AAAA,YACnB,oBAAoB;AAAA,YACpB,mBAAmB;AAAA,YACnB,GAAG,KAAK;AAAA,YACR,GAAG;AAAA,UACL;AAAA,UACA,GAAG;AAAA,QACL,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAED,WAAO;AAAA,EACT;AAAA,EAEA,MAAc,mBACZ,UACA,aACA,aACA;AACA,eAAW,YAAY,KAAK,SAAS,OAAO;AAC1C,UAAI,CAAC,kBAAkB,QAAQ,GAAG;AAChC,cAAM,EAAE,MAAM,IAAI,MAAM,SAAS,UAAU,eAAe,WAAW;AACrE,oBAAY,KAAK;AAAA,UACf,MAAM,KAAK,SAAS,MAAM,UAAU;AAAA,UACpC;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACF;AAEO,SAAS,qBAAqB,aAAyD;AAC5F,SAAO,IAAI,eAAe,WAAW;AACvC;AAEA,SAAS,eAAe,MAAiB,MAA2B;AAClE,MAAI,UAAqB;AACzB,OAAK,QAAQ,CAAC,MAAM;AAClB,UAAM,QAAQ,QAAQ,KAAK,KAAK,CAAC,MAAM,EAAE,SAAS,CAAC;AACnD,QAAI,OAAO;AACT,gBAAU;AAAA,IACZ,OAAO;AACL,YAAM,SAAS,gBAAgB,CAAC;AAChC,mBAAa,SAAS,MAAM;AAC5B,gBAAU;AAAA,IACZ;AAAA,EACF,CAAC;AAED,SAAO;AACT;;;AChYA,gBAA2B;;;ACA3B,eAA0B;AAC1B,kBAAqB;AASd,IAAM,cAAc,OACzB,QACA,aACA,sBAAsB,MACtB,KAAkB,aACA;AAClB,QAAM,EAAE,MAAM,OAAO,KAAK,IAAI;AAE9B,QAAM,aAAa,0BAAsB,kBAAK,aAAa,IAAI,IAAI;AAEnE,MAAI,CAAC,GAAG,WAAW,UAAU,GAAG;AAC9B,UAAM,gBAAgB,YAAY,EAAE;AAAA,EACtC;AAEA,QAAM,WAAW;AAAA,IACf,mBAAmB,YAAY,OAAO,EAAE;AAAA,IACxC,wBAAwB,YAAY,MAAM,EAAE;AAAA,EAC9C;AAEA,QAAM,QAAQ,IAAI,QAAQ;AAC5B;AAEA,IAAM,qBAAqB,OACzB,YACA,OACA,OACkB;AAClB,QAAM,WAAW,MAAM,IAAI,CAACC,UAAS;AACnC,UAAM,WAAWA,MAAK,MAAM,GAAGA,MAAK,QAAQA,MAAK,QAAQA,MAAK;AAC9D,UAAM,eAAW,kBAAK,YAAY,QAAQ;AAC1C,WAAO,mBAAmB,UAAUA,MAAK,SAAS,QAAQ,EAAE;AAAA,EAC9D,CAAC;AAED,QAAM,QAAQ,IAAI,QAAQ;AAC5B;AAEA,IAAM,0BAA0B,OAC9B,YACA,YACA,OACkB;AAClB,QAAM,WAAW,WAAW,IAAI,CAAC,cAAc;AAC7C,WAAO,YAAY,WAAW,YAAY,MAAM,EAAE;AAAA,EACpD,CAAC;AAED,QAAM,QAAQ,IAAI,QAAQ;AAC5B;AAEA,IAAM,kBAAkB,CAAC,WAAmB,OAAmC;AAC7E,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,OAAG,MAAM,WAAW,EAAE,WAAW,KAAK,GAAG,CAAC,QAAQ;AAChD,YAAM,OAAO,GAAG,IAAI,QAAQ;AAAA,IAC9B,CAAC;AAAA,EACH,CAAC;AACH;AAEA,IAAM,qBAAqB,CACzB,UACA,aACA,WAAW,QACX,OACkB;AAClB,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,OAAG,UAAU,UAAU,aAAa,EAAE,SAAqC,GAAG,CAAC,QAAQ;AACrF,YAAM,OAAO,GAAG,IAAI,QAAQ;AAAA,IAC9B,CAAC;AAAA,EACH,CAAC;AACH;;;AD1DO,IAAM,sBAA4E,CACvF,SAA6B,CAAC,MACX;AACnB,MAAI,EAAE,SAAS,aAAa,KAAK,IAAI;AACrC,QAAM,EAAE,KAAK,UAAU,IAAI;AAE3B,QAAM,aAAa,MAAiB;AAClC,QAAI,CAAC,SAAS;AACZ,YAAM,IAAI,eAAe,gBAAgB;AAAA,IAC3C;AACA,WAAO;AAAA,EACT;AACA,QAAM,aAAa,CAAC,iBAAkC;AACpD,cAAU;AAAA,EACZ;AAEA,QAAM,gBAAgB,MAAc;AAClC,WAAO;AAAA,EACT;AACA,QAAM,gBAAgB,CAAC,SAAuB;AAC5C,iBAAa;AAAA,EACf;AAEA,QAAM,UAAU,OAAO,UAA8B,CAAC,MAAM;AA1C9D;AA2CI,UAAM,mBAAmB,QAAQ,WAAW;AAC5C,QAAI,CAAC,kBAAkB;AACrB,YAAM,IAAI,eAAe,gBAAgB;AAAA,IAC3C;AAEA,UAAM,oBAAoB,QAAQ,cAAc;AAChD,UAAM,sBAAsB,QAAQ,eAAe,OAAO;AAC1D,UAAM,uBAAsB,aAAQ,wBAAR,YAA+B,OAAO;AAElE,QAAI,qBAAqB;AACvB,uBAAiB,OAAO;AAAA,IAC1B;AAEA,QAAI;AACF,YAAM,YAAY,kBAAkB,mBAAmB,qBAAqB,EAAE;AAC9E,aAAO,EAAE,SAAS,MAAM,SAAS,kBAAkB;AAAA,IACrD,SAAS,OAAP;AACA,YAAM,IAAI,eAAe,gBAAgB,KAAK,KAAK,cAAc;AAAA,IACnE;AAAA,EACF;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;;;AEvEA,mBAAkB;AAIX,IAAM,gBAAgB,MAAe;AAC1C,SACE,OAAO,YAAY,YACnB,OAAO,QAAQ,aAAa,YAC5B,OAAO,QAAQ,SAAS,SAAS;AAErC;AAEO,IAAM,iBAAiB,CAC5B,eACA,SACA,YACS;AACT,MAAI,CAAC,cAAc,GAAG;AACpB,UAAM,IAAI,MAAM,0DAA0D;AAAA,EAC5E;AAIA,QAAM,KAAK,QAAQ;AAGnB,QAAM,OAAO,QAAQ;AAErB,MAAI,CAAC,GAAG,WAAW,aAAa,GAAG;AACjC,OAAG,UAAU,eAAe,EAAE,WAAW,KAAK,CAAC;AAAA,EACjD;AAEA,QAAM,UAAU,KAAK,KAAK,eAAe,GAAG,aAAa;AAEzD,QAAM,cAAc,GAAG,kBAAkB,OAAO;AAChD,cAAY,MAAM,OAAO;AACzB,cAAY,IAAI;AAClB;AAEO,IAAM,qBAAqB,OAAO,YAA2C;AAClF,MAAI,MAAM,IAAI,aAAAC,QAAM;AACpB,QAAM,iBAAiB,SAAS,KAAK,IAAI;AACzC,QAAM,UAAU,cAAc,IAAI,eAAe;AACjD,UAAQ,IAAI,0BAA0B,OAAO;AAE7C,SAAO,IAAI,cAAc,EAAE,MAAM,QAAQ,CAAC;AAC5C;AAEA,IAAM,mBAAmB,CAAC,QAAmB,cAAqB,eAAe,UAAU;AACzF,QAAM,YAAY,eAAe,eAAe,aAAa,OAAO,OAAO,IAAI;AAC/E,MAAI,cAAc,MAAM;AACtB,WAAO,MAAM,QAAQ,CAACC,UAAqB;AAEzC,YAAM,UAAU,CAAC;AACjB,YAAM,WAAWA,MAAK,MAAM,GAAGA,MAAK,QAAQA,MAAK,QAAQA,MAAK;AAC9D,gBAAU,KAAK,UAAUA,MAAK,SAAS,OAAO;AAAA,IAChD,CAAC;AAED,WAAO,KAAK,QAAQ,CAAC,cAAyB;AAC5C,uBAAiB,WAAW,SAAS;AAAA,IACvC,CAAC;AAAA,EACH;AAEA,SAAO;AACT;;;AC5DA,wBAAuB;AAgBhB,IAAM,qBAAuE,CAClF,SAA2B,CAAC,MACX;AACjB,MAAI,EAAE,SAAS,WAAW,IAAI;AAE9B,QAAM,aAAa,MAAM;AACzB,QAAM,aAAa,CAAC,iBAA4B;AAC9C,cAAU;AAAA,EACZ;AAEA,QAAM,gBAAgB,MAAM;AAC5B,QAAM,gBAAgB,CAAC,SAAiB;AACtC,iBAAa;AAAA,EACf;AAEA,QAAM,UAAU,OAAO,UAA4B,CAAC,MAAM;AACxD,UAAM,mBAAmB,QAAQ,WAAW;AAC5C,QAAI,CAAC,kBAAkB;AACrB,YAAM,IAAI,eAAe,gBAAgB;AAAA,IAC3C;AAEA,UAAM,UAAU,QAAQ,eAAe,OAAO,eAAe,iBAAiB;AAE9E,QAAI;AACF,cAAQ,IAAI,iCAAiC,gBAAgB;AAC7D,YAAM,aAAa,MAAM,mBAAmB,gBAAgB;AAC5D,cAAQ,IAAI,2BAA2B,UAAU;AACjD,cAAQ,IAAI,8BAA8B,cAAc,CAAC;AAEzD,UAAI,cAAc,GAAG;AAEnB,cAAM,oBAAoB,QAAQ,cAAc;AAChD,YAAI,mBAAmB;AACrB,gBAAM,eAAe,mBAAmB,YAAY,OAAO;AAAA,QAC7D;AAAA,MACF,OAAO;AAGL,sCAAO,YAAoB,GAAG,aAAa;AAAA,MAC7C;AAEA,aAAO,EAAE,SAAS,MAAM,SAAS,WAAW;AAAA,IAC9C,SAAS,OAAP;AACA,YAAM,IAAI,eAAe,gBAAgB,KAAK,KAAK,cAAc;AAAA,IACnE;AAAA,EACF;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;;;AC1EA,oBAAwC;AAqBxC,IAAM,qBAAqB,CAAC,OAAO,aAAa,MAAM,YAAY,MAAM;AACxE,IAAM,sBAAsB;AAE5B,SAAS,gBAAgB,MAAoD;AAC3E,QAAM,SAAwC,CAAC;AAE/C,QAAM,SAAS,CAAC,KAAa,QAAqB;AAChD,QAAI,CAAC,OAAO,MAAM;AAChB,aAAO,OAAO,CAAC;AAAA,IACjB;AACA,WAAO,KAAK,KAAK,GAAG;AAAA,EACtB;AAEA,OAAK,QAAQ,CAAC,QAAQ;AACpB,QAAI,IAAI,8CAA4C;AAClD,aAAO,GAAI,IAA4B,aAAa,IAAI,OAAO,IAAI,IAAI,SAAS,MAAM,GAAG;AAAA,IAC3F,OAAO;AACL,UAAI,UAAU;AAEd,UAAI,IAAI,QAAQ,mBAAmB,QAAQ,IAAI,IAAI,IAAI,GAAG;AACxD,kBAAU,IAAI;AAAA,MAChB;AACA,UAAI,QAAQ,UAAU,GAAG,CAAC,MAAM,KAAK;AACnC,kBAAU,QAAQ,UAAU,CAAC;AAAA,MAC/B;AACA,aAAO,GAAI,IAA4B,UAAU,UAAU,IAAI,YAAY,MAAM,GAAG;AAAA,IACtF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAkBA,SAAS,wBAAwB,MAA+B;AAC9D,SAAO,KAAK,aAAa,KAAK;AAChC;AAEA,SAAS,mBAAmB,KAA0B;AACpD,MAAI,IAAI,eAAe;AACrB,WACE,IAAI,cACJ,IAAI,iBACJ,cAAc,gEAAgE;AAAA,EAElF;AAEA,MAAI,CAAC,IAAI,SAAS;AAChB,WACE,IAAI,iBACJ,IAAI,cACJ,cAAc,uDAAuD;AAAA,EAEzE;AAEA,SACE,IAAI,cACJ,UAAM;AAAA,QACJ,mBAAI,KAAK,YAAY,SACnB,mBAAI,KAAK,SAAS,KAClB,cAAc,4CAA4C;AAAA,EAC9D;AAEJ;AAEA,SAAS,cAAc,KAAoB;AACzC,QAAM,IAAI,MAAM,GAAG;AACrB;AAEA,SAAS,mBACP,KACA,MACA,gBACA,cACc;AAEd,MAAI,CAAC,OAAO,QAAQ,eAAe,QAAQ,QAAQ;AAEjD,WAAO,CAAC;AAAA,EACV;AAEA,QAAM,SAAuB,CAAC;AAE9B,QAAM,cAA2C,CAAC;AAClD,QAAM,qBAA+B,CAAC;AAEtC,QAAM,WAA8B,KAAK,IAAI,CAAC,QAAQ;AACpD,UAAM,OAAwB;AAAA,MAC5B,YAAY,mBAAmB,GAAG;AAAA,MAClC,WAAW,CAAC,IAAI;AAAA,MAChB,SAAS,IAAI,WAAW;AAAA,MACxB,gBAAgB,IAAI,iBAAiB;AAAA,MACrC,QAAQ;AAAA,IACV;AAGA,QAAI,KAAK,WAAW;AAClB,UAAI,mBAAmB,QAAQ,KAAK,UAAU,IAAI,GAAG;AACnD,2BAAmB,KAAK,KAAK,UAAU;AAAA,MACzC;AAAA,IACF;AAEA,QAAI,CAAC,KAAK,SAAS;AACjB,UAAI,KAAK,mBAAmB,KAAK,YAAY;AAC3C,aAAK,iBAAiB;AAAA,MACxB;AAEA,UAAI,KAAK,WAAW;AAClB,aAAK,YAAY,KAAK,kBAAkB,KAAK;AAC7C,aAAK,aAAa;AAAA,MACpB;AAEA,UAAI,KAAK,gBAAgB;AACvB,aAAK,YAAY,KAAK;AACtB,aAAK,iBAAiB;AAAA,MACxB;AAAA,IACF,OAAO;AACL,UAAI,KAAK,WAAW;AAClB,aAAK,YAAY,KAAK;AACtB,aAAK,aAAa;AAAA,MACpB;AAEA,UAAI,KAAK,mBAAmB,GAAG,KAAK,cAAc,KAAK,WAAW;AAChE,aAAK,iBAAiB;AAAA,MACxB;AAAA,IACF;AAEA,WAAO;AAAA,EACT,CAAC;AAGD,WAAS,QAAQ,CAAC,SAAS;AACzB,QAAI,CAAC,YAAY,KAAK,aAAa;AACjC,kBAAY,KAAK,cAAc;AAAA,QAC7B,YAAY,KAAK;AAAA,QACjB,WAAW,KAAK;AAAA,QAChB,YAAY,CAAC;AAAA,QACb,kBAAkB;AAAA,MACpB;AAAA,IACF;AAEA,QAAI,CAAC,KAAK,kBAAkB,CAAC,KAAK,WAAW;AAC3C,kBAAY,KAAK,YAAY,mBAAmB;AAAA,IAClD;AAAA,EACF,CAAC;AAGD,WAAS,QAAQ,CAAC,SAAS;AACzB,QAAI,KAAK,WAAW;AAClB,YAAM,EAAE,WAAW,IAAI,YAAY,KAAK;AACxC,UAAI,WAAW,QAAQ,KAAK,SAAS,IAAI,GAAG;AAC1C,mBAAW,KAAK,KAAK,SAAS;AAAA,MAChC;AAAA,IACF;AAAA,EACF,CAAC;AAGD,WAAS,QAAQ,CAAC,SAAS;AACzB,QAAI,KAAK,gBAAgB;AACvB,YAAM,aAAa,YAAY,KAAK;AACpC,UAAI,CAAC,WAAW,oBAAoB,WAAW,WAAW,SAAS,GAAG;AAEpE,aAAK,YAAY,WAAW,WAAW;AAAA,MACzC;AAAA,IACF;AAAA,EACF,CAAC;AAGD,QAAM,kBAAkB,SAAS,IAAI,CAAC,SAAS,KAAK,cAAc,EAAE,OAAO,OAAO;AAClF,QAAM,oBAAgB,uBAAQ,OAAO,KAAK,WAAW,GAAG,CAAC,eAAe;AACtE,UAAM,aAAa,YAAY;AAC/B,UAAM,YAAY;AAAA,MAChB,GAAG,WAAW;AAAA,MACd,GAAI,WAAW,oBAAoB,WAAW,WAAW,UAAU,IAAI,CAAC,UAAU,IAAI,CAAC;AAAA,IACzF;AACA,UAAM,gBAAgB,UAAU,OAAO,CAAC,MAAM,gBAAgB,QAAQ,CAAC,KAAK,CAAC;AAC7E,QAAI,cAAc,SAAS,GAAG;AAC5B,aAAO;AAAA,QACL,GAAI,cAAc,QAAQ,UAAU,KAAK,IAAI,CAAC,CAAC,YAAY,MAAM,UAAU,CAAC,IAAI,CAAC;AAAA,QACjF,GAAG,cAAc,OAAO,CAAC,MAAM,MAAM,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,OAAO,UAAU,CAAC;AAAA,MACpF;AAAA,IACF;AACA,WAAO,CAAC;AAAA,EACV,CAAC;AAED,QAAM,kBAAkB,cAAc,OAAO,CAAC,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC,MAAM,EAAE,EAAY;AACnF,QAAM,gBAAgB,cAAc,OAAO,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,MAAM,EAAE,EAAY;AAElF,QAAM,YAAoC,CAAC;AAE3C,WAAS,QAAQ,CAAC,SAAS;AACzB,QAAI,KAAK,aAAa,cAAc,QAAQ,KAAK,SAAS,KAAK,GAAG;AAEhE,UAAI,WAAW,UAAU,KAAK;AAC9B,UAAI,CAAC,UAAU;AACb,mBAAW,GAAG,KAAK;AACnB,cAAM,gBAAgB,cAAc,KAAK,CAAC,MAAM,EAAE,OAAO,KAAK,SAAS,KACrE,CAAC,GAAG;AACN,qBAAa,aAAa,aAAa,WAAW,OAAO,CAAC,MAAM,MAAM,KAAK,SAAS;AACpF,qBAAa,WAAW,KAAK,QAAQ;AACrC,kBAAU,KAAK,aAAa;AAAA,MAC9B;AAEA,WAAK,YAAY;AAAA,IACnB;AAEA,QAAI,gBAAgB,QAAQ,KAAK,UAAU,KAAK,GAAG;AAEjD,UAAI,WAAW,UAAU,KAAK;AAC9B,UAAI,CAAC,UAAU;AACb,mBAAW,GAAG,KAAK;AACnB,cAAM,gBAAgB,cAAc,KAAK,CAAC,MAAM,EAAE,OAAO,KAAK,UAAU,KACtE,CAAC,GAAG;AACN,qBAAa,WAAW,KAAK,QAAQ;AACrC,qBAAa,mBAAmB;AAChC,kBAAU,KAAK,cAAc;AAAA,MAC/B;AAEA,WAAK,YAAY;AAAA,IACnB;AAAA,EACF,CAAC;AAGD,WAAS,QAAQ,CAAC,SAAS;AACzB,UAAM,OAAO,KAAK,aAAa,KAAK;AACpC,QAAI,CAAC,kBAAkB,IAAI,GAAG;AAC5B,YAAM,IAAI,mBAAmB,uBAAuB,OAAO;AAAA,IAC7D;AACA,QAAI,KAAK,kBAAkB,CAAC,kBAAkB,KAAK,cAAc,GAAG;AAClE,YAAM,IAAI,mBAAmB,uBAAuB,KAAK,iBAAiB;AAAA,IAC5E;AAAA,EACF,CAAC;AAED,QAAM,wBAAgD,CAAC;AACvD,MAAI,cAAc;AAChB,WAAO,KAAK,WAAW,EAAE,QAAQ,CAAC,eAAe;AA9QrD;AA+QM,YAAM,cAAY,iBAAY,gBAAZ,mBAAyB,eAAc,CAAC;AAC1D,UAAI,UAAU,SAAS,GAAG;AACxB,cAAM,UAAU,YAAY,YAAY,mBAAmB,aAAa,UAAU;AAClF,cAAM,gBAAgB,YAAY,YAAY,mBAC1C,YACA,UAAU,MAAM,CAAC;AACrB,sBAAc,QAAQ,CAAC,MAAM;AAC3B,cAAI,CAAC,sBAAsB,IAAI;AAC7B,kCAAsB,KAAK,SAAS,OAAO;AAAA,UAC7C;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,WAAS,qBAAqB,MAA+B;AAC3D,QAAI,KAAK,WAAW;AAClB,aAAO,mBAAmB;AAAA,IAC5B;AACA,WAAO,KAAK;AAAA,EACd;AAEA,WAAS,QAAQ,CAAC,SAAS;AAEzB,QAAI,KAAK,gBAAgB;AAEvB,YAAM,YAAY,wBAAwB,IAAI;AAE9C,aAAO,KAAK;AAAA,QACV;AAAA,QACA,UAAU;AAAA,QACV,MAAM,kBAAkB;AAAA,QACxB,SAAS,eAAe,SAAS,KAAK,oBAAoB,aAAa,KAAK,aAAa;AAAA,QACzF,WAAW,CAAC,kBAAkB,oBAAoB,kBAAkB,kBAAkB;AAAA,QACtF,KAAK;AAAA,UACH,cAAc,GAAG,qBAAqB,IAAI,KAAK,KAAK;AAAA,UACpD,WAAW,KAAK;AAAA,UAChB,YAAY,KAAK;AAAA,QACnB;AAAA,MACF,CAAC;AAAA,IACH,WAAW,KAAK,WAAW;AAEzB,UAAI,KAAK,aAAa,mBAAmB,KAAK,CAAC,MAAM,MAAM,KAAK,SAAS,GAAG;AAC1E,eAAO,sBAAsB,KAAK;AAClC;AAAA,MACF;AAEA,UAAI,mBAAmB;AACvB,UAAI,sBAAsB,KAAK,YAAY;AACzC,2BAAmB,sBAAsB,KAAK;AAC9C,eAAO,sBAAsB,KAAK;AAAA,MACpC;AAEA,aAAO,KAAK;AAAA,QACV;AAAA,QACA,UAAU;AAAA,QACV,MAAM,kBAAkB;AAAA,QACxB,SAAS;AAAA,QACT,WAAW,CAAC,kBAAkB,oBAAoB,kBAAkB,kBAAkB;AAAA,QACtF,KAAK;AAAA,UACH,cAAc,qBAAqB,IAAI;AAAA,UACvC,WAAW,KAAK;AAAA,UAChB,YAAY,KAAK;AAAA,QACnB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AAGD,SAAO,KAAK,qBAAqB,EAAE,QAAQ,CAAC,MAAM;AAChD,WAAO,KAAK;AAAA,MACV;AAAA,MACA,UAAU;AAAA,MACV,MAAM,kBAAkB;AAAA,MACxB,SAAS,sBAAsB;AAAA,MAC/B,WAAW,CAAC,kBAAkB,oBAAoB,kBAAkB,kBAAkB;AAAA,IACxF,CAAC;AAAA,EACH,CAAC;AAED,QAAM,iBAAiB,OAAO,KAAK,WAAW,EAAE,IAAI,CAAC,MAAM,YAAY,EAAE;AACzE,QAAM,gBAAgB,eAAe,OAAO,CAAC,SAAS,KAAK,SAAS;AACpE,QAAM,eAAe,eAAe,OAAO,CAAC,SAAS,CAAC,KAAK,SAAS;AAEpE,QAAM,aAAa,CAAC,QAAQ;AAC5B,MAAI,cAAc,SAAS,GAAG;AAC5B,QAAI,cAAc;AAChB,iBAAW,KAAK,mBAAmB,EAAE;AAAA,IACvC,OAAO;AACL,iBAAW,KAAK,cAAc,GAAG,WAAW,EAAE;AAAA,IAChD;AACA,QAAI,aAAa,SAAS,GAAG;AAC3B,iBAAW,KAAK,IAAI;AAAA,IACtB;AAAA,EACF;AACA,MAAI,aAAa,SAAS,GAAG;AAC3B,UAAM,QAAQ,aAAa,IAAI,CAAC,SAAS;AACvC,aAAO,CAAC,gBAAgB,KAAK,oBAAoB,KAAK,WAAW,UAAU,IACvE,KAAK,aACL,GAAG,KAAK,iBAAiB,KAAK,WAAW;AAAA,IAC/C,CAAC;AACD,eAAW,KAAK,KAAK,MAAM,KAAK,IAAI,KAAK;AAAA,EAC3C;AACA,aAAW,KAAK,MAAM;AAEtB,QAAM,gCAAgC,MAAM,KAAM,KAAK,GAA2B,QAAQ;AAE1F,MAAI,KAAK,GAAG,8CAA4C;AAEtD,eAAW,KAAK,IAAI,8BAA8B,KAAK;AACvD,WAAO,KAAK;AAAA,MACV;AAAA,MACA,UAAU;AAAA,MACV,MAAM,kBAAkB;AAAA,MACxB,SAAS,WAAW,KAAK,GAAG;AAAA,MAC5B,WAAW,CAAC,kBAAkB,kBAAkB;AAAA,IAClD,CAAC;AAAA,EACH,OAAO;AACL,eAAW,KAAK,IAAI,OAAO;AAC3B,WAAO,KAAK;AAAA,MACV;AAAA,MACA,UAAU;AAAA,MACV,MAAM,kBAAkB;AAAA,MACxB,SAAS,WAAW,KAAK,GAAG;AAAA,MAC5B,WAAW,CAAC;AAAA,IACd,CAAC;AAAA,EACH;AAGA,MAAI,mBAAmB,SAAS,GAAG;AACjC,QAAI,KAAK,GAAG,8CAA4C;AACtD,yBAAmB,MAAM,CAAC,EAAE,QAAQ,CAAC,eAAe;AAClD,eAAO,KAAK;AAAA,UACV;AAAA,UACA,UAAU;AAAA,UACV,MAAM,kBAAkB;AAAA,UACxB,SAAS,UAAU,oBAAoB,8BAA8B;AAAA,UACrE,WAAW,CAAC,kBAAkB,kBAAkB;AAAA,QAClD,CAAC;AAAA,MACH,CAAC;AAAA,IACH,OAAO;AACL,yBAAmB,MAAM,CAAC,EAAE,QAAQ,CAAC,eAAe;AAClD,eAAO,KAAK;AAAA,UACV;AAAA,UACA,UAAU;AAAA,UACV,MAAM,kBAAkB;AAAA,UACxB,SAAS,UAAU,oBAAoB;AAAA,UACvC,WAAW,CAAC;AAAA,QACd,CAAC;AAED,eAAO,KAAK;AAAA,UACV;AAAA,UACA,UAAU;AAAA,UACV,MAAM,kBAAkB;AAAA,UACxB,SAAS;AAAA,UACT,WAAW,CAAC;AAAA,UACZ,KAAK;AAAA,YACH,WAAW;AAAA,YACX,cAAc;AAAA,YACd,YAAY;AAAA,cACV,SAAS;AAAA,cACT,eAAe;AAAA,YACjB;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAO;AACT;AAQA,IAAM,gBAA6D,CAAC,WAA0B;AAC5F,QAAM,MAAM;AAAA,IACV;AAAA,IACA,cAAc;AAAA,IACd,GAAI,UAAU,CAAC;AAAA,EACjB;AAEA,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,QAAI,MAAM,GAAG,QAAQ,GAAG,KAAK,SAAS,GAAG;AACvC,YAAM,OAAO,IAAI,SAAS,IAAI,OAAO,GAAG,IAAI,IAAI,GAAG;AACnD,YAAM,QAAQ,gBAAgB,IAAI;AAElC,aAAO,KAAK,KAAK,EAAE,QAAQ,CAAC,QAAQ;AAClC,cAAM,SAAS,mBAAmB,KAAK,MAAM,MAAM,IAAI,UAAU,IAAI,YAAY;AACjF,aAAK,OAAO,KAAK,GAAG,MAAM;AAAA,MAC5B,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAEA,IAAO,mBAAQ;;;AC9df,IAAAC,sBAAuB;AAYvB,IAAMC,iBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAChB,UAAM,EAAE,OAAO,IAAI;AAEnB,QAAI,MAAM,GAAG,QAAQ,GAAG,KAAK,SAAS,GAAG;AACvC,UAAI,6BAA6B;AACjC,UAAI,qBAAqB;AACzB,UAAI,oBAA6C,CAAC;AAClD,SAAG,KAAK,QAAQ,CAAC,QAAa;AAC5B,YAAI,IAAI,YAAY,iBAAiB,CAAC,kBAAkB,IAAI,aAAa;AACvE,iBAAO,KAAK;AAAA,YACV;AAAA,YACA;AAAA,YACA,MAAM,kBAAkB;AAAA,YACxB,SAAS,2BAA2B,oBAAAC,QAAW,UAAU,IAAI,UAAU;AAAA,YACvE,WAAW,CAAC,kBAAkB,kBAAkB;AAAA,UAClD,CAAC;AACD,4BAAkB,IAAI,cAAc;AAAA,QACtC,WAAW,IAAI,YAAY,8BAA8B,CAAC,4BAA4B;AACpF,iBAAO,KAAK;AAAA,YACV;AAAA,YACA;AAAA,YACA,MAAM,kBAAkB;AAAA,YACxB,SAAS;AAAA,YACT,WAAW,CAAC,kBAAkB,kBAAkB;AAAA,UAClD,CAAC;AACD,uCAA6B;AAAA,QAC/B,WAAW,IAAI,YAAY,sBAAsB,CAAC,oBAAoB;AACpE,iBAAO,KAAK;AAAA,YACV;AAAA,YACA;AAAA,YACA,MAAM,kBAAkB;AAAA,YACxB,SAAS;AAAA,YACT,WAAW,CAAC,kBAAkB,kBAAkB;AAAA,UAClD,CAAC;AACD,+BAAqB;AAAA,QACvB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAEA,IAAO,sBAAQD;;;AC/Df,IAAAE,sBAAuB;;;ACAhB,IAAM,mBAAmB;AAAA,EAC9B,kBAAkB;AAAA,EAClB,gBAAgB;AAAA,EAChB,gBAAgB;AAAA,EAChB,gBAAgB;AAAA,EAChB,oBAAoB;AAAA,EACpB,kBAAkB;AAAA,EAClB,sBAAsB;AACxB;;;ADUA,IAAMC,iBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAGhB,UAAM,qBAAqB;AAAA,MACzB,GAAG,oBAAAC,QAAW,WAAW,GAAG,UAAU,MAAM,GAAG;AAAA,IACjD;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,wBAAwB;AAAA,MAC9B,SAAS,SAAS;AAAA,MAClB,WAAW;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,MACpB;AAAA,IACF,CAAC;AAED,QAAI,GAAG,kBAAkB,aAAa;AACpC,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA;AAAA,QACA,MAAM,wBAAwB;AAAA,QAC9B,SAAS,yBAAyB,GAAG;AAAA,QACrC,WAAW;AAAA,UACT,wBAAwB;AAAA,QAC1B;AAAA,MACF,CAAC;AAAA,IACH;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA,MACT,WAAW;AAAA,QACT,GAAG,mBAAmB,wBAAwB;AAAA,QAC9C,iBAAiB;AAAA,QACjB,iBAAiB;AAAA,MACnB;AAAA,IACF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA,MACT,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,iBAAiB;AAAA,IAC7E,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA,MACT,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,eAAe;AAAA,IAC3E,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,iBAAiB;AAAA,MACvB,SAAS;AAAA,MACT,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,IAAI;AAAA,IAChE,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,iBAAiB;AAAA,MACvB,SAAS;AAAA,MACT,WAAW,CAAC,iBAAiB,sBAAsB,iBAAiB,kBAAkB;AAAA,IACxF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,iBAAiB;AAAA,MACvB,SAAS;AAAA,MACT,WAAW;AAAA,QACT,GAAG,mBAAmB,wBAAwB;AAAA,QAC9C,iBAAiB;AAAA,MACnB;AAAA,IACF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,iBAAiB;AAAA,MACvB,SAAS;AAAA,MACT,WAAW;AAAA,QACT,iBAAiB;AAAA,QACjB,iBAAiB;AAAA,QACjB,iBAAiB;AAAA,MACnB;AAAA,IACF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS,kBAAkB;AAAA,MAC3B,WAAW;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,wBAAwB;AAAA,MAC1B;AAAA,IACF,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,yBAAQD;;;AEhJf;AAAA;AAAA;AAAA;AAAA,IAAAE,wBAUO;AACP,IAAAC,iBAAc;;;ACXd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC,UAAwB;AACxB,IAAAC,oBAAqB;AACrB,IAAAC,mBAAqB;AACrB,IAAAC,KAAmB;AACnB,IAAAC,wBAA6F;;;ACJ7F;AAAA;AAAA;AAAA,yBAAAC;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAwB;AACxB,IAAAC,oBAAqB;AACrB,sBAAmC;AACnC,QAAmB;AACnB,IAAAC,iBAAmC;;;ACJ5B,IAAM,aAAN,MAAoB;AAAA,EAIzB,YAAY,OAAa;AAHzB,wBAAQ,QAAO,oBAAI,IAAO;AAC1B,wBAAQ,QAAY,CAAC;AAGnB,QAAI,OAAO;AACT,WAAK,OAAO,IAAI,IAAI,KAAK;AACzB,WAAK,OAAO,MAAM,MAAM,CAAC;AAAA,IAC3B;AAAA,EACF;AAAA,EAEA,IAAI,MAAS;AACX,QAAI,CAAC,KAAK,KAAK,IAAI,IAAI,GAAG;AACxB,WAAK,KAAK,IAAI,IAAI;AAClB,WAAK,KAAK,KAAK,IAAI;AAAA,IACrB;AAAA,EACF;AAAA,EAEA,OAAO,MAAS;AACd,QAAI,KAAK,KAAK,IAAI,IAAI,GAAG;AACvB,WAAK,KAAK,OAAO,IAAI;AACrB,WAAK,KAAK,OAAO,KAAK,KAAK,QAAQ,IAAI,GAAG,CAAC;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,IAAI,MAAS;AACX,WAAO,KAAK,KAAK,IAAI,IAAI;AAAA,EAC3B;AAAA,EAEA,UAAU;AACR,WAAO,KAAK,KAAK,MAAM,CAAC;AAAA,EAC1B;AACF;;;ADvBO,IAAM,aAAN,cAAyB,MAAM;AAAA,EAKpC,YAAY,MAA6B,QAAiB;AACxD,UAAM,+BAA+B,OAAO,SAAS,WAAW,WAAO,kBAAAC,SAAS,IAAI,IAAI;AAL1F,wBAAS;AAET,wBAAS;AAIP,SAAK,OAAO;AACZ,SAAK,SAAS;AACd,WAAO,eAAe,MAAM,WAAW,SAAS;AAAA,EAClD;AACF;AAEA,IAAM,oBAKF;AAAA,EACF,iBAAiB,EAAE,QAAQ,CAAC,UAAU,EAAE;AAAA,EACxC,sBAAsB,EAAE,QAAQ,CAAC,QAAQ,OAAO,EAAE;AAAA,EAClD,kBAAkB,EAAE,QAAQ,CAAC,QAAQ,OAAO,EAAE;AAAA,EAC9C,gBAAgB,EAAE,QAAQ,CAAC,aAAa,QAAQ,EAAE;AAAA,EAClD,uBAAuB,EAAE,QAAQ,CAAC,QAAQ,cAAc,WAAW,EAAE;AAAA,EACrE,kBAAkB,EAAE,QAAQ,CAAC,MAAM,EAAE;AAAA,EACrC,qBAAqB,EAAE,QAAQ,CAAC,YAAY,EAAE;AAAA,EAC9C,gBAAgB,EAAE,QAAQ,CAAC,OAAO,EAAE;AAAA,EACpC,cAAc,EAAE,QAAQ,CAAC,QAAQ,QAAQ,QAAQ,EAAE;AAAA,EACnD,aAAa,EAAE,QAAQ,CAAC,MAAM,EAAE;AAAA,EAChC,mBAAmB,EAAE,QAAQ,CAAC,QAAQ,OAAO,EAAE;AAAA,EAC/C,kBAAkB;AAAA,IAChB,QAAQ,CAAC,SAAS;AAChB,aAAO,KAAK,SAAS,sBAAsB,KAAK,WAC5C,CAAC,UAAU,UAAU,IACrB,CAAC,QAAQ;AAAA,IACf;AAAA,EACF;AAAA,EACA,eAAe,EAAE,QAAQ,CAAC,UAAU,WAAW,EAAE;AAAA,EACjD,cAAc;AAAA,IACZ,QAAQ,CAAC,SAAS;AAChB,aAAO,KAAK,SAAS,kBAAkB,KAAK,WAAW,CAAC,KAAK,IAAI,CAAC;AAAA,IACpE;AAAA,EACF;AAAA,EACA,gBAAgB;AAAA,IACd,QAAQ,CAAC,SAAS;AAChB,aAAO,KAAK,SAAS,oBAAoB,KAAK,WAAW,CAAC,OAAO,OAAO,IAAI,CAAC,OAAO;AAAA,IACtF;AAAA,EACF;AAAA,EACA,iBAAiB,EAAE,QAAQ,CAAC,UAAU,EAAE;AAAA,EACxC,oBAAoB,EAAE,QAAQ,CAAC,aAAa,EAAE;AAAA,EAC9C,yBAAyB,EAAE,QAAQ,CAAC,YAAY,EAAE;AAAA,EAClD,YAAY,EAAE,QAAQ,CAAC,MAAM,EAAE;AAAA,EAC/B,iBAAiB,EAAE,QAAQ,CAAC,cAAc,EAAE;AAAA,EAC5C,gBAAgB,EAAE,QAAQ,CAAC,UAAU,EAAE;AAAA,EACvC,iBAAiB,EAAE,QAAQ,CAAC,UAAU,EAAE;AAAA,EACxC,kBAAkB,EAAE,QAAQ,CAAC,UAAU,EAAE;AAAA,EACzC,oBAAoB,EAAE,QAAQ,CAAC,MAAM,EAAE;AAAA,EACvC,gBAAgB,EAAE,QAAQ,CAAC,MAAM,EAAE;AAAA,EACnC,eAAe,EAAE,QAAQ,CAAC,QAAQ,EAAE;AAAA,EACpC,mBAAmB,EAAE,QAAQ,CAAC,OAAO,EAAE;AAAA,EACvC,yBAAyB,EAAE,QAAQ,CAAC,MAAM,EAAE;AAAA,EAC5C,iBAAiB,EAAE,QAAQ,CAAC,YAAY,EAAE;AAAA,EAC1C,kBAAkB,EAAE,QAAQ,CAAC,YAAY,EAAE;AAAA,EAC3C,0BAA0B,EAAE,QAAQ,CAAC,aAAa,EAAE;AAAA,EACpD,gBAAgB,EAAE,QAAQ,CAAC,OAAO,EAAE;AAAA,EACpC,aAAa;AAAA,IACX,QAAQ,CAAC,SAAS;AAChB,aAAO,KAAK,SAAS,iBAAiB,KAAK,WAAW,CAAC,KAAK,IAAI,CAAC;AAAA,IACnE;AAAA,EACF;AAAA,EACA,eAAe,EAAE,QAAQ,CAAC,UAAU,EAAE;AAAA,EACtC,0BAA0B,EAAE,QAAQ,CAAC,KAAK,EAAE;AAAA,EAC5C,iBAAiB,EAAE,QAAQ,CAAC,aAAa,EAAE;AAAA,EAC3C,iBAAiB,EAAE,QAAQ,CAAC,UAAU,EAAE;AAAA,EACxC,iBAAiB,EAAE,QAAQ,CAAC,UAAU,EAAE;AAAA,EACxC,0BAA0B;AAAA,IACxB,QAAQ,CAAC,SAAS;AAChB,aAAO,KAAK,SAAS,8BAA8B,KAAK,WACpD,CAAC,UAAU,UAAU,IACrB,CAAC,QAAQ;AAAA,IACf;AAAA,EACF;AAAA,EACA,wBAAwB,EAAE,QAAQ,CAAC,UAAU,WAAW,EAAE;AAAA,EAC1D,oBAAoB,EAAE,QAAQ,CAAC,UAAU,EAAE;AAAA,EAC3C,gBAAgB,EAAE,QAAQ,CAAC,UAAU,QAAQ,EAAE;AAAA,EAC/C,eAAe;AAAA,IACb,QAAQ,CAAC,SAAS;AAChB,aAAO,KAAK,SAAS,mBAAmB,KAAK,WAAW,CAAC,OAAO,OAAO,IAAI,CAAC,OAAO;AAAA,IACrF;AAAA,EACF;AAAA,EACA,yBAAyB,EAAE,QAAQ,CAAC,YAAY,EAAE;AAAA,EAClD,sBAAsB,EAAE,QAAQ,CAAC,QAAQ,EAAE;AAAA,EAC3C,sBAAsB,EAAE,QAAQ,CAAC,OAAO,EAAE;AAAA,EAC1C,WAAW,EAAE,QAAQ,CAAC,YAAY,EAAE;AAAA,EACpC,iBAAiB,EAAE,QAAQ,CAAC,UAAU,EAAE;AAAA,EACxC,iBAAiB;AAAA,IACf,QAAQ,CAAC,SAAS;AAChB,aAAO,KAAK,SAAS,qBAAqB,KAAK,WAAW,CAAC,KAAK,IAAI,CAAC;AAAA,IACvE;AAAA,EACF;AAAA,EACA,qBAAqB;AAAA,IACnB,QAAQ,CAAC,SAAS;AAChB,aAAO,KAAK,SAAS,yBAAyB,KAAK,WAC/C,CAAC,OAAO,aAAa,IACrB,CAAC,aAAa;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,mBAAmB;AAAA,IACjB,QAAQ,CAAC,SAAS;AAChB,aAAO,KAAK,SAAS,uBAAuB,KAAK,WAAW,CAAC,KAAK,IAAI,CAAC;AAAA,IACzE;AAAA,EACF;AAAA,EACA,gBAAgB,EAAE,QAAQ,CAAC,YAAY,EAAE;AAAA,EACzC,iBAAiB,EAAE,QAAQ,CAAC,YAAY,EAAE;AAAA,EAC1C,mBAAmB,EAAE,QAAQ,CAAC,aAAa,EAAE;AAAA,EAC7C,cAAc,EAAE,QAAQ,CAAC,aAAa,EAAE;AAAA,EACxC,qBAAqB,EAAE,QAAQ,CAAC,YAAY,EAAE;AAAA,EAC9C,oBAAoB,EAAE,QAAQ,CAAC,YAAY,EAAE;AAC/C;AAMA,IAAM,6BAEF;AAAA,EACF,yBAAyB;AAAA,EACzB,oBAAoB;AAAA,EACpB,qBAAqB;AAAA,EAGrB,kBAAkB;AAAA,EAClB,iBAAiB;AAAA,EACjB,WAAW;AAAA,EACX,iBAAiB;AAAA,EACjB,aAAa;AAAA,EACb,oBAAoB;AAAA,EACpB,eAAe;AAAA,EACf,sBAAsB;AAAA,EACtB,cAAc;AAChB;AAEA,IAAM,cAAc,CAAC,aAAa,QAAQ,OAAO;AAE1C,SAAS,2BAA2B,MAA2C;AACpF,MAAI,CAAC,MAAM;AACT,WAAO,CAAC;AAAA,EACV;AAEA,MAAI;AACF,UAAM,cAAc,IAAI,WAAmB;AAE3C,UAAM,MAAa,aAAM,KAAK,UAAU;AAAA,MACtC,SAAS;AAAA,QACP;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,wBAAwB,CAAC,MAA+B;AAC5D,UAAI,OAAO,MAAM,gBAAY,6BAAa,CAAC,KAAK,YAAY,SAAS,EAAE,IAAI,GAAG;AAC5E,oBAAY,IAAI,EAAE,IAAI;AAAA,MACxB;AAAA,IACF;AAEA,wBAAAC,SAAS,KAAK;AAAA,MACZ,MAAM,MAAM;AAhLlB;AAiLQ,cAAM,EAAE,KAAK,IAAI;AACjB,cAAM,oBAAmB,uBAAkB,KAAK,UAAvB,mBAA8B;AACvD,YAAI,kBAAkB;AACpB,WAAC,OAAO,qBAAqB,aACzB,iBAAiB,IAAI,IACrB,kBACF,QAAQ,CAAC,cAAc;AACvB,kBAAM,aAAa,KAAK;AACxB,gBAAI,OAAO,eAAe,UAAU;AAClC,kBAAI,MAAM,QAAQ,UAAU,GAAG;AAC7B,2BAAW,QAAQ,CAAC,SAAc;AAChC,wCAAsB,IAAI;AAAA,gBAC5B,CAAC;AAAA,cACH,OAAO;AACL,sCAAsB,UAAiB;AAAA,cACzC;AAAA,YACF;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAED,WAAO,YAAY,QAAQ,EAAE,OAAO,OAAO;AAAA,EAC7C,SAAS,GAAP;AACA,UAAM,IAAI,WAAW,MAAM,CAAC;AAAA,EAC9B;AACF;AAEO,SAAS,kCACd,MACA,EAAE,SAAS,MAAM,KAAK,IAA8C,CAAC,GAC3D;AACV,MAAI,CAAC,MAAM;AACT,WAAO,CAAC;AAAA,EACV;AAEA,MAAI;AACF,UAAM,iBAAiB,IAAI,WAAmB;AAE9C,UAAM,MAAa,aAAM,KAAK,QAAQ;AAEtC,UAAM,kCAAkC,CACtC,GACA,SACG;AACH,UAAI,OAAO,MAAM,gBAAY,6BAAa,CAAC,KAAK,CAAC,KAAK,MAAM,WAAW,EAAE,IAAI,GAAG;AAC9E,uBAAe,IAAI,EAAE,IAAI;AAAA,MAC3B;AAAA,IACF;AAEA,wBAAAA,SAAS,KAAK;AAAA,MACZ,MAAM,MAAM;AApOlB;AAqOQ,cAAM,EAAE,KAAK,IAAI;AACjB,cAAM,oBAAmB,uBAAkB,KAAK,UAAvB,mBAA8B;AACvD,YAAI,kBAAkB;AACpB,WAAC,OAAO,qBAAqB,aACzB,iBAAiB,IAAI,IACrB,kBACF,QAAQ,CAAC,cAAc;AACvB,kBAAM,aAAa,KAAK;AACxB,gBAAI,OAAO,eAAe,UAAU;AAClC,kBAAI,MAAM,QAAQ,UAAU,GAAG;AAC7B,2BAAW,QAAQ,CAAC,SAAc;AAChC,kDAAgC,MAAM,IAAI;AAAA,gBAC5C,CAAC;AAAA,cACH,OAAO;AACL,gDAAgC,YAAmB,IAAI;AAAA,cACzD;AAAA,YACF;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAED,WAAO,eAAe,QAAQ,EAAE,OAAO,MAAM;AAAA,EAC/C,SAAS,GAAP;AACA,UAAM,IAAI,WAAW,MAAM,CAAC;AAAA,EAC9B;AACF;AAEO,SAAS,mCACd,MACA,cAAc,eACd,iBAA2B,CAAC,GACpB;AACR,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACT;AAEA,MAAI;AACF,UAAM,UAAU,OAAO,SAAS,WAAkB,uBAAgB,IAAI,IAAI;AAC1E,UAAM,cAAgB,sBAAoB,OAAO;AACjD,UAAM,UAAY,OAAO,UAAQ,CAAC,WAAW,CAAC,CAAC;AAE/C,UAAM,oBAAoB,IAAI,IAAI,cAAc;AAEhD,QAAI,iBAAiB,2BAA2B,QAAQ,QAAQ,KAAK;AACrE,wBAAAA,SAAS,SAAS;AAAA,MAChB,MAAM,MAAM;AACV,YAAI,2BAA2B,KAAK,KAAK,OAAO;AAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA,KAAK,MAAM;AACT,YAAI,2BAA2B,KAAK,KAAK,OAAO;AAC9C;AAAA,QACF;AAAA,MACF;AAAA,MACA,iBAAiB,MAAM;AACrB,YAAI,CAAC,KAAK,mBAAmB,GAAG;AAC9B;AAAA,QACF;AAEA,cAAM,MAAM,KAAK,IAAI,QAAQ;AAC7B,YAAI,CAAC,IAAI,iBAAiB,GAAG;AAC3B;AAAA,QACF;AAGA,YAAI,CAAC,KAAK,KAAK,UAAU;AACvB,gBAAM,OAAO,KAAK,IAAI,UAAU;AAChC,cAAI,KAAK,aAAa,KAAK,kBAAkB,IAAI,KAAK,KAAK,IAAI,GAAG;AAChE,iBAAK,YAAc,aAAW,KAAK,KAAK,IAAI,CAAC;AAC7C;AAAA,UACF;AAAA,QACF;AAGA,YAAI,kBAAkB,GAAG;AACvB,cAAI,YAAc,aAAW,WAAW,CAAC;AAAA,QAC3C;AAAA,MACF;AAAA,MACA,eAAe,MAAM;AACnB,YAAI,CAAC,KAAK,iBAAiB,GAAG;AAC5B;AAAA,QACF;AAGA,YAAI,KAAK,OAAO,SAAS,oBAAoB;AAC3C;AAAA,QACF;AAEA,YAAI,kBAAkB,GAAG;AACvB,eAAK,YAAc,aAAW,WAAW,CAAC;AAAA,QAC5C;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,EAAE,KAAK,QAAI,kBAAAD,SAAS,YAAY,YAAY,EAAE,YAAY,MAAM,CAAC;AACvE,WAAO;AAAA,EACT,SAAS,GAAP;AACA,UAAM,IAAI,WAAW,MAAM,CAAC;AAAA,EAC9B;AACF;AAEO,SAASE,iBAAgB,MAAc;AAC5C,MAAI;AACF,WAAc,uBAAgB,IAAI;AAAA,EACpC,SAAS,GAAP;AACA,UAAM,IAAI,WAAW,MAAM,CAAC;AAAA,EAC9B;AACF;AAEO,SAAS,4BAA4B,MAAc,OAAe;AACvE,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACT;AAEA,MAAI,CAAC,OAAO;AACV,UAAM,IAAI,MAAM,oCAAoC;AAAA,EACtD;AAEA,MAAI;AACF,UAAM,UAAU,OAAO,SAAS,WAAkB,uBAAgB,IAAI,IAAI;AAC1E,UAAM,cAAgB,sBAAoB,OAAO;AACjD,UAAM,UAAY,OAAO,UAAQ,CAAC,WAAW,CAAC,CAAC;AAE/C,wBAAAD,SAAS,SAAS;AAAA,MAChB,iBAAiB,MAAM;AACrB,YAAI,CAAC,KAAK,mBAAmB,GAAG;AAC9B;AAAA,QACF;AAEA,cAAM,MAAM,KAAK,IAAI,QAAQ;AAC7B,YAAI,CAAC,IAAI,iBAAiB,GAAG;AAC3B;AAAA,QACF;AAGA,cAAM,OAAO,KAAK,IAAI,UAAU;AAChC,YAAI,aAAa;AACjB,YAAI,CAAC,KAAK,KAAK,YAAY,KAAK,aAAa,GAAG;AAC9C,uBAAa,KAAK,KAAK;AAAA,QACzB,WAAW,KAAK,KAAK,YAAY,KAAK,gBAAgB,GAAG;AACvD,uBAAa,KAAK,KAAK;AAAA,QACzB;AACA,YAAI,cAAc,MAAM,YAAY,MAAM,SAAS,WAAW,UAAU,GAAG;AACzE,eAAK,YAAc,aAAW,UAAU,CAAC;AAAA,QAC3C;AAAA,MACF;AAAA,IACF,CAAC;AAED,UAAM,EAAE,KAAK,QAAI,kBAAAD,SAAS,YAAY,YAAY,EAAE,YAAY,MAAM,CAAC;AACvE,WAAO;AAAA,EACT,SAAS,GAAP;AACA,UAAM,IAAI,WAAW,MAAM,CAAC;AAAA,EAE9B;AACF;;;ADxXA,SAAS,cAAc,SAA8C;AACnE,MAAI;AACF,UAAM,MAAa,cAAM,IAAI,aAAa;AAAA,MACxC,SAAS;AAAA,QACP;AAAA,MACF;AAAA,IACF,CAAC;AAED,QAAI,aAA0C;AAC9C,yBAAAG,SAAS,KAAK;AAAA,MACZ,mBAAmB,MAAM;AACvB,qBAAa,KAAK;AAClB,aAAK,KAAK;AAAA,MACZ;AAAA,IACF,CAAC;AACD,WAAO;AAAA,EACT,SAAS,GAAP;AACA,UAAM,IAAI,WAAW,SAAS,CAAC;AAAA,EACjC;AACF;AAEA,SAAS,+BAA+B,YAAoB,SAAyB;AACnF,QAAM,WAAW,cAAc,OAAO;AACtC,MAAI,UAAU;AACZ,UAAM,aAAe;AAAA,MACnB;AAAA,MACC,cAAgB,cAAW,UAAU,KAAM,SAAS,MAAQ,cAAW,eAAe;AAAA,MACvF,SAAS;AAAA,MACT,SAAS;AAAA,MACT;AAAA,MACA;AAAA,MACA;AAAA,MACA,SAAS,SAAS;AAAA,IACpB;AAEA,UAAM,EAAE,MAAM,WAAW,QAAI,kBAAAC,SAAS,YAAY,EAAE,YAAY,MAAM,CAAC;AACvE,WAAO;AAAA,EACT;AAEA,QAAM,IAAI,MAAM,iCAAiC;AACnD;AAEA,SAAS,iBAAiB,SAAiB;AACzC,QAAM,WAAW,cAAc,OAAO;AACtC,MAAI,UAAU;AACZ,UAAM,aAAe;AAAA,MACnB,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS,SAAS;AAAA,IACpB;AAEA,UAAM,EAAE,MAAM,WAAW,QAAI,kBAAAA,SAAS,YAAY,EAAE,YAAY,MAAM,CAAC;AACvE,WAAO;AAAA,EACT;AAEA,QAAM,IAAI,MAAM,iCAAiC;AACnD;AAEA,SAAS,kBAAkB,SAAiB;AAC1C,QAAM,WAAW,cAAc,OAAO;AACtC,MAAI,UAAU;AACZ,UAAM,aAA4B,SAAS,KAAK;AAEhD,UAAM,aAAe,WAAQ,YAAY,QAAW,UAAU,MAAS;AAEvE,UAAM,EAAE,MAAM,WAAW,QAAI,kBAAAA,SAAS,YAAY,EAAE,YAAY,MAAM,CAAC;AACvE,WAAO;AAAA,EACT;AAEA,QAAM,IAAI,MAAM,iCAAiC;AACnD;AAOO,SAAS,kBAAkB,OAAyB;AACzD,SAAO,iBAAiB,KAAK,SAAK,oCAAa,KAAK;AACtD;AAEO,SAAS,mBAAmB,OAAY,OAAuB;AACpE,UAAI,sCAAe,KAAK,GAAG;AACzB,UAAM,UAAW,MAAkC,MAAM,KAAK;AAC9D,QAAI,CAAC,SAAS;AACZ,aAAO;AAAA,IACT;AAEA,UAAM,yBAAyB,4BAA4B,SAAS,KAAK;AACzE,WAAO;AAAA,EACT;AAEA,QAAM,IAAI,mBAAmB,oBAAoB;AACnD;AAEA,SAAS,kBAAkB,KAAoC;AAC7D,SAAO,IAAI,UAAU,IAAI,SAAS,IAAI;AACxC;AAEO,SAAS,iBACd,OACA,SAMI;AAAA,EACF,MAAM;AAAA,EACN,UAAU;AAAA,EACV,SAAS;AAAA,EACT,SAAS;AAAA,EACT,YAAY;AACd,GACA;AACA,MAAI,kBAAkB,KAAK,GAAG;AAC5B,UAAM,cAAc;AACpB,UAAM,iBAAiB,kBAAkB,WAAW;AACpD,QAAI,OAAO,UAAU;AACnB,aAAO,+BAA+B,OAAO,QAAQ,IAAI,cAAc;AAAA,IACzE;AACA,QAAI,OAAO,SAAS;AAClB,aAAO,kBAAkB,cAAc;AAAA,IACzC;AACA,QAAI,OAAO,SAAS;AAClB,aAAO,iBAAiB,cAAc;AAAA,IACxC;AACA,QAAI,OAAO,YAAY;AACrB,aAAO,IAAI;AAAA,IACb;AACA,WAAO;AAAA,EACT;AAEA,UAAI,sCAAe,KAAK,GAAG;AACzB,WAAO,MAAM;AAAA,EACf;AAEA,QAAM,IAAI,mBAAmB,kCAAkC;AACjE;;;AGnJA;AAAA;AAAA;AAAA;AAAA,IAAAC,wBAAiE;;;ACI1D,SAAS,uBAAuB,SAAyB;AAC9D,MAAI,QAAQ,UAAU,KAAK,QAAQ,OAAO,OAAO,QAAQ,QAAQ,SAAS,OAAO,KAAK;AACpF,WAAO,QAAQ,MAAM,GAAG,QAAQ,SAAS,CAAC;AAAA,EAC5C;AAEA,SAAO;AACT;;;ADNA,SAAS,0BAA0B,aAA6B;AAC9D,SAAO,MAAM,YAAY,MAAM,IAAI,EAAE,KAAK,GAAG,EAAE,QAAQ,SAAS,KAAK;AACvE;AAEO,SAAS,eAAe,MAAW,OAAe,WAA0C;AACjG,UAAI,gCAAS,IAAI,GAAG;AAClB,UAAM,EAAE,OAAO,QAAQ,MAAM,IAAI;AAKjC,UAAM,YAAY,SAAS,MAAM,eAAe,UAAU,CAAC,CAAC,IAAI;AAChE,UAAM,cAAc,CAAC,QACjB,SACA,iCAAiC,OAAO,WAAW,SAAS;AAChE,QAAI,QAAQ;AACV,aAAO;AAAA,QACL,SAAS,0BAA0B,KAAK;AAAA,QACxC;AAAA,SACC,UAAU,CAAC,GAAG,KAAK,IAAI;AAAA,QACxB;AAAA,QACA;AAAA,QACA;AAAA,QACA,4CAA4C,UAAU,CAAC,GAAG,KAAK,IAAI;AAAA,QACnE;AAAA,MACF,EACG,OAAO,OAAO,EACd,KAAK,EAAE;AAAA,IACZ;AAEA,WAAO,eAAe;AAAA,EACxB;AAEA,QAAM,IAAI,mBAAmB,cAAc;AAC7C;AAEA,SAAS,iCACP,OACA,WACA,OACA;AACA,MAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,QAAI,MAAM,WAAW,GAAG;AACtB,aAAO;AAAA,IACT;AAEA,QAAI,MAAM,WAAW,GAAG;AACtB,aAAO,uBAAuB,UAAU,OAAO,KAAK,CAAC,KAAK;AAAA,IAC5D;AAEA,WAAO;AAAA,EACL,MACG,IAAI,CAAC,MAAM;AACV,UAAI,OAAO,MAAM,UAAU;AACzB,eAAO,KAAK,UAAU,CAAC;AAAA,MACzB;AAEA,aAAO,uBAAuB,UAAU,GAAG,KAAK,CAAC,KAAK;AAAA,IACxD,CAAC,EACA,KAAK,KAAK,KAAK;AAAA;AAAA,EAEtB;AAEA,SAAO,uBAAuB,UAAU,OAAO,KAAK,CAAC,KAAK;AAC5D;;;AElEO,SAAS,qBACd,OACA,OACA,OACA,UACA,QACG;AACH,QAAM,WAA0C,CAAC;AACjD,MAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,aAAS,KAAK,GAAG,KAAK;AAAA,EACxB,OAAO;AACL,aAAS,KAAK,KAAK;AAAA,EACrB;AAEA,MAAI,OAA+B;AACnC,SAAO,SAAS,SAAS,GAAG;AAC1B,UAAM,OAAO,SAAS,IAAI;AAC1B,QAAI,MAAM;AACR,YAAM,eAAe,CAAC,aAAa,CAAC,GAAM,GAAW,QAAY,KAAK,GAAG,GAAG,KAAK,QAAQ,GAAG,IAAI;AAChG,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO,KAAK,OAAO,OAAO,MAAM;AAClC;;;ANAA,SAAS,WAAW,GAA6B;AAC/C,MAAI,eAAAC,QAAE,SAAS,CAAC,KAAM,EAAqB,SAAS,YAAY;AAC9D,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAUA,SAAS,aAAa,GAA6B;AACjD,SAAO,OAAO,MAAM,YAAY,KAAK,QAAS,EAA0B,SAAS;AACnF;AAEA,SAAS,cACP,OACA,OACA,UAA0C,CAAC,GACnC;AACR,QAAM,OAAO,MAAM,IAAI,CAAC,MAAM,oBAAoB,GAAG,OAAO,OAAO,CAAC,EAAE,KAAK,GAAG;AAC9E,SAAO,IAAI;AACb;AAEA,SAAS,eACP,OACA,OACA,UAA0C,CAAC,GACnC;AACR,MAAI,MAAM,SAAS,QAAQ;AAEzB,QAAI,MAAM,UAAU,OAAO,MAAM,WAAW,UAAU;AACpD,aAAO,kBAAkB,oBAAoB,eAAAA,QAAE,KAAK,OAAO,MAAM,GAAG,OAAO,OAAO;AAAA,IACpF;AACA,WAAO,kBAAkB,KAAK,UAAU,eAAAA,QAAE,KAAK,OAAO,MAAM,CAAC;AAAA,EAC/D;AAEA,QAAM,OAAO,OAAO,KAAK,KAAK,EAC3B,IAAI,CAAC,QAAQ;AACZ,UAAM,WAAW,KAAK,UAAU,GAAG;AACnC,UAAM,IAAI,oBAAoB,MAAM,MAAM,OAAO,OAAO;AACxD,WAAO,GAAG,aAAa;AAAA,EACzB,CAAC,EACA,KAAK,KAAK;AAEb,SAAO,IAAI;AACb;AAEA,SAAS,eAAe,OAAuB;AAE7C,SAAO,KAAK,UAAU,KAAK;AAC7B;AAEA,SAAS,eAAe,OAAuB;AAC7C,SAAO,OAAO,KAAK;AACrB;AAEA,SAAS,aAAa,OAAwB;AAC5C,SAAO,QAAQ,SAAS;AAC1B;AAEA,SAAS,YAAY,OAAsC;AACzD,QAAM,aAAa,2BAA2B,MAAM,KAAK;AAEzD,MAAI,WAAW,SAAS,WAAW,GAAG;AACpC,WAAO,iBAAiB,OAAO,EAAE,YAAY,KAAK,CAAC;AAAA,EACrD;AAEA,SAAO,iBAAiB,OAAO,EAAE,SAAS,KAAK,CAAC;AAClD;AAEA,SAAS,UAAU,OAA0B,OAAe,UAA0C,CAAC,GAAG;AACxG,MAAI,QAAQ,eAAe;AACzB,WAAO,eAAe,OAAO,OAAO,QAAQ,aAAa;AAAA,EAC3D;AACA,SAAO;AACT;AAEA,SAAS,oBACP,OACA,OACA,UAA0C,CAAC,GACnC;AAhHV;AAiHE,MAAI,eAAAA,QAAE,YAAY,KAAK,GAAG;AACxB,WAAO;AAAA,EACT;AAEA,MAAI,eAAAA,QAAE,OAAO,KAAK,GAAG;AACnB,WAAO;AAAA,EACT;AAEA,MAAI,eAAAA,QAAE,QAAQ,KAAK,GAAG;AACpB,SAAI,aAAQ,aAAR,mBAAkB,OAAO;AAC3B,aAAO,qBAAqB,OAAO,OAAO,QAAQ,SAAS,OAAO,eAAe,OAAO;AAAA,IAC1F;AACA,WAAO,cAAc,OAAO,OAAO,OAAO;AAAA,EAC5C;AAIA,MAAI,WAAW,KAAK,GAAG;AACrB,UAAM,aAAsC;AAAA,MAC1C,MAAM;AAAA,MACN,OAAO,MAAM;AAAA,IACf;AAEA,SAAI,aAAQ,aAAR,mBAAkB,YAAY;AAChC,YAAM,aAAa;AAAA,QACjB;AAAA,QACA;AAAA,QACA,QAAQ,SAAS;AAAA,QACjB;AAAA,QACA;AAAA,MACF;AACA,aAAO,cAAc;AAAA,IACvB;AACA,WAAO,mBAAmB,YAAY,KAAK;AAAA,EAC7C;AAEA,UAAI,sCAAe,KAAK,GAAG;AACzB,SAAI,aAAQ,aAAR,mBAAkB,YAAY;AAChC,aAAO;AAAA,QACL;AAAA,QACA;AAAA,QACA,QAAQ,SAAS;AAAA,QACjB;AAAA,QACA;AAAA,MACF;AAAA,IACF;AACA,WAAO,mBAAmB,OAAO,KAAK;AAAA,EACxC;AAEA,UAAI,oCAAa,KAAK,KAAK,iBAAiB,KAAK,GAAG;AAClD,SAAI,aAAQ,aAAR,mBAAkB,UAAU;AAC9B,aAAO,qBAAqB,OAAO,OAAO,QAAQ,SAAS,UAAU,aAAa,OAAO;AAAA,IAC3F;AACA,WAAO,YAAY,KAAK;AAAA,EAC1B;AAEA,UAAI,gCAAS,KAAK,GAAG;AACnB,SAAI,aAAQ,aAAR,mBAAkB,MAAM;AAC1B,aAAO,qBAAqB,OAAO,OAAO,QAAQ,SAAS,MAAM,WAAW,OAAO;AAAA,IACrF;AACA,WAAO,UAAU,OAAO,OAAO,OAAO;AAAA,EACxC;AAEA,MAAI,aAAa,KAAK,GAAG;AACvB,WAAO;AAAA,MACL;AAAA,QACE,MAAM;AAAA,QACN,OAAO,sBAAsB,KAAK,UAAU,MAAM,EAAE;AAAA,MACtD;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAEA,MAAI,eAAAA,QAAE,SAAS,KAAK,GAAG;AACrB,SAAI,aAAQ,aAAR,mBAAkB,QAAQ;AAC5B,aAAO,qBAAqB,OAAO,OAAO,QAAQ,SAAS,QAAQ,gBAAgB,OAAO;AAAA,IAC5F;AACA,WAAO,eAAe,OAAqC,OAAO,OAAO;AAAA,EAC3E;AAEA,MAAI,eAAAA,QAAE,SAAS,KAAK,GAAG;AACrB,SAAI,aAAQ,aAAR,mBAAkB,QAAQ;AAC5B,aAAO,qBAAqB,OAAO,OAAO,QAAQ,SAAS,QAAQ,gBAAgB,OAAO;AAAA,IAC5F;AACA,WAAO,eAAe,KAAK;AAAA,EAC7B;AAEA,MAAI,eAAAA,QAAE,SAAS,KAAK,GAAG;AACrB,SAAI,aAAQ,aAAR,mBAAkB,QAAQ;AAC5B,aAAO,qBAAqB,OAAO,OAAO,QAAQ,SAAS,QAAQ,gBAAgB,OAAO;AAAA,IAC5F;AACA,WAAO,eAAe,KAAK;AAAA,EAC7B;AAEA,MAAI,eAAAA,QAAE,UAAU,KAAK,GAAG;AACtB,SAAI,aAAQ,aAAR,mBAAkB,SAAS;AAC7B,aAAO,qBAAqB,OAAO,OAAO,QAAQ,SAAS,SAAS,cAAc,OAAO;AAAA,IAC3F;AACA,WAAO,aAAa,KAAK;AAAA,EAC3B;AAEA,QAAM,IAAI,mBAAmB,mCAAmC;AAClE;AAIO,SAAS,sBACd,OACA,OACA,UAA0C,CAAC,GACnC;AACR,QAAM,SAAS,oBAAoB,OAAO,OAAO,OAAO;AACxD,SAAO;AACT;;;AOnOA;AAAA;AAAA;AAAA;;;ACeO,IAAM,gBAAN,MAA8C;AAAA,EAKnD,YAAY,IAA2B,MAAM;AAJ7C,wBAAS;AAET,wBAAQ,aAAY,IAAI,WAAmB;AAGzC,SAAK,SAAS;AAAA,EAChB;AAAA,EAEA,WAAW,SAA0B;AAxBvC;AAyBI,WAAO,KAAK,UAAU,IAAI,OAAO,KAAK,CAAC,GAAC,UAAK,WAAL,mBAAa,WAAW;AAAA,EAClE;AAAA,EAEA,cAAc,SAA0B;AACtC,WAAO,KAAK,UAAU,IAAI,OAAO;AAAA,EACnC;AAAA,EAEA,WAAW,SAAuB;AAChC,SAAK,UAAU,IAAI,OAAO;AAAA,EAC5B;AAAA,EAEA,cAAc,SAAuB;AACnC,SAAK,UAAU,OAAO,OAAO;AAAA,EAC/B;AAAA,EAEA,iBAA2B;AACzB,UAAM,cAAc,IAAI,WAAW,KAAK,UAAU,QAAQ,CAAC;AAE3D,aAAS,EAAE,OAAO,IAAI,MAAM,QAAQ,SAAS,iCAAQ,QAAQ;AAC3D,aAAO,oBAAoB,EAAE,QAAQ,CAAC,YAAY;AAChD,oBAAY,IAAI,OAAO;AAAA,MACzB,CAAC;AAAA,IACH;AAEA,WAAO,YAAY,QAAQ;AAAA,EAC7B;AAAA,EAEA,sBAAgC;AAC9B,WAAO,KAAK,UAAU,QAAQ;AAAA,EAChC;AACF;;;ADpDO,IAAM,QAAN,MAA8B;AAAA,EAUnC,YAA4B,SAAwB,MAAM;AAA9B;AAF5B;AAGE,SAAK,WAAW;AAAA,EAClB;AAAA,EARA,OAAO,kBAA0B;AAC/B,WAAO,IAAI,MAAM;AAAA,EACnB;AAAA,EAQA,eAAe,gBAAkC;AAC/C,UAAM,wBAAwB,KAAK;AACnC,UAAM,mBAAmB,IAAI,cAAc,qBAAqB;AAChE,mBAAe,QAAQ,CAACC,gBAAe;AACrC,uBAAiB,WAAWA,WAAU;AAAA,IACxC,CAAC;AACD,UAAM,WAAW,IAAI,MAAM,IAAI;AAC/B,aAAS,WAAW;AACpB,WAAO;AAAA,EACT;AACF;;;AERA,IAAMC,iBAA6D,CAAC,WAAY;AAC9E,QAAM,MAA2C;AAAA,IAC/C;AAAA,IACA,eAAe;AAAA,IACf,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAChB,UAAM,QAAQ,MAAM,gBAAgB;AAEpC,UAAM,QAAQ,GAAG,SAAS,CAAC;AAC3B,UAAM,SAAS,OAAO,KAAK,KAAK,EAAE,IAAY,CAAC,cAAc;AAC3D,YAAM,QAAQ,sBAAsB,MAAM,YAAY,KAAK;AAC3D,aAAO,GAAG,cAAc;AAAA,IAC1B,CAAC;AAED,QAAI,IAAI,kBAAkB,iBAAiB;AACzC,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS,kBAAkB,OAAO,KAAK,EAAE;AAAA,QACzC,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,mBAAmB;AAAA,MAC/E,CAAC;AAAA,IACH,WAAW,IAAI,kBAAkB,aAAa;AAC5C,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS,aAAa,OAAO,KAAK,EAAE;AAAA,QACpC,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,OAAO;AAAA,MACnE,CAAC;AAAA,IACH;AACA,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,6BAAQA;;;AC5Cf,IAAMC,iBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAoB;AAAA,IACxB;AAAA,IACA,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAChB,UAAM,QAAQ,MAAM,gBAAgB;AAEpC,UAAM,EAAE,aAAa,IAAI,KAAK;AAC9B,QAAI,CAAC,cAAc;AAEjB,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS;AAAA;AAAA;AAAA,QAGT,WAAW,CAAC,wBAAwB,KAAK;AAAA,MAC3C,CAAC;AAAA,IACH,OAAO;AAEL,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS;AAAA;AAAA;AAAA,QAGT,WAAW,CAAC,wBAAwB,KAAK;AAAA,MAC3C,CAAC;AAED,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAqBT,WAAW,mBAAmB,wBAAwB;AAAA,MACxD,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,iCAAQA;;;AC1Ff;AAAA;AAAA;AAAA;AAEA,SAAS,aAAa,MAAgB,IAAwB;AAC5D,QAAM,SAAS,KAAK,IAAI,KAAK,QAAQ,GAAG,MAAM;AAC9C,MAAI,kBAAkB;AACtB,WAAS,IAAI,GAAG,IAAI,QAAQ,KAAK;AAC/B,QAAI,KAAK,OAAO,GAAG,IAAI;AACrB,wBAAkB;AAClB;AAAA,IACF;AAAA,EACF;AACA,MAAI,oBAAoB,GAAG;AACzB,WAAO;AAAA,EACT;AACA,MAAI,cAAc,CAAC;AACnB,WAAS,IAAI,iBAAiB,IAAI,KAAK,QAAQ,KAAK;AAClD,gBAAY,KAAK,IAAI;AAAA,EACvB;AACA,gBAAc,CAAC,GAAG,aAAa,GAAG,GAAG,MAAM,eAAe,CAAC;AAC3D,MAAI,YAAY,OAAO,MAAM;AAC3B,gBAAY,QAAQ,GAAG;AAAA,EACzB;AACA,SAAO;AACT;AAEO,SAAS,oBAAoB,SAIjC;AA7BH;AA8BE,QAAM,EAAE,aAAa,MAAM,GAAG,IAAI;AAClC,QAAM,qBAAoB,sDAAa,qBAAb,mBAA+B,kBAA/B,mBAA8C;AACxE,QAAM,YAAW,gDAAa,qBAAb,mBAA+B;AAChD,MAAI,SAAS,SAAS,MAAM,IAAI;AAChC,WAAS,CAAC,GAAG,QAAQ,SAAS,MAAM,IAAI,QAAS;AACjD,MAAI,WAAW,SAAS,MAAM,MAAM;AACpC,MAAI,CAAC,qBAAqB,CAAC,cAAc,OAAO,EAAE,QAAQ,IAAI,MAAM,IAAI;AACtE,eAAW,CAAC,GAAG,UAAU,UAAU;AAAA,EACrC;AACA,SAAO,aAAa,UAAU,MAAM,EAAE,KAAK,GAAG;AAChD;;;ACjBA,IAAMC,iBAA6D,CAAC,WAAY;AAC9E,QAAM,MAA2C;AAAA,IAC/C;AAAA,IACA,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AA7BrE;AA8BI,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAChB,SAAK,YAAY,YAAY;AAC7B,UAAM,SAAS,CAAC,GAAC,QAAG,kBAAH,mBAAkB;AAEnC,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,sBACO,SAAS,sBAAsB,YAAY,oBAAoB,EAAE,aAAa,KAAK,aAAa,MAAM,cAAc,IAAI,QAAQ,CAAC;AAAA;AAAA,MAEjJ,WAAW,CAAC,kBAAkB,kBAAkB;AAAA,IAClD,CAAC;AAED,QAAI,IAAI,qBAAqB;AAE3B,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS;AAAA,QACT,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,OAAO;AAAA,MACnE,CAAC;AAAA,IACH,OAAO;AAEL,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS;AAAA,QACT,WAAW,CAAC,wBAAwB,gBAAgB;AAAA,MACtD,CAAC;AAAA,IACH;AAEA,QAAI,QAAQ;AACV,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS;AAAA,QACT,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,mBAAmB;AAAA,MAC/E,CAAC;AAED,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,QAKT,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,UAAU;AAAA,MACtE,CAAC;AAED,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,QAKT,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,UAAU;AAAA,MACtE,CAAC;AAAA,IACH,OAAO;AAEL,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS;AAAA,QACT,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,UAAU;AAAA,MACtE,CAAC;AAED,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS;AAAA,QACT,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,UAAU;AAAA,MACtE,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,+BAAQA;;;AC1Hf,IAAAC,wBAMO;AACP,IAAAC,sBAAuB;AAkDvB,IAAMC,iBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAM;AAAA,IACV,GAAG;AAAA,IACH,WAAU,iCAAQ;AAAA,EACpB;AAEA,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,QAAQ,MAAM,gBAAgB;AACpC,UAAM,mBAAmB,qBAAqB,IAAI,EAAE,IAAI,IAAI,GAAG,aAAa;AAC5E,UAAM,kBACH,oBAAoB,iBAAiB,QAAS,CAAC;AAClD,UAAM,0BAA0B,EAAE,eAAe,KAAK;AACtD,QAAI,gBAAgB,SAAS,GAAG;AAC9B,YAAM,qBAA8D,CAAC;AAErE,sBAAgB,QAAQ,CAAC,OAAO;AA9EtC;AA+EQ,cAAM,SAAS,GAAG,QAAQ;AAC1B,YAAI,EAAE,UAAU,uBAAuB,WAAW,UAAU;AAC1D,gBAAM,qBAAqB,aAAa,oBAAAC,QAAW,OAAO,MAAM;AAEhE,6BAAmB,UAAU;AAAA,YAC3B,MAAM;AAAA,YACN,OACE,sBAAsB,WAAW,cAAc,6BAA6B;AAAA,UAChF;AAEA,gBAAM,2BAA2B,SAAS,oBAAAA,QAAW,OAAO,MAAM;AAClE,gBAAM,mBACJ,eAAI,qBAAJ,mBAAsB,qBAAtB,mBAAyC,YACzC,6BAA6B,oBAAAA,QAAW,MAAM,MAAM;AAEtD,eAAK,OAAO,KAAK;AAAA,YACf;AAAA,YACA;AAAA,YACA,MAAM,kBAAkB;AAAA,YACxB,SAAS;AAAA,yBACI,+BAA+B,8BAA8B;AAAA;AAAA,YAE1E,WAAW,CAAC;AAAA,UACd,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AAED,aAAO,OAAO,yBAAyB,EAAE,mBAAmB,CAAC;AAE7D,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA;AAAA,QACA,MAAM,kBAAkB;AAAA,QACxB,SAAS;AAAA;AAAA;AAAA,QAGT,WAAW,CAAC;AAAA,MACd,CAAC;AAED,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,cAKH,sBAAsB,yBAAyB,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAY1D,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,OAAO;AAAA,MACnE,CAAC;AAED,WAAK,OAAO,QAAQ;AAAA,QAClB;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,iBAAiB;AAAA,QACvB,SAAS;AAAA;AAAA;AAAA,QAGT,WAAW,CAAC,iBAAiB,kBAAkB;AAAA,MACjD,CAAC;AAED,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS;AAAA;AAAA;AAAA,cAGH;AAAA,UACR;AAAA,YACE,GAAG;AAAA,YACH,MAAM;AAAA,cACJ,GAAG,gBAAgB,IAAI,CAAC,UAAU;AAAA,gBAChC,GAAG;AAAA,gBACH,QAAQ,eAAe,KAAK,QAAQ,KAAK;AAAA,gBACzC,SAAS,eAAe,KAAK,SAAS,KAAK;AAAA,cAC7C,EAAE;AAAA,YACJ;AAAA,UACF;AAAA,UACA;AAAA,UACA;AAAA,YACE,UAAU;AAAA,cACR,UAAU,CAAC,WAAW,mCAAmC,OAAO,OAAO,OAAO;AAAA,cAC9E,YAAY,CAAC,WAAW,mCAAmC,OAAO,OAAO,OAAO;AAAA,YAClF;AAAA,UACF;AAAA,QACF;AAAA;AAAA;AAAA,QAGI,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,UAAU;AAAA,MACtE,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,0CAAQD;AAEf,SAAS,eAAe,OAAkC,OAA0C;AAClG,UAAI,sCAAe,KAAK,SAAK,oCAAa,KAAK,KAAK,iBAAiB,KAAK,GAAG;AAC3E,WAAO;AAAA,MACL,MAAM;AAAA,MACN,OAAO,wBAAwB,MAAM;AAAA,IACvC;AAAA,EACF;AAEA,SAAO;AAAA,IACL,MAAM;AAAA,IACN,OAAO,sBAAsB,sBAAsB,OAAO,KAAK;AAAA,EACjE;AACF;;;ACzLA,IAAME,iBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAoB;AAAA,IACxB;AAAA,IACA,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,MACT,WAAW,CAAC,kBAAkB,kBAAkB;AAAA,IAClD,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,MAKT,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,OAAO;AAAA,IACnE,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,mCAAQA;;;ACnCf,IAAMC,iBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAoB;AAAA,IACxB;AAAA,IACA,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,qCACsB,oBAAoB,EAAE,aAAa,KAAK,aAAa,MAAM,cAAc,IAAI,OAAO,CAAC;AAAA;AAAA,MAEpH,WAAW,CAAC,kBAAkB,kBAAkB;AAAA,IAClD,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA;AAAA;AAAA,MAGT,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,mBAAmB;AAAA,IAC/E,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,8BAAQA;;;ACzCf,IAAAC,wBAA6C;AAU7C,IAAMC,kBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAM;AAAA,IACV;AAAA,IACA,mBAAmB,CAAC;AAAA,IACpB,sBAAsB,CAAC;AAAA,IACvB,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,QAAI,GAAG,YAAY;AACjB,YAAM,EAAE,WAAW,IAAI;AACvB,YAAM,SAAS,OAAO,KAAK,UAAU,EAAE,IAAuB,CAAC,kBAAkB;AAzCvF;AA2CQ,YACE,KAAC,oCAAa,WAAW,cAAc,KACvC,CAAC,iBAAiB,WAAW,cAAc,KAC3C,KAAC,sCAAe,WAAW,cAAc,GACzC;AACA,iBAAO;AAAA,QACT;AAEA,YAAI;AAEJ,YAAI,kBAAkB,eAAe;AACnC,0BAAgB;AAAA,QAClB,OAAO;AACL,0BAAgB,IAAI,qBAAqB,kBAAkB;AAAA,QAC7D;AAEA,aAAI,gCAAK,YAAL,mBAAc,SAAS,gBAAgB;AACzC,iBAAO;AAAA,QACT;AAEA,cAAM,aAAa,IAAI,kBAAkB,kBAAkB;AAC3D,YAAI,kBAAkB,eAAe;AACnC,iBAAO;AAAA,YACL;AAAA,YACA,UAAU,IAAI;AAAA,YACd,MAAM,wBAAwB;AAAA,YAC9B,SAAS,iBAAiB,WAAW,gBAAgB,EAAE,SAAS,KAAK,CAAC;AAAA,YACtE,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,iBAAiB;AAAA,UAC7E;AAAA,QACF;AAEA,YAAI,kBAAkB,qBAAqB;AACzC,iBAAO;AAAA,YACL;AAAA,YACA,UAAU,IAAI;AAAA,YACd,MAAM,iBAAiB;AAAA,YACvB,SAAS,iBAAiB,WAAW,gBAAgB,EAAE,SAAS,KAAK,CAAC;AAAA,YACtE,WAAW,CAAC,iBAAiB,kBAAkB;AAAA,UACjD;AAAA,QACF;AAEA,YAAI,kBAAkB,UAAU;AAC9B,iBAAO;AAAA,YACL;AAAA,YACA,UAAU,IAAI;AAAA,YACd,MAAM,iBAAiB;AAAA,YACvB,SAAS,iBAAiB,WAAW,gBAAgB,EAAE,SAAS,KAAK,CAAC;AAAA,YACtE,WAAW,CAAC,iBAAiB,gBAAgB;AAAA,UAC/C;AAAA,QACF;AAEA,eAAO;AAAA,UACL;AAAA,UACA,UAAU,IAAI;AAAA,UACd,MAAM,wBAAwB;AAAA,UAC9B,SAAS,iBAAiB,WAAW,gBAAgB;AAAA,YACnD,MAAM;AAAA,YACN,UAAU;AAAA,UACZ,CAAC;AAAA,UACD,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,UAAU;AAAA,QACtE;AAAA,MACF,CAAC,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AAEpB,WAAK,OAAO,KAAK,GAAG,OAAO,OAAO,CAAC,MAAuB,MAAM,IAAI,CAAC;AAAA,IACvE;AAEA,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,6BAAQA;;;AC/Ff,IAAMC,kBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAoB;AAAA,IACxB;AAAA,IACA,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAChB,UAAM,EAAE,aAAa,IAAI,KAAK;AAE9B,QAAI,CAAC,GAAG,SAAS;AACf,aAAO;AAAA,IACT;AAGA,UAAM,EAAE,QAAQ,IAAI;AACpB,UAAM,SAAS,OAAO,KAAK,OAAO,EAAE,IAAgB,CAAC,gBAAgB;AAAA,MACnE;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,wBAAwB;AAAA,MAC9B,SAAS,iBAAiB,QAAQ,aAAa,EAAE,MAAM,YAAY,UAAU,KAAK,CAAC;AAAA,MACnF,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,UAAU;AAAA,IACtE,EAAE;AACF,SAAK,OAAO,KAAK,GAAG,MAAM;AAG1B,QAAI,cAAc;AAChB,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS,OAAO,KAAK,GAAG,OAAO,EAC5B;AAAA,UAAI,CAAC,eACJ,kBAAkB,UAAU,IAAI,IAAI,eAAe,IAAI,KAAK,UAAU,UAAU;AAAA,QAClF,EACC,IAAI,CAAC,WAAW,gBAAgB,gBAAgB,SAAS,EACzD,KAAK,IAAI;AAAA,QACZ,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,mBAAmB;AAAA,MAC/E,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,0BAAQA;;;ACrEf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAC,iBAAc;AACd,sBAAqB;AACrB,IAAAC,wBAAwG;;;ACFxG,IAAAC,iBAAc;AAGd,IAAM,gBAAgB;AAAA;AACtB,IAAM,oBAAoB,IAAI;AAAA,EAC5B,IAAI,cAAc,MAAM,EAAE,EACvB,IAAI,CAAC,MAAM,MAAM,eAAAC,QAAE,SAAS,EAAE,WAAW,CAAC,EAAE,SAAS,EAAE,GAAG,GAAG,GAAG,GAAG,EACnE,KAAK,EAAE;AAAA,EACV;AACF;AAEO,SAAS,oBAAoB,KAAqB;AACvD,SAAO,IAAI,QAAQ,mBAAmB,CAAC,MAAM,KAAK,EAAE,WAAW,CAAC,IAAI;AACtE;;;ACZA,IAAAC,qBAAqB;AAQd,SAAS,sBACd,MACA,OACA,EAAE,kBAAkB,MAAM,IAAI,CAAC,GACvB;AAbV;AAcE,MAAI,mBAAmB,MAAM,UAAU,MAAM;AAC3C,WAAO,OAAO,SAAS,WAAW,WAAO,mBAAAC,SAAS,IAAI,EAAE;AAAA,EAC1D;AAOA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,MACA,WAAM,aAAN,mBAAgB,qBAAoB,CAAC;AAAA,EACvC;AACF;;;AFLA,SAAS,yBACP,MACA,OAA4B,CAAC,GACR;AACrB,QAAM,SAA8B,CAAC;AACrC,MAAI,KAAK,YAAY,KAAK,UAAU;AAClC,WAAO,WAAW;AAAA,MAChB,GAAI,KAAK,YAAY,CAAC;AAAA,MACtB,GAAI,KAAK,YAAY,CAAC;AAAA,IACxB;AAAA,EACF;AAEA,MAAI,KAAK,cAAc,KAAK,YAAY;AACtC,WAAO,aAAa,KAAK,cAAc,KAAK;AAAA,EAC9C;AAEA,MAAI,KAAK,eAAe,KAAK,aAAa;AACxC,WAAO,cAAc,CAAC;AACtB,WAAO,YAAY,KAAK,GAAI,KAAK,eAAe,CAAC,CAAE;AACnD,WAAO,YAAY,KAAK,GAAI,KAAK,eAAe,CAAC,CAAE;AAAA,EACrD;AAEA,MAAI,KAAK,eAAe,KAAK,aAAa;AACxC,WAAO,cAAc,CAAC;AACtB,WAAO,YAAY,KAAK,GAAI,KAAK,eAAe,CAAC,CAAE;AACnD,WAAO,YAAY,KAAK,GAAI,KAAK,eAAe,CAAC,CAAE;AAAA,EACrD;AAEA,SAAO;AACT;AAEO,SAAS,aAAa,GAAW;AAEtC,SAAQ,EAAE,OAAO,OAAO,EAAE,EAAE,SAAS,OAAO,OAAS,EAAE,OAAO,OAAO,EAAE,EAAE,SAAS,OAAO;AAC3F;AAEA,SAAS,kBACP,UACA,OACA,QACa;AACb,QAAM,WAAW,sBAAsB,SAAS,WAAW,OAAO;AAAA,IAChE,UAAU,iCAAQ;AAAA,IAClB,eAAe,iCAAQ;AAAA,EACzB,CAAC;AACD,SAAO;AAAA,IACL;AAAA,MACE;AAAA,MACA,MAAM,SAAS;AAAA,MACf,OAAO;AAAA,IACT;AAAA,EACF;AACF;AAEA,SAAS,aACP,UACA,WACA,OACA,QACa;AACb,MAAI;AACJ,MAAI,iCAAQ,aAAa;AACvB,aAAS;AAAA,MACP,EAAE,UAAU,UAAU;AAAA,MACtB;AAAA,MACA,OAAO;AAAA,MACP;AAAA,MACA;AAAA,IACF;AAAA,EACF,OAAO;AACL,aAAS,kBAAkB,EAAE,UAAU,UAAU,GAAG,OAAO,MAAM;AAAA,EACnE;AAEA,WAAS,OAAO,IAAI,CAAC,MAAM;AAGzB,QAAI;AACJ,QAAI,EAAE,SAAS,aAAa,EAAE,KAAK,GAAG;AAEpC,YAAM,UAAU,mBAA2B,EAAE,KAAK;AAClD,iBAAW,KAAK,UAAU,oBAAoB,OAAO,CAAC;AAAA,IACxD,OAAO;AACL,iBAAW,IAAI,EAAE;AAAA,IACnB;AAEA,WAAO;AAAA,MACL,OAAO,GAAG,EAAE,QAAQ;AAAA,MACpB;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAEA,SAAS,cACP,UACA,OACA,QACa;AACb,QAAM,EAAE,MAAM,IAAI;AAElB,MAAI,SAAsB,CAAC;AAE3B,MAAI,OAAO;AACT,QAAI,CAAC,MAAM,QAAQ,KAAK,GAAG;AACzB,aAAO,KAAK,KAAK,EAAE,QAAQ,CAAC,aAAqB;AAC/C,YAAI,kBAAkB,QAAQ,GAAG;AAC/B,mBAAS,OAAO,OAAO,aAAa,UAAU,MAAM,WAAwC,OAAO,MAAM,CAAC;AAAA,QAC5G;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,YAAM,QAAQ,CAAC,SAAS;AACtB,YAAI,KAAK,QAAQ,kBAAkB,KAAK,IAAI,KAAK,CAAC,KAAK,QAAQ;AAC7D,mBAAS,OAAO,OAAO,aAAa,KAAK,MAAM,KAAK,OAAO,OAAO,MAAM,CAAC;AAAA,QAC3E;AAAA,MAIF,CAAC;AAAA,IACH;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,kBACP,UACA,OACA,QACa;AACb,QAAM,SAAsB,CAAC;AAC7B,QAAM,YAAW,iCAAQ,eAAc,eAAAC,QAAE,UAAU,SAAS,aAAa;AAEzE,SAAO,KAAK;AAAA,IACV,OAAO,WAAW;AAAA,IAClB;AAAA,EACF,CAAC;AAED,SAAO;AACT;AAEA,SAAS,mBACP,UACA,OACA,QACa;AACb,QAAM,aAAa,kBAAkB,UAAU,OAAO,MAAM,KAAK,CAAC;AAClE,QAAM,YAAY,cAAc,UAAU,OAAO,MAAM,KAAK,CAAC;AAC7D,QAAM,gBAA6B,CAAC;AACpC,MAAI,SAAS,aAAY,iCAAQ,OAAM;AACrC,UAAM,cAAc,OAAO,KAAK,SAAS,UAAU,KAAK;AAExD,kBAAc,KAAK;AAAA,MACjB;AAAA,MACA,OAAO;AAAA,IACT,CAAC;AAAA,EACH;AAEA,SAAO,CAAC,GAAG,YAAY,GAAG,WAAW,GAAG,aAAa;AACvD;AAEA,SAAS,WAAW,QAA6B;AAC/C,QAAM,aAAa,OAAO,OAAO,CAAC,MAAM,EAAE,qCAAuB;AACjE,MAAI,WAAW,WAAW,GAAG;AAC3B,UAAM,IAAI,mBAAmB,oCAAoC,UAAU;AAAA,EAC7E;AACA,QAAM,UAAU,WAAW,GAAG;AAE9B,QAAM,cAAc,OACjB,OAAO,CAAC,MAAM,EAAE,2CAA0B,EAC1C,IAAI,CAAC,MAAM,EAAE,KAAK,EAClB,KAAK,EAAE;AAEV,QAAM,aAAa,OAChB,OAAO,CAAC,MAAM,EAAE,yCAAyB,EACzC,IAAI,CAAC,MAAM,EAAE,KAAK,EAClB,KAAK,EAAE;AAEV,QAAM,gBAAgB,OACnB,OAAO,CAAC,MAAM,EAAE,+CAA4B,EAC5C,IAAI,CAAC,MAAM,EAAE,KAAK,EAClB,KAAK,EAAE;AAEV,MAAI,aAAa,OACd,OAAO,CAAC,MAAM,EAAE,uCAAwB,EACxC,IAAI,CAAC,MAAM,EAAE,KAAK,EAClB,KAAK,GAAG;AAEX,eAAa,aAAa,IAAI,eAAe;AAE7C,MAAI,eAAe;AACjB,WAAO,GAAG,eAAe,UAAU,cAAc,kBAAkB,WAAW;AAAA,EAChF;AAEA,SAAO,GAAG,eAAe,UAAU,gBAAgB;AACrD;AAEA,SAAS,mBACP,UACA,OACA,QACQ;AACR,QAAM,SAAsB,CAAC;AAC7B,MAAI,iCAAQ,aAAa;AACvB,UAAM,MAAM;AAAA,MACV;AAAA,MACA;AAAA,MACA,OAAO;AAAA,MACP;AAAA,MACA;AAAA,IACF;AACA,WAAO,KAAK,GAAG,GAAG;AAAA,EACpB,OAAO;AACL,WAAO,KAAK,GAAG,mBAAmB,UAAU,OAAO,MAAM,CAAC;AAAA,EAC5D;AAEA,SAAO,WAAW,MAAM;AAC1B;AAeO,SAAS,sBACd,UACA,OACA,QACA,MACa;AApQf;AAqQE,MAAI,SAAS,MAAM;AACjB,UAAM,sBAAqB,sCAAQ,uBAAR,YAA8B;AAEzD,UAAM,iBAAe,cAAS,aAAT,mBAAoB,OAAM;AAC/C,UAAM,kBAAgB,cAAS,aAAT,mBAAoB,OAAM;AAGhD,UAAM,WAAW,MAAM,eAAe,CAAC,cAAc,aAAa,CAAC;AACnE,UAAM,SAAsB,OAAO,KAAK,UAAU,UAAU,MAAM,IAAI,CAAC;AAGvE,UAAM,mBAAe;AAAA,MACnB,SAAS;AAAA,MAET,CAAC,SAAS,sBAAsB,MAAM,OAAO;AAAA,QACzC,UAAU,iCAAQ;AAAA,QAClB,oBAAoB;AAAA,MACtB,CAAC;AAAA,MAEH,CAAC,SAAS,sBAAsB,MAAM,OAAO,EAAE,iBAAiB,KAAK,CAAC;AAAA,MAEtE,CAAC,SAAU,qBAAqB,wBAAwB,WAAW;AAAA,IACrE;AAEA,WAAO,QAAQ;AAAA,MACb,OAAO,IAAI,sBAAsB,iBAAiB;AAAA,MAClD;AAAA,IACF,CAAC;AAED,WAAO,KAAK;AAAA,MACV,OAAO,4CAA4C,iBAAiB;AAAA,MACpE;AAAA,IACF,CAAC;AAED,WAAO;AAAA,EACT;AAEA,SAAO,OAAO,KAAK,UAAU,OAAO,MAAM,IAAI,CAAC;AACjD;AAUO,SAAS,2BACd,UACA,OACA,QACA,MACa;AACb,QAAM,SAAsB,OAAO,KAAK,UAAU,OAAO,MAAM,IAAI,CAAC;AAEpE,MAAI,SAAS,aAAa,QAAQ,SAAS,cAAc,MAAM;AAC7D,UAAM,QAAQ,sBAAsB,SAAS,WAAW,OAAO;AAAA,MAC7D,UAAU,iCAAQ;AAAA,IACpB,CAAC;AAED,WAAO,QAAQ;AAAA,MACb,OAAO,MAAM;AAAA,MACb;AAAA,IACF,CAAC;AAED,WAAO,KAAK;AAAA,MACV,OAAO;AAAA,MACP;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAUO,SAAS,sBACd,UACA,OACA,QACA,MACa;AACb,QAAM,SAAsB,OAAO,KAAK,UAAU,OAAO,MAAM,IAAI,CAAC;AAEpE,MAAK,SAAS,aAAa,QAAQ,SAAS,cAAc,QAAS,SAAS,QAAQ,MAAM;AACxF,WAAO,QAAQ;AAAA,MACb,OAAO;AAAA,MACP;AAAA,IACF,CAAC;AAED,WAAO,KAAK;AAAA,MACV,OAAO;AAAA,MACP;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAEA,IAAM,iBAAiB,CAAC,MAAgB,EAAE,KAAK,EAAE;AAE1C,SAAS,oBAAoB,MAA2B,CAAC,GAA0B;AACxF,QAAM,eAAe,CAAC,UAAmC,UAA0B;AACjF,QAAI,eAAAA,QAAE,QAAQ,QAAQ,GAAG;AACvB,YAAM,UAAU,SAAS,IAAI,CAAC,MAAM,aAAa,GAAG,KAAK,CAAC;AAC1D,aAAO,eAAe,OAAO;AAAA,IAC/B;AAEA,YAAI,oCAAa,QAAQ,GAAG;AAC1B,aAAO,mBAAmB,UAAU,OAAO;AAAA,QACzC,GAAG;AAAA,QACH,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAEA,UAAM,WAAW,sBAAsB,UAAU,OAAO;AAAA,MACtD,UAAU,IAAI;AAAA,MACd,eAAe;AAAA,IACjB,CAAC;AAED,QAAI,aAAa,QAAQ,GAAG;AAC1B,aAAO,oBAAoB,mBAA2B,QAAQ,CAAC;AAAA,IACjE;AAEA,WAAO,IAAI;AAAA,EACb;AAEA,SAAO,CAAC,UAAmC,UAAkB,uBAAuB,aAAa,UAAU,KAAK,CAAC;AACnH;AAEA,IAAM,8BAAmD;AAAA,EACvD,aAAa,CAAC,uBAAuB,uBAAuB,0BAA0B;AACxF;AAEO,SAAS,yBAAyB,KAAkD;AACzF,QAAM,SAAS,yBAAyB,6BAA6B,GAAG;AAExE,SAAO,oBAAoB,MAAM;AACnC;;;AGnZO,SAAS,oBAAoB,MAAuB;AACzD,SACE,SAAS,UACT,SAAS,eACT,SAAS,UACT,SAAS,WACT,kBAAkB,KAAK,IAAI;AAE/B;;;ACRO,SAAS,wBAAwB,MAA2B;AACjE,UAAQ,KAAK;AAAA,SACN;AAAA,SACA;AAAA,SACA;AAAA,SACA;AAAA,SACA;AAAA,SACA;AAAA,SACA;AACH,aAAO;AAAA;AAEP,aAAO;AAAA;AAEb;;;ACVO,SAAS,gBACd,MACA,OACA,EAAE,eAAe,OAAO,uCAAuC,MAAM,IAAI,CAAC,GAC1E;AACA,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACT;AAEA,MAAI,oBAAoB,IAAI,GAAG;AAC7B,WAAO;AAAA,EACT;AAEA,QAAM,UAAUC,iBAAgB,IAAI;AAGpC,MAAI,wBAAwB,OAAO,GAAG;AACpC,WAAO;AAAA,EACT;AAEA,MAAI,cAAc;AAChB,WAAO,sBAAsB,SAAS,OAAO;AAAA,MAC3C,iBAAiB;AAAA,IACnB,CAAC;AAAA,EACH;AAEA,UAAQ,QAAQ;AAAA,SAET;AAAA,SACA;AACH,aAAO,sBAAsB,SAAS,OAAO;AAAA,QAC3C,iBAAiB;AAAA,MACnB,CAAC;AAAA;AAGD;AAAA;AAIJ,SAAO,mBAAmB,sBAAsB,SAAS,OAAO;AAAA,IAC9D,iBAAiB;AAAA,EACnB,CAAC;AACH;;;ACnBA,IAAMC,kBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAM;AAAA,IACV;AAAA,IAEA,iBAAiB,CAAC;AAAA,IAClB,GAAG;AAAA,EACL;AAEA,QAAM,EAAE,gBAAgB,IAAI;AAE5B,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,EAAE,qBAAqB,MAAM,oBAAoB,GAAG,IAAI,KAAK;AAInE,UAAM,iBAAqC;AAAA,MACzC,WAAW,OAAgCC,QAAeC,SAAQ;AAjDxE;AAkDQ,eAAO,gBAAgB,mBAAmB,OAAOD,MAAK,GAAGA,QAAO;AAAA,UAC9D,cAAc,GAAE,KAAAC,WAAA,gBAAAA,QAAQ,uBAAR,YAA8B;AAAA,UAC9C,sCAAsC;AAAA,QACxC,CAAC;AAAA,MACH;AAAA,MACA,SAAS,OAAOD,QAAe;AAC7B,eAAO;AAAA,UACL;AAAA,YACE;AAAA,cACE,MAAM;AAAA,cACN,OAAO,MAAM,SAAS;AAAA,YACxB;AAAA,YACA,MAAM,gBAAgB;AAAA,UACxB;AAAA,UACAA;AAAA,UACA,EAAE,iBAAiB,KAAK;AAAA,QAC1B;AAAA,MACF;AAAA,IACF;AAEA,UAAM,mBAAwC;AAAA,MAC5C,UAAU;AAAA,MACV,YAAY,CAAC,MAAM,gBAAgB,MAAM;AAAA,MACzC;AAAA,IACF;AAEA,QAAI,KAAK,YAAY,WAAW;AAC9B,uBAAiB,cAAc;AAAA,QAC7B,CAAC,UAAUA,QAAO,WAAW,aAAa;AACxC,cAAI,SAAS,aAAa,OAAO;AAC/B,mBAAO;AAAA,cACL;AAAA,gBACE,MAAM,SAAS;AAAA,gBACf,OAAO,8BAA8B,SAAS;AAAA,gBAC9C;AAAA,cACF;AAAA,YACF;AAAA,UACF;AAEA,iBAAO,WAAW,SAAS,UAAUA,QAAO,SAAS,IAAI,CAAC;AAAA,QAC5D;AAAA,MACF;AAAA,IACF;AAEA,UAAM,YAAY,yBAAyB,gBAAgB;AAE3D,UAAM,KAAK,KAAK;AAChB,UAAM,QAAgB,MAAM,gBAAgB;AAC5C,UAAM,aAAa,UAAU,IAAI,KAAK;AAEtC,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,iBAAiB;AAAA,MACvB,SAAS;AAAA;AAAA;AAAA,iBAGE;AAAA;AAAA,MAEX,WAAW,CAAC,iBAAiB,kBAAkB,iBAAiB,cAAc;AAAA,IAChF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,QACP,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA,gBAKM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QASR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAUF,EACG,OAAO,OAAO,EACd,KAAK,IAAI;AAAA,MACZ,WAAW,CAAC,kBAAkB,UAAU;AAAA,IAC1C,CAAC;AACD,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,cAAQD;;;AC9If,IAAMG,kBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,MAKT,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,0BAAQA;;;ACjBf,IAAMC,kBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAoB;AAAA,IACxB;AAAA,IACA;AAAA,IACA,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,kBAAkB;AAAA,MACxB,SAAS,GAAG;AAAA,MACZ,WAAW,CAAC,kBAAkB,eAAe;AAAA,IAC/C,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,kBAAkB;AAAA,MACxB,SAAS,kBAAkB,IAAI;AAAA,MAC/B,WAAW,CAAC,kBAAkB,kBAAkB;AAAA,IAClD,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,cAAQA;;;ACvCf,IAAMC,kBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAChB,UAAM,QAAQ,MAAM,gBAAgB;AACpC,UAAM,cAAc,sBAAsB,GAAG,aAAa,CAAC,GAAG,KAAK;AAEnE,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,iCACkB;AAAA;AAAA,MAE3B,WAAW;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,MACpB;AAAA,IACF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA,MAGT,WAAW;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,MACpB;AAAA,IACF,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,oBAAQA;;;AC/Cf,IAAMC,kBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAChB,UAAM,UAAU,GAAG,OAAO,KAAK,UAAU,GAAG,MAAM,MAAM,CAAC,IAAI;AAE7D,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,6BACc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAsEvB,WAAW;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,MACpB;AAAA,IACF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAST,WAAW;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,MACpB;AAAA,IACF,CAAC;AACD,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,eAAQA;;;ACxHf,IAAMC,kBAAuD,CAAC,kBAA2B;AACvF,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,YAAY,iBAAiB;AACnC,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,qCACsB;AAAA;AAAA,MAE/B,WAAW,CAAC;AAAA,IACd,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA2CT,WAAW,CAAC,GAAG,mBAAmB,kBAAkB,eAAe;AAAA,IACrE,CAAC;AAED,QAAI,GAAG,OAAO;AACZ,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA;AAAA,QACA,MAAM,kBAAkB;AAAA,QACxB,SAAS;AAAA;AAAA;AAAA,QAGT,WAAW;AAAA,UACT,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,QACpB;AAAA,MACF,CAAC;AAED,SAAG,MAAM,QAAQ,CAAC,SAAS;AACzB,YAAI,KAAK,SAAS,YAAY;AAC5B,eAAK,OAAO,KAAK;AAAA,YACf;AAAA,YACA;AAAA,YACA,MAAM,kBAAkB;AAAA,YACxB,SAAS;AAAA,sBACC,KAAK,UAAU,KAAK,QAAQ;AAAA;AAAA,YAEtC,WAAW;AAAA,cACT,kBAAkB;AAAA,cAClB,kBAAkB;AAAA,cAClB,kBAAkB;AAAA,YACpB;AAAA,UACF,CAAC;AAAA,QACH;AAEA,aAAK,OAAO,KAAK;AAAA,UACf;AAAA,UACA;AAAA,UACA,MAAM,kBAAkB;AAAA,UACxB,SAAS,GAAG,KAAK;AAAA,UACjB,WAAW;AAAA,YACT,kBAAkB;AAAA,YAClB,kBAAkB;AAAA,YAClB,kBAAkB;AAAA,YAClB,kBAAkB;AAAA,YAClB,kBAAkB;AAAA,YAClB,kBAAkB;AAAA,UACpB;AAAA,QACF,CAAC;AAAA,MACH,CAAC;AAED,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA;AAAA,QACA,MAAM,kBAAkB;AAAA,QACxB,SAAS;AAAA;AAAA;AAAA,QAGT,WAAW;AAAA,UACT,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,QACpB;AAAA,MACF,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,gBAAQA;;;AC1Jf;AAAA;AAAA;AAAA;AAAA;AAKO,SAAS,WAAW,MAAiB,MAAgBC,OAAkB;AAC5E,MAAI,UAAqB;AACzB,OAAK,QAAQ,CAAC,aAAa;AACzB,UAAM,MAAM,QAAQ,KAAK,KAAK,CAAC,MAAM,EAAE,SAAS,QAAQ;AACxD,QAAI,KAAK;AACP,gBAAU;AAAA,IACZ,OAAO;AACL,YAAM,SAAS,gBAAgB,QAAQ;AACvC,mBAAa,SAAS,MAAM;AAC5B,gBAAU;AAAA,IACZ;AAAA,EACF,CAAC;AAED,UAAQ,SAASA,KAAI;AACvB;AAEO,SAAS,iBAAiB,MAAiB,KAAwB;AACxE,MAAI;AACF,UAAM,SAAS,IAAI;AACnB,UAAM,CAAC,MAAMA,KAAI,IAAI;AACrB,eAAW,MAAM,MAAMA,KAAI;AAAA,EAC7B,SAAS,OAAP;AACA,UAAM,IAAI,MAAM,UAAU,OAAO,KAAK;AAAA,EACxC;AACF;;;AC3Be,SAAR,UAAmD;AACxD,SAAO;AAAA,IACL,CAAC;AAAA,IACD;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMX;AAAA,EACF;AACF;;;ACde,SAARC,WAAmD;AACxD,SAAO;AAAA,IACL,CAAC;AAAA,IACD;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAqBX;AAAA,EACF;AACF;;;AC5Be,SAARC,WAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;ACrBe,SAARC,WAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAiBF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;ACxBe,SAARC,WAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA,EAKF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;ACZe,SAARC,WAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAyBF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;AChCe,SAARC,WAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAaF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;ACpBe,SAARC,WAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;AClBe,SAARC,WAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA,EAKF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;ACZe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA8DF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;ACrEe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,eAAe,cAAc,QAAQ,GAAGA,KAAI;AACzE;;;ACrBe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAeF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,eAAe,cAAc,QAAQ,GAAGA,KAAI;AACzE;;;ACtBe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,eAAe,cAAc,MAAM,GAAGA,KAAI;AACvE;;;ACvBe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoBF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,eAAe,cAAc,MAAM,GAAGA,KAAI;AACvE;;;AC3Be,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAsEF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,eAAe,cAAc,SAAS,GAAGA,KAAI;AAC1E;;;AC7Ee,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAiFF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,aAAa,GAAGA,KAAI;AACjD;;;ACxFe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,aAAa,GAAGA,KAAI;AACjD;;;AClBe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;AChBe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA,EAKF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;ACZe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAmCF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;ACnBO,SAAS,oBAAoB,OAAO,gBAAgB,GAAG,GAAc;AAC1E,mBAAiB,MAAMC,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,QAAK;AAC5B,mBAAiB,MAAMA,QAAK;AAC5B,mBAAiB,MAAMA,QAAK;AAC5B,mBAAiB,MAAMA,QAAK;AAC5B,mBAAiB,MAAMA,QAAK;AAC5B,mBAAiB,MAAMA,QAAK;AAC5B,mBAAiB,MAAMA,QAAM;AAC7B,mBAAiB,MAAMA,QAAM;AAC7B,mBAAiB,MAAM,OAAM;AAC7B,mBAAiB,MAAMA,SAAM;AAC7B,mBAAiB,MAAMA,SAAM;AAC7B,mBAAiB,MAAMA,SAAM;AAC7B,mBAAiB,MAAMA,SAAM;AAC7B,mBAAiB,MAAMA,SAAM;AAC7B,mBAAiB,MAAMA,SAAM;AAC7B,mBAAiB,MAAMA,SAAM;AAC7B,mBAAiB,MAAMA,SAAM;AAE7B,SAAO;AACT;;;AC7CA,IAAM,gBAAkC;AAAA,EACtC,OAAO;AAAA,IACL,YAAY;AAAA,MACV,MAAM,CAAC,OAAO,YAAY;AAAA,IAC5B;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC,OAAO,OAAO;AAAA,IACvB;AAAA,IACA,QAAQ;AAAA,MACN,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,WAAW;AAAA,MACT,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,MAAM;AAAA,MACJ,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,aAAa;AAAA,MACX,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,WAAW;AAAA,MACT,MAAM,CAAC,QAAQ;AAAA,MACf,UAAU;AAAA,IACZ;AAAA,IACA,aAAa;AAAA,MACX,MAAM,CAAC;AAAA,MACP,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,mBAA8B;AAC5B,WAAO,oBAAoB;AAAA,EAC7B;AACF;AAEA,IAAO,mBAAQ;;;ACzCf,IAAMC,kBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA,MAGT,WAAW,CAAC;AAAA,IACd,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAWT,WAAW;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,MACpB;AAAA,IACF,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,gBAAQA;;;AC5Cf,IAAMC,kBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AAZrE;AAaI,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAOM,8BAAI,SAAJ,mBAAU,SAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAOjC,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,oBAAQA;;;AClCf,IAAMC,kBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA,MAIT,WAAW,CAAC;AAAA,IACd,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,MAKT,WAAW,CAAC,kBAAkB,eAAe;AAAA,IAC/C,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS,GAAG,OAAO;AAAA,MACnB,WAAW,CAAC,kBAAkB,eAAe;AAAA,IAC/C,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,sBAAQA;;;ACvDf;AAAA;AAAA;AAAA;AAAA,IAAAC,sBAAuB;AAsBhB,SAAS,4BACd,IACA,MAAoC,CAAC,GACb;AACxB,SAAO;AAAA,IAEL,CAAC,IAAI,iBAAiB,qCAAqC,IAAI,iBAAiB;AAAA,IAGhF,IAAI,GAAG,oBAAoB,CAAC,GAAG;AAAA,MAC7B,CAAC,KAAK,WAAQ;AAhCpB;AAgCwB;AAAA,UAChB,GAAG;AAAA,UACH,CAAC,gCAAgC,MAAM,MAAI,SAAI,oBAAJ,mBAAsB,YAAW;AAAA,QAC9E;AAAA;AAAA,MACA,CAAC;AAAA,IACH;AAAA,EACF;AAEA,WAAS,gCAAgC,QAAgB;AAxC3D;AAyCI,aACE,SAAI,qBAAJ,mBAAuB,YACvB,6BAA6B,oBAAAC,QAAW,MAAM,MAAM;AAAA,EAExD;AACF;;;ACGA,IAAMC,kBAA6E,CAAC,QAAQ;AAC1F,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,UAAM,cAAiC;AAAA,MACrC,OAAM,2BAAK,gBAAe;AAAA,MAC1B,UAAS,2BAAK,mBAAkB;AAAA,MAChC,aAAa;AAAA,MACb,cAAc;AAAA,QACZ,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,aAAa;AAAA,QACb,gBAAgB;AAAA,QAChB,2BAA2B;AAAA,QAC3B,sBAAsB;AAAA,QACtB,cAAc;AAAA,QACd,uBAAuB;AAAA,QAGvB,GAAG,4BAA4B,IAAI,2BAAK,gBAAgB;AAAA,MAC1D;AAAA,MACA,iBAAiB;AAAA,QACf,aAAa;AAAA,QACb,uBAAuB;AAAA,QACvB,+BAA+B;AAAA,QAC/B,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW;AAAA,MACb;AAAA,MACA,SAAS;AAAA,QACP,OAAO;AAAA,QACP,OAAO;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,WAAW;AAAA,MACb;AAAA,MACA,SAAS;AAAA,QACP,MAAM;AAAA,MACR;AAAA,MACA,UAAU;AAAA,QACR,MAAM;AAAA,QACN,SAAS;AAAA,MACX;AAAA,MACA,SAAS;AAAA,QACP,MAAM;AAAA,MACR;AAAA,MACA,YAAY;AAAA,QACV,MAAM;AAAA,QACN,KAAK;AAAA,MACP;AAAA,MACA,SAAS;AAAA,MACT,gBAAgB;AAAA,IAClB;AAEA,OAAG,SAAS,QAAQ,CAAC,gBAAgB;AACnC,kBAAY,aAAa,YAAY,WAAW,YAAY;AAAA,IAC9D,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,MACT,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,sBAAQA;;;ACjHf,IAAMC,kBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA,MAGT,WAAW,CAAC,kBAAkB,kBAAkB;AAAA,IAClD,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAMC,GAAG,OACd;AAAA,QACC,CAAC,UAAU;AAAA;AAAA,+BAEc,MAAM;AAAA,mCACF,MAAM;AAAA;AAAA;AAAA,MAGrC,EACC,KAAK,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA,MAKP,WAAW;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,MACpB;AAAA,IACF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA,MAGT,WAAW;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,MACpB;AAAA,IACF,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,iBAAQA;;;AC5Ef,IAAO,gBAAQ;AAAA,EACb;AAAA,EACA,SAAS;AAAA,IACP;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;;;AChBA,sBAAqB;AACrB,0BAAwB;AACxB,4BAA0B;AAC1B,yBAAuB;AAIvB,IAAM,UAAU,CAAC,OAAO,QAAQ,QAAQ,QAAQ,QAAQ,KAAK;AAO7D,IAAM,UAAiD,CAAC,WAA6B;AACnF,QAAM,MAAuB;AAAA,IAC3B,sBAAsB,CAAC;AAAA,IACvB,GAAG;AAAA,EACL;AAEA,QAAM,eAA8B,CAAC,SAAiB,aAAqB;AACzE,QAAIC;AACJ,QAAI,aAAa,QAAQ,aAAa,SAAS,aAAa,QAAQ,aAAa,OAAO;AACtF,MAAAA,UAAS;AAAA,IACX,WAAW,aAAa,QAAQ;AAC9B,MAAAA,UAAS;AAAA,IACX,WAAW,QAAQ,QAAQ,QAAQ,KAAK,GAAG;AACzC,MAAAA,UAAS;AAAA,IACX,WAAW,IAAI,qBAAqB,WAAW;AAC7C,MAAAA,UAAS,IAAI,qBAAqB;AAAA,IACpC,OAAO;AACL,aAAO;AAAA,IACT;AAEA,WAAO,gBAAAC,QAAS,OAAO,SAAS;AAAA,MAC9B,QAAAD;AAAA,MACA,SAAS,CAAC,oBAAAE,SAAa,sBAAAC,SAAe,mBAAAC,SAAY,GAAI,IAAI,WAAW,CAAC,CAAE;AAAA,MACxE,aAAa;AAAA,MACb,gBAAgB;AAAA,IAClB,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AAEA,IAAO,mBAAQ;;;ACjBA,SAAR,0BACL,SACiB;AACjB,SAAO,qBAAqB;AAAA,IAC1B,cAAc,mCAAS;AAAA,IACvB,kBAAkB,EAAE,GAAG,QAAQ;AAAA,IAC/B,UAAU,cAAM;AAAA,IAChB,SAAS;AAAA,MACP,YAAY;AAAA,QACV,wBAAgB;AAAA,QAChB,iBAAS;AAAA,UACP,UAAU;AAAA,QACZ,CAAC;AAAA,QACD,oBAAY;AAAA,QACZ,uBAAe;AAAA,QACf,+BAAuB;AAAA,QACvB,6BAAqB;AAAA,QACrB,wCAAgC;AAAA,QAChC,4BAAoB;AAAA,QACpB,iCAAyB;AAAA,QACzB,2BAAmB;AAAA,QACnB,2BAAmB;AAAA,QACnB,wBAAgB;AAAA,QAChB,YAAI;AAAA,UACF,iBAAiB;AAAA,YACf,KAAK;AAAA,YACL,WAAW;AAAA,YACX,MAAM;AAAA,YACN,OAAO;AAAA,UACT;AAAA,QACF,CAAC;AAAA,QACD,YAAI;AAAA,MACN;AAAA,MACA,OAAO;AAAA,QACL,wBAAgB;AAAA,QAChB,iBAAS;AAAA,UACP,UAAU;AAAA,QACZ,CAAC;AAAA,QACD,oBAAY;AAAA,QACZ,uBAAe;AAAA,QACf,+BAAuB;AAAA,QACvB,6BAAqB;AAAA,QACrB,wCAAgC;AAAA,QAChC,4BAAoB;AAAA,QACpB,iCAAyB;AAAA,QACzB,2BAAmB;AAAA,QACnB,2BAAmB;AAAA,QACnB,wBAAgB;AAAA,QAChB,YAAI;AAAA,UACF,iBAAiB;AAAA,YACf,KAAK;AAAA,YACL,WAAW;AAAA,YACX,MAAM;AAAA,YACN,OAAO;AAAA,UAET;AAAA,QACF,CAAC;AAAA,QACD,YAAI;AAAA,MACN;AAAA,MACA,QAAQ,CAAC,iBAAS,GAAG,cAAM,QAAQ,OAAO,CAAC;AAAA,MAC3C,OAAO,CAAC,cAAM,QAAQ,MAAM,CAAC;AAAA,MAC7B,WAAW,CAAC,kBAAU,CAAC;AAAA,MACvB,OAAO,CAAC,iBAAS,GAAG,cAAM,OAAO,CAAC;AAAA,MAClC,MAAM,CAAC,aAAK,CAAC;AAAA,MACb,aAAa,CAAC,cAAM,QAAQ,YAAY,CAAC;AAAA,MACzC,WAAW,CAAC,cAAM,QAAQ,UAAU,CAAC;AAAA,MACrC,aAAa,CAAC,cAAM,QAAQ,YAAY,CAAC;AAAA,IAC3C;AAAA,IACA,gBAAgB,CAAC,iBAAS,CAAC;AAAA,IAC3B,yBAAyB,mCAAS;AAAA,EACpC,CAAC;AACH;AAEO,IAAM,UAAU;AAAA,EACrB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAY;AAAA,EAGZ;AACF;;;ACjHe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAyBF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;AChCe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;ACRe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA,EAGF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;ACVe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASF;AAEA,SAAO,CAAC,CAAC,KAAK,GAAGA,KAAI;AACvB;;;ACfe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA6BF;AAEA,SAAO,CAAC,CAAC,KAAK,GAAGA,KAAI;AACvB;;;ACrCe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,eAAe,cAAc,QAAQ,GAAGA,KAAI;AACzE;;;ACrBe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAeF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,eAAe,cAAc,QAAQ,GAAGA,KAAI;AACzE;;;ACtBe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,eAAe,cAAc,MAAM,GAAGA,KAAI;AACvE;;;ACvBe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoBF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,eAAe,cAAc,MAAM,GAAGA,KAAI;AACvE;;;AC3Be,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoEF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,eAAe,cAAc,SAAS,GAAGA,KAAI;AAC1E;;;AC3Ee,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAiFF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,aAAa,GAAGA,KAAI;AACjD;;;ACxFe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWF;AAEA,SAAO,CAAC,CAAC,OAAO,WAAW,aAAa,GAAGA,KAAI;AACjD;;;ACJO,SAASC,qBAAoB,OAAO,gBAAgB,GAAG,GAAc;AAC1E,mBAAiB,MAAMC,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAM;AAC7B,mBAAiB,MAAMA,SAAM;AAC7B,mBAAiB,MAAMA,SAAM;AAE7B,SAAO;AACT;;;AC7BA,IAAM,iBAAmC;AAAA,EACvC,OAAO;AAAA,IACL,YAAY;AAAA,MACV,MAAM,CAAC,OAAO,YAAY;AAAA,MAC1B,UAAU;AAAA,IACZ;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC,OAAO,OAAO;AAAA,MACrB,UAAU;AAAA,IACZ;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,WAAW;AAAA,MACT,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,MAAM;AAAA,MACJ,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,aAAa;AAAA,MACX,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,aAAa;AAAA,MACX,MAAM,CAAC;AAAA,MACP,UAAU;AAAA,IACZ;AAAA,IACA,WAAW;AAAA,MACT,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,aAAa;AAAA,MACX,MAAM,CAAC;AAAA,MACP,UAAU;AAAA,IACZ;AAAA,IACA,QAAQ;AAAA,MACN,MAAM,CAAC,OAAO,OAAO;AAAA,MACrB,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,mBAAmB;AACjB,WAAOC,qBAAoB;AAAA,EAC7B;AACF;AAEA,IAAOC,oBAAQ;;;AC7Cf,IAAMC,kBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA,MAIT,WAAW,CAAC;AAAA,IACd,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,MAKT,WAAW,CAAC,kBAAkB,eAAe;AAAA,IAC/C,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS,GAAG,OAAO;AAAA,MACnB,WAAW,CAAC,kBAAkB,eAAe;AAAA,IAC/C,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,uBAAQD;;;ACNf,IAAME,kBAA8E,CAAC,QAAQ;AAC3F,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,UAAM,cAAkC;AAAA,MACtC,OAAM,2BAAK,gBAAe;AAAA,MAC1B,UAAS,2BAAK,mBAAkB;AAAA,MAChC,aAAa;AAAA,MACb,cAAc;AAAA,QACZ,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,aAAa;AAAA,QACb,gBAAgB;AAAA,QAChB,oBAAoB;AAAA,QACpB,sBAAsB;AAAA,QACtB,eAAe;AAAA,QACf,gBAAgB;AAAA,QAEhB,GAAG,4BAA4B,IAAI,2BAAK,gBAAgB;AAAA,MAC1D;AAAA,MACA,iBAAiB;AAAA,QACf,YAAY;AAAA,QACZ,gBAAgB;AAAA,QAChB,oBAAoB;AAAA,QACpB,eAAe;AAAA,QACf,sBAAsB;AAAA,QACtB,8BAA8B;AAAA,QAC9B,QAAQ;AAAA,QACR,WAAW;AAAA,MACb;AAAA,MACA,SAAS;AAAA,QACP,OAAO;AAAA,QACP,OAAO;AAAA,QACP,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,WAAW;AAAA,MACb;AAAA,MACA,SAAS;AAAA,QACP,MAAM;AAAA,MACR;AAAA,MACA,YAAY;AAAA,QACV,MAAM;AAAA,QACN,KAAK;AAAA,MACP;AAAA,MACA,SAAS;AAAA,MACT,gBAAgB;AAAA,IAClB;AAEA,OAAG,SAAS,QAAQ,CAAC,gBAAgB;AACnC,kBAAY,aAAa,YAAY,WAAW,YAAY;AAAA,IAC9D,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,MACT,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,uBAAQD;;;AC7Gf,IAAME,kBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAYT,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAEA,IAAO,iBAAQA;;;AC3Bf,SAAS,aAAa;AACpB,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaT;AAEA,IAAMC,kBAAsE,MAAM;AAChF,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS,WAAW;AAAA,MACpB,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAEA,IAAO,oBAAQA;;;ACjDf,IAAAC,mBAAqB;AACrB,IAAAC,uBAAwB;AAEjB,SAAS,OAAO,SAAiB,UAAU,CAAC,GAAG;AACpD,SAAO,iBAAAC,QAAS,OAAO,SAAS;AAAA,IAC9B,QAAQ;AAAA,IACR,SAAS,CAAC,qBAAAC,OAAW;AAAA,IACrB,aAAa;AAAA,IACb,gBAAgB;AAAA,IAChB,GAAG;AAAA,EACL,CAAC;AACH;;;ACDO,SAAS,aAAa,OAA0B;AACrD,QAAM,SAAS,MAAM,QAAQ,KAAK,CAAC;AACnC,MAAI,WAAW,IAAI;AACjB,WAAO,EAAE,MAAM,MAAM;AAAA,EACvB;AACA,SAAO;AAAA,IACL,MAAM,MAAM,MAAM,GAAG,MAAM;AAAA,IAC3B,SAAS,MAAM,MAAM,SAAS,CAAC;AAAA,EACjC;AACF;;;ACFA,SAASC,YAAW,KAA+B,eAAwB;AACzE,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAyEL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAUS,2BAAK,gBAAe;AAAA;AAAA,uBAEV,aAAa,IAAI,YAAY,EAAE;AAAA,SAC7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQT;AAEA,SAAS,iBAAiB,SAAc,YAAY,MAAM;AACxD,QAAM,SAAS;AAAA,IACb;AAAA,IACA;AAAA,EACF;AACA,WAAS,WAAW,KAAU,UAAoB,CAAC,GAAG;AACpD,UAAM,EAAE,MAAM,SAAS,IAAI;AAC3B,QAAI,YAAY,SAAS,SAAS,GAAG;AACnC,eAAS,QAAQ,CAAC,SAAc,WAAW,MAAM,OAAO,CAAC;AAAA,IAC3D,WAAW,MAAM;AACf,cAAQ,KAAK,WAAW,WAAW,mBAAmB;AAAA,IACxD;AAAA,EACF;AACA,MAAI,WAAW;AACb,WAAO,KAAK,sCAAsC;AAAA,EACpD;AACA,qCAAS,QAAQ,CAAC,QAAa;AAC7B,eAAW,KAAK,MAAM;AAAA,EACxB;AACA,MAAI,WAAW;AACb,WAAO,KAAK,SAAS;AAAA,EACvB;AACA,SAAO,KAAK,KAAK;AACjB,SAAO,KAAK,MAAM;AAClB,SAAO,OAAO,KAAK,IAAI;AACzB;AAEA,IAAMC,kBAAwE,CAAC,QAAS;AACtF,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,EAAE,UAAU,IAAI,KAAK;AAC3B,UAAM,iBAAgB,uCAAW,QAAO,iBAAiB,UAAU,MAAM,IAAI,IAAI;AAEjF,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS,OAAOD,YAAW,KAAK,aAAa,CAAC;AAAA,MAC9C,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAEA,IAAO,sBAAQC;;;AC7Jf,IAAO,iBAAQ;AAAA,EACb,UAAAC;AAAA,EACA,SAAS;AAAA,IACP;AAAA,IACA;AAAA,IACA,aAAAC;AAAA,IACA,aAAAC;AAAA,IACA;AAAA,EACF;AACF;;;ACYe,SAARC,2BACL,SACiB;AACjB,SAAO,qBAAqB;AAAA,IAC1B,cAAc,mCAAS;AAAA,IACvB,kBAAkB,EAAE,GAAG,QAAQ;AAAA,IAC/B,UAAU,eAAO;AAAA,IACjB,SAAS;AAAA,MACP,YAAY;AAAA,QACV,wBAAgB;AAAA,QAChB,iBAAS;AAAA,UACP,UAAU;AAAA,QACZ,CAAC;AAAA,QACD,oBAAY;AAAA,QACZ,uBAAe;AAAA,QACf,+BAAuB;AAAA,QACvB,6BAAqB;AAAA,QACrB,wCAAgC;AAAA,QAChC,4BAAoB;AAAA,QACpB,iCAAyB;AAAA,QACzB,2BAAmB;AAAA,QACnB,2BAAmB;AAAA,QACnB,wBAAgB;AAAA,QAChB,YAAI;AAAA,UACF,iBAAiB;AAAA,YACf,KAAK;AAAA,YACL,WAAW;AAAA,YACX,MAAM;AAAA,YACN,OAAO;AAAA,UACT;AAAA,QACF,CAAC;AAAA,QACD,YAAI;AAAA,MACN;AAAA,MACA,OAAO;AAAA,QACL,wBAAgB;AAAA,QAChB,iBAAS;AAAA,UACP,UAAU;AAAA,QACZ,CAAC;AAAA,QACD,oBAAY;AAAA,QACZ,uBAAe;AAAA,QACf,+BAAuB;AAAA,QACvB,6BAAqB;AAAA,QACrB,wCAAgC;AAAA,QAChC,4BAAoB;AAAA,QACpB,iCAAyB;AAAA,QACzB,2BAAmB;AAAA,QACnB,2BAAmB;AAAA,QACnB,wBAAgB;AAAA,QAChB,YAAI;AAAA,UACF,iBAAiB;AAAA,YACf,KAAK;AAAA,YACL,WAAW;AAAA,YACX,MAAM;AAAA,YACN,OAAO;AAAA,YACP,KAAK;AAAA,UACP;AAAA,QACF,CAAC;AAAA,QACD,YAAI;AAAA,MACN;AAAA,MACA,WAAW,CAAC,kBAAU,CAAC;AAAA,MACvB,OAAO,CAAC,iBAAS,GAAG,cAAM,OAAO,CAAC;AAAA,MAClC,MAAM,CAAC,aAAK,CAAC;AAAA,MACb,aAAa,CAAC,eAAO,QAAQ,YAAY,CAAC;AAAA,MAC1C,aAAa,CAAC,eAAO,QAAQ,YAAY,CAAC;AAAA,MAC1C,aAAa,CAAC,eAAO,QAAQ,YAAY,CAAC;AAAA,MAC1C,WAAW,CAAC,eAAO,QAAQ,UAAU,CAAC;AAAA,MACtC,QAAQ,CAAC,eAAO,QAAQ,OAAO,CAAC;AAAA,IAClC;AAAA,IACA,gBAAgB,CAAC,iBAAS,CAAC;AAAA,IAC3B,yBAAyB,mCAAS;AAAA,EACpC,CAAC;AACH;AAEO,IAAMC,WAAU;AAAA,EACrB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAY;AACd;;;AChHA,IAAAC,sBAAuB;;;ACAhB,IAAM,iBAAiB;AAAA,EAC5B,oBAAoB;AAAA,EACpB,sBAAsB;AAAA,EACtB,kBAAkB;AAAA,EAClB,uBAAuB;AAAA,EACvB,yBAAyB;AAAA,EACzB,qBAAqB;AAAA,EACrB,kBAAkB;AAAA,EAClB,gBAAgB;AAAA,EAChB,gBAAgB;AAAA,EAChB,gBAAgB;AAAA,EAChB,cAAc;AAAA,EACd,gBAAgB;AAAA,EAChB,YAAY;AAAA,EACZ,iBAAiB;AAAA,EACjB,mBAAmB;AAAA,EACnB,eAAe;AACjB;;;ADCA,IAAMC,kBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAGhB,UAAM,qBAAqB;AAAA,MACzB,GAAG,oBAAAC,QAAW,WAAW,GAAG,UAAU;AAAA,IACxC;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,wBAAwB;AAAA,MAC9B,SAAS,SAAS;AAAA,MAClB,WAAW;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,MACpB;AAAA,IACF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA,MACT,WAAW;AAAA,QACT,wBAAwB;AAAA,QACxB,wBAAwB;AAAA,QACxB,eAAe;AAAA,QACf,eAAe;AAAA,MACjB;AAAA,IACF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA,MACT,WAAW,mBAAmB,wBAAwB;AAAA,IACxD,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA,MACT,WAAW,mBAAmB,wBAAwB;AAAA,IACxD,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,eAAe;AAAA,MACrB,SAAS;AAAA,MACT,WAAW;AAAA,QACT,wBAAwB;AAAA,QACxB,wBAAwB;AAAA,QACxB,wBAAwB;AAAA,QACxB,wBAAwB;AAAA,MAC1B;AAAA,IACF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,eAAe;AAAA,MACrB,SAAS;AAAA,MACT,WAAW,CAAC,eAAe,oBAAoB,eAAe,oBAAoB;AAAA,IACpF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,eAAe;AAAA,MACrB,SAAS;AAAA,MACT,WAAW;AAAA,QACT,wBAAwB;AAAA,QACxB,wBAAwB;AAAA,QACxB,wBAAwB;AAAA,QACxB,eAAe;AAAA,MACjB;AAAA,IACF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,eAAe;AAAA,MACrB,SAAS;AAAA,MACT,WAAW,CAAC,eAAe,uBAAuB,eAAe,uBAAuB;AAAA,IAC1F,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,eAAe;AAAA,MACrB,SAAS;AAAA,MACT,WAAW,CAAC,eAAe,kBAAkB,eAAe,mBAAmB;AAAA,IACjF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,eAAe;AAAA,MACrB,SAAS;AAAA,MACT,WAAW;AAAA,QACT,eAAe;AAAA,QACf,eAAe;AAAA,QACf,eAAe;AAAA,MACjB;AAAA,IACF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS,kBAAkB;AAAA,MAC3B,WAAW;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,wBAAwB;AAAA,MAC1B;AAAA,IACF,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,0BAAQF;;;AE5Jf,IAAAG,iBAAc;AACd,IAAAC,wBAA6C;;;ACD7C,mBAAwB;AAEjB,IAAM,YAAQ,aAAAC,SAAY,gBAAgB;;;ADqBjD,IAAMC,kBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAoB;AAAA,IACxB;AAAA,IACA,mBAAmB,CAAC;AAAA,IACpB,sBAAsB;AAAA,MACpB,UAAU;AAAA,MACV,aAAa;AAAA,IACf;AAAA,IACA,GAAG;AAAA,EACL;AAEA,QAAM,oBAAoB,IAAI,IAAI,OAAO,QAAQ,IAAI,iBAAiB,CAAC;AACvE,QAAM,uBAAuB,IAAI,IAAI,OAAO,QAAQ,IAAI,oBAAoB,CAAC;AAE7E,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAIA,UAAM,KAAK,KAAK;AAChB,UAAM,EAAE,WAAW,IAAI;AAEvB,QAAI,cAAc,CAAC,eAAAC,QAAE,QAAQ,UAAU,GAAG;AACxC,aAAO,QAAQ,UAAU,EAAE,QAAQ,CAAC,CAAC,eAAe,mBAAmB,MAAM;AAE3E,YACE,KAAC,oCAAa,WAAW,cAAc,KACvC,CAAC,iBAAiB,WAAW,cAAc,KAC3C,KAAC,sCAAe,WAAW,cAAc,GACzC;AACA;AAAA,QACF;AAEA,cAAM,gBAAgB,qBAAqB,IAAI,aAAa,KAAK;AACjE,cAAM,aAAa,kBAAkB,IAAI,aAAa,KAAK;AAE3D,aAAK,OAAO,KAAK;AAAA,UACf;AAAA,UACA,UAAU,IAAI;AAAA,UACd,MAAM,eAAe;AAAA,UACrB,SAAS,GAAG,gBAAgB,oBAAoB;AAAA,UAChD,WAAW,CAAC,eAAe,eAAe;AAAA,QAC5C,CAAC;AAED,YAAI,kBAAkB,eAAe;AACnC,eAAK,OAAO,KAAK;AAAA,YACf;AAAA,YACA,UAAU,IAAI;AAAA,YACd,MAAM,wBAAwB;AAAA,YAC9B,SAAS,oBAAoB;AAAA,YAC7B,WAAW,CAAC,wBAAwB,gBAAgB;AAAA,UACtD,CAAC;AAAA,QACH,WAAW,kBAAkB,qBAAqB;AAChD,eAAK,OAAO,KAAK;AAAA,YACf;AAAA,YACA,UAAU,IAAI;AAAA,YACd,MAAM,eAAe;AAAA,YACrB,SAAS,oBAAoB;AAAA,YAC7B,WAAW,CAAC,eAAe,kBAAkB;AAAA,UAC/C,CAAC;AAAA,QACH,WAAW,kBAAkB,wBAAwB;AACnD,eAAK,OAAO,KAAK;AAAA,YACf;AAAA,YACA,UAAU,IAAI;AAAA,YACd,MAAM,eAAe;AAAA,YACrB,SAAS,oBAAoB;AAAA,YAC7B,WAAW,CAAC,eAAe,qBAAqB;AAAA,UAClD,CAAC;AAAA,QACH,OAAO;AACL,gBAAM,kCAAkC,eAAe;AAAA,QACzD;AAAA,MACF,CAAC;AAED,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS;AAAA,QACT,WAAW,CAAC,wBAAwB,KAAK;AAAA,MAC3C,CAAC;AAED,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,eAAe;AAAA,QACrB,SAAS;AAAA;AAAA;AAAA;AAAA,QAIT,WAAW,CAAC,eAAe,gBAAgB,wBAAwB,gBAAgB;AAAA,MACrF,CAAC;AAED,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,eAAe;AAAA,QACrB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAeT,WAAW,CAAC,eAAe,iBAAiB,eAAe,iBAAiB;AAAA,MAC9E,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,8BAAQF;;;AEhIf,IAAMG,kBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAoB;AAAA,IACxB;AAAA,IACA,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA;AAAA;AAAA,MAGT,WAAW,CAAC,wBAAwB,KAAK;AAAA,IAC3C,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,eAAe;AAAA,MACrB,SAAS;AAAA;AAAA;AAAA;AAAA,MAIT,WAAW;AAAA,QACT,eAAe;AAAA,QACf,wBAAwB;AAAA,QACxB,eAAe;AAAA,MACjB;AAAA,IACF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,eAAe;AAAA,MACrB,SAAS;AAAA;AAAA;AAAA;AAAA,MAIT,WAAW,CAAC,eAAe,cAAc,eAAe,cAAc;AAAA,IACxE,CAAC;AAED,QAAI,GAAG,WAAW,OAAO,KAAK,GAAG,OAAO,EAAE,SAAS,GAAG;AACpD,aAAO,QAAQ,GAAG,OAAO,EAAE,QAAQ,CAAC,CAAC,YAAY,YAAY,MAAM;AACjE,aAAK,OAAO,KAAK;AAAA,UACf;AAAA,UACA,UAAU,IAAI;AAAA,UACd,MAAM,eAAe;AAAA,UACrB,SAAS,GAAG,gBAAgB,aAAa;AAAA,UACzC,WAAW,CAAC,eAAe,YAAY;AAAA,QACzC,CAAC;AAAA,MACH,CAAC;AAAA,IACH;AAEA,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,2BAAQA;;;AChEf,IAAMC,kBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAoB;AAAA,IACxB;AAAA,IACA,eAAe;AAAA,IACf,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAChB,UAAM,QAAQ,MAAM,gBAAgB;AAEpC,UAAM,QAAQ,GAAG,SAAS,CAAC;AAC3B,UAAM,SAAS,OAAO,KAAK,KAAK,EAAE,IAAY,CAAC,cAAc;AAE3D,YAAM,QAAQ,sBAAsB,MAAM,YAAY,KAAK;AAC3D,aAAO,GAAG,KAAK,UAAU,SAAS,MAAM;AAAA,IAC1C,CAAC;AAED,QAAI,IAAI,kBAAkB,iBAAiB;AACzC,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS,kBAAkB,OAAO,KAAK,GAAG;AAAA,QAC1C,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,mBAAmB;AAAA,MAC/E,CAAC;AAAA,IACH,WAAW,IAAI,kBAAkB,aAAa;AAC5C,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,wBAAwB;AAAA,QAC9B,SAAS,aAAa,OAAO,KAAK,GAAG;AAAA,QACrC,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,OAAO;AAAA,MACnE,CAAC;AAAA,IACH;AAGA,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,8BAAQD;;;AC/Cf,IAAME,kBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAoB;AAAA,IACxB;AAAA,IACA,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AAxBrE;AAyBI,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAChB,UAAM,SAAS,CAAC,GAAC,QAAG,kBAAH,mBAAkB;AAEnC,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,MACT,WAAW,CAAC,kBAAkB,kBAAkB;AAAA,IAClD,CAAC;AAGD,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,MACT,WAAW,CAAC,kBAAkB,kBAAkB;AAAA,IAClD,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA;AAAA;AAAA,MAGT,WAAW,CAAC,GAAG,mBAAmB,wBAAwB,mBAAmB;AAAA,IAC/E,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA;AAAA;AAAA,MAGT,WAAW,CAAC,wBAAwB,KAAK;AAAA,IAC3C,CAAC;AAID,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAsCD,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAQZ,WAAW,CAAC,eAAe,cAAc;AAAA,IAC3C,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,kCAAQD;;;AC9If,IAAAE,wBAMO;AACP,IAAAC,sBAAuB;AA8BvB,IAAMC,kBAA6D,CAAC,WAAY;AAvChF;AAwCE,QAAM,MAAoB;AAAA,IACxB;AAAA,IACA,GAAG;AAAA,IACH,+BACE,iCAAQ,mCAAgC,sCAAQ,qBAAR,mBAA0B;AAAA,EACtE;AAEA,QAAM,SAAiC,OAAO,QAAqB;AA/CrE,QAAAC;AAgDI,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,QAAQ,MAAM,gBAAgB;AACpC,UAAM,mBAAmB,kBAAkB,IAAI,EAAE,IAAI,IAAI,GAAG,aAAa;AACzE,UAAM,kBACH,oBAAoB,iBAAiB,QAAS,CAAC;AAClD,UAAM,0BAA0B,EAAE,eAAe,KAAK;AACtD,QAAI,gBAAgB,SAAS,GAAG;AAC9B,YAAM,qBAA8D,CAAC;AAErE,sBAAgB,QAAQ,CAAC,OAAO;AA5DtC,YAAAA;AA6DQ,cAAM,SAAS,GAAG,QAAQ;AAC1B,YAAI,EAAE,UAAU,uBAAuB,WAAW,UAAU;AAC1D,gBAAM,qBAAqB,aAAa,oBAAAC,QAAW,OAAO,MAAM;AAEhE,6BAAmB,UAAU;AAAA,YAC3B,MAAM;AAAA,YACN,OAAO,GAAG,sBACR,WAAW,cAAc,0BAA0B;AAAA,UAEvD;AAEA,gBAAM,2BAA2B,SAAS,oBAAAA,QAAW,OAAO,MAAM;AAClE,gBAAM,mBACJD,MAAA,IAAI,iCAAJ,gBAAAA,IAAmC,YACnC,6BAA6B,oBAAAC,QAAW,MAAM,MAAM;AAEtD,eAAK,OAAO,KAAK;AAAA,YACf;AAAA,YACA;AAAA,YACA,MAAM,kBAAkB;AAAA,YACxB,SAAS;AAAA,yBACI,+BAA+B,8BAA8B;AAAA;AAAA,YAE1E,WAAW,CAAC;AAAA,UACd,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AAED,aAAO,OAAO,yBAAyB,EAAE,mBAAmB,CAAC;AAAA,IAC/D;AAEA,UAAM,gCACJD,MAAA,IAAI,qBAAJ,gBAAAA,IAAsB,kBAAiB;AACzC,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,gEACiD;AAAA;AAAA,MAE1D,WAAW,CAAC;AAAA,IACd,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,YAKH,sBAAsB,yBAAyB,KAAK;AAAA;AAAA,MAE1D,WAAW,CAAC,wBAAwB,KAAK;AAAA,IAC3C,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,eAAe;AAAA,MACrB,SAAS;AAAA;AAAA;AAAA,MAGT,WAAW,CAAC,eAAe,kBAAkB;AAAA,IAC/C,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA;AAAA;AAAA,YAGH;AAAA,QACR;AAAA,UACE,GAAG;AAAA,UACH,MAAM;AAAA,YACJ,GAAG,gBAAgB,IAAI,CAAC,SAAM;AA3ItC,kBAAAA;AA2I0C;AAAA,gBAGhC,cAAc;AAAA,kBACZ,MAAM;AAAA,kBACN,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAMT;AAAA,gBACA,GAAG;AAAA,gBACH,QACE,OAAO,KAAK,WAAW,aAAa,OAAO,KAAK,WAAW,eACvDA,MAAA,KAAK,WAAL,OAAAA,MAAe,OACfE,gBAAe,KAAK,QAAQ,KAAK;AAAA,gBACvC,SAASA,gBAAe,KAAK,SAAS,KAAK;AAAA,cAC7C;AAAA,aAAE;AAAA,UACJ;AAAA,QACF;AAAA,QACA;AAAA,QACA;AAAA,UACE,UAAU;AAAA,YACR,UAAU,CAAC,WAAW,mCAAmC,OAAO,OAAO,aAAa;AAAA,YACpF,YAAY,CAAC,WAAW,mCAAmC,OAAO,OAAO,aAAa;AAAA,UACxF;AAAA,QACF;AAAA,MACF;AAAA;AAAA;AAAA,MAGI,WAAW,CAAC,eAAe,cAAc;AAAA,IAC3C,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,2CAAQJ;AAEf,SAASG,gBAAe,OAAkC,OAA0C;AAClG,UAAI,sCAAe,KAAK,SAAK,oCAAa,KAAK,GAAG;AAChD,WAAO;AAAA,MACL,MAAM;AAAA,MACN,OAAO,wBAAwB,MAAM;AAAA,IACvC;AAAA,EACF;AAEA,SAAO;AAAA,IACL,MAAM;AAAA,IACN,OAAO,sBAAsB,sBAAsB,OAAO,KAAK;AAAA,EACjE;AACF;;;AChLA,IAAME,kBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAoB;AAAA,IACxB;AAAA,IACA,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AAtBrE;AAuBI,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAChB,UAAM,SAAS,CAAC,GAAC,QAAG,kBAAH,mBAAkB;AAEnC,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,kBAAkB;AAAA,MAExB,SAAS;AAAA,iCACkB,SAAS,sBAAsB;AAAA;AAAA,MAE1D,WAAW,CAAC,kBAAkB,kBAAkB;AAAA,IAClD,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,wBAAwB;AAAA,MAC9B,SAAS;AAAA,MACT,WAAW,CAAC,wBAAwB,KAAK;AAAA,IAC3C,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,wBAAwB;AAAA,MAE9B,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMT,WAAW,CAAC,eAAe,cAAc;AAAA,IAC3C,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,gCAAQD;;;ACpEf,IAAAE,yBAMO;AAEP,IAAAC,iBAAc;AACd,IAAAC,sBAAuB;AA0CvB,IAAMC,kBAA6D,CAAC,WAAY;AAC9E,QAAM,MAAoB;AAAA,IACxB;AAAA,IACA,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAChB,UAAM,YAAY,MAAM,gBAAgB;AACxC,UAAM,EAAE,qBAAqB,MAAM,oBAAoB,GAAG,IAAI,KAAK;AAInE,UAAM,yBAAyB,oBAAI,IAAoB;AACvD,SAAK,OAAO,QAAQ,CAAC,UAAU;AAC7B,UAAI,yBAAyB,KAAK,GAAG;AACnC,+BAAuB,IAAI,MAAM,IAAI,WAAW,MAAM,IAAI,YAAY;AAAA,MACxE;AAAA,IACF,CAAC;AAID,UAAM,kCAAkC,CAAC,kBAA0B,uBAAuB,IAAI,aAAa,KAAK;AAGhH,SAAK,SAAS,KAAK,OAAO,OAAO,CAAC,UAAU,CAAC,yBAAyB,KAAK,CAAC;AAM5E,UAAM,iBAAqC;AAAA,MACzC,WAAW,OAAgC,OAAe;AACxD,eAAO,gBAAgB,mBAAmB,OAAO,KAAK,GAAG,OAAO;AAAA,UAC9D,cAAc,CAAC;AAAA,QACjB,CAAC;AAAA,MACH;AAAA,MACA,SAAS,OAAO,OAAe;AAC7B,eAAO,sBAAsB,MAAM,SAAS,QAAQ,KAAK;AAAA,MAC3D;AAAA,IACF;AAGA,UAAM,sBAAsB,oBAAoB;AAAA,MAC9C,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,aAAa,CAAC,uBAAuB,4BAA4B,mBAAmB;AAAA,MACpF,aAAa,CAAC,uBAAuB,KAAK,EAAE,IAAI,CAAC,CAAC;AAAA,IACpD,CAAC;AAGD,UAAM,aAAa,oBAAoB,IAAI,SAAS;AAEpD,QAAI,CAAC,IAAI,eAAe;AACtB,WAAK,OAAO,KAAK;AAAA,QACf;AAAA,QACA,UAAU,IAAI;AAAA,QACd,MAAM,kBAAkB;AAAA,QACxB,SAAS;AAAA,QACT,WAAW,CAAC;AAAA,MACd,CAAC;AAAA,IACH;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,eAAe;AAAA,MAErB,SAAS;AAAA;AAAA;AAAA;AAAA,MAIT,WAAW,CAAC,eAAe,gBAAgB;AAAA,IAC7C,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,eAAe;AAAA,MACrB,SAAS,UAAU;AAAA,MACnB,WAAW,CAAC,eAAe,kBAAkB,eAAe,cAAc;AAAA,IAC5E,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,QACP,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA,cAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QASN;AAAA;AAAA;AAAA;AAAA;AAAA,MAKF,EACG,OAAO,OAAO,EACd,KAAK,IAAI;AAAA,MACZ,WAAW,CAAC,kBAAkB,UAAU;AAAA,IAC1C,CAAC;AAED,WAAO;AAEP,aAAS,oBACP,UACA,OACAC,SACAC,OACa;AAhLnB;AAiLM,UAAI,SAAS,MAAM;AACjB,cAAM,iBAAe,cAAS,aAAT,mBAAoB,OAAM;AAC/C,cAAM,kBAAgB,cAAS,aAAT,mBAAoB,OAAM;AAChD,cAAM,WAAW,MAAM,eAAe,CAAC,cAAc,aAAa,CAAC;AACnE,cAAM,SAAsBA,QAAOA,MAAK,UAAU,UAAUD,OAAM,IAAI,CAAC;AAEvE,cAAM,eAAe,qBACjB,wBAAwB;AAAA,UACtB,sBAAsB,SAAS,MAAM,OAAO,EAAE,UAAUA,WAAA,gBAAAA,QAAQ,SAAS,CAAC;AAAA,UAC1E;AAAA,QACF,QACA,IAAI;AAAA,UACF,sBAAsB,SAAS,MAAM,OAAO,EAAE,UAAUA,WAAA,gBAAAA,QAAQ,SAAS,CAAC;AAAA,UAC1E;AAAA,QACF;AAEJ,eAAO,QAAQ;AAAA,UACb,OAAO,GAAG,qBAAqB,iBAAiB;AAAA,UAChD;AAAA,QACF,CAAC;AAED,eAAO,KAAK;AAAA,UACV,OAAO,4CAA4C,iBAAiB;AAAA,UACpE;AAAA,QACF,CAAC;AAED,eAAO;AAAA,MACT;AAEA,aAAOC,QAAOA,MAAK,UAAU,OAAOD,OAAM,IAAI,CAAC;AAAA,IACjD;AAAA,EACF;AAEA,SAAO;AACT;AAEA,IAAOE,eAAQH;AAEf,SAAS,yBAAyB,OAMhC;AA7NF;AA8NE,SACE,MAAM,SAAS,kBAAkB,qBACjC,CAAC,CAAC,MAAM,OACR,OAAO,MAAM,IAAI,cAAc,YAC/B,OAAO,MAAM,IAAI,iBAAiB,YAClC,CAAC,GAAE,WAAM,IAAI,eAAV,mBAAoD;AAE3D;AAEA,SAAS,uBAEP,UACA,OACA,QACA,MACa;AACb,MAAI,CAAC,KAAK,IAAI,iBAAiB,MAAM,KAAK,SAAS,QAAQ,GAAG;AAE5D,WAAO,+BAA+B,SAAS,UAAU,SAAS,WAAW,OAAO,MAAM;AAAA,EAC5F;AAEA,MAAI,SAAS,aAAa,OAAO;AAC/B,WAAO;AAAA,MACL;AAAA,QACE,MAAM,SAAS;AAAA,QACf,OAAO,qCAAqC,SAAS;AAAA,QACrD;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAEA,SAAO,OAAO,KAAK,UAAU,OAAO,MAAM,IAAI,CAAC;AACjD;AAEA,SAAS,+BACP,UACA,WACA,OACA,QACa;AArQf;AAuQE,QAAM,YAAY;AAAA,QAChB,uCAAe,SAAS,IAAI,EAAE,MAAM,cAAc,OAAO,UAAU,MAAM,IAAI;AAAA,IAC7E;AAAA,IACA;AAAA,MACE,UAAU,iCAAQ;AAAA,IACpB;AAAA,EACF;AAGA,QAAM,0BAAwB,WAAM,aAAN,mBAAgB,qBAAoB,CAAC;AACnE,MAAI,sBAAsB,UAAU,GAAG;AACrC,WAAO;AAAA,MACL;AAAA,QACE;AAAA,QACA,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAGA,QAAM,iCAAiC,kCAAkC,SAAS;AAClF,QAAM,2BAA2B,eAAAI,QAAE;AAAA,IACjC;AAAA,IACA;AAAA,EACF;AACA,MAAI,yBAAyB,UAAU,GAAG;AACxC,WAAO;AAAA,MACL;AAAA,QACE;AAAA,QACA,MAAM;AAAA,QACN,OAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAEA,QAAM,uBAAuB;AAAA,IAC3B;AAAA,IACA;AAAA,IACA;AAAA,IACA,GAAG,yBAAyB;AAAA,MAC1B,CAAC,aAAa,SAAS,uCAAuC;AAAA,IAChE;AAAA,IACA,eAAe;AAAA,IACf;AAAA,IACA,eAAe;AAAA,IACf;AAAA,IACA;AAAA,EACF,EAAE,KAAK,IAAI;AAEX,SAAO;AAAA,IACL,GAAG,yBAAyB,IAAI,CAAC,cAAc;AAAA,MAC7C;AAAA,MACA,MAAM,QAAQ,oBAAAC,QAAW,MAAM,QAAQ;AAAA,MACvC,OAAO;AAAA,IACT,EAAE;AAAA,IACF;AAAA,MACE;AAAA,MACA,MAAM;AAAA,MACN,OAAO;AAAA,IACT;AAAA,EACF;AACF;;;AC3TA,IAAMC,kBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMT,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,qBAAQA;;;AC7BA,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC,GAAG;AAAA,IACJ;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SAAS;AAAA,IACX;AAAA,EACF;AACF;;;ACTe,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC,GAAG;AAAA,IACJ;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SACE;AAAA,IACJ;AAAA,EACF;AACF;;;ACVe,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC,GAAG;AAAA,IACJ;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SACE;AAAA,IACJ;AAAA,EACF;AACF;;;ACVe,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC,GAAG;AAAA,IACJ;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SAAS;AAAA,IACX;AAAA,EACF;AACF;;;ACTe,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC,GAAG;AAAA,IACJ;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SACE;AAAA,IACJ;AAAA,EACF;AACF;;;ACVe,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC,GAAG;AAAA,IACJ;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SAAS;AAAA,IACX;AAAA,EACF;AACF;;;ACTe,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC,GAAG;AAAA,IACJ;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SACE;AAAA,IACJ;AAAA,EACF;AACF;;;ACVe,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC,GAAG;AAAA,IACJ;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SACE;AAAA,IACJ;AAAA,EACF;AACF;;;ACVe,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC,GAAG;AAAA,IACJ;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SACE;AAAA,IACJ;AAAA,EACF;AACF;;;ACVe,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC,GAAG;AAAA,IACJ;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SACE;AAAA,IACJ;AAAA,EACF;AACF;;;ACCO,SAASC,qBAAoB,OAAO,gBAAgB,GAAG,GAAc;AAC1E,mBAAiB,MAAMC,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAK;AAC5B,SAAO;AACT;;;ACxBA,IAAM,iBAAmC;AAAA,EACvC,OAAO;AAAA,IACL,YAAY;AAAA,MACV,MAAM,CAAC,OAAO,YAAY;AAAA,IAC5B;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC,OAAO,OAAO;AAAA,IACvB;AAAA,IACA,QAAQ;AAAA,MACN,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,WAAW;AAAA,MACT,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,aAAa;AAAA,MACX,MAAM,CAAC;AAAA,MACP,UAAU;AAAA,IACZ;AAAA,IACA,WAAW;AAAA,MACT,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,MAAM;AAAA,MACJ,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,aAAa;AAAA,MACX,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,WAAW;AAAA,MACT,MAAM,CAAC,OAAO,UAAU;AAAA,MACxB,UAAU;AAAA,IACZ;AAAA,IACA,aAAa;AAAA,MACX,MAAM,CAAC;AAAA,MACP,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,MAAM,mBAAuC;AAC3C,WAAOC,qBAAoB;AAAA,EAC7B;AACF;AAEA,IAAOC,oBAAQ;;;AChDf,IAAMC,kBAAoE,CAAC,QAAQ;AACjF,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA,oBAGI,2BAAK,yBAAwB;AAAA;AAAA,MAE1C,WAAW,CAAC;AAAA,IACd,CAAC;AAGD,UAAM,aAAY,2BAAK,cAAa,CAAC;AACrC,WAAO,OAAO,WAAW;AAAA,MAEvB,QAAQ;AAAA,QACN,MAAM;AAAA,QACN,GAAG,UAAU;AAAA,MACf;AAAA,IACF,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,SACN,KAAK,UAAU,WAAW,MAAM,CAAC;AAAA;AAAA,MAEpC,WAAW;AAAA,QACT,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,QAClB,kBAAkB;AAAA,MACpB;AAAA,IACF,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,iBAAQD;;;AC5Df,IAAAE,uBAAuB;AAcvB,IAAMC,kBAAoE,CAAC,QAAQ;AACjF,QAAM,SAAiC,OAAO,QAAqB;AAfrE;AAgBI,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,UAAM,WAAS,cAAG,iBAAH,mBAAiB,WAAjB,mBAAyB,IAAI,CAAC,WAAW;AAAA,MACtD,MAAM,MAAM;AAAA,MACZ,QAAQ,SAAS,qBAAqB,qBAAAC,QAAW,WAAW,MAAM,QAAQ,CAAC;AAAA,IAC7E,QAAO,CAAC,EAAE,MAAM,KAAK,QAAQ,mBAAmB,CAAC;AAEjD,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA,cAED,KAAK,UAAU,QAAQ,MAAM,CAAC;AAAA;AAAA,eAE7B,KAAK;AAAA,SACd,2BAAK,YAAS,cAAG,YAAH,mBAAY,SAAZ,mBAAkB,YAAS,cAAG,YAAH,mBAAY,SAAZ,mBAAkB,SAAQ;AAAA,MACrE;AAAA;AAAA;AAAA;AAAA,MAIE,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,qBAAQF;;;ACrCf,IAAMG,kBAAoE,CAAC,QAAQ;AACjF,QAAM,SAAiC,OAAO,QAAqB;AAbrE;AAcI,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,UAAM,qBACJ,gCAAK,gBAAL,mBAAkB,uBAAoB,cAAG,YAAH,mBAAY,WAAZ,mBAAoB;AAC5D,UAAM,WAAU,2BAAK,YAAW,CAAC,KAAK;AAEtC,UAAM,WAAW;AAAA,MACf,aAAa;AAAA,MACb,SAAS,CAAC;AAAA,MACV;AAAA,MACA,SAAS,mBACL;AAAA,QACE,WAAW;AAAA,QACX,IAAG,gCAAK,gBAAL,mBAAkB;AAAA,MACvB,KACA,gCAAK,gBAAL,mBAAkB;AAAA,MACtB,GAAG,2BAAK;AAAA,IACV;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS,GAAG,KAAK,UAAU,UAAU,MAAM,CAAC;AAAA;AAAA,MAC5C,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,uBAAQD;;;ACnCf,IAAME,kBAAoE,CAAC,QAAQ;AACjF,QAAM,SAAiC,OAAO,QAAqB;AAhBrE;AAiBI,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAaE,2BAAK,YAAS,8BAAI,SAAJ,mBAAU,SAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAc3C,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,wBAAQA;;;AC/Cf,IAAMC,kBAAwE,CAC5E,WACG;AACH,QAAM,MAA+B;AAAA,IACnC;AAAA,IACA,GAAG;AAAA,EACL;AAEA,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,MACT,WAAW,CAAC;AAAA,IACd,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,MAKT,WAAW,CAAC,kBAAkB,eAAe;AAAA,IAC/C,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA,UAAU,IAAI;AAAA,MACd,MAAM,kBAAkB;AAAA,MACxB,SAAS,GAAG,OAAO;AAAA,MACnB,WAAW,CAAC,kBAAkB,eAAe;AAAA,IAC/C,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,uBAAQD;;;AC/Df;AAAA;AAAA;AAAA;AAAA,oBAAmB;AAEZ,SAAS,sBAAsB,IAA+B,IAAuC;AAC1G,MAAI,CAAC,MAAM,CAAC,IAAI;AACd,WAAO;AAAA,EACT;AAEA,MAAI,CAAC,MAAM,OAAO,KAAK;AACrB,WAAO,MAAM;AAAA,EACf;AAEA,MAAI,CAAC,MAAM,OAAO,KAAK;AACrB,WAAO;AAAA,EACT;AAEA,MAAI,OAAO,IAAI;AACb,WAAO;AAAA,EACT;AAEA,MAAI,CAAC,cAAAE,QAAO,WAAW,IAAI,IAAI,EAAE,OAAO,KAAK,CAAC,GAAG;AAC/C,UAAM,IAAI,MAAM,+BAA+B,YAAY,KAAK;AAAA,EAClE;AAEA,MAAI,cAAAA,QAAO,OAAO,IAAI,IAAI,EAAE,OAAO,KAAK,CAAC,GAAG;AAC1C,WAAO;AAAA,EACT;AAEA,SAAO;AACT;;;ACXA,IAAMC,kBAAoE,CAAC,QAAQ;AACjF,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,UAAM,UAAU,mBAAmB,EAAE;AAErC,UAAM,cAA2B;AAAA,MAC/B,OAAM,2BAAK,gBAAe;AAAA,MAC1B,SAAS;AAAA,MACT,UAAS,2BAAK,mBAAkB;AAAA,MAChC,SAAS;AAAA,QACP,OAAO;AAAA,QACP,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,WAAW;AAAA,QACX,UAAU;AAAA,QACV,MAAM;AAAA,MACR;AAAA,MACA,cAAc;AAAA,QAEZ,GAAG,4BAA4B,IAAI,2BAAK,gBAAgB;AAAA,QAGxD,iBAAiB;AAAA,QAGjB,sBAAsB;AAAA,QAGtB,KAAK;AAAA,QACL,gBAAgB;AAAA,QAGhB,GAAG,QAAQ;AAAA,UACT,CAAC,KAAK,SAAS;AAAA,YACb,GAAG;AAAA,YACH,CAAC,IAAI,UAAU,IAAI,WAAW;AAAA,UAChC;AAAA,UACA,CAAC;AAAA,QACH;AAAA,MACF;AAAA,MACA,iBAAiB;AAAA,QACf,kBAAkB;AAAA,QAClB,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,UAAU;AAAA,QACV,WAAW;AAAA,MACb;AAAA,IACF;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,MACT,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,uBAAQD;AAEf,SAAS,mBAAmB,SAA6C;AACvE,QAAM,UAAgC,CAAC;AACvC,QAAM,kBAAkB,oBAAI,IAAgC;AAE5D,QAAM,UAAU,QAAQ;AAExB,UAAQ,QAAQ,CAAC,QAAQ;AACvB,QAAI,CAAC,UAAU,GAAG,GAAG;AACnB;AAAA,IACF;AAEA,UAAM,WAAW,gBAAgB,IAAI,IAAI,OAAO;AAChD,QAAI,CAAC,UAAU;AACb,sBAAgB,IAAI,IAAI,SAAS,GAAG;AACpC,cAAQ,KAAK,GAAG;AAChB;AAAA,IACF;AAEA,QAAI,SAAS,YAAY,IAAI,SAAS;AACpC,UAAI;AACF,wBAAgB,IAAI,IAAI,SAAS;AAAA,UAC/B,GAAG;AAAA,UACH,SAAS,sBAAsB,SAAS,SAAS,IAAI,OAAO;AAAA,QAC9D,CAAC;AAAA,MACH,SAAS,GAAP;AACA,cAAM,IAAI;AAAA,UACR,sCAAsC,IAAI,oBAAoB,gBAAgB,CAAC;AAAA,QACjF;AAAA,MACF;AAAA,IACF;AAAA,EACF,CAAC;AAED,SAAO;AACT;;;AC/GA,IAAO,cAAQ;AAAA,EACb,UAAAE;AAAA,EACA,SAAS;AAAA,IACP,WAAAC;AAAA,IACA,aAAAC;AAAA,IACA,OAAAC;AAAA,IACA;AAAA,IACA,aAAAC;AAAA,IACA,aAAAC;AAAA,EACF;AACF;;;ACQe,SAAR,wBACL,SACiB;AACjB,SAAO,qBAAqB;AAAA,IAC1B,cAAc,mCAAS;AAAA,IACvB,kBAAkB,EAAE,GAAG,QAAQ;AAAA,IAC/B,UAAU,YAAO;AAAA,IACjB,SAAS;AAAA,MACP,YAAY;AAAA,QACV,mBAAW;AAAA,QACX,iBAAS,EAAE,UAAU,OAAO,cAAc,MAAM,CAAC;AAAA,QACjDC,wBAAe;AAAA,QACfC,4BAAmB;AAAA,QACnB,yBAAiB;AAAA,QACjBC,gCAAuB;AAAA,QACvBC,yCAAgC,OAAO;AAAA,QACvCC,8BAAqB;AAAA,QACrBC,4BAAoB;AAAA,QACpBC,aAAI;AAAA,QACJ,YAAI;AAAA,MACN;AAAA,MACA,OAAO;AAAA,QACL,mBAAW;AAAA,QACX,iBAAS,EAAE,UAAU,MAAM,CAAC;AAAA,QAC5BN,wBAAe;AAAA,QACfC,4BAAmB;AAAA,QACnB,yBAAiB;AAAA,QACjBC,gCAAuB;AAAA,QACvBC,yCAAgC,OAAO;AAAA,QACvCC,8BAAqB;AAAA,QACrBC,4BAAoB;AAAA,QACpBC,aAAI;AAAA,QACJ,YAAI;AAAA,MACN;AAAA,MACA,WAAW,CAAC,YAAO,QAAQ,UAAU,OAAO,CAAC;AAAA,MAC7C,aAAa,CAAC,YAAO,QAAQ,YAAY,OAAO,CAAC;AAAA,MACjD,OAAO,CAAC,YAAO,QAAQ,MAAM,OAAO,CAAC;AAAA,MACrC,WAAW,CAAC,kBAAU,CAAC;AAAA,MACvB,OAAO,CAAC,iBAAS,GAAG,cAAM,KAAK,CAAC;AAAA,MAChC,MAAM,CAAC,aAAK,CAAC;AAAA,MACb,aAAa;AAAA,QACX,YAAO,QAAQ,YAAY,EAAE,WAAU,mCAAS,yBAAwB,MAAM,CAAC;AAAA,MACjF;AAAA,MACA,WAAW,CAAC,YAAO,QAAQ,cAAc,OAAO,CAAC;AAAA,MACjD,aAAa,CAAC,YAAO,QAAQ,YAAY,OAAO,CAAC;AAAA,IACnD;AAAA,IACA,gBAAgB,CAAC,iBAAS,CAAC;AAAA,IAC3B,yBAAyB,mCAAS;AAAA,EACpC,CAAC;AACH;AAEO,IAAMC,WAAU;AAAA,EACrB,gBAAAP;AAAA,EACA,qBAAAK;AAAA,EACA;AAAA,EACA,oBAAAJ;AAAA,EACA,wBAAAC;AAAA,EACA,iCAAAC;AAAA,EACA,sBAAAC;AAAA,EACA,KAAAE;AAAA,EACA;AAAA,EACA;AACF;;;ACtFe,SAARE,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC;AAAA,IACD;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAgDX;AAAA,EACF;AACF;;;ACxDe,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC;AAAA,IACD;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAyBX;AAAA,EACF;AACF;;;ACjCe,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC;AAAA,IACD;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAsCX;AAAA,EACF;AACF;;;AC9Ce,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC;AAAA,IACD;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAQX;AAAA,EACF;AACF;;;AChBe,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC;AAAA,IACD;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAgBX;AAAA,EACF;AACF;;;ACxBe,SAARC,YAAmD;AACxD,SAAO;AAAA,IACL,CAAC;AAAA,IACD;AAAA,MACE,MAAM;AAAA,MACN,KAAK;AAAA,MACL,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOX;AAAA,EACF;AACF;;;ACde,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA,EAGF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;ACVe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA,EAGF;AAEA,SAAO,CAAC,CAAC,GAAGA,KAAI;AAClB;;;ACVe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAyBJ;AAEA,SAAO,CAAC,CAAC,OAAO,OAAO,GAAGA,KAAI;AAChC;;;AChCe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoFJ;AAEA,SAAO,CAAC,CAAC,OAAO,OAAO,GAAGA,KAAI;AAChC;;;AC3Fe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMJ;AAEA,SAAO,CAAC,CAAC,OAAO,OAAO,GAAGA,KAAI;AAChC;;;ACbe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAqBJ;AAEA,SAAO,CAAC,CAAC,OAAO,OAAO,GAAGA,KAAI;AAChC;;;AC5Be,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkCJ;AAEA,SAAO,CAAC,CAAC,OAAO,OAAO,GAAGA,KAAI;AAChC;;;ACzCe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAaJ;AAEA,SAAO,CAAC,CAAC,OAAO,OAAO,GAAGA,KAAI;AAChC;;;ACpBe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMJ;AAEA,SAAO,CAAC,CAAC,OAAO,UAAU,GAAGA,KAAI;AACrC;;;ACbe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAiDJ;AAEA,SAAO,CAAC,CAAC,OAAO,UAAU,GAAGA,KAAI;AACrC;;;ACxDe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkIJ;AAEA,SAAO,CAAC,CAAC,OAAO,UAAU,GAAGA,KAAI;AACrC;;;ACzIe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkBJ;AAEA,SAAO,CAAC,CAAC,OAAO,YAAY,OAAO,KAAK,GAAGA,KAAI;AACnD;;;ACzBe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA,EAIJ;AAEA,SAAO,CAAC,CAAC,OAAO,YAAY,OAAO,KAAK,GAAGA,KAAI;AACnD;;;ACXe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAmCJ;AAEA,SAAO,CAAC,CAAC,OAAO,YAAY,OAAO,KAAK,GAAGA,KAAI;AACnD;;;AC1Ce,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWJ;AAEA,SAAO,CAAC,CAAC,OAAO,YAAY,OAAO,aAAa,GAAGA,KAAI;AAC3D;;;AClBe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA,EAGJ;AAEA,SAAO,CAAC,CAAC,OAAO,YAAY,OAAO,aAAa,GAAGA,KAAI;AAC3D;;;ACVe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA4BJ;AAEA,SAAO,CAAC,CAAC,OAAO,YAAY,KAAK,GAAGA,KAAI;AAC5C;;;ACnCe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA,EAGJ;AAEA,SAAO,CAAC,CAAC,OAAO,QAAQ,GAAGA,KAAI;AACnC;;;ACVe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAiCJ;AAEA,SAAO,CAAC,CAAC,OAAO,QAAQ,GAAGA,KAAI;AACnC;;;ACxCe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAwBJ;AAEA,SAAO,CAAC,CAAC,OAAO,QAAQ,GAAGA,KAAI;AACnC;;;AC/Be,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAiCJ;AACA,SAAO,CAAC,CAAC,OAAO,QAAQ,GAAGA,KAAI;AACnC;;;ACvCe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAaJ;AAEA,SAAO,CAAC,CAAC,OAAO,UAAU,SAAS,GAAGA,KAAI;AAC9C;;;ACpBe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgGJ;AAEA,SAAO,CAAC,CAAC,OAAO,UAAU,SAAS,GAAGA,KAAI;AAC9C;;;ACvGe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkDJ;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAChC;;;ACzDe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcJ;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAChC;;;ACrBe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAiBJ;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAChC;;;ACxBe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAaJ;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAChC;;;ACpBe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAwBJ;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAC9B;;;AC/Be,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoBJ;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAChC;;;AC3Be,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgCJ;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAChC;;;ACvCe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA+BJ;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAC9B;;;ACtCe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUJ;AAEA,SAAO,CAAC,CAAC,OAAO,OAAO,OAAO,GAAGA,KAAI;AACvC;;;ACjBe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcJ;AAEA,SAAO,CAAC,CAAC,OAAO,OAAO,OAAO,GAAGA,KAAI;AACvC;;;ACrBe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQJ;AAEA,SAAO,CAAC,CAAC,OAAO,OAAO,OAAO,GAAGA,KAAI;AACvC;;;ACfe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAeJ;AAEA,SAAO,CAAC,CAAC,OAAO,OAAO,SAAS,GAAGA,KAAI;AACzC;;;ACtBe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA0CJ;AAEA,SAAO,CAAC,CAAC,OAAO,OAAO,SAAS,GAAGA,KAAI;AACzC;;;ACjDe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA2GJ;AAEA,SAAO,CAAC,CAAC,OAAO,OAAO,SAAS,GAAGA,KAAI;AACzC;;;AClHe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAyDJ;AAEA,SAAO,CAAC,CAAC,OAAO,QAAQ,GAAGA,KAAI;AACnC;;;AChEe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA,EAGJ;AAEA,SAAO,CAAC,CAAC,OAAO,QAAQ,GAAGA,KAAI;AACnC;;;ACVe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAyIJ;AAEA,SAAO,CAAC,CAAC,OAAO,QAAQ,GAAGA,KAAI;AACnC;;;AChJe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAqDJ;AAEA,SAAO,CAAC,CAAC,OAAO,QAAQ,GAAGA,KAAI;AACnC;;;AC5De,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASJ;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAChC;;;AChBe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAiBJ;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAChC;;;ACxBe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOJ;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAChC;;;ACde,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkCJ;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAChC;;;ACzCe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACb;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcF;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAC5B;;;ACrBe,SAARC,YAAmD;AACtD,QAAMC,QAAO;AAAA,IACT;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBJ;AAEA,SAAO,CAAC,CAAC,OAAO,KAAK,GAAGA,KAAI;AAChC;;;ACvBe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA,EAGF;AAEA,SAAO,CAAC,CAAC,QAAQ,GAAGA,KAAI;AAC1B;;;ACVe,SAARC,YAAmD;AACxD,QAAMC,QAAO;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA,EAGF;AAEA,SAAO,CAAC,CAAC,QAAQ,GAAGA,KAAI;AAC1B;;;AC8DO,SAASC,qBAAoB,OAAO,gBAAgB,GAAG,GAAc;AAC1E,mBAAiB,MAAMC,SAAQ;AAC/B,mBAAiB,MAAMA,SAAe;AACtC,mBAAiB,MAAMA,SAAM;AAC7B,mBAAiB,MAAMA,SAAiB;AAGxC,mBAAiB,MAAMA,SAAU;AACjC,mBAAiB,MAAMA,SAAW;AAClC,mBAAiB,MAAMA,SAAG;AAC1B,mBAAiB,MAAMA,SAAc;AACrC,mBAAiB,MAAMA,SAAK;AAC5B,mBAAiB,MAAMA,SAAQ;AAC/B,mBAAiB,MAAMA,SAAS;AAChC,mBAAiB,MAAMA,SAAU;AACjC,mBAAiB,MAAMA,SAAS;AAChC,mBAAiB,MAAMA,SAAY;AAEnC,mBAAiB,MAAMA,SAAQ;AAC/B,mBAAiB,MAAMA,SAAM;AAC7B,mBAAiB,MAAMA,SAAO;AAC9B,mBAAiB,MAAMA,SAAc;AACrC,mBAAiB,MAAMA,SAAO;AAC9B,mBAAiB,MAAMA,SAAO;AAC9B,mBAAiB,MAAMA,SAAO;AAC9B,mBAAiB,MAAMA,SAAS;AAChC,mBAAiB,MAAMA,SAAM;AAE7B,mBAAiB,MAAMA,SAAQ;AAC/B,mBAAiB,MAAMA,SAAO;AAC9B,mBAAiB,MAAMA,SAAW;AAClC,mBAAiB,MAAMA,SAAe;AACtC,mBAAiB,MAAMA,SAAY;AACnC,mBAAiB,MAAMA,SAAc;AAErC,mBAAiB,MAAMA,SAAM;AAC7B,mBAAiB,MAAMA,SAAW;AAClC,mBAAiB,MAAMA,SAAiB;AACxC,mBAAiB,MAAMA,SAAa;AACpC,mBAAiB,MAAMA,SAAc;AACrC,mBAAiB,MAAMA,SAAQ;AAC/B,mBAAiB,MAAMA,SAAU;AACjC,mBAAiB,MAAMA,SAAc;AACrC,mBAAiB,MAAMA,SAAS;AAChC,mBAAiB,MAAMA,SAAkB;AACzC,mBAAiB,MAAMA,SAAkB;AACzC,mBAAiB,MAAMA,SAAU;AACjC,mBAAiB,MAAMA,SAAY;AACnC,mBAAiB,MAAMA,SAAW;AAElC,mBAAiB,MAAMA,SAAe;AACtC,mBAAiB,MAAMA,SAAU;AACjC,mBAAiB,MAAMA,SAAe;AACtC,mBAAiB,MAAMA,SAAS;AAEhC,mBAAiB,MAAMA,SAAQ;AAC/B,mBAAiB,MAAMA,SAAa;AACpC,mBAAiB,MAAMA,SAAW;AAClC,mBAAiB,MAAMA,SAAU;AACjC,mBAAiB,MAAMA,SAAe;AACtC,mBAAiB,MAAMA,SAAS;AAEhC,mBAAiB,MAAMA,SAAe;AACtC,mBAAiB,MAAMA,SAAiB;AAExC,SAAO;AACT;;;ACzIA,IAAM,iBAAmC;AAAA,EACvC,OAAO;AAAA,IACL,YAAY;AAAA,MACV,MAAM,CAAC,OAAO,YAAY;AAAA,IAC5B;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC,OAAO,KAAK;AAAA,MACnB,UAAU;AAAA,IACZ;AAAA,IACA,QAAQ;AAAA,MACN,MAAM,CAAC,OAAO,KAAK;AAAA,MACnB,UAAU;AAAA,IACZ;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,WAAW;AAAA,MACT,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,OAAO;AAAA,MACL,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,MAAM;AAAA,MACJ,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,aAAa;AAAA,MACX,MAAM,CAAC,KAAK;AAAA,MACZ,UAAU;AAAA,IACZ;AAAA,IACA,WAAW;AAAA,MACT,MAAM,CAAC,QAAQ;AAAA,MACf,UAAU;AAAA,IACZ;AAAA,IACA,aAAa;AAAA,MACX,MAAM,CAAC;AAAA,MACP,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,mBAA8B;AAC5B,WAAOC,qBAAoB;AAAA,EAC7B;AACF;AAEA,IAAOC,oBAAQ;;;ACVf,IAAMC,kBAA8E,CAAC,QAAQ;AAC3F,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,UAAM,KAAK,KAAK;AAEhB,UAAM,cAAkC;AAAA,MACtC,OAAM,2BAAK,gBAAe;AAAA,MAC1B,UAAS,2BAAK,mBAAkB;AAAA,MAChC,aAAa;AAAA,MACb,cAAc;AAAA,QACZ,uBAAuB;AAAA,QACvB,qBAAqB;AAAA,QACrB,+BAA+B;AAAA,QAC/B,8BAA8B;AAAA,QAC9B,gBAAgB;AAAA,QAChB,oBAAoB;AAAA,QACpB,qBAAqB;AAAA,QACrB,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,UAAU;AAAA,QACV,aAAa;AAAA,QACb,SAAS;AAAA,QACT,aAAa;AAAA,QACb,eAAe;AAAA,QACf,iBAAiB;AAAA,QAGjB,GAAG,4BAA4B,IAAI,2BAAK,gBAAgB;AAAA,MAC1D;AAAA,MACA,iBAAiB;AAAA,QACf,oBAAoB;AAAA,QACpB,eAAe;AAAA,QACf,gBAAgB;AAAA,QAChB,oBAAoB;AAAA,QACpB,gBAAgB;AAAA,QAChB,aAAa;AAAA,QACb,UAAU;AAAA,QACV,sBAAsB;AAAA,QACtB,WAAW;AAAA,QACX,yBAAyB;AAAA,QACzB,QAAQ;AAAA,QACR,YAAY;AAAA,QACZ,WAAW;AAAA,QACX,eAAe;AAAA,QACf,cAAc;AAAA,MAChB;AAAA,MACA,SAAS;AAAA,QACP,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS;AAAA,QACT,QAAQ;AAAA,QACR,aAAa;AAAA,MACf;AAAA,MACA,SAAS;AAAA,IACX;AAEA,OAAG,SAAS,QAAQ,CAAC,gBAAgB;AACnC,kBAAY,aAAa,YAAY,WAAW,YAAY;AAAA,IAC9D,CAAC;AAED,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,MACT,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAOC,uBAAQD;;;AC/Gf,IAAO,iBAAQ;AAAA,EACb,UAAAE;AAAA,EACA,SAAS;AAAA,IAIP,aAAAC;AAAA,EAEF;AACF;;;ACYe,SAAR,2BACL,SACiB;AACjB,SAAO,qBAAqB;AAAA,IAC1B,cAAc,mCAAS;AAAA,IACvB,kBAAkB,EAAE,GAAG,QAAQ;AAAA,IAC/B,UAAU,eAAO;AAAA,IACjB,SAAS;AAAA,MACP,YAAY;AAAA,QACV,wBAAgB;AAAA,QAChB,iBAAS;AAAA,UACP,UAAU;AAAA,QACZ,CAAC;AAAA,QACD,oBAAY;AAAA,QACZ,uBAAe;AAAA,QACf,+BAAuB;AAAA,QACvB,6BAAqB;AAAA,QACrB,wCAAgC;AAAA,QAChC,4BAAoB;AAAA,QACpB,iCAAyB;AAAA,QACzB,2BAAmB;AAAA,QACnB,2BAAmB;AAAA,QACnB,wBAAgB;AAAA,QAChB,YAAI;AAAA,UACF,iBAAiB;AAAA,YACf,KAAK;AAAA,YACL,WAAW;AAAA,YACX,MAAM;AAAA,YACN,OAAO;AAAA,UACT;AAAA,QACF,CAAC;AAAA,QACD,YAAI;AAAA,MACN;AAAA,MACA,OAAO;AAAA,QACL,wBAAgB;AAAA,QAChB,iBAAS;AAAA,UACP,UAAU;AAAA,QACZ,CAAC;AAAA,QACD,oBAAY;AAAA,QACZ,uBAAe;AAAA,QACf,+BAAuB;AAAA,QACvB,6BAAqB;AAAA,QACrB,wCAAgC;AAAA,QAChC,4BAAoB;AAAA,QACpB,iCAAyB;AAAA,QACzB,2BAAmB;AAAA,QACnB,2BAAmB;AAAA,QACnB,wBAAgB;AAAA,QAChB,YAAI;AAAA,UACF,iBAAiB;AAAA,YACf,KAAK;AAAA,YACL,WAAW;AAAA,YACX,MAAM;AAAA,YACN,OAAO;AAAA,YACP,KAAK;AAAA,UACP;AAAA,QACF,CAAC;AAAA,QACD,YAAI;AAAA,MACN;AAAA,MACA,WAAW,CAAC,kBAAU,CAAC;AAAA,MACvB,OAAO,CAAC,iBAAS,GAAG,cAAM,OAAO,CAAC;AAAA,MAClC,MAAM,CAAC,aAAK,CAAC;AAAA,MAEb,aAAa,CAAC,eAAO,QAAQ,YAAY,CAAC;AAAA,IAI5C;AAAA,IACA,gBAAgB,CAAC,iBAAS,CAAC;AAAA,IAC3B,yBAAyB,mCAAS;AAAA,EACpC,CAAC;AACH;AAEO,IAAMC,WAAU;AAAA,EACrB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAY;AACd;;;AC3GA,IAAMC,kBAAwD,MAAM;AAClE,QAAM,SAAiC,OAAO,QAAqB;AACjE,UAAM,OAAoB;AAAA,MACxB,GAAG;AAAA,IACL;AAEA,SAAK,OAAO,KAAK;AAAA,MACf;AAAA,MACA;AAAA,MACA,MAAM,kBAAkB;AAAA,MACxB,SAAS;AAAA,MACT,WAAW,CAAC;AAAA,IACd,CAAC;AAED,WAAO;AAAA,EACT;AACA,SAAO;AACT;AAEA,IAAO,uBAAQA;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;A7MyCA,IAAO,cAAQ;AAAA,EACb;AAAA,EACA;AAAA,EACA,WAAW;AAAA,IACT,OAAO;AAAA,IACP,QAAQC;AAAA,IACR,KAAK;AAAA,IACL,QAAQ;AAAA,EACV;AAAA,EACA,eAAe;AAAA,IACb;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAAA,EACA,YAAY;AAAA,IACV,MAAM;AAAA,IACN,KAAK;AAAA,EACP;AAAA,EACA,SAAS;AAAA,IACP,QAAQ;AAAA,MAMN;AAAA,MACA,UAAU;AAAA,MACV;AAAA,MACA;AAAA,IACF;AAAA,IACA,OAAO;AAAA,MACL;AAAA,IACF;AAAA,IACA,SAAS;AAAA,MACP;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,IACA,OAAO;AAAA,MACL,GAAG;AAAA,IACL;AAAA,IACA,QAAQ;AAAA,MACN,GAAGC;AAAA,IACL;AAAA,IACA,KAAK;AAAA,MACH,GAAGA;AAAA,IACL;AAAA,IACA,QAAQ;AAAA,MACN,GAAGA;AAAA,IACL;AAAA,IAKA,OAAO;AAAA,MACL,GAAG;AAAA,IACL;AAAA,EACF;AAAA,EACA,eAAe;AAAA,IACb;AAAA,EACF;AAAA,EACA,OAAO;AAAA,EACP,YAAY;AAAA,IACV;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAAA,EACA,kBAAkB;AAAA,IAChB,2BAA2B;AAAA,EAC7B;AAAA,EACA,WAAW;AACb;",
  "names": ["import_change_case", "FileType", "ChunkType", "PluginType", "InternalDependencyType", "DependencyType", "PIECE_TYPE", "changeCase", "short", "ContainerType", "changeCase", "_a", "_b", "file", "nm", "t", "plugins", "file", "plugins", "file", "file", "JSZip", "file", "import_change_case", "pluginFactory", "changeCase", "import_change_case", "pluginFactory", "changeCase", "import_lowcode_types", "import_lodash", "parser", "import_generator", "import_traverse", "t", "import_lowcode_types", "parseExpression", "import_generator", "import_types", "generate", "traverse", "parseExpression", "traverse", "generate", "import_lowcode_types", "_", "identifier", "pluginFactory", "pluginFactory", "pluginFactory", "import_lowcode_types", "import_change_case", "pluginFactory", "changeCase", "pluginFactory", "pluginFactory", "import_lowcode_types", "pluginFactory", "pluginFactory", "import_lodash", "import_lowcode_types", "import_lodash", "_", "import_generator", "generate", "_", "parseExpression", "pluginFactory", "scope", "config", "pluginFactory", "pluginFactory", "pluginFactory", "pluginFactory", "pluginFactory", "file", "getFile", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "pluginFactory", "pluginFactory", "pluginFactory", "import_change_case", "changeCase", "pluginFactory", "pluginFactory", "parser", "prettier", "parserBabel", "parserPostCss", "parserHtml", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "generateStaticFiles", "getFile", "generateStaticFiles", "template_default", "pluginFactory", "globalStyle_default", "pluginFactory", "packageJSON_default", "pluginFactory", "pluginFactory", "import_prettier", "import_parser_babel", "prettier", "parserBabel", "getContent", "pluginFactory", "template_default", "globalStyle_default", "packageJSON_default", "createIceJsProjectBuilder", "plugins", "import_change_case", "pluginFactory", "changeCase", "containerClass_default", "import_lodash", "import_lowcode_types", "createDebug", "pluginFactory", "_", "containerLifeCycle_default", "pluginFactory", "pluginFactory", "containerInitState_default", "pluginFactory", "containerInjectContext_default", "import_lowcode_types", "import_change_case", "pluginFactory", "_a", "changeCase", "wrapAsFunction", "containerInjectDataSourceEngine_default", "pluginFactory", "containerInjectUtils_default", "import_lowcode_types", "import_lodash", "import_change_case", "pluginFactory", "config", "next", "jsx_default", "_", "changeCase", "pluginFactory", "getFile", "getFile", "getFile", "getFile", "getFile", "getFile", "getFile", "getFile", "getFile", "getFile", "generateStaticFiles", "getFile", "generateStaticFiles", "template_default", "pluginFactory", "entry_default", "import_change_case", "pluginFactory", "changeCase", "appConfig_default", "pluginFactory", "buildConfig_default", "pluginFactory", "pluginFactory", "globalStyle_default", "semver", "pluginFactory", "packageJSON_default", "template_default", "appConfig_default", "buildConfig_default", "entry_default", "globalStyle_default", "packageJSON_default", "containerClass_default", "containerInitState_default", "containerInjectContext_default", "containerInjectDataSourceEngine_default", "containerInjectUtils_default", "containerLifeCycle_default", "jsx_default", "plugins", "getFile", "getFile", "getFile", "getFile", "getFile", "getFile", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "getFile", "file", "generateStaticFiles", "getFile", "generateStaticFiles", "template_default", "pluginFactory", "packageJSON_default", "template_default", "packageJSON_default", "plugins", "pluginFactory", "createIceJsProjectBuilder", "plugins"]
}
